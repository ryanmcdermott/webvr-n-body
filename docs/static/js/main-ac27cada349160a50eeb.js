!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=10)}([function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"e",function(){return i}),r.d(t,"c",function(){return o}),r.d(t,"b",function(){return s}),r.d(t,"d",function(){return a}),r.d(t,"f",function(){return c}),r.d(t,"g",function(){return l}),r.d(t,"h",function(){return u});var n=.001,i=.015,o="-1000",s="5",a=28e5*n,c=.8,l=6.67e-11*n,u=8e4},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(t,r,n){(function(r,n){var i,i;!function(e){t.exports=e()}(function(){var t;return function(){function e(t,r,n){function o(a,c){if(!r[a]){if(!t[a]){var l="function"==typeof i&&i;if(!c&&l)return i(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var h=r[a]={exports:{}};t[a][0].call(h.exports,function(e){var r=t[a][1][e];return o(r||e)},h,h.exports,e,t,r,n)}return r[a].exports}for(var s="function"==typeof i&&i,a=0;a<n.length;a++)o(n[a]);return o}return e}()({1:[function(e,r,n){(function(e){var i=function(){this._tweens={},this._tweensAddedDuringUpdate={}};i.prototype={getAll:function(){return Object.keys(this._tweens).map(function(e){return this._tweens[e]}.bind(this))},removeAll:function(){this._tweens={}},add:function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},remove:function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},update:function(e,t){var r=Object.keys(this._tweens);if(0===r.length)return!1;for(e=void 0!==e?e:o.now();r.length>0;){this._tweensAddedDuringUpdate={};for(var n=0;n<r.length;n++)!1===this._tweens[r[n]].update(e)&&(this._tweens[r[n]]._isPlaying=!1,t||delete this._tweens[r[n]]);r=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var o=new i;o.Group=i,o._nextId=0,o.nextId=function(){return o._nextId++},"undefined"==typeof window&&void 0!==e?o.now=function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?o.now=window.performance.now.bind(window.performance):void 0!==Date.now?o.now=Date.now:o.now=function(){return(new Date).getTime()},o.Tween=function(e,t){this._object=e,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=o.Easing.Linear.None,this._interpolationFunction=o.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=t||o,this._id=o.nextId()},o.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(e,t){return this._valuesEnd=e,void 0!==t&&(this._duration=t),this},start:function(e){this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==e?e:o.now(),this._startTime+=this._delayTime;for(var t in this._valuesEnd){if(this._valuesEnd[t]instanceof Array){if(0===this._valuesEnd[t].length)continue;this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}void 0!==this._object[t]&&(this._valuesStart[t]=this._object[t],this._valuesStart[t]instanceof Array==!1&&(this._valuesStart[t]*=1),this._valuesStartRepeat[t]=this._valuesStart[t]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback.call(this._object,this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop()},delay:function(e){return this._delayTime=e,this},repeat:function(e){return this._repeat=e,this},repeatDelay:function(e){return this._repeatDelayTime=e,this},yoyo:function(e){return this._yoyo=e,this},easing:function(e){return this._easingFunction=e,this},interpolation:function(e){return this._interpolationFunction=e,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(e){return this._onStartCallback=e,this},onUpdate:function(e){return this._onUpdateCallback=e,this},onComplete:function(e){return this._onCompleteCallback=e,this},onStop:function(e){return this._onStopCallback=e,this},update:function(e){var t,r,n;if(e<this._startTime)return!0;!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback.call(this._object,this._object),this._onStartCallbackFired=!0),r=(e-this._startTime)/this._duration,r=r>1?1:r,n=this._easingFunction(r);for(t in this._valuesEnd)if(void 0!==this._valuesStart[t]){var i=this._valuesStart[t]||0,o=this._valuesEnd[t];o instanceof Array?this._object[t]=this._interpolationFunction(o,n):("string"==typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?i+parseFloat(o):parseFloat(o)),"number"==typeof o&&(this._object[t]=i+(o-i)*n))}if(null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._object,n),1===r){if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(t in this._valuesStartRepeat){if("string"==typeof this._valuesEnd[t]&&(this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(this._valuesEnd[t])),this._yoyo){var s=this._valuesStartRepeat[t];this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=s}this._valuesStart[t]=this._valuesStartRepeat[t]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback.call(this._object,this._object);for(var a=0,c=this._chainedTweens.length;a<c;a++)this._chainedTweens[a].start(this._startTime+this._duration);return!1}return!0}},o.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-o.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*o.Easing.Bounce.In(2*e):.5*o.Easing.Bounce.Out(2*e-1)+.5}}},o.Interpolation={Linear:function(e,t){var r=e.length-1,n=r*t,i=Math.floor(n),s=o.Interpolation.Utils.Linear;return t<0?s(e[0],e[1],n):t>1?s(e[r],e[r-1],r-n):s(e[i],e[i+1>r?r:i+1],n-i)},Bezier:function(e,t){for(var r=0,n=e.length-1,i=Math.pow,s=o.Interpolation.Utils.Bernstein,a=0;a<=n;a++)r+=i(1-t,n-a)*i(t,a)*e[a]*s(n,a);return r},CatmullRom:function(e,t){var r=e.length-1,n=r*t,i=Math.floor(n),s=o.Interpolation.Utils.CatmullRom;return e[0]===e[r]?(t<0&&(i=Math.floor(n=r*(1+t))),s(e[(i-1+r)%r],e[i],e[(i+1)%r],e[(i+2)%r],n-i)):t<0?e[0]-(s(e[0],e[0],e[1],e[1],-n)-e[0]):t>1?e[r]-(s(e[r],e[r],e[r-1],e[r-1],n-r)-e[r]):s(e[i?i-1:0],e[i],e[r<i+1?r:i+1],e[r<i+2?r:i+2],n-i)},Utils:{Linear:function(e,t,r){return(t-e)*r+e},Bernstein:function(e,t){var r=o.Interpolation.Utils.Factorial;return r(e)/r(t)/r(e-t)},Factorial:function(){var e=[1];return function(t){var r=1;if(e[t])return e[t];for(var n=t;n>1;n--)r*=n;return e[t]=r,r}}(),CatmullRom:function(e,t,r,n,i){var o=.5*(r-e),s=.5*(n-t),a=i*i;return(2*t-2*r+o+s)*(i*a)+(-3*t+3*r-2*o-s)*a+o*i+t}}},function(e){"function"==typeof t&&t.amd?t([],function(){return o}):void 0!==r&&"object"==typeof n?r.exports=o:void 0!==e&&(e.TWEEN=o)}(this)}).call(this,e("_process"))},{_process:32}],2:[function(e,t,r){function n(e){return e.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===i.call(e.buffer)||Array.isArray(e)}var i=Object.prototype.toString;t.exports=n},{}],3:[function(e,t,r){t.exports=function(e,t){return"number"==typeof e?e:"number"==typeof t?t:0}},{}],4:[function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-n(e)}function o(e){var t,r,i,o,s,a=e.length;o=n(e),s=new h(3*a/4-o),r=o>0?a-4:a;var c=0;for(t=0;t<r;t+=4)i=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],s[c++]=i>>16&255,s[c++]=i>>8&255,s[c++]=255&i;return 2===o?(i=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,s[c++]=255&i):1===o&&(i=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,s[c++]=i>>8&255,s[c++]=255&i),s}function s(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function a(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(s(n));return i.join("")}function c(e){for(var t,r=e.length,n=r%3,i="",o=[],s=0,c=r-n;s<c;s+=16383)o.push(a(e,s,s+16383>c?c:s+16383));return 1===n?(t=e[r-1],i+=l[t>>2],i+=l[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=l[t>>10],i+=l[t>>4&63],i+=l[t<<2&63],i+="="),o.push(i),o.join("")}r.byteLength=i,r.toByteArray=o,r.fromByteArray=c;for(var l=[],u=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,m=d.length;p<m;++p)l[p]=d[p],u[d.charCodeAt(p)]=p;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}],5:[function(e,t,r){"use strict";t.exports={createLink:function(e,t){var r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("link");n.href=e,n.rel="stylesheet";for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];n.setAttribute("data-"+i,o)}r.appendChild(n)},createStyle:function(e,t){var r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css";for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];n.setAttribute("data-"+i,o)}n.sheet?(n.innerHTML=e,n.sheet.cssText=e,r.appendChild(n)):n.styleSheet?(r.appendChild(n),n.styleSheet.cssText=e):(n.appendChild(document.createTextNode(e)),r.appendChild(n))}}},{}],6:[function(e,t,r){var n=e("buffer").Buffer;t.exports=function(e,t){if(n.isBuffer(e)&&n.isBuffer(t)){if("function"==typeof e.equals)return e.equals(t);if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}}},{buffer:7}],7:[function(e,t,n){(function(t){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
"use strict";function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return s(this,e,t,r)}function s(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?d(e,t,r,n):"string"==typeof t?u(e,t,r):p(e,t)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,r,n){return a(t),t<=0?i(e,t):void 0!==r?"string"==typeof n?i(e,t).fill(r,n):i(e,t).fill(r):i(e,t)}function l(e,t){if(a(t),e=i(e,t<0?0:0|m(t)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function u(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(t,r);e=i(e,n);var s=e.write(t,r);return s!==n&&(e=e.slice(0,s)),e}function h(e,t){var r=t.length<0?0:0|m(t.length);e=i(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=h(e,t),e}function p(e,t){if(o.isBuffer(t)){var r=0|m(t.length);return e=i(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||X(t.length)?i(e,0):h(e,t);if("Buffer"===t.type&&K(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function f(e){return+e!=e&&(e=0),o.alloc(+e)}function v(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return W(e).length;default:if(n)return Q(e).length;t=(""+t).toLowerCase(),n=!0}}function y(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return _(this,t,r);case"utf8":case"utf-8":return D(this,t,r);case"ascii":return S(this,t,r);case"latin1":case"binary":return I(this,t,r);case"base64":return N(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function x(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:M(e,t,r,n,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):M(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function M(e,t,r,n,i){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,r/=2}var l;if(i){var u=-1;for(l=r;l<a;l++)if(o(e,l)===o(t,-1===u?0:l-u)){if(-1===u&&(u=l),l-u+1===c)return u*s}else-1!==u&&(l-=l-u),u=-1}else for(r+c>a&&(r=a-c),l=r;l>=0;l--){for(var h=!0,d=0;d<c;d++)if(o(e,l+d)!==o(t,d)){h=!1;break}if(h)return l}return-1}function A(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function w(e,t,r,n){return q(Q(t,e.length-r),e,r,n)}function E(e,t,r,n){return q(V(t),e,r,n)}function b(e,t,r,n){return E(e,t,r,n)}function T(e,t,r,n){return q(W(t),e,r,n)}function L(e,t,r,n){return q(Y(t,e.length-r),e,r,n)}function N(e,t,r){return 0===t&&r===e.length?Z.fromByteArray(e):Z.fromByteArray(e.slice(t,r))}function D(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var c,l,u,h;switch(a){case 1:o<128&&(s=o);break;case 2:c=e[i+1],128==(192&c)&&(h=(31&o)<<6|63&c)>127&&(s=h);break;case 3:c=e[i+1],l=e[i+2],128==(192&c)&&128==(192&l)&&(h=(15&o)<<12|(63&c)<<6|63&l)>2047&&(h<55296||h>57343)&&(s=h);break;case 4:c=e[i+1],l=e[i+2],u=e[i+3],128==(192&c)&&128==(192&l)&&128==(192&u)&&(h=(15&o)<<18|(63&c)<<12|(63&l)<<6|63&u)>65535&&h<1114112&&(s=h)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=a}return C(n)}function C(e){var t=e.length;if(t<=$)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=$));return r}function S(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function I(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function _(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=H(e[o]);return i}function j(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function O(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,r,n,i,s){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function z(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function k(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function B(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(e,t,r,n,i){return i||B(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,r,n,23,4),r+4}function P(e,t,r,n,i){return i||B(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,r,n,52,8),r+8}function F(e){if(e=G(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function G(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function H(e){return e<16?"0"+e.toString(16):e.toString(16)}function Q(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function V(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function Y(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function W(e){return Z.toByteArray(F(e))}function q(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function X(e){return e!==e}var Z=e("base64-js"),J=e("ieee754"),K=e("isarray");n.Buffer=o,n.SlowBuffer=f,n.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),n.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,r){return s(null,e,t,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,r){return c(null,e,t,r)},o.allocUnsafe=function(e){return l(null,e)},o.allocUnsafeSlow=function(e){return l(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!K(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=o.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},o.byteLength=v,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?D(this,0,e):y.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,r,n,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var s=i-n,a=r-t,c=Math.min(s,a),l=this.slice(n,i),u=e.slice(t,r),h=0;h<c;++h)if(l[h]!==u[h]){s=l[h],a=u[h];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return x(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return x(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":return E(this,e,t,r);case"latin1":case"binary":return b(this,e,t,r);case"base64":return T(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n;if(o.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=o.prototype;else{var i=t-e;n=new o(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+e]}return n},o.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},o.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),J.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),J.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),J.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),J.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){R(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){R(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):z(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):z(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):k(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);R(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);R(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):z(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):z(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):k(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,r){return U(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return U(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return P(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return P(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,s=n-r;if(this===e&&r<t&&t<n)for(i=s-1;i>=0;--i)e[i+t]=this[i+r];else if(s<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var s;if("number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var a=o.isBuffer(e)?e:Q(new o(e,n).toString()),c=a.length;for(s=0;s<r-t;++s)this[s+t]=a[s%c]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":4,ieee754:16,isarray:21}],8:[function(e,t,r){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" "),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var n=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))}),e.splice(i,0,r),e}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e}catch(e){}}function a(){var e;try{e=r.storage.debug}catch(e){}return e}r=t.exports=e("./debug"),r.log=o,r.formatArgs=i,r.save=s,r.load=a,r.useColors=n,r.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],r.formatters.j=function(e){return JSON.stringify(e)},r.enable(a())},{"./debug":9}],9:[function(e,t,r){function n(){return r.colors[l++%r.colors.length]}function i(e){function t(){}function i(){var e=i;null==e.useColors&&(e.useColors=r.useColors()),null==e.color&&e.useColors&&(e.color=n());var t=Array.prototype.slice.call(arguments);t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&(t=["%o"].concat(t));var o=0;t[0]=t[0].replace(/%([a-z%])/g,function(n,i){if("%%"===n)return n;o++;var s=r.formatters[i];if("function"==typeof s){var a=t[o];n=s.call(e,a),t.splice(o,1),o--}return n}),"function"==typeof r.formatArgs&&(t=r.formatArgs.apply(e,t)),(i.log||r.log||console.log.bind(console)).apply(e,t)}t.enabled=!1,i.enabled=!0;var o=r.enabled(e)?i:t;return o.namespace=e,o}function o(e){r.save(e);for(var t=(e||"").split(/[\s,]+/),n=t.length,i=0;i<n;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")))}function s(){r.enable("")}function a(e){var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}r=t.exports=i,r.coerce=c,r.disable=s,r.enable=o,r.enabled=a,r.names=[],r.skips=[],r.formatters={};var l=0},{}],10:[function(e,t,r){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Sources cannot be null or undefined");return Object(e)}function i(e,t,r){var n=t[r];if(void 0!==n&&null!==n){if(a.call(e,r)&&(void 0===e[r]||null===e[r]))throw new TypeError("Cannot convert undefined or null to object ("+r+")");a.call(e,r)&&s(n)?e[r]=o(Object(e[r]),t[r]):e[r]=n}}function o(e,t){if(e===t)return e;t=Object(t);for(var r in t)a.call(t,r)&&i(e,t,r);if(Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(t),o=0;o<n.length;o++)c.call(t,n[o])&&i(e,t,n[o]);return e}var s=e("is-obj"),a=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;t.exports=function(e){e=n(e);for(var t=1;t<arguments.length;t++)o(e,arguments[t]);return e}},{"is-obj":20}],11:[function(t,r,n){/*! (C) WebReflection Mit Style License */
!function(t,r,n,i){"use strict";function o(e,t){for(var r=0,n=e.length;r<n;r++)y(e[r],t)}function s(e){for(var t,r=0,n=e.length;r<n;r++)t=e[r],b(t,P[c(t)])}function a(e){return function(t){ie(t)&&(y(t,e),o(t.querySelectorAll(F),e))}}function c(e){var t=ae.call(e,"is"),r=e.nodeName.toUpperCase(),n=H.call(U,t?z+t.toUpperCase():R+r);return t&&-1<n&&!l(r,t)?-1:n}function l(e,t){return-1<F.indexOf(e+'[is="'+t+'"]')}function u(e){var t=e.currentTarget,r=e.attrChange,n=e.attrName,i=e.target;ye&&(!i||i===t)&&t.attributeChangedCallback&&"style"!==n&&e.prevValue!==e.newValue&&t.attributeChangedCallback(n,r===e[C]?null:e.prevValue,r===e[I]?null:e.newValue)}function h(e){var t=a(e);return function(e){g.push(t,e.target)}}function d(e){ve&&(ve=!1,e.currentTarget.removeEventListener(j,d)),o((e.target||r).querySelectorAll(F),e.detail===N?N:L),ne&&f()}function p(e,t){var r=this;ce.call(r,e,t),x.call(r,{target:r})}function m(e,t){ee(e,t),w?w.observe(e,he):(fe&&(e.setAttribute=p,e[T]=A(e),e.addEventListener(O,x)),e.addEventListener(_,u)),e.createdCallback&&ye&&(e.created=!0,e.createdCallback(),e.created=!1)}function f(){for(var e,t=0,r=oe.length;t<r;t++)e=oe[t],G.contains(e)||(r--,oe.splice(t--,1),y(e,N))}function v(e){throw new Error("A "+e+" type is already registered")}function y(e,t){var r,n=c(e);-1<n&&(E(e,P[n]),n=0,t!==L||e[L]?t===N&&!e[N]&&(e[L]=!1,e[N]=!0,n=1):(e[N]=!1,e[L]=!0,n=1,ne&&H.call(oe,e)<0&&oe.push(e)),n&&(r=e[t+"Callback"])&&r.call(e))}if(!(i in r)){var g,x,M,A,w,E,b,T="__"+i+(1e5*Math.random()>>0),L="attached",N="detached",D="extends",C="ADDITION",S="MODIFICATION",I="REMOVAL",_="DOMAttrModified",j="DOMContentLoaded",O="DOMSubtreeModified",R="<",z="=",k=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,B=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],U=[],P=[],F="",G=r.documentElement,H=U.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},Q=n.prototype,V=Q.hasOwnProperty,Y=Q.isPrototypeOf,W=n.defineProperty,q=n.getOwnPropertyDescriptor,X=n.getOwnPropertyNames,Z=n.getPrototypeOf,J=n.setPrototypeOf,K=!!n.__proto__,$=n.create||function e(t){return t?(e.prototype=t,new e):this},ee=J||(K?function(e,t){return e.__proto__=t,e}:X&&q?function(){function e(e,t){for(var r,n=X(t),i=0,o=n.length;i<o;i++)r=n[i],V.call(e,r)||W(e,r,q(t,r))}return function(t,r){do{e(t,r)}while((r=Z(r))&&!Y.call(r,t));return t}}():function(e,t){for(var r in t)e[r]=t[r];return e}),te=t.MutationObserver||t.WebKitMutationObserver,re=(t.HTMLElement||t.Element||t.Node).prototype,ne=!Y.call(re,G),ie=ne?function(e){return 1===e.nodeType}:function(e){return Y.call(re,e)},oe=ne&&[],se=re.cloneNode,ae=re.getAttribute,ce=re.setAttribute,le=re.removeAttribute,ue=r.createElement,he=te&&{attributes:!0,characterData:!0,attributeOldValue:!0},de=te||function(e){fe=!1,G.removeEventListener(_,de)},pe=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,10)},me=!1,fe=!0,ve=!0,ye=!0;J||K?(E=function(e,t){Y.call(t,e)||m(e,t)},b=m):(E=function(e,t){e[T]||(e[T]=n(!0),m(e,t))},b=E),ne?(fe=!1,function(){var t=q(re,"addEventListener"),r=t.value,n=function(e){var t=new CustomEvent(_,{bubbles:!0});t.attrName=e,t.prevValue=ae.call(this,e),t.newValue=null,t[I]=t.attrChange=2,le.call(this,e),this.dispatchEvent(t)},i=function(t,r){var n=this.hasAttribute(t),i=n&&ae.call(this,t);e=new CustomEvent(_,{bubbles:!0}),ce.call(this,t,r),e.attrName=t,e.prevValue=n?i:null,e.newValue=r,n?e[S]=e.attrChange=1:e[C]=e.attrChange=0,this.dispatchEvent(e)},o=function(e){var t,r=e.currentTarget,n=r[T],i=e.propertyName;n.hasOwnProperty(i)&&(n=n[i],t=new CustomEvent(_,{bubbles:!0}),t.attrName=n.name,t.prevValue=n.value||null,t.newValue=n.value=r[i]||null,null==t.prevValue?t[C]=t.attrChange=0:t[S]=t.attrChange=1,r.dispatchEvent(t))};t.value=function(e,t,s){e===_&&this.attributeChangedCallback&&this.setAttribute!==i&&(this[T]={className:{name:"class",value:this.className}},this.setAttribute=i,this.removeAttribute=n,r.call(this,"propertychange",o)),r.call(this,e,t,s)},W(re,"addEventListener",t)}()):te||(G.addEventListener(_,de),G.setAttribute(T,1),G.removeAttribute(T),fe&&(x=function(e){var t,r,n,i=this;if(i===e.target){t=i[T],i[T]=r=A(i);for(n in r){if(!(n in t))return M(0,i,n,t[n],r[n],C);if(r[n]!==t[n])return M(1,i,n,t[n],r[n],S)}for(n in t)if(!(n in r))return M(2,i,n,t[n],r[n],I)}},M=function(e,t,r,n,i,o){var s={attrChange:e,currentTarget:t,attrName:r,prevValue:n,newValue:i};s[o]=e,u(s)},A=function(e){for(var t,r,n={},i=e.attributes,o=0,s=i.length;o<s;o++)t=i[o],"setAttribute"!==(r=t.name)&&(n[r]=t.value);return n})),r[i]=function(e,t){if(n=e.toUpperCase(),me||(me=!0,te?(w=function(e,t){function r(e,t){for(var r=0,n=e.length;r<n;t(e[r++]));}return new te(function(n){for(var i,o,s,a=0,c=n.length;a<c;a++)i=n[a],"childList"===i.type?(r(i.addedNodes,e),r(i.removedNodes,t)):(o=i.target,ye&&o.attributeChangedCallback&&"style"!==i.attributeName&&(s=ae.call(o,i.attributeName))!==i.oldValue&&o.attributeChangedCallback(i.attributeName,i.oldValue,s))})}(a(L),a(N)),w.observe(r,{childList:!0,subtree:!0})):(g=[],pe(function e(){for(;g.length;)g.shift().call(null,g.shift());pe(e)}),r.addEventListener("DOMNodeInserted",h(L)),r.addEventListener("DOMNodeRemoved",h(N))),r.addEventListener(j,d),r.addEventListener("readystatechange",d),r.createElement=function(e,t){var n=ue.apply(r,arguments),i=""+e,o=H.call(U,(t?z:R)+(t||i).toUpperCase()),s=-1<o;return t&&(n.setAttribute("is",t=t.toLowerCase()),s&&(s=l(i.toUpperCase(),t))),ye=!r.createElement.innerHTMLHelper,s&&b(n,P[o]),n},re.cloneNode=function(e){var t=se.call(this,!!e),r=c(t);return-1<r&&b(t,P[r]),e&&s(t.querySelectorAll(F)),t}),-2<H.call(U,z+n)+H.call(U,R+n)&&v(e),!k.test(n)||-1<H.call(B,n))throw new Error("The type "+e+" is invalid");var n,i,u=function(){return m?r.createElement(f,n):r.createElement(f)},p=t||Q,m=V.call(p,D),f=m?t[D].toUpperCase():n;return m&&-1<H.call(U,R+f)&&v(f),i=U.push((m?z:R)+n)-1,F=F.concat(F.length?",":"",m?f+'[is="'+e.toLowerCase()+'"]':f),u.prototype=P[i]=V.call(p,"prototype")?p.prototype:$(re),o(r.querySelectorAll(F),L),u}}}(window,document,Object,"registerElement")},{}],12:[function(e,t,r){t.exports=function(e){switch(e){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],13:[function(e,t,r){function n(e,t,r){if(!e)throw new TypeError("must specify data as first parameter");if(r=0|+(r||0),Array.isArray(e)&&Array.isArray(e[0])){var n=e[0].length,o=e.length*n;t&&"string"!=typeof t||(t=new(i(t||"float32"))(o+r));var s=t.length-r;if(o!==s)throw new Error("source length "+o+" ("+n+"x"+e.length+") does not match destination length "+s);for(var a=0,c=r;a<e.length;a++)for(var l=0;l<n;l++)t[c++]=e[a][l]}else if(t&&"string"!=typeof t)t.set(e,r);else{var u=i(t||"float32");0===r?t=new u(e):(t=new u(e.length+r),t.set(e,r))}return t}var i=e("dtype");t.exports=n},{dtype:12}],14:[function(e,t,r){function n(e,t,r){if(!a(t))throw new TypeError("iterator must be a function");arguments.length<3&&(r=this),"[object Array]"===c.call(e)?i(e,t,r):"string"==typeof e?o(e,t,r):s(e,t,r)}function i(e,t,r){for(var n=0,i=e.length;n<i;n++)l.call(e,n)&&t.call(r,e[n],n,e)}function o(e,t,r){for(var n=0,i=e.length;n<i;n++)t.call(r,e.charAt(n),n,e)}function s(e,t,r){for(var n in e)l.call(e,n)&&t.call(r,e[n],n,e)}var a=e("is-function");t.exports=n;var c=Object.prototype.toString,l=Object.prototype.hasOwnProperty},{"is-function":19}],15:[function(e,t,n){(function(e){var r;r="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=r}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(e,t,r){r.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,l=c>>1,u=-7,h=r?i-1:0,d=r?-1:1,p=e[t+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=a;u>0;o=256*o+e[t+h],h+=d,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;u>0;s=256*s+e[t+h],h+=d,u-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=l}return(p?-1:1)*s*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var s,a,c,l=8*o-i-1,u=(1<<l)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,m=n?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),t+=s+h>=1?d/c:d*Math.pow(2,1-h),t*c>=2&&(s++,c/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(t*c-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[r+p]=255&a,p+=m,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;e[r+p]=255&s,p+=m,s/=256,l-=8);e[r+p-m]|=128*f}},{}],17:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],18:[function(e,t,r){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(e){return null!=e&&(n(e)||i(e)||!!e._isBuffer)}},{}],19:[function(e,t,r){function n(e){var t=i.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}t.exports=n;var i=Object.prototype.toString},{}],20:[function(e,t,r){"use strict";t.exports=function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}},{}],21:[function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],22:[function(e,t,r){function n(e){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(e)}function i(e){Object.defineProperty(n.prototype,e,{get:o(e),configurable:!0})}function o(e){return new Function(["return function "+e+"() {","  return this._"+e,"}"].join("\n"))()}function s(e,t){if(!e.chars||0===e.chars.length)return null;var r=d(e.chars,t);return r>=0?e.chars[r]:null}function a(e){for(var t=0;t<v.length;t++){var r=v[t].charCodeAt(0),n=d(e.chars,r);if(n>=0)return e.chars[n].height}return 0}function c(e){for(var t=0;t<y.length;t++){var r=y[t].charCodeAt(0),n=d(e.chars,r);if(n>=0)return e.chars[n]}return 0}function l(e){for(var t=0;t<g.length;t++){var r=g[t].charCodeAt(0),n=d(e.chars,r);if(n>=0)return e.chars[n].height}return 0}function u(e,t,r){if(!e.kernings||0===e.kernings.length)return 0;for(var n=e.kernings,i=0;i<n.length;i++){var o=n[i];if(o.first===t&&o.second===r)return o.amount}return 0}function h(e){return"center"===e?w:"right"===e?E:A}function d(e,t,r){r=r||0;for(var n=r;n<e.length;n++)if(e[n].id===t)return n;return-1}var p=e("word-wrapper"),m=e("xtend"),f=e("as-number"),v=["x","e","a","o","n","s","r","c","u","m","v","w","z"],y=["m","w"],g=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],x="\t".charCodeAt(0),M=" ".charCodeAt(0),A=0,w=1,E=2;t.exports=function(e){return new n(e)},n.prototype.update=function(e){if(e=m({measure:this._measure},e),this._opt=e,this._opt.tabSize=f(this._opt.tabSize,4),!e.font)throw new Error("must provide a valid bitmap font");var t=this.glyphs,r=e.text||"",n=e.font;this._setupSpaceGlyphs(n);var i=p.lines(r,e),o=e.width||0;t.length=0;var s=i.reduce(function(e,t){return Math.max(e,t.width,o)},0),c=0,d=0,v=f(e.lineHeight,n.common.lineHeight),y=n.common.base,g=v-y,x=e.letterSpacing||0,M=v*i.length-g,A=h(this._opt.align);d-=M,this._width=s,this._height=M,this._descender=v-y,this._baseline=y,this._xHeight=a(n),this._capHeight=l(n),this._lineHeight=v,this._ascender=v-g-this._xHeight;var b=this;i.forEach(function(e,i){for(var o,a=e.start,l=e.end,h=e.width,p=a;p<l;p++){var m=r.charCodeAt(p),f=b.getGlyph(n,m);if(f){o&&(c+=u(n,o.id,f.id));var y=c;A===w?y+=(s-h)/2:A===E&&(y+=s-h),t.push({position:[y,d],data:f,index:p,line:i}),c+=f.xadvance+x,o=f}}d+=v,c=0}),this._linesTotal=i.length},n.prototype._setupSpaceGlyphs=function(e){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,e.chars&&0!==e.chars.length){var t=s(e,M)||c(e)||e.chars[0],r=this._opt.tabSize*t.xadvance;this._fallbackSpaceGlyph=t,this._fallbackTabGlyph=m(t,{x:0,y:0,xadvance:r,id:x,xoffset:0,yoffset:0,width:0,height:0})}},n.prototype.getGlyph=function(e,t){var r=s(e,t);return r||(t===x?this._fallbackTabGlyph:t===M?this._fallbackSpaceGlyph:null)},n.prototype.computeMetrics=function(e,t,r,n){var i,o,s=this._opt.letterSpacing||0,a=this._opt.font,c=0,l=0,h=0;if(!a.chars||0===a.chars.length)return{start:t,end:t,width:0};r=Math.min(e.length,r);for(var d=t;d<r;d++){var p=e.charCodeAt(d),i=this.getGlyph(a,p);if(i){i.xoffset;c+=o?u(a,o.id,i.id):0;var m=c+i.xadvance+s,f=c+i.width;if(f>=n||m>=n)break;c=m,l=f,o=i}h++}return o&&(l+=o.xoffset),{start:t,end:t+h,width:l}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(i)},{"as-number":3,"word-wrapper":47,xtend:50}],23:[function(e,t,r){(function(r){function n(e){return"[object ArrayBuffer]"===Object.prototype.toString.call(e)}function i(e){if(d)return h(e,{responseType:"arraybuffer"});if(void 0===self.XMLHttpRequest)throw new Error("your browser does not support XHR loading");var t=new self.XMLHttpRequest;return t.overrideMimeType("text/plain; charset=x-user-defined"),h({xhr:t},e)}var o=e("xhr"),s=function(){},a=e("parse-bmfont-ascii"),c=e("parse-bmfont-xml"),l=e("parse-bmfont-binary"),u=e("./lib/is-binary"),h=e("xtend"),d=function(){return self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}();t.exports=function(e,t){t="function"==typeof t?t:s,"string"==typeof e?e={uri:e}:e||(e={}),e.binary&&(e=i(e)),o(e,function(i,o,h){if(i)return t(i);if(!/^2/.test(o.statusCode))return t(new Error("http status code: "+o.statusCode));if(!h)return t(new Error("no body result"));var d=!1;if(n(h)){var p=new Uint8Array(h);h=new r(p,"binary")}u(h)&&(d=!0,"string"==typeof h&&(h=new r(h,"binary"))),d||(r.isBuffer(h)&&(h=h.toString(e.encoding)),h=h.trim());var m;try{var f=o.headers["content-type"];m=d?l(h):/json/.test(f)||"{"===h.charAt(0)?JSON.parse(h):/xml/.test(f)||"<"===h.charAt(0)?c(h):a(h)}catch(e){t(new Error("error parsing font "+e.message)),t=s}t(null,m)})}}).call(this,e("buffer").Buffer)},{"./lib/is-binary":24,buffer:7,"parse-bmfont-ascii":26,"parse-bmfont-binary":27,"parse-bmfont-xml":28,xhr:48,xtend:50}],24:[function(e,t,r){(function(r){var n=e("buffer-equal"),i=new r([66,77,70,3]);t.exports=function(e){return"string"==typeof e?"BMF"===e.substring(0,3):e.length>4&&n(e.slice(0,4),i)}}).call(this,e("buffer").Buffer)},{buffer:7,"buffer-equal":6}],25:[function(e,t,r){/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,a,c=n(e),l=1;l<arguments.length;l++){r=Object(arguments[l]);for(var u in r)o.call(r,u)&&(c[u]=r[u]);if(i){a=i(r);for(var h=0;h<a.length;h++)s.call(r,a[h])&&(c[a[h]]=r[a[h]])}}return c}},{}],26:[function(e,t,r){function n(e,t){if(!(e=e.replace(/\t+/g," ").trim()))return null;var r=e.indexOf(" ");if(-1===r)throw new Error("no named row at line "+t);var n=e.substring(0,r);e=e.substring(r+1),e=e.replace(/letter=[\'\"]\S+[\'\"]/gi,""),e=e.split("="),e=e.map(function(e){return e.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var o=[],s=0;s<e.length;s++){var a=e[s];0===s?o.push({key:a[0],data:""}):s===e.length-1?o[o.length-1].data=i(a[0]):(o[o.length-1].data=i(a[0]),o.push({key:a[1],data:""}))}var c={key:n,data:{}};return o.forEach(function(e){c.data[e.key]=e.data}),c}function i(e){return e&&0!==e.length?0===e.indexOf('"')||0===e.indexOf("'")?e.substring(1,e.length-1):-1!==e.indexOf(",")?o(e):parseInt(e,10):""}function o(e){return e.split(",").map(function(e){return parseInt(e,10)})}t.exports=function(e){if(!e)throw new Error("no data provided");e=e.toString().trim();var t={pages:[],chars:[],kernings:[]},r=e.split(/\r\n?|\n/g);if(0===r.length)throw new Error("no data in BMFont file");for(var i=0;i<r.length;i++){var o=n(r[i],i);if(o)if("page"===o.key){if("number"!=typeof o.data.id)throw new Error("malformed file at line "+i+" -- needs page id=N");if("string"!=typeof o.data.file)throw new Error("malformed file at line "+i+' -- needs page file="path"');t.pages[o.data.id]=o.data.file}else"chars"===o.key||"kernings"===o.key||("char"===o.key?t.chars.push(o.data):"kerning"===o.key?t.kernings.push(o.data):t[o.key]=o.data)}return t}},{}],27:[function(e,t,r){function n(e,t,r){if(r>t.length-1)return 0;var n=t.readUInt8(r++),l=t.readInt32LE(r);switch(r+=4,n){case 1:e.info=i(t,r);break;case 2:e.common=o(t,r);break;case 3:e.pages=s(t,r,l);break;case 4:e.chars=a(t,r,l);break;case 5:e.kernings=c(t,r,l)}return 5+l}function i(e,t){var r={};r.size=e.readInt16LE(t);var n=e.readUInt8(t+2);return r.smooth=n>>7&1,r.unicode=n>>6&1,r.italic=n>>5&1,r.bold=n>>4&1,n>>3&1&&(r.fixedHeight=1),r.charset=e.readUInt8(t+3)||"",r.stretchH=e.readUInt16LE(t+4),r.aa=e.readUInt8(t+6),r.padding=[e.readInt8(t+7),e.readInt8(t+8),e.readInt8(t+9),e.readInt8(t+10)],r.spacing=[e.readInt8(t+11),e.readInt8(t+12)],r.outline=e.readUInt8(t+13),r.face=u(e,t+14),r}function o(e,t){var r={};r.lineHeight=e.readUInt16LE(t),r.base=e.readUInt16LE(t+2),r.scaleW=e.readUInt16LE(t+4),r.scaleH=e.readUInt16LE(t+6),r.pages=e.readUInt16LE(t+8);e.readUInt8(t+10);return r.packed=0,r.alphaChnl=e.readUInt8(t+11),r.redChnl=e.readUInt8(t+12),r.greenChnl=e.readUInt8(t+13),r.blueChnl=e.readUInt8(t+14),r}function s(e,t,r){for(var n=[],i=l(e,t),o=i.length+1,s=r/o,a=0;a<s;a++)n[a]=e.slice(t,t+i.length).toString("utf8"),t+=o;return n}function a(e,t,r){for(var n=[],i=r/20,o=0;o<i;o++){var s={},a=20*o;s.id=e.readUInt32LE(t+0+a),s.x=e.readUInt16LE(t+4+a),s.y=e.readUInt16LE(t+6+a),s.width=e.readUInt16LE(t+8+a),s.height=e.readUInt16LE(t+10+a),s.xoffset=e.readInt16LE(t+12+a),s.yoffset=e.readInt16LE(t+14+a),s.xadvance=e.readInt16LE(t+16+a),s.page=e.readUInt8(t+18+a),s.chnl=e.readUInt8(t+19+a),n[o]=s}return n}function c(e,t,r){for(var n=[],i=r/10,o=0;o<i;o++){var s={},a=10*o;s.first=e.readUInt32LE(t+0+a),s.second=e.readUInt32LE(t+4+a),s.amount=e.readInt16LE(t+8+a),n[o]=s}return n}function l(e,t){for(var r=t;r<e.length&&0!==e[r];r++);return e.slice(t,r)}function u(e,t){return l(e,t).toString("utf8")}var h=[66,77,70];t.exports=function(e){if(e.length<6)throw new Error("invalid buffer length for BMFont");if(!h.every(function(t,r){return e.readUInt8(r)===t}))throw new Error("BMFont missing BMF byte header");var t=3;if(e.readUInt8(t++)>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var r={kernings:[],chars:[]},i=0;i<5;i++)t+=n(r,e,t);return r}},{}],28:[function(e,t,r){function n(e){return i(e).reduce(function(e,t){return e[o(t.nodeName)]=t.nodeValue,e},{})}function i(e){for(var t=[],r=0;r<e.attributes.length;r++)t.push(e.attributes[r]);return t}function o(e){return c[e.toLowerCase()]||e}var s=e("./parse-attribs"),a=e("xml-parse-from-string"),c={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};t.exports=function(e){e=e.toString();var t=a(e),r={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(e){var i=t.getElementsByTagName(e)[0];i&&(r[e]=s(n(i)))});var i=t.getElementsByTagName("pages")[0];if(!i)throw new Error("malformed file -- no <pages> element");for(var o=i.getElementsByTagName("page"),c=0;c<o.length;c++){var l=o[c],u=parseInt(l.getAttribute("id"),10),h=l.getAttribute("file");if(isNaN(u))throw new Error('malformed file -- page "id" attribute is NaN');if(!h)throw new Error('malformed file -- needs page "file" attribute');r.pages[parseInt(u,10)]=h}return["chars","kernings"].forEach(function(e){var i=t.getElementsByTagName(e)[0];if(i)for(var o=e.substring(0,e.length-1),a=i.getElementsByTagName(o),c=0;c<a.length;c++){var l=a[c];r[e].push(s(n(l)))}}),r}},{"./parse-attribs":29,"xml-parse-from-string":49}],29:[function(e,t,r){function n(e){return e.split(",").map(function(e){return parseInt(e,10)})}t.exports=function(e){"chasrset"in e&&(e.charset=e.chasrset,delete e.chasrset);for(var t in e)"face"!==t&&"charset"!==t&&(e[t]="padding"===t||"spacing"===t?n(e[t]):parseInt(e[t],10));return e}},{}],30:[function(e,t,r){var n=e("trim"),i=e("for-each"),o=function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.exports=function(e){if(!e)return{};var t={};return i(n(e).split("\n"),function(e){var r=e.indexOf(":"),i=n(e.slice(0,r)).toLowerCase(),s=n(e.slice(r+1));void 0===t[i]?t[i]=s:o(t[i])?t[i].push(s):t[i]=[t[i],s]}),t}},{"for-each":14,trim:45}],31:[function(e,t,n){(function(e){var r=e.performance||{},n=function(){for(var e=["now","webkitNow","msNow","mozNow","oNow"];e.length;){var t=e.shift();if(t in r)return r[t].bind(r)}var n=Date.now||function(){return(new Date).getTime()},i=(r.timing||{}).navigationStart||n();return function(){return n()-i}}();n.performanceNow=r.now,n.noConflict=function(){r.now=n.performanceNow},n.conflict=function(){r.now=n},n.conflict(),t.exports=n}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],32:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(h===setTimeout)return setTimeout(e,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(e,0);try{return h(e,0)}catch(t){try{return h.call(null,e,0)}catch(t){return h.call(this,e,0)}}}function s(e){if(d===clearTimeout)return clearTimeout(e);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){v&&m&&(v=!1,m.length?f=m.concat(f):y=-1,f.length&&c())}function c(){if(!v){var e=o(a);v=!0;for(var t=f.length;t;){for(m=f,f=[];++y<t;)m&&m[y].run();y=-1,t=f.length}m=null,v=!1,s(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var h,d,p=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(e){h=n}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(e){d=i}}();var m,f=[],v=!1,y=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];f.push(new l(e,t)),1!==f.length||v||o(c)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.prependListener=u,p.prependOnceListener=u,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],33:[function(e,t,r){!function(e){function r(e,t){return function(){e.apply(t,arguments)}}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],u(e,r(s,this),r(a,this))}function o(e){var t=this;if(null===this._state)return void this._deferreds.push(e);d(function(){var r=t._state?e.onFulfilled:e.onRejected;if(null===r)return void(t._state?e.resolve:e.reject)(t._value);var n;try{n=r(t._value)}catch(t){return void e.reject(t)}e.resolve(n)})}function s(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void u(r(t,e),r(s,this),r(a,this))}this._state=!0,this._value=e,c.call(this)}catch(e){a.call(this,e)}}function a(e){this._state=!1,this._value=e,c.call(this)}function c(){for(var e=0,t=this._deferreds.length;e<t;e++)o.call(this,this._deferreds[e]);this._deferreds=null}function l(e,t,r,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=n}function u(e,t,r){var n=!1;try{e(function(e){n||(n=!0,t(e))},function(e){n||(n=!0,r(e))})}catch(e){if(n)return;n=!0,r(e)}}var h=setTimeout,d="function"==typeof n&&n||function(e){h(e,1)},p=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var r=this;return new i(function(n,i){o.call(r,new l(e,t,n,i))})},i.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&p(arguments[0])?arguments[0]:arguments);return new i(function(t,r){function n(o,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){n(o,e)},r)}e[o]=s,0==--i&&t(e)}catch(e){r(e)}}if(0===e.length)return t([]);for(var i=e.length,o=0;o<e.length;o++)n(o,e[o])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,r){r(e)})},i.race=function(e){return new i(function(t,r){for(var n=0,i=e.length;n<i;n++)e[n].then(t,r)})},i._setImmediateFn=function(e){d=e},void 0!==t&&t.exports?t.exports=i:e.Promise||(e.Promise=i)}(this)},{}],34:[function(e,t,r){var n=e("dtype"),i=e("an-array"),o=e("is-buffer"),s=[0,2,3],a=[2,1,3];t.exports=function(e,t){e&&(i(e)||o(e))||(t=e||{},e=null),t="number"==typeof t?{count:t}:t||{};for(var r="string"==typeof t.type?t.type:"uint16",c="number"==typeof t.count?t.count:1,l=t.start||0,u=!1!==t.clockwise?s:a,h=u[0],d=u[1],p=u[2],m=6*c,f=e||new(n(r))(m),v=0,y=0;v<m;v+=6,y+=4){var g=v+l;f[g+0]=y+0,f[g+1]=y+1,f[g+2]=y+2,f[g+3]=y+h,f[g+4]=y+d,f[g+5]=y+p}return f}},{"an-array":2,dtype:12,"is-buffer":18}],35:[function(e,t,r){function n(e,t){t=t||{};var r=t.preserveNumbers,n=function(e){return e.trim()},s={};return o(e).map(n).filter(Boolean).forEach(function(e){var t=e.indexOf(":"),n=e.substr(0,t).trim(),o=e.substr(t+1).trim();r&&i(o)&&(o=Number(o)),s[n]=o}),s}function i(e){return!isNaN(parseFloat(e))&&isFinite(e)}function o(e){for(var t,r=[],n=0,i=/url\([^\)]+$/,o="";n<e.length;)t=e.indexOf(";",n),-1===t&&(t=e.length),o+=e.substring(n,t),i.test(o)?(o+=";",n=t+1):(r.push(o),o="",n=t+1);return r}function s(e){return Object.keys(e).map(function(t){return t+":"+e[t]}).join(";")}function a(e,t){return s(n(e,t))}t.exports.parse=n,t.exports.stringify=s,t.exports.normalize=a},{}],36:[function(e,t,r){function n(e){h.call(this),"string"==typeof e&&(e={text:e}),this._opt=c({},e),e&&this.update(e)}var i=e("layout-bmfont-text"),o=e("inherits"),s=e("quad-indices"),a=e("three-buffer-vertex-data"),c=e("object-assign"),l=e("./lib/vertices"),u=e("./lib/utils"),h=THREE.BufferGeometry;t.exports=function(e){return new n(e)},o(n,h),n.prototype.update=function(e){if("string"==typeof e&&(e={text:e}),e=c({},this._opt,e),!e.font)throw new TypeError("must specify a { font } in options");this.layout=i(e);var t=!1!==e.flipY,r=e.font,n=r.common.scaleW,o=r.common.scaleH,u=this.layout.glyphs.filter(function(e){var t=e.data;return t.width*t.height>0});this.visibleGlyphs=u;var h=l.positions(u),d=l.uvs(u,n,o,t),p=s({clockwise:!0,type:"uint16",count:u.length});if(a.index(this,p,1,"uint16"),a.attr(this,"position",h,2),a.attr(this,"uv",d,2),!e.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(e.multipage){var m=l.pages(u);a.attr(this,"page",m,1)}},n.prototype.computeBoundingSphere=function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var e=this.attributes.position.array,t=this.attributes.position.itemSize;if(!e||!t||e.length<2)return this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0);u.computeSphere(e,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')},n.prototype.computeBoundingBox=function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var e=this.boundingBox,t=this.attributes.position.array,r=this.attributes.position.itemSize;if(!t||!r||t.length<2)return void e.makeEmpty();u.computeBox(t,e)}},{"./lib/utils":37,"./lib/vertices":38,inherits:17,"layout-bmfont-text":22,"object-assign":25,"quad-indices":34,"three-buffer-vertex-data":39}],37:[function(e,t,r){function n(e){var t=e.length/i;o.min[0]=e[0],o.min[1]=e[1],o.max[0]=e[0],o.max[1]=e[1];for(var r=0;r<t;r++){var n=e[r*i+0],s=e[r*i+1];o.min[0]=Math.min(n,o.min[0]),o.min[1]=Math.min(s,o.min[1]),o.max[0]=Math.max(n,o.max[0]),o.max[1]=Math.max(s,o.max[1])}}var i=2,o={min:[0,0],max:[0,0]};t.exports.computeBox=function(e,t){n(e),t.min.set(o.min[0],o.min[1],0),t.max.set(o.max[0],o.max[1],0)},t.exports.computeSphere=function(e,t){n(e);var r=o.min[0],i=o.min[1],s=o.max[0],a=o.max[1],c=s-r,l=a-i,u=Math.sqrt(c*c+l*l);t.center.set(r+c/2,i+l/2,0),t.radius=u/2}},{}],38:[function(e,t,r){t.exports.pages=function(e){var t=new Float32Array(4*e.length*1),r=0;return e.forEach(function(e){var n=e.data.page||0;t[r++]=n,t[r++]=n,t[r++]=n,t[r++]=n}),t},t.exports.uvs=function(e,t,r,n){var i=new Float32Array(4*e.length*2),o=0;return e.forEach(function(e){var s=e.data,a=s.x+s.width,c=s.y+s.height,l=s.x/t,u=s.y/r,h=a/t,d=c/r;n&&(u=(r-s.y)/r,d=(r-c)/r),i[o++]=l,i[o++]=u,i[o++]=l,i[o++]=d,i[o++]=h,i[o++]=d,i[o++]=h,i[o++]=u}),i},t.exports.positions=function(e){var t=new Float32Array(4*e.length*2),r=0;return e.forEach(function(e){var n=e.data,i=e.position[0]+n.xoffset,o=e.position[1]+n.yoffset,s=n.width,a=n.height;t[r++]=i,t[r++]=o,t[r++]=i,t[r++]=o+a,t[r++]=i+s,t[r++]=o+a,t[r++]=i+s,t[r++]=o}),t}},{}],39:[function(e,t,r){function n(e,t,r,n){"number"!=typeof r&&(r=1),"string"!=typeof n&&(n="uint16");var i=!e.index&&"function"!=typeof e.setIndex,s=i?e.getAttribute("index"):e.index,a=o(s,t,r,n);a&&(i?e.addAttribute("index",a):e.index=a)}function i(e,t,r,n,i){if("number"!=typeof n&&(n=3),"string"!=typeof i&&(i="float32"),Array.isArray(r)&&Array.isArray(r[0])&&r[0].length!==n)throw new Error("Nested vertex array has unexpected size; expected "+n+" but found "+r[0].length);var s=e.getAttribute(t),a=o(s,r,n,i);a&&e.addAttribute(t,a)}function o(e,t,r,n){if(t=t||[],!e||s(e,t,r)){t=a(t,n);var i=e&&"function"!=typeof e.setArray;return e&&!i||(i&&!c&&(c=!0,console.warn(["A WebGL buffer is being updated with a new size or itemSize, ","however this version of ThreeJS only supports fixed-size buffers.","\nThe old buffer may still be kept in memory.\n","To avoid memory leaks, it is recommended that you dispose ","your geometries and create new ones, or update to ThreeJS r82 or newer.\n","See here for discussion:\n","https://github.com/mrdoob/three.js/pull/9631"].join(""))),e=new THREE.BufferAttribute(t,r)),e.itemSize=r,e.needsUpdate=!0,"function"==typeof e.setArray&&e.setArray(t),e}return a(t,e.array),e.needsUpdate=!0,null}function s(e,t,r){if(e.itemSize!==r)return!0;if(!e.array)return!0;var n=e.array.length;return Array.isArray(t)&&Array.isArray(t[0])?n!==t.length*r:n!==t.length}var a=e("flatten-vertex-data"),c=!1;t.exports.attr=i,t.exports.index=n},{"flatten-vertex-data":13}],40:[function(e,r,n){!function(e,i){"object"==typeof n&&void 0!==r?i(n):"function"==typeof t&&t.amd?t(["exports"],i):i(e.THREE={})}(this,function(e){"use strict";function t(){}function r(e,t){this.x=e||0,this.y=t||0}function n(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function i(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._w=void 0!==n?n:1}function o(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0}function s(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function a(e,t,n,i,o,c,l,u,h,d){Object.defineProperty(this,"id",{value:hc++}),this.uuid=uc.generateUUID(),this.name="",this.image=void 0!==e?e:a.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:a.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:$s,this.wrapT=void 0!==i?i:$s,this.magFilter=void 0!==o?o:ia,this.minFilter=void 0!==c?c:sa,this.anisotropy=void 0!==h?h:1,this.format=void 0!==l?l:Aa,this.type=void 0!==u?u:aa,this.offset=new r(0,0),this.repeat=new r(1,1),this.center=new r(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new s,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==d?d:tc,this.version=0,this.onUpdate=null}function c(e,t,r,n){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==n?n:1}function l(e,t,r){this.uuid=uc.generateUUID(),this.width=e,this.height=t,this.scissor=new c(0,0,e,t),this.scissorTest=!1,this.viewport=new c(0,0,e,t),r=r||{},void 0===r.minFilter&&(r.minFilter=ia),this.texture=new a(void 0,void 0,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0===r.stencilBuffer||r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}function u(e,t,r){l.call(this,e,t,r),this.activeCubeFace=0,this.activeMipMapLevel=0}function h(e,t,r,n,i,o,s,c,l,u,h,d){a.call(this,null,o,s,c,l,u,n,i,h,d),this.image={data:e,width:t,height:r},this.magFilter=void 0!==l?l:ta,this.minFilter=void 0!==u?u:ta,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function d(e,t,r,n,i,o,s,c,l,u){e=void 0!==e?e:[],t=void 0!==t?t:Vs,a.call(this,e,t,r,n,i,o,s,c,l,u),this.flipY=!1}function p(){this.seq=[],this.map={}}function m(e,t,r){var n=e[0];if(n<=0||n>0)return e;var i=t*r,o=mc[i];if(void 0===o&&(o=new Float32Array(i),mc[i]=o),0!==t){n.toArray(o,0);for(var s=1,a=0;s!==t;++s)a+=r,e[s].toArray(o,a)}return o}function f(e,t){var r=fc[t];void 0===r&&(r=new Int32Array(t),fc[t]=r);for(var n=0;n!==t;++n)r[n]=e.allocTextureUnit();return r}function v(e,t){e.uniform1f(this.addr,t)}function y(e,t){e.uniform1i(this.addr,t)}function g(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function x(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function M(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function A(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function w(e,t){void 0===t.elements?e.uniformMatrix3fv(this.addr,!1,t):(yc.set(t.elements),e.uniformMatrix3fv(this.addr,!1,yc))}function E(e,t){void 0===t.elements?e.uniformMatrix4fv(this.addr,!1,t):(vc.set(t.elements),e.uniformMatrix4fv(this.addr,!1,vc))}function b(e,t,r){var n=r.allocTextureUnit();e.uniform1i(this.addr,n),r.setTexture2D(t||dc,n)}function T(e,t,r){var n=r.allocTextureUnit();e.uniform1i(this.addr,n),r.setTextureCube(t||pc,n)}function L(e,t){e.uniform2iv(this.addr,t)}function N(e,t){e.uniform3iv(this.addr,t)}function D(e,t){e.uniform4iv(this.addr,t)}function C(e){switch(e){case 5126:return v;case 35664:return g;case 35665:return x;case 35666:return M;case 35674:return A;case 35675:return w;case 35676:return E;case 35678:case 36198:return b;case 35680:return T;case 5124:case 35670:return y;case 35667:case 35671:return L;case 35668:case 35672:return N;case 35669:case 35673:return D}}function S(e,t){e.uniform1fv(this.addr,t)}function I(e,t){e.uniform1iv(this.addr,t)}function _(e,t){e.uniform2fv(this.addr,m(t,this.size,2))}function j(e,t){e.uniform3fv(this.addr,m(t,this.size,3))}function O(e,t){e.uniform4fv(this.addr,m(t,this.size,4))}function R(e,t){e.uniformMatrix2fv(this.addr,!1,m(t,this.size,4))}function z(e,t){e.uniformMatrix3fv(this.addr,!1,m(t,this.size,9))}function k(e,t){e.uniformMatrix4fv(this.addr,!1,m(t,this.size,16))}function B(e,t,r){var n=t.length,i=f(r,n);e.uniform1iv(this.addr,i);for(var o=0;o!==n;++o)r.setTexture2D(t[o]||dc,i[o])}function U(e,t,r){var n=t.length,i=f(r,n);e.uniform1iv(this.addr,i);for(var o=0;o!==n;++o)r.setTextureCube(t[o]||pc,i[o])}function P(e){switch(e){case 5126:return S;case 35664:return _;case 35665:return j;case 35666:return O;case 35674:return R;case 35675:return z;case 35676:return k;case 35678:return B;case 35680:return U;case 5124:case 35670:return I;case 35667:case 35671:return L;case 35668:case 35672:return N;case 35669:case 35673:return D}}function F(e,t,r){this.id=e,this.addr=r,this.setValue=C(t.type)}function G(e,t,r){this.id=e,this.addr=r,this.size=t.size,this.setValue=P(t.type)}function H(e){this.id=e,p.call(this)}function Q(e,t){e.seq.push(t),e.map[t.id]=t}function V(e,t,r){var n=e.name,i=n.length;for(gc.lastIndex=0;;){var o=gc.exec(n),s=gc.lastIndex,a=o[1],c="]"===o[2],l=o[3];if(c&&(a|=0),void 0===l||"["===l&&s+2===i){Q(r,void 0===l?new F(a,e,t):new G(a,e,t));break}var u=r.map,h=u[a];void 0===h&&(h=new H(a),Q(r,h)),r=h}}function Y(e,t,r){p.call(this),this.renderer=r;for(var n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<n;++i){var o=e.getActiveUniform(t,i),s=o.name;V(o,e.getUniformLocation(t,s),this)}}function W(e,t,r){return void 0===t&&void 0===r?this.set(e):this.setRGB(e,t,r)}function q(e,t,r,n,i,o,s,c,l){a.call(this,e,t,r,n,i,o,s,c,l),this.needsUpdate=!0}function X(e,t,r,n,s){function a(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),r=new Uint16Array([0,1,2,0,2,3]);u=t.createBuffer(),h=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,h),t.bufferData(t.ELEMENT_ARRAY_BUFFER,r,t.STATIC_DRAW),d=c(),p={position:t.getAttribLocation(d,"position"),uv:t.getAttribLocation(d,"uv")},m={uvOffset:t.getUniformLocation(d,"uvOffset"),uvScale:t.getUniformLocation(d,"uvScale"),rotation:t.getUniformLocation(d,"rotation"),center:t.getUniformLocation(d,"center"),scale:t.getUniformLocation(d,"scale"),color:t.getUniformLocation(d,"color"),map:t.getUniformLocation(d,"map"),opacity:t.getUniformLocation(d,"opacity"),modelViewMatrix:t.getUniformLocation(d,"modelViewMatrix"),projectionMatrix:t.getUniformLocation(d,"projectionMatrix"),fogType:t.getUniformLocation(d,"fogType"),fogDensity:t.getUniformLocation(d,"fogDensity"),fogNear:t.getUniformLocation(d,"fogNear"),fogFar:t.getUniformLocation(d,"fogFar"),fogColor:t.getUniformLocation(d,"fogColor"),fogDepth:t.getUniformLocation(d,"fogDepth"),alphaTest:t.getUniformLocation(d,"alphaTest")};var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=8,n.height=8;var i=n.getContext("2d");i.fillStyle="white",i.fillRect(0,0,8,8),f=new q(n)}function c(){var e=t.createProgram(),r=t.createShader(t.VERTEX_SHADER),n=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(r,["precision "+s.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 center;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = ( position - center ) * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),t.shaderSource(n,["precision "+s.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),t.compileShader(r),t.compileShader(n),t.attachShader(e,r),t.attachShader(e,n),t.linkProgram(e),e}function l(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}var u,h,d,p,m,f,v=new o,y=new i,g=new o;this.render=function(i,o,s){if(0!==i.length){void 0===d&&a(),r.useProgram(d),r.initAttributes(),r.enableAttribute(p.position),r.enableAttribute(p.uv),r.disableUnusedAttributes(),r.disable(t.CULL_FACE),r.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,u),t.vertexAttribPointer(p.position,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(p.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,h),t.uniformMatrix4fv(m.projectionMatrix,!1,s.projectionMatrix.elements),r.activeTexture(t.TEXTURE0),t.uniform1i(m.map,0);var c=0,x=0,M=o.fog;M?(t.uniform3f(m.fogColor,M.color.r,M.color.g,M.color.b),M.isFog?(t.uniform1f(m.fogNear,M.near),t.uniform1f(m.fogFar,M.far),t.uniform1i(m.fogType,1),c=1,x=1):M.isFogExp2&&(t.uniform1f(m.fogDensity,M.density),t.uniform1i(m.fogType,2),c=2,x=2)):(t.uniform1i(m.fogType,0),c=0,x=0);for(var A=0,w=i.length;A<w;A++){var E=i[A];E.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,E.matrixWorld),E.z=-E.modelViewMatrix.elements[14]}i.sort(l);for(var b=[],T=[],A=0,w=i.length;A<w;A++){var E=i[A],L=E.material;if(!1!==L.visible){E.onBeforeRender(e,o,s,void 0,L,void 0),t.uniform1f(m.alphaTest,L.alphaTest),t.uniformMatrix4fv(m.modelViewMatrix,!1,E.modelViewMatrix.elements),E.matrixWorld.decompose(v,y,g),b[0]=g.x,b[1]=g.y,T[0]=E.center.x-.5,T[1]=E.center.y-.5;var N=0;o.fog&&L.fog&&(N=x),c!==N&&(t.uniform1i(m.fogType,N),c=N),null!==L.map?(t.uniform2f(m.uvOffset,L.map.offset.x,L.map.offset.y),t.uniform2f(m.uvScale,L.map.repeat.x,L.map.repeat.y)):(t.uniform2f(m.uvOffset,0,0),t.uniform2f(m.uvScale,1,1)),t.uniform1f(m.opacity,L.opacity),t.uniform3f(m.color,L.color.r,L.color.g,L.color.b),t.uniform1f(m.rotation,L.rotation),t.uniform2fv(m.center,T),t.uniform2fv(m.scale,b),r.setBlending(L.blending,L.blendEquation,L.blendSrc,L.blendDst,L.blendEquationAlpha,L.blendSrcAlpha,L.blendDstAlpha,L.premultipliedAlpha),r.buffers.depth.setTest(L.depthTest),r.buffers.depth.setMask(L.depthWrite),r.buffers.color.setMask(L.colorWrite),n.setTexture2D(L.map||f,0),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),E.onAfterRender(e,o,s,void 0,L,void 0)}}r.enable(t.CULL_FACE),r.reset()}}}function Z(){Object.defineProperty(this,"id",{value:bc++}),this.uuid=uc.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=cs,this.side=ts,this.flatShading=!1,this.vertexColors=is,this.opacity=1,this.transparent=!1,this.blendSrc=ws,this.blendDst=Es,this.blendEquation=ps,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=_s,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function J(e){Z.call(this),this.type="MeshDepthMaterial",this.depthPacking=cc,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function K(e){Z.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new o,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function $(e,t){this.min=void 0!==e?e:new o(1/0,1/0,1/0),this.max=void 0!==t?t:new o(-1/0,-1/0,-1/0)}function ee(e,t){this.center=void 0!==e?e:new o,this.radius=void 0!==t?t:0}function te(e,t){this.normal=void 0!==e?e:new o(1,0,0),this.constant=void 0!==t?t:0}function re(e,t,r,n,i,o){this.planes=[void 0!==e?e:new te,void 0!==t?t:new te,void 0!==r?r:new te,void 0!==n?n:new te,void 0!==i?i:new te,void 0!==o?o:new te]}function ne(e,t,i){function s(t,r,n,i,o,s){var a=t.geometry,c=null,l=x,u=t.customDepthMaterial;if(n&&(l=M,u=t.customDistanceMaterial),u)c=u;else{var h=!1;r.morphTargets&&(a&&a.isBufferGeometry?h=a.morphAttributes&&a.morphAttributes.position&&a.morphAttributes.position.length>0:a&&a.isGeometry&&(h=a.morphTargets&&a.morphTargets.length>0)),t.isSkinnedMesh&&!1===r.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var d=t.isSkinnedMesh&&r.skinning,p=0;h&&(p|=v),d&&(p|=y),c=l[p]}if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var m=c.uuid,f=r.uuid,g=A[m];void 0===g&&(g={},A[m]=g);var E=g[f];void 0===E&&(E=c.clone(),g[f]=E),c=E}return c.visible=r.visible,c.wireframe=r.wireframe,c.side=null!=r.shadowSide?r.shadowSide:w[r.side],c.clipShadows=r.clipShadows,c.clippingPlanes=r.clippingPlanes,c.clipIntersection=r.clipIntersection,c.wireframeLinewidth=r.wireframeLinewidth,c.linewidth=r.linewidth,n&&c.isMeshDistanceMaterial&&(c.referencePosition.copy(i),c.nearDistance=o,c.farDistance=s),c}function a(r,n,i,o){if(!1!==r.visible){if(r.layers.test(n.layers)&&(r.isMesh||r.isLine||r.isPoints)&&r.castShadow&&(!r.frustumCulled||u.intersectsObject(r))){r.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,r.matrixWorld);var c=t.update(r),l=r.material;if(Array.isArray(l))for(var h=c.groups,d=0,p=h.length;d<p;d++){var m=h[d],v=l[m.materialIndex];if(v&&v.visible){var y=s(r,v,o,f,i.near,i.far);e.renderBufferDirect(i,null,c,y,r,m)}}else if(l.visible){var y=s(r,l,o,f,i.near,i.far);e.renderBufferDirect(i,null,c,y,r,null)}}for(var g=r.children,x=0,M=g.length;x<M;x++)a(g[x],n,i,o)}}for(var u=new re,h=new n,d=new r,p=new r(i,i),m=new o,f=new o,v=1,y=2,g=1+(v|y),x=new Array(g),M=new Array(g),A={},w={0:rs,1:ts,2:ns},E=[new o(1,0,0),new o(-1,0,0),new o(0,0,1),new o(0,0,-1),new o(0,1,0),new o(0,-1,0)],b=[new o(0,1,0),new o(0,1,0),new o(0,1,0),new o(0,1,0),new o(0,0,1),new o(0,0,-1)],T=[new c,new c,new c,new c,new c,new c],L=0;L!==g;++L){var N=0!=(L&v),D=0!=(L&y),C=new J({depthPacking:lc,morphTargets:N,skinning:D});x[L]=C;var S=new K({morphTargets:N,skinning:D});M[L]=S}var I=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=$o,this.render=function(t,r,n){if(!1!==I.enabled&&(!1!==I.autoUpdate||!1!==I.needsUpdate)&&0!==t.length){var i=e.context,o=e.state;o.disable(i.BLEND),o.buffers.color.setClear(1,1,1,1),o.buffers.depth.setTest(!0),o.setScissorTest(!1);for(var s,c=0,v=t.length;c<v;c++){var y=t[c],g=y.shadow,x=y&&y.isPointLight;if(void 0!==g){var M=g.camera;if(d.copy(g.mapSize),d.min(p),x){var A=d.x,w=d.y;T[0].set(2*A,w,A,w),T[1].set(0,w,A,w),T[2].set(3*A,w,A,w),T[3].set(A,w,A,w),T[4].set(3*A,0,A,w),T[5].set(A,0,A,w),d.x*=4,d.y*=2}if(null===g.map){var L={minFilter:ta,magFilter:ta,format:Aa};g.map=new l(d.x,d.y,L),g.map.texture.name=y.name+".shadowMap",M.updateProjectionMatrix()}g.isSpotLightShadow&&g.update(y);var N=g.map,D=g.matrix;f.setFromMatrixPosition(y.matrixWorld),M.position.copy(f),x?(s=6,D.makeTranslation(-f.x,-f.y,-f.z)):(s=1,m.setFromMatrixPosition(y.target.matrixWorld),M.lookAt(m),M.updateMatrixWorld(),D.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),D.multiply(M.projectionMatrix),D.multiply(M.matrixWorldInverse)),e.setRenderTarget(N),e.clear();for(var C=0;C<s;C++){if(x){m.copy(M.position),m.add(E[C]),M.up.copy(b[C]),M.lookAt(m),M.updateMatrixWorld();var S=T[C];o.viewport(S)}h.multiplyMatrices(M.projectionMatrix,M.matrixWorldInverse),u.setFromMatrix(h),a(r,n,M,x)}}else console.warn("THREE.WebGLShadowMap:",y,"has no shadow.")}I.needsUpdate=!1}}}function ie(e){function t(t,r){var n=t.array,i=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,o=e.createBuffer();e.bindBuffer(r,o),e.bufferData(r,n,i),t.onUploadCallback();var s=e.FLOAT;return n instanceof Float32Array?s=e.FLOAT:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?s=e.UNSIGNED_SHORT:n instanceof Int16Array?s=e.SHORT:n instanceof Uint32Array?s=e.UNSIGNED_INT:n instanceof Int32Array?s=e.INT:n instanceof Int8Array?s=e.BYTE:n instanceof Uint8Array&&(s=e.UNSIGNED_BYTE),{buffer:o,type:s,bytesPerElement:n.BYTES_PER_ELEMENT,version:t.version}}function r(t,r,n){var i=r.array,o=r.updateRange;e.bindBuffer(n,t),!1===r.dynamic?e.bufferData(n,i,e.STATIC_DRAW):-1===o.count?e.bufferSubData(n,0,i):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(n,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}function n(e){return e.isInterleavedBufferAttribute&&(e=e.data),s[e.uuid]}function i(t){t.isInterleavedBufferAttribute&&(t=t.data);var r=s[t.uuid];r&&(e.deleteBuffer(r.buffer),delete s[t.uuid])}function o(e,n){e.isInterleavedBufferAttribute&&(e=e.data);var i=s[e.uuid];void 0===i?s[e.uuid]=t(e,n):i.version<e.version&&(r(i.buffer,e,n),i.version=e.version)}var s={};return{get:n,remove:i,update:o}}function oe(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._order=n||oe.DefaultOrder}function se(){this.mask=1}function ae(){function e(){c.setFromEuler(a,!1)}function t(){a.setFromQuaternion(c,void 0,!1)}Object.defineProperty(this,"id",{value:Tc++}),this.uuid=uc.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ae.DefaultUp.clone();var r=new o,a=new oe,c=new i,l=new o(1,1,1);a.onChange(e),c.onChange(t),Object.defineProperties(this,{position:{enumerable:!0,value:r},rotation:{enumerable:!0,value:a},quaternion:{enumerable:!0,value:c},scale:{enumerable:!0,value:l},modelViewMatrix:{value:new n},normalMatrix:{value:new s}}),this.matrix=new n,this.matrixWorld=new n,this.matrixAutoUpdate=ae.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new se,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function ce(){ae.call(this),this.type="Camera",this.matrixWorldInverse=new n,this.projectionMatrix=new n}function le(e,t,r,n,i,o){ce.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=n,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function ue(e,t,r,n,i,s){this.a=e,this.b=t,this.c=r,this.normal=n&&n.isVector3?n:new o,this.vertexNormals=Array.isArray(n)?n:[],this.color=i&&i.isColor?i:new W,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==s?s:0}function he(){Object.defineProperty(this,"id",{value:Lc+=2}),this.uuid=uc.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function de(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=uc.generateUUID(),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function pe(e,t,r){de.call(this,new Int8Array(e),t,r)}function me(e,t,r){de.call(this,new Uint8Array(e),t,r)}function fe(e,t,r){de.call(this,new Uint8ClampedArray(e),t,r)}function ve(e,t,r){de.call(this,new Int16Array(e),t,r)}function ye(e,t,r){de.call(this,new Uint16Array(e),t,r)}function ge(e,t,r){de.call(this,new Int32Array(e),t,r)}function xe(e,t,r){de.call(this,new Uint32Array(e),t,r)}function Me(e,t,r){de.call(this,new Float32Array(e),t,r)}function Ae(e,t,r){de.call(this,new Float64Array(e),t,r)}function we(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Ee(e){if(0===e.length)return-1/0;for(var t=e[0],r=1,n=e.length;r<n;++r)e[r]>t&&(t=e[r]);return t}function be(){Object.defineProperty(this,"id",{value:Nc+=2}),this.uuid=uc.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Te(e,t,r,n,i,o){he.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new Le(e,t,r,n,i,o)),this.mergeVertices()}function Le(e,t,r,n,i,s){function a(e,t,r,n,i,s,a,f,v,y,g){var x,M,A=s/v,w=a/y,E=s/2,b=a/2,T=f/2,L=v+1,N=y+1,D=0,C=0,S=new o;for(M=0;M<N;M++){var I=M*w-b;for(x=0;x<L;x++){var _=x*A-E;S[e]=_*n,S[t]=I*i,S[r]=T,u.push(S.x,S.y,S.z),S[e]=0,S[t]=0,S[r]=f>0?1:-1,h.push(S.x,S.y,S.z),d.push(x/v),d.push(1-M/y),D+=1}}for(M=0;M<y;M++)for(x=0;x<v;x++){var j=p+x+L*M,O=p+x+L*(M+1),R=p+(x+1)+L*(M+1),z=p+(x+1)+L*M;l.push(j,O,z),l.push(O,R,z),C+=6}c.addGroup(m,C,g),m+=C,p+=D}be.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:s};var c=this;e=e||1,t=t||1,r=r||1,n=Math.floor(n)||1,i=Math.floor(i)||1,s=Math.floor(s)||1;var l=[],u=[],h=[],d=[],p=0,m=0;a("z","y","x",-1,-1,r,t,e,s,i,0),a("z","y","x",1,-1,r,t,-e,s,i,1),a("x","z","y",1,1,e,r,t,n,s,2),a("x","z","y",1,-1,e,r,-t,n,s,3),a("x","y","z",1,-1,e,t,r,n,i,4),a("x","y","z",-1,-1,e,t,-r,n,i,5),this.setIndex(l),this.addAttribute("position",new Me(u,3)),this.addAttribute("normal",new Me(h,3)),this.addAttribute("uv",new Me(d,2))}function Ne(e,t,r,n){he.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n},this.fromBufferGeometry(new De(e,t,r,n)),this.mergeVertices()}function De(e,t,r,n){be.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n},e=e||1,t=t||1;var i,o,s=e/2,a=t/2,c=Math.floor(r)||1,l=Math.floor(n)||1,u=c+1,h=l+1,d=e/c,p=t/l,m=[],f=[],v=[],y=[];for(o=0;o<h;o++){var g=o*p-a;for(i=0;i<u;i++){var x=i*d-s;f.push(x,-g,0),v.push(0,0,1),y.push(i/c),y.push(1-o/l)}}for(o=0;o<l;o++)for(i=0;i<c;i++){var M=i+u*o,A=i+u*(o+1),w=i+1+u*(o+1),E=i+1+u*o;m.push(M,A,E),m.push(A,w,E)}this.setIndex(m),this.addAttribute("position",new Me(f,3)),this.addAttribute("normal",new Me(v,3)),this.addAttribute("uv",new Me(y,2))}function Ce(e){Z.call(this),this.type="MeshBasicMaterial",this.color=new W(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ks,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Se(e){Z.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Ie(e,t){this.origin=void 0!==e?e:new o,this.direction=void 0!==t?t:new o}function _e(e,t){this.start=void 0!==e?e:new o,this.end=void 0!==t?t:new o}function je(e,t,r){this.a=void 0!==e?e:new o,this.b=void 0!==t?t:new o,this.c=void 0!==r?r:new o}function Oe(e,t){ae.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new be,this.material=void 0!==t?t:new Ce({color:16777215*Math.random()}),this.drawMode=Ka,this.updateMorphTargets()}function Re(e,t,r,n){function i(t,n,i,h){var d=n.background;null===d?o(l,u):d&&d.isColor&&(o(d,1),h=!0),(e.autoClear||h)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),d&&d.isCubeTexture?(void 0===c&&(c=new Oe(new Le(1,1,1),new Se({uniforms:Ec.cube.uniforms,vertexShader:Ec.cube.vertexShader,fragmentShader:Ec.cube.fragmentShader,side:rs,depthTest:!0,depthWrite:!1,fog:!1})),c.geometry.removeAttribute("normal"),c.geometry.removeAttribute("uv"),c.onBeforeRender=function(e,t,r){this.matrixWorld.copyPosition(r.matrixWorld)},r.update(c.geometry)),c.material.uniforms.tCube.value=d,t.push(c,c.geometry,c.material,0,null)):d&&d.isTexture&&(void 0===s&&(s=new le(-1,1,1,-1,0,1),a=new Oe(new De(2,2),new Ce({depthTest:!1,depthWrite:!1,fog:!1})),r.update(a.geometry)),a.material.map=d,e.renderBufferDirect(s,null,a.geometry,a.material,a,null))}function o(e,r){t.buffers.color.setClear(e.r,e.g,e.b,r,n)}var s,a,c,l=new W(0),u=0;return{getClearColor:function(){return l},setClearColor:function(e,t){l.set(e),u=void 0!==t?t:1,o(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,o(l,u)},render:i}}function ze(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function ke(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Be(){function e(){i=0,o.length=0,s.length=0}function t(e,t,r,a,c){var l=n[i];void 0===l?(l={id:e.id,object:e,geometry:t,material:r,program:r.program,renderOrder:e.renderOrder,z:a,group:c},n[i]=l):(l.id=e.id,l.object=e,l.geometry=t,l.material=r,l.program=r.program,l.renderOrder=e.renderOrder,l.z=a,l.group=c),(!0===r.transparent?s:o).push(l),i++}function r(){o.length>1&&o.sort(ze),s.length>1&&s.sort(ke)}var n=[],i=0,o=[],s=[];return{opaque:o,transparent:s,init:e,push:t,sort:r}}function Ue(){function e(e,t){var n=e.id+","+t.id,i=r[n];return void 0===i&&(i=new Be,r[n]=i),i}function t(){r={}}var r={};return{get:e,dispose:t}}function Pe(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Fe(e){function t(t,i,o,s){var a=t.morphTargetInfluences,c=a.length,l=r[i.id];if(void 0===l){l=[];for(var u=0;u<c;u++)l[u]=[u,0];r[i.id]=l}for(var h=o.morphTargets&&i.morphAttributes.position,d=o.morphNormals&&i.morphAttributes.normal,u=0;u<c;u++){var p=l[u];0!==p[1]&&(h&&i.removeAttribute("morphTarget"+u),d&&i.removeAttribute("morphNormal"+u))}for(var u=0;u<c;u++){var p=l[u];p[0]=u,p[1]=a[u]}l.sort(Pe);for(var u=0;u<8;u++){var p=l[u];if(p){var m=p[0],f=p[1];if(f){h&&i.addAttribute("morphTarget"+u,h[m]),d&&i.addAttribute("morphNormal"+u,d[m]),n[u]=f;continue}}n[u]=0}s.getUniforms().setValue(e,"morphTargetInfluences",n)}var r={},n=new Float32Array(8);return{update:t}}function Ge(e,t,r){function n(e){a=e}function i(e){c=e.type,l=e.bytesPerElement}function o(t,n){e.drawElements(a,n,c,t*l),r.calls++,r.vertices+=n,a===e.TRIANGLES?r.faces+=n/3:a===e.POINTS&&(r.points+=n)}function s(n,i,o){var s=t.get("ANGLE_instanced_arrays");if(null===s)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");s.drawElementsInstancedANGLE(a,o,c,i*l,n.maxInstancedCount),r.calls++,r.vertices+=o*n.maxInstancedCount,a===e.TRIANGLES?r.faces+=n.maxInstancedCount*o/3:a===e.POINTS&&(r.points+=n.maxInstancedCount*o)}var a,c,l;this.setMode=n,this.setIndex=i,this.render=o,this.renderInstances=s}function He(e,t,r){function n(e){s=e}function i(t,n){e.drawArrays(s,t,n),r.calls++,r.vertices+=n,s===e.TRIANGLES?r.faces+=n/3:s===e.POINTS&&(r.points+=n)}function o(n,i,o){var a=t.get("ANGLE_instanced_arrays");if(null===a)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var c=n.attributes.position;c.isInterleavedBufferAttribute?(o=c.data.count,a.drawArraysInstancedANGLE(s,0,o,n.maxInstancedCount)):a.drawArraysInstancedANGLE(s,i,o,n.maxInstancedCount),r.calls++,r.vertices+=o*n.maxInstancedCount,s===e.TRIANGLES?r.faces+=n.maxInstancedCount*o/3:s===e.POINTS&&(r.points+=n.maxInstancedCount*o)}var s;this.setMode=n,this.render=i,this.renderInstances=o}function Qe(e,t,r){function n(e){var i=e.target,o=a[i.id];null!==o.index&&t.remove(o.index);for(var s in o.attributes)t.remove(o.attributes[s]);i.removeEventListener("dispose",n),delete a[i.id];var l=c[i.id];l&&(t.remove(l),delete c[i.id]),l=c[o.id],l&&(t.remove(l),delete c[o.id]),r.geometries--}function i(e,t){var i=a[t.id];return i||(t.addEventListener("dispose",n),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new be).setFromObject(e)),i=t._bufferGeometry),a[t.id]=i,r.geometries++,i)}function o(r){var n=r.index,i=r.attributes;null!==n&&t.update(n,e.ELEMENT_ARRAY_BUFFER);for(var o in i)t.update(i[o],e.ARRAY_BUFFER);var s=r.morphAttributes;for(var o in s)for(var a=s[o],c=0,l=a.length;c<l;c++)t.update(a[c],e.ARRAY_BUFFER)}function s(r){var n=c[r.id];if(n)return n;var i=[],o=r.index,s=r.attributes;if(null!==o)for(var a=o.array,l=0,u=a.length;l<u;l+=3){var h=a[l+0],d=a[l+1],p=a[l+2];i.push(h,d,d,p,p,h)}else for(var a=s.position.array,l=0,u=a.length/3-1;l<u;l+=3){var h=l+0,d=l+1,p=l+2;i.push(h,d,d,p,p,h)}return n=new(Ee(i)>65535?xe:ye)(i,1),t.update(n,e.ELEMENT_ARRAY_BUFFER),c[r.id]=n,n}var a={},c={};return{get:i,update:o,getWireframeAttribute:s}}function Ve(e,t){function r(r){var n=t.frame,o=r.geometry,s=e.get(r,o);return i[s.id]!==n&&(o.isGeometry&&s.updateFromObject(r),e.update(s),i[s.id]=n),s}function n(){i={}}var i={};return{update:r,dispose:n}}function Ye(e){for(var t=e.split("\n"),r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join("\n")}function We(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),!1===e.getShaderParameter(n,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(n)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(n),Ye(r)),n}function qe(e){switch(e){case tc:return["Linear","( value )"];case rc:return["sRGB","( value )"];case ic:return["RGBE","( value )"];case oc:return["RGBM","( value, 7.0 )"];case sc:return["RGBM","( value, 16.0 )"];case ac:return["RGBD","( value, 256.0 )"];case nc:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Xe(e,t){var r=qe(t);return"vec4 "+e+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function Ze(e,t){var r=qe(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function Je(e,t){var r;switch(t){case Fs:r="Linear";break;case Gs:r="Reinhard";break;case Hs:r="Uncharted2";break;case Qs:r="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function Ke(e,t,r){return e=e||{},[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&r.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&r.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&r.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(tt).join("\n")}function $e(e){var t=[];for(var r in e){var n=e[r];!1!==n&&t.push("#define "+r+" "+n)}return t.join("\n")}function et(e,t){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<n;i++){var o=e.getActiveAttrib(t,i),s=o.name;r[s]=e.getAttribLocation(t,s)}return r}function tt(e){return""!==e}function rt(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function nt(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function it(e){function t(e,t){var r=wc[t];if(void 0===r)throw new Error("Can not resolve #include <"+t+">");return it(r)}var r=/^[ \t]*#include +<([\w\d.]+)>/gm;return e.replace(r,t)}function ot(e){function t(e,t,r,n){for(var i="",o=parseInt(t);o<parseInt(r);o++)i+=n.replace(/\[ i \]/g,"[ "+o+" ]");return i}var r=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return e.replace(r,t)}function st(e,t,r,n,i,o){var s=e.context,a=n.defines,c=i.vertexShader,l=i.fragmentShader,u="SHADOWMAP_TYPE_BASIC";o.shadowMapType===$o?u="SHADOWMAP_TYPE_PCF":o.shadowMapType===es&&(u="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(n.envMap.mapping){case Vs:case Ys:h="ENVMAP_TYPE_CUBE";break;case Zs:case Js:h="ENVMAP_TYPE_CUBE_UV";break;case Ws:case qs:h="ENVMAP_TYPE_EQUIREC";break;case Xs:h="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case Ys:case qs:d="ENVMAP_MODE_REFRACTION"}switch(n.combine){case ks:p="ENVMAP_BLENDING_MULTIPLY";break;case Bs:p="ENVMAP_BLENDING_MIX";break;case Us:p="ENVMAP_BLENDING_ADD"}}var m,f,v=e.gammaFactor>0?e.gammaFactor:1,y=Ke(n.extensions,o,t),g=$e(a),x=s.createProgram();n.isRawShaderMaterial?(m=[g].filter(tt).join("\n"),m.length>0&&(m+="\n"),f=[y,g].filter(tt).join("\n"),f.length>0&&(f+="\n")):(m=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,g,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+v,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+u:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(tt).join("\n"),f=[y,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,g,o.alphaTest?"#define ALPHATEST "+o.alphaTest:"","#define GAMMA_FACTOR "+v,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+h:"",o.envMap?"#define "+d:"",o.envMap?"#define "+p:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+u:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==Ps?"#define TONE_MAPPING":"",o.toneMapping!==Ps?wc.tonemapping_pars_fragment:"",o.toneMapping!==Ps?Je("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?wc.encodings_pars_fragment:"",o.mapEncoding?Xe("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?Xe("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?Xe("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?Ze("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(tt).join("\n")),c=it(c),c=rt(c,o),c=nt(c,o),l=it(l),l=rt(l,o),l=nt(l,o),c=ot(c),l=ot(l);var M=m+c,A=f+l,w=We(s,s.VERTEX_SHADER,M),E=We(s,s.FRAGMENT_SHADER,A);s.attachShader(x,w),s.attachShader(x,E),void 0!==n.index0AttributeName?s.bindAttribLocation(x,0,n.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(x,0,"position"),s.linkProgram(x);var b=s.getProgramInfoLog(x).trim(),T=s.getShaderInfoLog(w).trim(),L=s.getShaderInfoLog(E).trim(),N=!0,D=!0;!1===s.getProgramParameter(x,s.LINK_STATUS)?(N=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(x,s.VALIDATE_STATUS),"gl.getProgramInfoLog",b,T,L)):""!==b?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",b):""!==T&&""!==L||(D=!1),D&&(this.diagnostics={runnable:N,material:n,programLog:b,vertexShader:{log:T,prefix:m},fragmentShader:{log:L,prefix:f}}),s.deleteShader(w),s.deleteShader(E);var C;this.getUniforms=function(){return void 0===C&&(C=new Y(s,x,e)),C};var S;return this.getAttributes=function(){return void 0===S&&(S=et(s,x)),S},this.destroy=function(){s.deleteProgram(x),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Dc++,this.code=r,this.usedTimes=1,this.program=x,this.vertexShader=w,this.fragmentShader=E,this}function at(e,t,r){function n(e){var t=e.skeleton,n=t.bones;if(r.floatVertexTextures)return 1024;var i=r.maxVertexUniforms,o=Math.floor((i-20)/4),s=Math.min(o,n.length);return s<n.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+n.length+" bones. This GPU supports "+s+"."),0):s}function i(e,t){var r;return e?e.isTexture?r=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),r=e.texture.encoding):r=tc,r===tc&&t&&(r=nc),r}var o=[],s={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},a=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(t,o,a,c,l,u,h){var d=s[t.type],p=h.isSkinnedMesh?n(h):0,m=r.precision;null!==t.precision&&(m=r.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",m,"instead.");var f=e.getRenderTarget();return{shaderID:d,precision:m,supportsVertexTextures:r.vertexTextures,outputEncoding:i(f?f.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:i(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:i(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===Zs||t.envMap.mapping===Js),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:i(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!c,useFog:t.fog,fogExp:c&&c.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:r.logarithmicDepthBuffer,skinning:t.skinning&&p>0,maxBones:p,useVertexTexture:r.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numClippingPlanes:l,numClipIntersection:u,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&h.receiveShadow&&a.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===ns,flipSided:t.side===rs,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,r){var n=[];if(r.shaderID?n.push(r.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)n.push(i),n.push(t.defines[i]);for(var o=0;o<a.length;o++)n.push(r[a[o]]);return n.push(t.onBeforeCompile.toString()),n.push(e.gammaOutput),n.join()},this.acquireProgram=function(r,n,i,s){for(var a,c=0,l=o.length;c<l;c++){var u=o[c];if(u.code===s){a=u,++a.usedTimes;break}}return void 0===a&&(a=new st(e,t,s,r,n,i),o.push(a)),a},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=o.indexOf(e);o[t]=o[o.length-1],o.pop(),e.destroy()}},this.programs=o}function ct(e,t,r,n,i,o,s,a){function c(e,t){if(e.width>t||e.height>t){var r=t/Math.max(e.width,e.height),n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=Math.floor(e.width*r),n.height=Math.floor(e.height*r);return n.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+n.width+"x"+n.height,e),n}return e}function l(e){return uc.isPowerOfTwo(e.width)&&uc.isPowerOfTwo(e.height)}function u(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap){void 0===S&&(S=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),S.width=uc.floorPowerOfTwo(e.width),S.height=uc.floorPowerOfTwo(e.height);return S.getContext("2d").drawImage(e,0,0,S.width,S.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+S.width+"x"+S.height,e),S}return e}function h(e){return e.wrapS!==$s||e.wrapT!==$s||e.minFilter!==ta&&e.minFilter!==ia}function d(e,t){return e.generateMipmaps&&t&&e.minFilter!==ta&&e.minFilter!==ia}function p(t){return t===ta||t===ra||t===na?e.NEAREST:e.LINEAR}function m(e){var t=e.target;t.removeEventListener("dispose",m),v(t),t.isVideoTexture&&delete _[t.id],s.textures--}function f(e){var t=e.target;t.removeEventListener("dispose",f),y(t),s.textures--}function v(t){var r=n.get(t);if(t.image&&r.__image__webglTextureCube)e.deleteTexture(r.__image__webglTextureCube);else{if(void 0===r.__webglInit)return;e.deleteTexture(r.__webglTexture)}n.remove(t)}function y(t){var r=n.get(t),i=n.get(t.texture);if(t){if(void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(r.__webglFramebuffer[o]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[o]);else e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer);n.remove(t.texture),n.remove(t)}}function g(t,i){var o=n.get(t);if(t.isVideoTexture&&C(t),t.version>0&&o.__version!==t.version){var s=t.image;if(void 0===s)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==s.complete)return void w(o,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}r.activeTexture(e.TEXTURE0+i),r.bindTexture(e.TEXTURE_2D,o.__webglTexture)}function x(t,a){var u=n.get(t);if(6===t.image.length)if(t.version>0&&u.__version!==t.version){u.__image__webglTextureCube||(t.addEventListener("dispose",m),u.__image__webglTextureCube=e.createTexture(),s.textures++),r.activeTexture(e.TEXTURE0+a),r.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var h=t&&t.isCompressedTexture,p=t.image[0]&&t.image[0].isDataTexture,f=[],v=0;v<6;v++)f[v]=h||p?p?t.image[v].image:t.image[v]:c(t.image[v],i.maxCubemapSize);var y=f[0],g=l(y),x=o.convert(t.format),M=o.convert(t.type);A(e.TEXTURE_CUBE_MAP,t,g);for(var v=0;v<6;v++)if(h)for(var w,E=f[v].mipmaps,b=0,T=E.length;b<T;b++)w=E[b],t.format!==Aa&&t.format!==Ma?r.getCompressedTextureFormats().indexOf(x)>-1?r.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,b,x,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,b,x,w.width,w.height,0,x,M,w.data);else p?r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,x,f[v].width,f[v].height,0,x,M,f[v].data):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,x,x,M,f[v]);d(t,g)&&e.generateMipmap(e.TEXTURE_CUBE_MAP),u.__version=t.version,t.onUpdate&&t.onUpdate(t)}else r.activeTexture(e.TEXTURE0+a),r.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)}function M(t,i){r.activeTexture(e.TEXTURE0+i),r.bindTexture(e.TEXTURE_CUBE_MAP,n.get(t).__webglTexture)}function A(r,s,a){var c;if(a?(e.texParameteri(r,e.TEXTURE_WRAP_S,o.convert(s.wrapS)),e.texParameteri(r,e.TEXTURE_WRAP_T,o.convert(s.wrapT)),e.texParameteri(r,e.TEXTURE_MAG_FILTER,o.convert(s.magFilter)),e.texParameteri(r,e.TEXTURE_MIN_FILTER,o.convert(s.minFilter))):(e.texParameteri(r,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(r,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),s.wrapS===$s&&s.wrapT===$s||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",s),e.texParameteri(r,e.TEXTURE_MAG_FILTER,p(s.magFilter)),e.texParameteri(r,e.TEXTURE_MIN_FILTER,p(s.minFilter)),s.minFilter!==ta&&s.minFilter!==ia&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",s)),c=t.get("EXT_texture_filter_anisotropic")){if(s.type===pa&&null===t.get("OES_texture_float_linear"))return;if(s.type===ma&&null===t.get("OES_texture_half_float_linear"))return;(s.anisotropy>1||n.get(s).__currentAnisotropy)&&(e.texParameterf(r,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,i.getMaxAnisotropy())),n.get(s).__currentAnisotropy=s.anisotropy)}}function w(t,n,a){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",m),t.__webglTexture=e.createTexture(),s.textures++),r.activeTexture(e.TEXTURE0+a),r.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,n.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,n.unpackAlignment);var p=c(n.image,i.maxTextureSize);h(n)&&!1===l(p)&&(p=u(p));var f=l(p),v=o.convert(n.format),y=o.convert(n.type);A(e.TEXTURE_2D,n,f);var g,x=n.mipmaps;if(n.isDepthTexture){var M=e.DEPTH_COMPONENT;if(n.type===pa){if(!I)throw new Error("Float Depth Texture only supported in WebGL2.0");M=e.DEPTH_COMPONENT32F}else I&&(M=e.DEPTH_COMPONENT16);n.format===Ta&&M===e.DEPTH_COMPONENT&&n.type!==ua&&n.type!==da&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=ua,y=o.convert(n.type)),n.format===La&&(M=e.DEPTH_STENCIL,n.type!==ga&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=ga,y=o.convert(n.type))),r.texImage2D(e.TEXTURE_2D,0,M,p.width,p.height,0,v,y,null)}else if(n.isDataTexture)if(x.length>0&&f){for(var w=0,E=x.length;w<E;w++)g=x[w],r.texImage2D(e.TEXTURE_2D,w,v,g.width,g.height,0,v,y,g.data);n.generateMipmaps=!1}else r.texImage2D(e.TEXTURE_2D,0,v,p.width,p.height,0,v,y,p.data);else if(n.isCompressedTexture)for(var w=0,E=x.length;w<E;w++)g=x[w],n.format!==Aa&&n.format!==Ma?r.getCompressedTextureFormats().indexOf(v)>-1?r.compressedTexImage2D(e.TEXTURE_2D,w,v,g.width,g.height,0,g.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(e.TEXTURE_2D,w,v,g.width,g.height,0,v,y,g.data);else if(x.length>0&&f){for(var w=0,E=x.length;w<E;w++)g=x[w],r.texImage2D(e.TEXTURE_2D,w,v,v,y,g);n.generateMipmaps=!1}else r.texImage2D(e.TEXTURE_2D,0,v,v,y,p);d(n,f)&&e.generateMipmap(e.TEXTURE_2D),t.__version=n.version,n.onUpdate&&n.onUpdate(n)}function E(t,i,s,a){var c=o.convert(i.texture.format),l=o.convert(i.texture.type);r.texImage2D(a,0,c,i.width,i.height,0,c,l,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,s,a,n.get(i.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function b(t,r){e.bindRenderbuffer(e.RENDERBUFFER,t),r.depthBuffer&&!r.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,r.width,r.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):r.depthBuffer&&r.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,r.width,r.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,r.width,r.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function T(t,r){if(r&&r.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),g(r.depthTexture,0);var i=n.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===Ta)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,i,0);else{if(r.depthTexture.format!==La)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0)}}function L(t){var r=n.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");T(r.__webglFramebuffer,t)}else if(i){r.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[o]),r.__webglDepthbuffer[o]=e.createRenderbuffer(),b(r.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),b(r.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}function N(t){var i=n.get(t),o=n.get(t.texture);t.addEventListener("dispose",f),o.__webglTexture=e.createTexture(),s.textures++;var a=!0===t.isWebGLRenderTargetCube,c=l(t);if(a){i.__webglFramebuffer=[];for(var u=0;u<6;u++)i.__webglFramebuffer[u]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(a){r.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),A(e.TEXTURE_CUBE_MAP,t.texture,c);for(var u=0;u<6;u++)E(i.__webglFramebuffer[u],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+u);d(t.texture,c)&&e.generateMipmap(e.TEXTURE_CUBE_MAP),r.bindTexture(e.TEXTURE_CUBE_MAP,null)}else r.bindTexture(e.TEXTURE_2D,o.__webglTexture),A(e.TEXTURE_2D,t.texture,c),E(i.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),d(t.texture,c)&&e.generateMipmap(e.TEXTURE_2D),r.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&L(t)}function D(t){var i=t.texture;if(d(i,l(t))){var o=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,s=n.get(i).__webglTexture;r.bindTexture(o,s),e.generateMipmap(o),r.bindTexture(o,null)}}function C(e){var t=e.id,r=a.frame;_[t]!==r&&(_[t]=r,e.update())}var S,I="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,_={};this.setTexture2D=g,this.setTextureCube=x,this.setTextureCubeDynamic=M,this.setupRenderTarget=N,this.updateRenderTargetMipmap=D}function lt(){function e(e){var t=e.uuid,r=i[t];return void 0===r&&(r={},i[t]=r),r}function t(e){delete i[e.uuid]}function r(e,t,r){var n=e.uuid;i[n][t]=r}function n(){i={}}var i={};return{get:e,remove:t,update:r,dispose:n}}function ut(e,t,r){function n(){var t=!1,r=new c,n=null,i=new c(0,0,0,0);return{setMask:function(r){n===r||t||(e.colorMask(r,r,r,r),n=r)},setLocked:function(e){t=e},setClear:function(t,n,o,s,a){!0===a&&(t*=s,n*=s,o*=s),r.set(t,n,o,s),!1===i.equals(r)&&(e.clearColor(t,n,o,s),i.copy(r))},reset:function(){t=!1,n=null,i.set(-1,0,0,0)}}}function i(){var t=!1,r=null,n=null,i=null;return{setTest:function(t){t?d(e.DEPTH_TEST):p(e.DEPTH_TEST)},setMask:function(n){r===n||t||(e.depthMask(n),r=n)},setFunc:function(t){if(n!==t){if(t)switch(t){case Cs:e.depthFunc(e.NEVER);break;case Ss:e.depthFunc(e.ALWAYS);break;case Is:e.depthFunc(e.LESS);break;case _s:e.depthFunc(e.LEQUAL);break;case js:e.depthFunc(e.EQUAL);break;case Os:e.depthFunc(e.GEQUAL);break;case Rs:e.depthFunc(e.GREATER);break;case zs:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);n=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,r=null,n=null,i=null}}}function o(){var t=!1,r=null,n=null,i=null,o=null,s=null,a=null,c=null,l=null;return{setTest:function(t){t?d(e.STENCIL_TEST):p(e.STENCIL_TEST)},setMask:function(n){r===n||t||(e.stencilMask(n),r=n)},setFunc:function(t,r,s){n===t&&i===r&&o===s||(e.stencilFunc(t,r,s),n=t,i=r,o=s)},setOp:function(t,r,n){s===t&&a===r&&c===n||(e.stencilOp(t,r,n),s=t,a=r,c=n)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,r=null,n=null,i=null,o=null,s=null,a=null,c=null,l=null}}}function s(t,r,n){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var s=0;s<n;s++)e.texImage2D(r+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return o}function a(){for(var e=0,t=O.length;e<t;e++)O[e]=0}function l(r){if(O[r]=1,0===R[r]&&(e.enableVertexAttribArray(r),R[r]=1),0!==z[r]){t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(r,0),z[r]=0}}function u(r,n){if(O[r]=1,0===R[r]&&(e.enableVertexAttribArray(r),R[r]=1),z[r]!==n){t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(r,n),z[r]=n}}function h(){for(var t=0,r=R.length;t!==r;++t)R[t]!==O[t]&&(e.disableVertexAttribArray(t),R[t]=0)}function d(t){!0!==k[t]&&(e.enable(t),k[t]=!0)}function p(t){!1!==k[t]&&(e.disable(t),k[t]=!1)}function m(){if(null===B&&(B=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var r=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),n=0;n<r.length;n++)B.push(r[n]);return B}function f(t){return U!==t&&(e.useProgram(t),U=t,!0)}function v(t,n,i,o,s,a,c,l){if(t!==as?d(e.BLEND):p(e.BLEND),t!==ds){if(t!==P||l!==W)switch(t){case ls:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE));break;case us:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR));break;case hs:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR));break;default:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))}F=null,G=null,H=null,Q=null,V=null,Y=null}else s=s||n,a=a||i,c=c||o,n===F&&s===Q||(e.blendEquationSeparate(r.convert(n),r.convert(s)),F=n,Q=s),i===G&&o===H&&a===V&&c===Y||(e.blendFuncSeparate(r.convert(i),r.convert(o),r.convert(a),r.convert(c)),G=i,H=o,V=a,Y=c);P=t,W=l}function y(t,r){t.side===ns?p(e.CULL_FACE):d(e.CULL_FACE);var n=t.side===rs;r&&(n=!n),g(n),!0===t.transparent?v(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):v(as),I.setFunc(t.depthFunc),I.setTest(t.depthTest),I.setMask(t.depthWrite),S.setMask(t.colorWrite),A(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function g(t){q!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),q=t)}function x(t){t!==Zo?(d(e.CULL_FACE),t!==X&&(t===Jo?e.cullFace(e.BACK):t===Ko?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):p(e.CULL_FACE),X=t}function M(t){t!==Z&&(ee&&e.lineWidth(t),Z=t)}function A(t,r,n){t?(d(e.POLYGON_OFFSET_FILL),J===r&&K===n||(e.polygonOffset(r,n),J=r,K=n)):p(e.POLYGON_OFFSET_FILL)}function w(t){t?d(e.SCISSOR_TEST):p(e.SCISSOR_TEST)}function E(t){void 0===t&&(t=e.TEXTURE0+$-1),ne!==t&&(e.activeTexture(t),ne=t)}function b(t,r){null===ne&&E();var n=ie[ne];void 0===n&&(n={type:void 0,texture:void 0},ie[ne]=n),n.type===t&&n.texture===r||(e.bindTexture(t,r||ae[t]),n.type=t,n.texture=r)}function T(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function L(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function N(t){!1===oe.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),oe.copy(t))}function D(t){!1===se.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),se.copy(t))}function C(){for(var t=0;t<R.length;t++)1===R[t]&&(e.disableVertexAttribArray(t),R[t]=0);k={},B=null,ne=null,ie={},U=null,P=null,q=null,X=null,S.reset(),I.reset(),_.reset()}var S=new n,I=new i,_=new o,j=e.getParameter(e.MAX_VERTEX_ATTRIBS),O=new Uint8Array(j),R=new Uint8Array(j),z=new Uint8Array(j),k={},B=null,U=null,P=null,F=null,G=null,H=null,Q=null,V=null,Y=null,W=!1,q=null,X=null,Z=null,J=null,K=null,$=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),ee=!1,te=0,re=e.getParameter(e.VERSION);-1!==re.indexOf("WebGL")?(te=parseFloat(/^WebGL\ ([0-9])/.exec(re)[1]),ee=te>=1):-1!==re.indexOf("OpenGL ES")&&(te=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(re)[1]),ee=te>=2);var ne=null,ie={},oe=new c,se=new c,ae={};return ae[e.TEXTURE_2D]=s(e.TEXTURE_2D,e.TEXTURE_2D,1),ae[e.TEXTURE_CUBE_MAP]=s(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),S.setClear(0,0,0,1),I.setClear(1),_.setClear(0),d(e.DEPTH_TEST),I.setFunc(_s),g(!1),x(Jo),d(e.CULL_FACE),d(e.BLEND),v(cs),{buffers:{color:S,depth:I,stencil:_},initAttributes:a,enableAttribute:l,enableAttributeAndDivisor:u,disableUnusedAttributes:h,enable:d,disable:p,getCompressedTextureFormats:m,useProgram:f,setBlending:v,setMaterial:y,setFlipSided:g,setCullFace:x,setLineWidth:M,setPolygonOffset:A,setScissorTest:w,activeTexture:E,bindTexture:b,compressedTexImage2D:T,texImage2D:L,scissor:N,viewport:D,reset:C}}function ht(e,t,r){function n(){if(void 0!==o)return o;var r=t.get("EXT_texture_filter_anisotropic");return o=null!==r?e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o,s=void 0!==r.precision?r.precision:"highp",a=i(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a);var c=!0===r.logarithmicDepthBuffer,l=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),d=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),p=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),f=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),y=u>0,g=!!t.get("OES_texture_float");return{getMaxAnisotropy:n,getMaxPrecision:i,precision:s,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:m,maxVaryings:f,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:g,floatVertexTextures:y&&g}}function dt(e,t,r,n){ce.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==r?r:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function pt(e){dt.call(this),this.cameras=e||[]}function mt(e){function t(){if(null!==s&&s.isPresenting){var t=s.getEyeParameters("left"),n=t.renderWidth,i=t.renderHeight;x=e.getPixelRatio(),g=e.getSize(),e.setDrawingBufferSize(2*n,i,1)}else r.enabled&&e.setDrawingBufferSize(g.width,g.height,x)}var r=this,s=null,a=null,l=null,u=new n,h=new n;"undefined"!=typeof window&&"VRFrameData"in window&&(a=new window.VRFrameData);var d=new n,p=new i,m=new o,f=new dt;f.bounds=new c(0,0,.5,1),f.layers.enable(1);var v=new dt;v.bounds=new c(.5,0,.5,1),v.layers.enable(2);var y=new pt([f,v]);y.layers.enable(1),y.layers.enable(2);var g,x;"undefined"!=typeof window&&window.addEventListener("vrdisplaypresentchange",t,!1),this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return s},this.setDevice=function(e){void 0!==e&&(s=e)},this.setPoseTarget=function(e){void 0!==e&&(l=e)},this.getCamera=function(e){if(null===s)return e;s.depthNear=e.near,s.depthFar=e.far,s.getFrameData(a);var t=s.stageParameters;t?u.fromArray(t.sittingToStandingTransform):u.makeTranslation(0,r.userHeight,0);var n=a.pose,i=null!==l?l:e;if(i.matrix.copy(u),i.matrix.decompose(i.position,i.quaternion,i.scale),null!==n.orientation&&(p.fromArray(n.orientation),i.quaternion.multiply(p)),null!==n.position&&(p.setFromRotationMatrix(u),m.fromArray(n.position),m.applyQuaternion(p),i.position.add(m)),i.updateMatrixWorld(),!1===s.isPresenting)return e;f.near=e.near,v.near=e.near,f.far=e.far,v.far=e.far,y.matrixWorld.copy(e.matrixWorld),y.matrixWorldInverse.copy(e.matrixWorldInverse),f.matrixWorldInverse.fromArray(a.leftViewMatrix),v.matrixWorldInverse.fromArray(a.rightViewMatrix),h.getInverse(u),f.matrixWorldInverse.multiply(h),v.matrixWorldInverse.multiply(h);var o=i.parent;null!==o&&(d.getInverse(o.matrixWorld),f.matrixWorldInverse.multiply(d),v.matrixWorldInverse.multiply(d)),f.matrixWorld.getInverse(f.matrixWorldInverse),v.matrixWorld.getInverse(v.matrixWorldInverse),f.projectionMatrix.fromArray(a.leftProjectionMatrix),v.projectionMatrix.fromArray(a.rightProjectionMatrix),y.projectionMatrix.copy(f.projectionMatrix);var c=s.getLayers();if(c.length){var g=c[0];null!==g.leftBounds&&4===g.leftBounds.length&&f.bounds.fromArray(g.leftBounds),null!==g.rightBounds&&4===g.rightBounds.length&&v.bounds.fromArray(g.rightBounds)}return y},this.getStandingMatrix=function(){return u},this.submitFrame=function(){s&&s.isPresenting&&s.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",t)}}function ft(e){var t={};return{get:function(r){if(void 0!==t[r])return t[r];var n;switch(r){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":n=e.getExtension("WEBGL_compressed_texture_etc1");break;default:n=e.getExtension(r)}return null===n&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),t[r]=n,n}}}function vt(){function e(){u.value!==n&&(u.value=n,u.needsUpdate=i>0),r.numPlanes=i,r.numIntersection=0}function t(e,t,n,i){var o=null!==e?e.length:0,s=null;if(0!==o){if(s=u.value,!0!==i||null===s){var a=n+4*o,h=t.matrixWorldInverse;l.getNormalMatrix(h),(null===s||s.length<a)&&(s=new Float32Array(a));for(var d=0,p=n;d!==o;++d,p+=4)c.copy(e[d]).applyMatrix4(h,l),c.normal.toArray(s,p),s[p+3]=c.constant}u.value=s,u.needsUpdate=!0}return r.numPlanes=o,s}var r=this,n=null,i=0,o=!1,a=!1,c=new te,l=new s,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,r,s){var a=0!==e.length||r||0!==i||o;return o=r,n=t(e,s,0),i=e.length,a},this.beginShadows=function(){a=!0,t(null)},this.endShadows=function(){a=!1,e()},this.setState=function(r,s,c,l,h,d){if(!o||null===r||0===r.length||a&&!c)a?t(null):e();else{var p=a?0:i,m=4*p,f=h.clippingState||null;u.value=f,f=t(r,l,m,d);for(var v=0;v!==m;++v)f[v]=n[v];h.clippingState=f,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=p}}}function yt(e,t){function r(r){var n;if(r===Ks)return e.REPEAT;if(r===$s)return e.CLAMP_TO_EDGE;if(r===ea)return e.MIRRORED_REPEAT;if(r===ta)return e.NEAREST;if(r===ra)return e.NEAREST_MIPMAP_NEAREST;if(r===na)return e.NEAREST_MIPMAP_LINEAR;if(r===ia)return e.LINEAR;if(r===oa)return e.LINEAR_MIPMAP_NEAREST;if(r===sa)return e.LINEAR_MIPMAP_LINEAR;if(r===aa)return e.UNSIGNED_BYTE;if(r===fa)return e.UNSIGNED_SHORT_4_4_4_4;if(r===va)return e.UNSIGNED_SHORT_5_5_5_1;if(r===ya)return e.UNSIGNED_SHORT_5_6_5;if(r===ca)return e.BYTE;if(r===la)return e.SHORT;if(r===ua)return e.UNSIGNED_SHORT;if(r===ha)return e.INT;if(r===da)return e.UNSIGNED_INT;if(r===pa)return e.FLOAT;if(r===ma&&null!==(n=t.get("OES_texture_half_float")))return n.HALF_FLOAT_OES;if(r===xa)return e.ALPHA;if(r===Ma)return e.RGB;if(r===Aa)return e.RGBA;if(r===wa)return e.LUMINANCE;if(r===Ea)return e.LUMINANCE_ALPHA;if(r===Ta)return e.DEPTH_COMPONENT;if(r===La)return e.DEPTH_STENCIL;if(r===ps)return e.FUNC_ADD;if(r===ms)return e.FUNC_SUBTRACT;if(r===fs)return e.FUNC_REVERSE_SUBTRACT;if(r===gs)return e.ZERO;if(r===xs)return e.ONE;if(r===Ms)return e.SRC_COLOR;if(r===As)return e.ONE_MINUS_SRC_COLOR;if(r===ws)return e.SRC_ALPHA;if(r===Es)return e.ONE_MINUS_SRC_ALPHA;if(r===bs)return e.DST_ALPHA;if(r===Ts)return e.ONE_MINUS_DST_ALPHA;if(r===Ls)return e.DST_COLOR;if(r===Ns)return e.ONE_MINUS_DST_COLOR;if(r===Ds)return e.SRC_ALPHA_SATURATE;if((r===Na||r===Da||r===Ca||r===Sa)&&null!==(n=t.get("WEBGL_compressed_texture_s3tc"))){if(r===Na)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Da)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Ca)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Sa)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((r===Ia||r===_a||r===ja||r===Oa)&&null!==(n=t.get("WEBGL_compressed_texture_pvrtc"))){if(r===Ia)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===_a)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===ja)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===Oa)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(r===Ra&&null!==(n=t.get("WEBGL_compressed_texture_etc1")))return n.COMPRESSED_RGB_ETC1_WEBGL;if((r===za||r===ka||r===Ba||r===Ua||r===Pa||r===Fa||r===Ga||r===Ha||r===Qa||r===Va||r===Ya||r===Wa||r===qa||r===Xa)&&null!==(n=t.get("WEBGL_compressed_texture_astc")))return r;if((r===vs||r===ys)&&null!==(n=t.get("EXT_blend_minmax"))){if(r===vs)return n.MIN_EXT;if(r===ys)return n.MAX_EXT}return r===ga&&null!==(n=t.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:0}return{convert:r}}function gt(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new o,color:new W,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case"SpotLight":n={position:new o,direction:new o,color:new W,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case"PointLight":n={position:new o,color:new W,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new o,skyColor:new W,groundColor:new W};break;case"RectAreaLight":n={color:new W,position:new o,halfWidth:new o,halfHeight:new o}}return e[t.id]=n,n}}}function xt(){function e(e,n,o){for(var c=0,l=0,u=0,h=0,d=0,p=0,m=0,f=0,v=o.matrixWorldInverse,y=0,g=e.length;y<g;y++){var x=e[y],M=x.color,A=x.intensity,w=x.distance,E=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight)c+=M.r*A,l+=M.g*A,u+=M.b*A;else if(x.isDirectionalLight){var b=t.get(x);if(b.color.copy(x.color).multiplyScalar(x.intensity),b.direction.setFromMatrixPosition(x.matrixWorld),i.setFromMatrixPosition(x.target.matrixWorld),b.direction.sub(i),b.direction.transformDirection(v),b.shadow=x.castShadow,x.castShadow){var T=x.shadow;b.shadowBias=T.bias,b.shadowRadius=T.radius,b.shadowMapSize=T.mapSize}r.directionalShadowMap[h]=E,r.directionalShadowMatrix[h]=x.shadow.matrix,r.directional[h]=b,h++}else if(x.isSpotLight){var b=t.get(x);if(b.position.setFromMatrixPosition(x.matrixWorld),b.position.applyMatrix4(v),b.color.copy(M).multiplyScalar(A),b.distance=w,b.direction.setFromMatrixPosition(x.matrixWorld),i.setFromMatrixPosition(x.target.matrixWorld),b.direction.sub(i),b.direction.transformDirection(v),b.coneCos=Math.cos(x.angle),b.penumbraCos=Math.cos(x.angle*(1-x.penumbra)),b.decay=0===x.distance?0:x.decay,b.shadow=x.castShadow,x.castShadow){var T=x.shadow;b.shadowBias=T.bias,b.shadowRadius=T.radius,b.shadowMapSize=T.mapSize}r.spotShadowMap[p]=E,r.spotShadowMatrix[p]=x.shadow.matrix,r.spot[p]=b,p++}else if(x.isRectAreaLight){var b=t.get(x);b.color.copy(M).multiplyScalar(A),b.position.setFromMatrixPosition(x.matrixWorld),b.position.applyMatrix4(v),a.identity(),s.copy(x.matrixWorld),s.premultiply(v),a.extractRotation(s),b.halfWidth.set(.5*x.width,0,0),b.halfHeight.set(0,.5*x.height,0),b.halfWidth.applyMatrix4(a),b.halfHeight.applyMatrix4(a),r.rectArea[m]=b,m++}else if(x.isPointLight){var b=t.get(x);if(b.position.setFromMatrixPosition(x.matrixWorld),b.position.applyMatrix4(v),b.color.copy(x.color).multiplyScalar(x.intensity),b.distance=x.distance,b.decay=0===x.distance?0:x.decay,b.shadow=x.castShadow,x.castShadow){var T=x.shadow;b.shadowBias=T.bias,b.shadowRadius=T.radius,b.shadowMapSize=T.mapSize,b.shadowCameraNear=T.camera.near,b.shadowCameraFar=T.camera.far}r.pointShadowMap[d]=E,r.pointShadowMatrix[d]=x.shadow.matrix,r.point[d]=b,d++}else if(x.isHemisphereLight){var b=t.get(x);b.direction.setFromMatrixPosition(x.matrixWorld),b.direction.transformDirection(v),b.direction.normalize(),b.skyColor.copy(x.color).multiplyScalar(A),b.groundColor.copy(x.groundColor).multiplyScalar(A),r.hemi[f]=b,f++}}r.ambient[0]=c,r.ambient[1]=l,r.ambient[2]=u,r.directional.length=h,r.spot.length=p,r.rectArea.length=m,r.point.length=d,r.hemi.length=f,r.hash=r.id+","+h+","+d+","+p+","+m+","+f+","+n.length}var t=new gt,r={id:Cc++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=new o,s=new n,a=new n;return{setup:e,state:r}}function Mt(){function e(){s.length=0,a.length=0,c.length=0}function t(e){s.push(e)}function r(e){a.push(e)}function n(e){c.push(e)}function i(e){o.setup(s,a,e)}var o=new xt,s=[],a=[],c=[];return{init:e,state:{lightsArray:s,shadowsArray:a,spritesArray:c,lights:o},setupLights:i,pushLight:t,pushShadow:r,pushSprite:n}}function At(){function e(e,t){var n=e.id+","+t.id,i=r[n];return void 0===i&&(i=new Mt,r[n]=i),i}function t(){r={}}var r={};return{get:e,dispose:t}}function wt(e){function t(){Le.frame++,Le.calls=0,Le.vertices=0,Le.faces=0,Le.points=0}function r(){return null===ee?fe:1}function i(){Ce=new ft(Ne),Ce.get("WEBGL_depth_texture"),Ce.get("OES_texture_float"),Ce.get("OES_texture_float_linear"),Ce.get("OES_texture_half_float"),Ce.get("OES_texture_half_float_linear"),Ce.get("OES_standard_derivatives"),Ce.get("OES_element_index_uint"),Ce.get("ANGLE_instanced_arrays"),Ke=new yt(Ne,Ce),Se=new ht(Ne,Ce,e),Ie=new ut(Ne,Ce,Ke),Ie.scissor(ue.copy(ye).multiplyScalar(fe)),Ie.viewport(le.copy(ve).multiplyScalar(fe)),_e=new lt,je=new ct(Ne,Ce,Ie,_e,Se,Ke,Te,Le),Oe=new ie(Ne),ze=new Qe(Ne,Oe,Te),ke=new Ve(ze,Le),qe=new Fe(Ne),Be=new at(K,Ce,Se),Pe=new Ue,Ye=new At,We=new Re(K,Ie,ze,V),Xe=new He(Ne,Ce,Le),Ze=new Ge(Ne,Ce,Le),Je=new X(K,Ne,Ie,je,Se),K.info.programs=Be.programs,K.context=Ne,K.capabilities=Se,K.extensions=Ce,K.properties=_e,K.renderLists=Pe,K.state=Ie}function s(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),$=!0}function a(){console.log("THREE.WebGLRenderer: Context Restored."),$=!1,i()}function l(e){var t=e.target;t.removeEventListener("dispose",l),u(t)}function u(e){d(e),_e.remove(e)}function d(e){var t=_e.get(e).program;e.program=void 0,void 0!==t&&Be.releaseProgram(t)}function p(e,t,r){e.render(function(e){K.renderBufferImmediate(e,t,r)})}function m(e,t,r,n){if(r&&r.isInstancedBufferGeometry&&null===Ce.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===n&&(n=0),Ie.initAttributes();var i=r.attributes,o=t.getAttributes(),s=e.defaultAttributeValues;for(var a in o){var c=o[a];if(c>=0){var l=i[a];if(void 0!==l){var u=l.normalized,h=l.itemSize,d=Oe.get(l);if(void 0===d)continue;var p=d.buffer,m=d.type,f=d.bytesPerElement;if(l.isInterleavedBufferAttribute){var v=l.data,y=v.stride,g=l.offset;v&&v.isInstancedInterleavedBuffer?(Ie.enableAttributeAndDivisor(c,v.meshPerAttribute),void 0===r.maxInstancedCount&&(r.maxInstancedCount=v.meshPerAttribute*v.count)):Ie.enableAttribute(c),Ne.bindBuffer(Ne.ARRAY_BUFFER,p),Ne.vertexAttribPointer(c,h,m,u,y*f,(n*y+g)*f)}else l.isInstancedBufferAttribute?(Ie.enableAttributeAndDivisor(c,l.meshPerAttribute),void 0===r.maxInstancedCount&&(r.maxInstancedCount=l.meshPerAttribute*l.count)):Ie.enableAttribute(c),Ne.bindBuffer(Ne.ARRAY_BUFFER,p),Ne.vertexAttribPointer(c,h,m,u,0,n*h*f)}else if(void 0!==s){var x=s[a];if(void 0!==x)switch(x.length){case 2:Ne.vertexAttrib2fv(c,x);break;case 3:Ne.vertexAttrib3fv(c,x);break;case 4:Ne.vertexAttrib4fv(c,x);break;default:Ne.vertexAttrib1fv(c,x)}}}}Ie.disableUnusedAttributes()}function f(){tt||(y(),tt=!0)}function v(){tt=!1}function y(){var e=$e.getDevice();e&&e.isPresenting?e.requestAnimationFrame(g):window.requestAnimationFrame(g)}function g(e){!1!==tt&&(rt(e),y())}function x(e,t,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isLight)J.pushLight(e),e.castShadow&&J.pushShadow(e);else if(e.isSprite)e.frustumCulled&&!xe.intersectsSprite(e)||J.pushSprite(e);else if(e.isImmediateRenderObject)r&&be.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Ee),Z.push(e,null,e.material,be.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||xe.intersectsObject(e))){r&&be.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Ee);var n=ke.update(e),i=e.material;if(Array.isArray(i))for(var o=n.groups,s=0,a=o.length;s<a;s++){var c=o[s],l=i[c.materialIndex];l&&l.visible&&Z.push(e,n,l,be.z,c)}else i.visible&&Z.push(e,n,i,be.z,null)}for(var u=e.children,s=0,a=u.length;s<a;s++)x(u[s],t,r)}}function M(e,t,r,n){for(var i=0,o=e.length;i<o;i++){var s=e[i],a=s.object,c=s.geometry,l=void 0===n?s.material:n,u=s.group;if(r.isArrayCamera){ce=r;for(var h=r.cameras,d=0,p=h.length;d<p;d++){var m=h[d];if(a.layers.test(m.layers)){var f=m.bounds,v=f.x*pe,y=f.y*me,g=f.z*pe,x=f.w*me;Ie.viewport(le.set(v,y,g,x).multiplyScalar(fe)),A(a,t,m,c,l,u)}}}else ce=null,A(a,t,r,c,l,u)}}function A(e,t,r,n,i,o){if(e.onBeforeRender(K,t,r,n,i,o),J=Ye.get(t,ce||r),e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var s=e.isMesh&&e.matrixWorld.determinant()<0;Ie.setMaterial(i,s);var a=E(r,t.fog,i,e);se="",p(e,a,i)}else K.renderBufferDirect(r,t.fog,n,i,e,o);e.onAfterRender(K,t,r,n,i,o),J=Ye.get(t,ce||r)}function w(e,t,r){var n=_e.get(e),i=J.state.lights,o=J.state.shadowsArray,s=Be.getParameters(e,i.state,o,t,Me.numPlanes,Me.numIntersection,r),a=Be.getProgramCode(e,s),c=n.program,u=!0;if(void 0===c)e.addEventListener("dispose",l);else if(c.code!==a)d(e);else if(n.lightsHash!==i.state.hash)_e.update(e,"lightsHash",i.state.hash),u=!1;else{if(void 0!==s.shaderID)return;u=!1}if(u){if(s.shaderID){var h=Ec[s.shaderID];n.shader={name:e.type,uniforms:Ac.clone(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}}else n.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(n.shader),c=Be.acquireProgram(e,n.shader,s,a),n.program=c,e.program=c}var p=c.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var m=0;m<K.maxMorphTargets;m++)p["morphTarget"+m]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var m=0;m<K.maxMorphNormals;m++)p["morphNormal"+m]>=0&&e.numSupportedMorphNormals++}var f=n.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(n.numClippingPlanes=Me.numPlanes,n.numIntersection=Me.numIntersection,f.clippingPlanes=Me.uniform),n.fog=t,n.lightsHash=i.state.hash,e.lights&&(f.ambientLightColor.value=i.state.ambient,f.directionalLights.value=i.state.directional,f.spotLights.value=i.state.spot,f.rectAreaLights.value=i.state.rectArea,f.pointLights.value=i.state.point,f.hemisphereLights.value=i.state.hemi,f.directionalShadowMap.value=i.state.directionalShadowMap,f.directionalShadowMatrix.value=i.state.directionalShadowMatrix,f.spotShadowMap.value=i.state.spotShadowMap,f.spotShadowMatrix.value=i.state.spotShadowMatrix,f.pointShadowMap.value=i.state.pointShadowMap,f.pointShadowMatrix.value=i.state.pointShadowMatrix);var v=n.program.getUniforms(),y=Y.seqWithValue(v.seq,f);n.uniformsList=y}function E(e,t,r,n){de=0;var i=_e.get(r),o=J.state.lights;if(Ae&&(we||e!==ae)){var s=e===ae&&r.id===oe;Me.setState(r.clippingPlanes,r.clipIntersection,r.clipShadows,e,i,s)}!1===r.needsUpdate&&(void 0===i.program?r.needsUpdate=!0:r.fog&&i.fog!==t?r.needsUpdate=!0:r.lights&&i.lightsHash!==o.state.hash?r.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===Me.numPlanes&&i.numIntersection===Me.numIntersection||(r.needsUpdate=!0)),r.needsUpdate&&(w(r,t,n),r.needsUpdate=!1);var a=!1,c=!1,l=!1,u=i.program,d=u.getUniforms(),p=i.shader.uniforms;if(Ie.useProgram(u.program)&&(a=!0,c=!0,l=!0),r.id!==oe&&(oe=r.id,c=!0),a||e!==ae){if(d.setValue(Ne,"projectionMatrix",e.projectionMatrix),Se.logarithmicDepthBuffer&&d.setValue(Ne,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),ae!==(ce||e)&&(ae=ce||e,c=!0,l=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.envMap){var m=d.map.cameraPosition;void 0!==m&&m.setValue(Ne,be.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.skinning)&&d.setValue(Ne,"viewMatrix",e.matrixWorldInverse)}if(r.skinning){d.setOptional(Ne,n,"bindMatrix"),d.setOptional(Ne,n,"bindMatrixInverse");var f=n.skeleton;if(f){var v=f.bones;if(Se.floatVertexTextures){if(void 0===f.boneTexture){var y=Math.sqrt(4*v.length);y=uc.ceilPowerOfTwo(y),y=Math.max(y,4);var g=new Float32Array(y*y*4);g.set(f.boneMatrices);var x=new h(g,y,y,Aa,pa);x.needsUpdate=!0,f.boneMatrices=g,f.boneTexture=x,f.boneTextureSize=y}d.setValue(Ne,"boneTexture",f.boneTexture),d.setValue(Ne,"boneTextureSize",f.boneTextureSize)}else d.setOptional(Ne,f,"boneMatrices")}}return c&&(d.setValue(Ne,"toneMappingExposure",K.toneMappingExposure),d.setValue(Ne,"toneMappingWhitePoint",K.toneMappingWhitePoint),r.lights&&k(p,l),t&&r.fog&&D(p,t),r.isMeshBasicMaterial?b(p,r):r.isMeshLambertMaterial?(b(p,r),C(p,r)):r.isMeshPhongMaterial?(b(p,r),r.isMeshToonMaterial?I(p,r):S(p,r)):r.isMeshStandardMaterial?(b(p,r),r.isMeshPhysicalMaterial?j(p,r):_(p,r)):r.isMeshDepthMaterial?(b(p,r),O(p,r)):r.isMeshDistanceMaterial?(b(p,r),R(p,r)):r.isMeshNormalMaterial?(b(p,r),z(p,r)):r.isLineBasicMaterial?(T(p,r),r.isLineDashedMaterial&&L(p,r)):r.isPointsMaterial?N(p,r):r.isShadowMaterial&&(p.color.value=r.color,p.opacity.value=r.opacity),void 0!==p.ltc_1&&(p.ltc_1.value=Mc.LTC_1),void 0!==p.ltc_2&&(p.ltc_2.value=Mc.LTC_2),Y.upload(Ne,i.uniformsList,p,K)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Y.upload(Ne,i.uniformsList,p,K),r.uniformsNeedUpdate=!1),d.setValue(Ne,"modelViewMatrix",n.modelViewMatrix),d.setValue(Ne,"normalMatrix",n.normalMatrix),d.setValue(Ne,"modelMatrix",n.matrixWorld),u}function b(e,t){e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);var r;if(t.map?r=t.map:t.specularMap?r=t.specularMap:t.displacementMap?r=t.displacementMap:t.normalMap?r=t.normalMap:t.bumpMap?r=t.bumpMap:t.roughnessMap?r=t.roughnessMap:t.metalnessMap?r=t.metalnessMap:t.alphaMap?r=t.alphaMap:t.emissiveMap&&(r=t.emissiveMap),void 0!==r){if(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate){var n=r.offset,i=r.repeat,o=r.rotation,s=r.center;r.matrix.setUvTransform(n.x,n.y,i.x,i.y,o,s.x,s.y)}e.uvTransform.value.copy(r.matrix)}}function T(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function L(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function N(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*fe,e.scale.value=.5*me,e.map.value=t.map,null!==t.map){if(!0===t.map.matrixAutoUpdate){var r=t.map.offset,n=t.map.repeat,i=t.map.rotation,o=t.map.center;t.map.matrix.setUvTransform(r.x,r.y,n.x,n.y,i,o.x,o.y)}e.uvTransform.value.copy(t.map.matrix)}}function D(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function C(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function S(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function I(e,t){S(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function _(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function j(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,_(e,t)}function O(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function R(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}function z(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function k(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function B(){var e=de;return e>=Se.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+Se.maxTextures),de+=1,e}console.log("THREE.WebGLRenderer",qo),e=e||{};var U=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),P=void 0!==e.context?e.context:null,F=void 0!==e.alpha&&e.alpha,G=void 0===e.depth||e.depth,H=void 0===e.stencil||e.stencil,Q=void 0!==e.antialias&&e.antialias,V=void 0===e.premultipliedAlpha||e.premultipliedAlpha,W=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,q=void 0!==e.powerPreference?e.powerPreference:"default",Z=null,J=null;this.domElement=U,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Fs,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var K=this,$=!1,ee=null,te=null,oe=-1,se="",ae=null,ce=null,le=new c,ue=new c,he=null,de=0,pe=U.width,me=U.height,fe=1,ve=new c(0,0,pe,me),ye=new c(0,0,pe,me),ge=!1,xe=new re,Me=new vt,Ae=!1,we=!1,Ee=new n,be=new o,Te={geometries:0,textures:0},Le={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:Le,memory:Te,programs:null,autoReset:!0,reset:t};var Ne;try{var De={alpha:F,depth:G,stencil:H,antialias:Q,premultipliedAlpha:V,preserveDrawingBuffer:W,powerPreference:q};if(U.addEventListener("webglcontextlost",s,!1),U.addEventListener("webglcontextrestored",a,!1),null===(Ne=P||U.getContext("webgl",De)||U.getContext("experimental-webgl",De)))throw null!==U.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===Ne.getShaderPrecisionFormat&&(Ne.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}var Ce,Se,Ie,_e,je,Oe,ze,ke,Be,Pe,Ye,We,qe,Xe,Ze,Je,Ke;i();var $e=new mt(K);this.vr=$e;var et=new ne(K,ke,Se.maxTextureSize);this.shadowMap=et,this.getContext=function(){return Ne},this.getContextAttributes=function(){return Ne.getContextAttributes()},this.forceContextLoss=function(){var e=Ce.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=Ce.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return fe},this.setPixelRatio=function(e){void 0!==e&&(fe=e,this.setSize(pe,me,!1))},this.getSize=function(){return{width:pe,height:me}},this.setSize=function(e,t,r){var n=$e.getDevice();if(n&&n.isPresenting)return void console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");pe=e,me=t,U.width=e*fe,U.height=t*fe,!1!==r&&(U.style.width=e+"px",U.style.height=t+"px"),this.setViewport(0,0,e,t)},this.getDrawingBufferSize=function(){return{width:pe*fe,height:me*fe}},this.setDrawingBufferSize=function(e,t,r){pe=e,me=t,fe=r,U.width=e*r,U.height=t*r,this.setViewport(0,0,e,t)},this.getCurrentViewport=function(){return le},this.setViewport=function(e,t,r,n){ve.set(e,me-t-n,r,n),Ie.viewport(le.copy(ve).multiplyScalar(fe))},this.setScissor=function(e,t,r,n){ye.set(e,me-t-n,r,n),Ie.scissor(ue.copy(ye).multiplyScalar(fe))},this.setScissorTest=function(e){Ie.setScissorTest(ge=e)},this.getClearColor=function(){return We.getClearColor()},this.setClearColor=function(){We.setClearColor.apply(We,arguments)},this.getClearAlpha=function(){return We.getClearAlpha()},this.setClearAlpha=function(){We.setClearAlpha.apply(We,arguments)},this.clear=function(e,t,r){var n=0;(void 0===e||e)&&(n|=Ne.COLOR_BUFFER_BIT),(void 0===t||t)&&(n|=Ne.DEPTH_BUFFER_BIT),(void 0===r||r)&&(n|=Ne.STENCIL_BUFFER_BIT),Ne.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,r,n){this.setRenderTarget(e),this.clear(t,r,n)},this.dispose=function(){U.removeEventListener("webglcontextlost",s,!1),U.removeEventListener("webglcontextrestored",a,!1),Pe.dispose(),Ye.dispose(),_e.dispose(),ke.dispose(),$e.dispose(),v()},this.renderBufferImmediate=function(e,t,r){Ie.initAttributes();var n=_e.get(e);e.hasPositions&&!n.position&&(n.position=Ne.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=Ne.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=Ne.createBuffer()),e.hasColors&&!n.color&&(n.color=Ne.createBuffer());var i=t.getAttributes();if(e.hasPositions&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,n.position),Ne.bufferData(Ne.ARRAY_BUFFER,e.positionArray,Ne.DYNAMIC_DRAW),Ie.enableAttribute(i.position),Ne.vertexAttribPointer(i.position,3,Ne.FLOAT,!1,0,0)),e.hasNormals){if(Ne.bindBuffer(Ne.ARRAY_BUFFER,n.normal),!r.isMeshPhongMaterial&&!r.isMeshStandardMaterial&&!r.isMeshNormalMaterial&&!0===r.flatShading)for(var o=0,s=3*e.count;o<s;o+=9){var a=e.normalArray,c=(a[o+0]+a[o+3]+a[o+6])/3,l=(a[o+1]+a[o+4]+a[o+7])/3,u=(a[o+2]+a[o+5]+a[o+8])/3;a[o+0]=c,a[o+1]=l,a[o+2]=u,a[o+3]=c,a[o+4]=l,a[o+5]=u,a[o+6]=c,a[o+7]=l,a[o+8]=u}Ne.bufferData(Ne.ARRAY_BUFFER,e.normalArray,Ne.DYNAMIC_DRAW),Ie.enableAttribute(i.normal),Ne.vertexAttribPointer(i.normal,3,Ne.FLOAT,!1,0,0)}e.hasUvs&&r.map&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,n.uv),Ne.bufferData(Ne.ARRAY_BUFFER,e.uvArray,Ne.DYNAMIC_DRAW),Ie.enableAttribute(i.uv),Ne.vertexAttribPointer(i.uv,2,Ne.FLOAT,!1,0,0)),e.hasColors&&r.vertexColors!==is&&(Ne.bindBuffer(Ne.ARRAY_BUFFER,n.color),Ne.bufferData(Ne.ARRAY_BUFFER,e.colorArray,Ne.DYNAMIC_DRAW),Ie.enableAttribute(i.color),Ne.vertexAttribPointer(i.color,3,Ne.FLOAT,!1,0,0)),Ie.disableUnusedAttributes(),Ne.drawArrays(Ne.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,i,o,s){var a=o.isMesh&&o.matrixWorld.determinant()<0;Ie.setMaterial(i,a);var c=E(e,t,i,o),l=n.id+"_"+c.id+"_"+(!0===i.wireframe),u=!1;l!==se&&(se=l,u=!0),o.morphTargetInfluences&&(qe.update(o,n,i,c),u=!0);var h=n.index,d=n.attributes.position,p=1;!0===i.wireframe&&(h=ze.getWireframeAttribute(n),p=2);var f,v=Xe;null!==h&&(f=Oe.get(h),v=Ze,v.setIndex(f)),u&&(m(i,c,n),null!==h&&Ne.bindBuffer(Ne.ELEMENT_ARRAY_BUFFER,f.buffer));var y=1/0;null!==h?y=h.count:void 0!==d&&(y=d.count);var g=n.drawRange.start*p,x=n.drawRange.count*p,M=null!==s?s.start*p:0,A=null!==s?s.count*p:1/0,w=Math.max(g,M),b=Math.min(y,g+x,M+A)-1,T=Math.max(0,b-w+1);if(0!==T){if(o.isMesh)if(!0===i.wireframe)Ie.setLineWidth(i.wireframeLinewidth*r()),v.setMode(Ne.LINES);else switch(o.drawMode){case Ka:v.setMode(Ne.TRIANGLES);break;case $a:v.setMode(Ne.TRIANGLE_STRIP);break;case ec:v.setMode(Ne.TRIANGLE_FAN)}else if(o.isLine){var L=i.linewidth;void 0===L&&(L=1),Ie.setLineWidth(L*r()),o.isLineSegments?v.setMode(Ne.LINES):o.isLineLoop?v.setMode(Ne.LINE_LOOP):v.setMode(Ne.LINE_STRIP)}else o.isPoints&&v.setMode(Ne.POINTS);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&v.renderInstances(n,w,T):v.render(w,T)}},this.compile=function(e,t){J=Ye.get(e,t),J.init(),e.traverse(function(e){e.isLight&&(J.pushLight(e),e.castShadow&&J.pushShadow(e))}),J.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var r=0;r<t.material.length;r++)w(t.material[r],e.fog,t);else w(t.material,e.fog,t)})};var tt=!1,rt=null;this.animate=function(e){rt=e,null!==rt?f():v()},this.render=function(e,t,r,n){if(!t||!t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!$){se="",oe=-1,ae=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),$e.enabled&&(t=$e.getCamera(t)),J=Ye.get(e,t),J.init(),e.onBeforeRender(K,e,t,r),Ee.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),xe.setFromMatrix(Ee),we=this.localClippingEnabled,Ae=Me.init(this.clippingPlanes,we,t),Z=Pe.get(e,t),Z.init(),x(e,t,K.sortObjects),!0===K.sortObjects&&Z.sort(),Ae&&Me.beginShadows();var i=J.state.shadowsArray;et.render(i,e,t),J.setupLights(t),Ae&&Me.endShadows(),this.info.autoReset&&this.info.reset(),void 0===r&&(r=null),this.setRenderTarget(r),We.render(Z,e,t,n);var o=Z.opaque,s=Z.transparent;if(e.overrideMaterial){var a=e.overrideMaterial;o.length&&M(o,e,t,a),s.length&&M(s,e,t,a)}else o.length&&M(o,e,t),s.length&&M(s,e,t);var c=J.state.spritesArray;Je.render(c,e,t),r&&je.updateRenderTargetMipmap(r),Ie.buffers.depth.setTest(!0),Ie.buffers.depth.setMask(!0),Ie.buffers.color.setMask(!0),Ie.setPolygonOffset(!1),e.onAfterRender(K,e,t),$e.enabled&&$e.submitFrame(),Z=null,J=null}},this.allocTextureUnit=B,this.setTexture2D=function(){var e=!1;return function(t,r){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),je.setTexture2D(t,r)}}(),this.setTexture=function(){var e=!1;return function(t,r){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),je.setTexture2D(t,r)}}(),this.setTextureCube=function(){var e=!1;return function(t,r){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?je.setTextureCube(t,r):je.setTextureCubeDynamic(t,r)}}(),this.getRenderTarget=function(){return ee},this.setRenderTarget=function(e){ee=e,e&&void 0===_e.get(e).__webglFramebuffer&&je.setupRenderTarget(e);var t=null,r=!1;if(e){var n=_e.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=n[e.activeCubeFace],r=!0):t=n,le.copy(e.viewport),ue.copy(e.scissor),he=e.scissorTest}else le.copy(ve).multiplyScalar(fe),ue.copy(ye).multiplyScalar(fe),he=ge;if(te!==t&&(Ne.bindFramebuffer(Ne.FRAMEBUFFER,t),te=t),Ie.viewport(le),Ie.scissor(ue),Ie.setScissorTest(he),r){var i=_e.get(e.texture);Ne.framebufferTexture2D(Ne.FRAMEBUFFER,Ne.COLOR_ATTACHMENT0,Ne.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,r,n,i,o){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var s=_e.get(e).__webglFramebuffer;if(s){var a=!1;s!==te&&(Ne.bindFramebuffer(Ne.FRAMEBUFFER,s),a=!0);try{var c=e.texture,l=c.format,u=c.type;if(l!==Aa&&Ke.convert(l)!==Ne.getParameter(Ne.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(u===aa||Ke.convert(u)===Ne.getParameter(Ne.IMPLEMENTATION_COLOR_READ_TYPE)||u===pa&&(Ce.get("OES_texture_float")||Ce.get("WEBGL_color_buffer_float"))||u===ma&&Ce.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Ne.checkFramebufferStatus(Ne.FRAMEBUFFER)===Ne.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-n&&r>=0&&r<=e.height-i&&Ne.readPixels(t,r,n,i,Ke.convert(l),Ke.convert(u),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{a&&Ne.bindFramebuffer(Ne.FRAMEBUFFER,te)}}},this.copyFramebufferToTexture=function(e,t,r){var n=t.image.width,i=t.image.height,o=Ke.convert(t.format);this.setTexture2D(t,0),Ne.copyTexImage2D(Ne.TEXTURE_2D,r||0,o,e.x,e.y,n,i,0)}}function Et(e,t){this.name="",this.color=new W(e),this.density=void 0!==t?t:25e-5}function bt(e,t,r){this.name="",this.color=new W(e),this.near=void 0!==t?t:1,this.far=void 0!==r?r:1e3}function Tt(){ae.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Lt(e){Z.call(this),this.type="SpriteMaterial",this.color=new W(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Nt(e){ae.call(this),this.type="Sprite",this.material=void 0!==e?e:new Lt,this.center=new r(.5,.5)}function Dt(){ae.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Ct(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new n)}}function St(){ae.call(this),this.type="Bone"}function It(e,t){Oe.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new n,this.bindMatrixInverse=new n;var r=this.initBones(),i=new Ct(r);this.bind(i,this.matrixWorld),this.normalizeSkinWeights()}function _t(e){Z.call(this),this.type="LineBasicMaterial",this.color=new W(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function jt(e,t,r){if(1===r)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Ot(e,t);ae.call(this),this.type="Line",this.geometry=void 0!==e?e:new be,this.material=void 0!==t?t:new _t({color:16777215*Math.random()})}function Ot(e,t){jt.call(this,e,t),this.type="LineSegments"}function Rt(e,t){jt.call(this,e,t),this.type="LineLoop"}function zt(e){Z.call(this),this.type="PointsMaterial",this.color=new W(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function kt(e,t){ae.call(this),this.type="Points",this.geometry=void 0!==e?e:new be,this.material=void 0!==t?t:new zt({color:16777215*Math.random()})}function Bt(){ae.call(this),this.type="Group"}function Ut(e,t,r,n,i,o,s,c,l){a.call(this,e,t,r,n,i,o,s,c,l),this.generateMipmaps=!1}function Pt(e,t,r,n,i,o,s,c,l,u,h,d){a.call(this,null,o,s,c,l,u,n,i,h,d),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Ft(e,t,r,n,i,o,s,c,l,u){if((u=void 0!==u?u:Ta)!==Ta&&u!==La)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&u===Ta&&(r=ua),void 0===r&&u===La&&(r=ga),a.call(this,null,n,i,o,s,c,u,r,l),this.image={width:e,height:t},this.magFilter=void 0!==s?s:ta,this.minFilter=void 0!==c?c:ta,this.flipY=!1,this.generateMipmaps=!1}function Gt(e){be.call(this),this.type="WireframeGeometry";var t,r,n,i,s,a,c,l,u,h,d=[],p=[0,0],m={},f=["a","b","c"];if(e&&e.isGeometry){var v=e.faces;for(t=0,n=v.length;t<n;t++){var y=v[t];for(r=0;r<3;r++)c=y[f[r]],l=y[f[(r+1)%3]],p[0]=Math.min(c,l),p[1]=Math.max(c,l),u=p[0]+","+p[1],void 0===m[u]&&(m[u]={index1:p[0],index2:p[1]})}for(u in m)a=m[u],h=e.vertices[a.index1],d.push(h.x,h.y,h.z),h=e.vertices[a.index2],d.push(h.x,h.y,h.z)}else if(e&&e.isBufferGeometry){var g,x,M,A,w,E,b,T;if(h=new o,null!==e.index){for(g=e.attributes.position,x=e.index,M=e.groups,0===M.length&&(M=[{start:0,count:x.count,materialIndex:0}]),i=0,s=M.length;i<s;++i)for(A=M[i],w=A.start,E=A.count,t=w,n=w+E;t<n;t+=3)for(r=0;r<3;r++)c=x.getX(t+r),l=x.getX(t+(r+1)%3),p[0]=Math.min(c,l),p[1]=Math.max(c,l),u=p[0]+","+p[1],void 0===m[u]&&(m[u]={index1:p[0],index2:p[1]});for(u in m)a=m[u],h.fromBufferAttribute(g,a.index1),d.push(h.x,h.y,h.z),h.fromBufferAttribute(g,a.index2),d.push(h.x,h.y,h.z)}else for(g=e.attributes.position,t=0,n=g.count/3;t<n;t++)for(r=0;r<3;r++)b=3*t+r,h.fromBufferAttribute(g,b),d.push(h.x,h.y,h.z),T=3*t+(r+1)%3,h.fromBufferAttribute(g,T),d.push(h.x,h.y,h.z)}this.addAttribute("position",new Me(d,3))}function Ht(e,t,r){he.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:r},this.fromBufferGeometry(new Qt(e,t,r)),this.mergeVertices()}function Qt(e,t,r){be.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:r};var n,i,s=[],a=[],c=[],l=[],u=new o,h=new o,d=new o,p=new o,m=new o,f=t+1;for(n=0;n<=r;n++){var v=n/r;for(i=0;i<=t;i++){var y=i/t;h=e(y,v,h),a.push(h.x,h.y,h.z),y-1e-5>=0?(d=e(y-1e-5,v,d),p.subVectors(h,d)):(d=e(y+1e-5,v,d),p.subVectors(d,h)),v-1e-5>=0?(d=e(y,v-1e-5,d),m.subVectors(h,d)):(d=e(y,v+1e-5,d),m.subVectors(d,h)),u.crossVectors(p,m).normalize(),c.push(u.x,u.y,u.z),l.push(y,v)}}for(n=0;n<r;n++)for(i=0;i<t;i++){var g=n*f+i,x=n*f+i+1,M=(n+1)*f+i+1,A=(n+1)*f+i;s.push(g,x,A),s.push(x,M,A)}this.setIndex(s),this.addAttribute("position",new Me(a,3)),this.addAttribute("normal",new Me(c,3)),this.addAttribute("uv",new Me(l,2))}function Vt(e,t,r,n){he.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n},this.fromBufferGeometry(new Yt(e,t,r,n)),this.mergeVertices()}function Yt(e,t,n,i){function s(e,t,r,n){var i,o,s=Math.pow(2,n),a=[];for(i=0;i<=s;i++){a[i]=[];var l=e.clone().lerp(r,i/s),u=t.clone().lerp(r,i/s),h=s-i;for(o=0;o<=h;o++)a[i][o]=0===o&&i===s?l:l.clone().lerp(u,o/h)}for(i=0;i<s;i++)for(o=0;o<2*(s-i)-1;o++){var d=Math.floor(o/2);o%2==0?(c(a[i][d+1]),c(a[i+1][d]),c(a[i][d])):(c(a[i][d+1]),c(a[i+1][d+1]),c(a[i+1][d]))}}function a(){for(var e=0;e<f.length;e+=6){var t=f[e+0],r=f[e+2],n=f[e+4],i=Math.max(t,r,n),o=Math.min(t,r,n);i>.9&&o<.1&&(t<.2&&(f[e+0]+=1),r<.2&&(f[e+2]+=1),n<.2&&(f[e+4]+=1))}}function c(e){m.push(e.x,e.y,e.z)}function l(t,r){var n=3*t;r.x=e[n+0],r.y=e[n+1],r.z=e[n+2]}function u(){for(var e=new o,t=new o,n=new o,i=new o,s=new r,a=new r,c=new r,l=0,u=0;l<m.length;l+=9,u+=6){e.set(m[l+0],m[l+1],m[l+2]),t.set(m[l+3],m[l+4],m[l+5]),n.set(m[l+6],m[l+7],m[l+8]),s.set(f[u+0],f[u+1]),a.set(f[u+2],f[u+3]),c.set(f[u+4],f[u+5]),i.copy(e).add(t).add(n).divideScalar(3);var p=d(i);h(s,u+0,e,p),h(a,u+2,t,p),h(c,u+4,n,p)}}function h(e,t,r,n){n<0&&1===e.x&&(f[t]=e.x-1),0===r.x&&0===r.z&&(f[t]=n/2/Math.PI+.5)}function d(e){return Math.atan2(e.z,-e.x)}function p(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}be.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},n=n||1,i=i||0;var m=[],f=[];!function(e){for(var r=new o,n=new o,i=new o,a=0;a<t.length;a+=3)l(t[a+0],r),l(t[a+1],n),l(t[a+2],i),s(r,n,i,e)}(i),function(e){for(var t=new o,r=0;r<m.length;r+=3)t.x=m[r+0],t.y=m[r+1],t.z=m[r+2],t.normalize().multiplyScalar(e),m[r+0]=t.x,m[r+1]=t.y,m[r+2]=t.z}(n),function(){for(var e=new o,t=0;t<m.length;t+=3){e.x=m[t+0],e.y=m[t+1],e.z=m[t+2];var r=d(e)/2/Math.PI+.5,n=p(e)/Math.PI+.5;f.push(r,1-n)}u(),a()}(),this.addAttribute("position",new Me(m,3)),this.addAttribute("normal",new Me(m.slice(),3)),this.addAttribute("uv",new Me(f,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function Wt(e,t){he.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new qt(e,t)),this.mergeVertices()}function qt(e,t){var r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],n=[2,1,0,0,3,2,1,3,0,2,3,1];Yt.call(this,r,n,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Xt(e,t){he.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Zt(e,t)),this.mergeVertices()}function Zt(e,t){var r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Yt.call(this,r,n,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Jt(e,t){he.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Kt(e,t)),this.mergeVertices()}function Kt(e,t){var r=(1+Math.sqrt(5))/2,n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Yt.call(this,n,i,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function $t(e,t){he.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new er(e,t)),this.mergeVertices()}function er(e,t){var r=(1+Math.sqrt(5))/2,n=1/r,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Yt.call(this,i,o,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function tr(e,t,r,n,i,o){he.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:n,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var s=new rr(e,t,r,n,i);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals,this.fromBufferGeometry(s),this.mergeVertices()}function rr(e,t,n,i,s){function a(r){v=e.getPointAt(r/t,v);var o=u.normals[r],s=u.binormals[r];for(d=0;d<=i;d++){var a=d/i*Math.PI*2,c=Math.sin(a),l=-Math.cos(a);m.x=l*o.x+c*s.x,m.y=l*o.y+c*s.y,m.z=l*o.z+c*s.z,m.normalize(),g.push(m.x,m.y,m.z),p.x=v.x+n*m.x,p.y=v.y+n*m.y,p.z=v.z+n*m.z,y.push(p.x,p.y,p.z)}}function c(){for(d=1;d<=t;d++)for(h=1;h<=i;h++){var e=(i+1)*(d-1)+(h-1),r=(i+1)*d+(h-1),n=(i+1)*d+h,o=(i+1)*(d-1)+h;M.push(e,r,o),M.push(r,n,o)}}function l(){for(h=0;h<=t;h++)for(d=0;d<=i;d++)f.x=h/t,f.y=d/i,x.push(f.x,f.y)}be.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:s},t=t||64,n=n||1,i=i||8,s=s||!1;var u=e.computeFrenetFrames(t,s);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals;var h,d,p=new o,m=new o,f=new r,v=new o,y=[],g=[],x=[],M=[];!function(){for(h=0;h<t;h++)a(h);a(!1===s?t:0),l(),c()}(),this.setIndex(M),this.addAttribute("position",new Me(y,3)),this.addAttribute("normal",new Me(g,3)),this.addAttribute("uv",new Me(x,2))}function nr(e,t,r,n,i,o,s){he.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:o},void 0!==s&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new ir(e,t,r,n,i,o)),this.mergeVertices()}function ir(e,t,r,n,i,s){function a(e,t,r,n,i){var o=Math.cos(e),s=Math.sin(e),a=r/t*e,c=Math.cos(a);i.x=n*(2+c)*.5*o,i.y=n*(2+c)*s*.5,i.z=n*Math.sin(a)*.5}be.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:s},e=e||1,t=t||.4,r=Math.floor(r)||64,n=Math.floor(n)||8,i=i||2,s=s||3;var c,l,u=[],h=[],d=[],p=[],m=new o,f=new o,v=new o,y=new o,g=new o,x=new o,M=new o;for(c=0;c<=r;++c){var A=c/r*i*Math.PI*2;for(a(A,i,s,e,v),a(A+.01,i,s,e,y),x.subVectors(y,v),M.addVectors(y,v),g.crossVectors(x,M),M.crossVectors(g,x),g.normalize(),M.normalize(),l=0;l<=n;++l){var w=l/n*Math.PI*2,E=-t*Math.cos(w),b=t*Math.sin(w);m.x=v.x+(E*M.x+b*g.x),m.y=v.y+(E*M.y+b*g.y),m.z=v.z+(E*M.z+b*g.z),h.push(m.x,m.y,m.z),f.subVectors(m,v).normalize(),d.push(f.x,f.y,f.z),p.push(c/r),p.push(l/n)}}for(l=1;l<=r;l++)for(c=1;c<=n;c++){var T=(n+1)*(l-1)+(c-1),L=(n+1)*l+(c-1),N=(n+1)*l+c,D=(n+1)*(l-1)+c;u.push(T,L,D),u.push(L,N,D)}this.setIndex(u),this.addAttribute("position",new Me(h,3)),this.addAttribute("normal",new Me(d,3)),this.addAttribute("uv",new Me(p,2))}function or(e,t,r,n,i){he.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i},this.fromBufferGeometry(new sr(e,t,r,n,i)),this.mergeVertices()}function sr(e,t,r,n,i){be.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i},e=e||1,t=t||.4,r=Math.floor(r)||8,n=Math.floor(n)||6,i=i||2*Math.PI;var s,a,c=[],l=[],u=[],h=[],d=new o,p=new o,m=new o;for(s=0;s<=r;s++)for(a=0;a<=n;a++){var f=a/n*i,v=s/r*Math.PI*2;p.x=(e+t*Math.cos(v))*Math.cos(f),p.y=(e+t*Math.cos(v))*Math.sin(f),p.z=t*Math.sin(v),l.push(p.x,p.y,p.z),d.x=e*Math.cos(f),d.y=e*Math.sin(f),m.subVectors(p,d).normalize(),u.push(m.x,m.y,m.z),h.push(a/n),h.push(s/r)}for(s=1;s<=r;s++)for(a=1;a<=n;a++){var y=(n+1)*s+a-1,g=(n+1)*(s-1)+a-1,x=(n+1)*(s-1)+a,M=(n+1)*s+a;c.push(y,g,M),c.push(g,x,M)}this.setIndex(c),this.addAttribute("position",new Me(l,3)),this.addAttribute("normal",new Me(u,3)),this.addAttribute("uv",new Me(h,2))}function ar(e,t,r,n,i){var o,s;if(i===Or(e,t,r,n)>0)for(o=t;o<r;o+=n)s=Ir(o,e[o],e[o+1],s);else for(o=r-n;o>=t;o-=n)s=Ir(o,e[o],e[o+1],s);return s&&Tr(s,s.next)&&(_r(s),s=s.next),s}function cr(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!Tr(n,n.next)&&0!==br(n.prev,n,n.next))n=n.next;else{if(_r(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function lr(e,t,r,n,i,o,s){if(e){!s&&o&&gr(e,n,i,o);for(var a,c,l=e;e.prev!==e.next;)if(a=e.prev,c=e.next,o?hr(e,n,i,o):ur(e))t.push(a.i/r),t.push(e.i/r),t.push(c.i/r),_r(e),e=c.next,l=c.next;else if((e=c)===l){s?1===s?(e=dr(e,t,r),lr(e,t,r,n,i,o,2)):2===s&&pr(e,t,r,n,i,o):lr(cr(e),t,r,n,i,o,1);break}}}function ur(e){var t=e.prev,r=e,n=e.next;if(br(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(wr(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&br(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function hr(e,t,r,n){var i=e.prev,o=e,s=e.next;if(br(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,c=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,l=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,u=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,h=Mr(a,c,t,r,n),d=Mr(l,u,t,r,n),p=e.nextZ;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&wr(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&br(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=e.prevZ;p&&p.z>=h;){if(p!==e.prev&&p!==e.next&&wr(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&br(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function dr(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!Tr(i,o)&&Lr(i,n,n.next,o)&&Dr(i,o)&&Dr(o,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(o.i/r),_r(n),_r(n.next),n=e=o),n=n.next}while(n!==e);return n}function pr(e,t,r,n,i,o){var s=e;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&Er(s,a)){var c=Sr(s,a);return s=cr(s,s.next),c=cr(c,c.next),lr(s,t,r,n,i,o),void lr(c,t,r,n,i,o)}a=a.next}s=s.next}while(s!==e)}function mr(e,t,r,n){var i,o,s,a,c,l=[];for(i=0,o=t.length;i<o;i++)s=t[i]*n,a=i<o-1?t[i+1]*n:e.length,c=ar(e,s,a,n,!1),c===c.next&&(c.steiner=!0),l.push(Ar(c));for(l.sort(fr),i=0;i<l.length;i++)vr(l[i],r),r=cr(r,r.next);return r}function fr(e,t){return e.x-t.x}function vr(e,t){if(t=yr(e,t)){var r=Sr(t,e);cr(r,r.next)}}function yr(e,t){var r,n=t,i=e.x,o=e.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>s){if(s=a,a===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===s)return r.prev;var c,l=r,u=r.x,h=r.y,d=1/0;for(n=r.next;n!==l;)i>=n.x&&n.x>=u&&i!==n.x&&wr(o<h?i:s,o,u,h,o<h?s:i,o,n.x,n.y)&&((c=Math.abs(o-n.y)/(i-n.x))<d||c===d&&n.x>r.x)&&Dr(n,e)&&(r=n,d=c),n=n.next;return r}function gr(e,t,r,n){var i=e;do{null===i.z&&(i.z=Mr(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,xr(i)}function xr(e){var t,r,n,i,o,s,a,c,l=1;do{for(r=e,e=null,o=null,s=0;r;){for(s++,n=r,a=0,t=0;t<l&&(a++,n=n.nextZ);t++);for(c=l;a>0||c>0&&n;)0!==a&&(0===c||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,c--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,l*=2}while(s>1);return e}function Mr(e,t,r,n,i){return e=32767*(e-r)*i,t=32767*(t-n)*i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function Ar(e){var t=e,r=e;do{t.x<r.x&&(r=t),t=t.next}while(t!==e);return r}function wr(e,t,r,n,i,o,s,a){return(i-s)*(t-a)-(e-s)*(o-a)>=0&&(e-s)*(n-a)-(r-s)*(t-a)>=0&&(r-s)*(o-a)-(i-s)*(n-a)>=0}function Er(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Nr(e,t)&&Dr(e,t)&&Dr(t,e)&&Cr(e,t)}function br(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Tr(e,t){return e.x===t.x&&e.y===t.y}function Lr(e,t,r,n){return!!(Tr(e,t)&&Tr(r,n)||Tr(e,n)&&Tr(r,t))||br(e,t,r)>0!=br(e,t,n)>0&&br(r,n,e)>0!=br(r,n,t)>0}function Nr(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&Lr(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function Dr(e,t){return br(e.prev,e,e.next)<0?br(e,t,e.next)>=0&&br(e,e.prev,t)>=0:br(e,t,e.prev)<0||br(e,e.next,t)<0}function Cr(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}function Sr(e,t){var r=new jr(e.i,e.x,e.y),n=new jr(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function Ir(e,t,r,n){var i=new jr(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function _r(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function jr(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Or(e,t,r,n){for(var i=0,o=t,s=r-n;o<r;o+=n)i+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return i}function Rr(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function zr(e,t){for(var r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}function kr(e,t){he.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Br(e,t)),this.mergeVertices()}function Br(e,t){void 0!==e&&(be.call(this),this.type="ExtrudeBufferGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeVertexNormals())}function Ur(e,t){he.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Pr(e,t)),this.mergeVertices()}function Pr(e,t){t=t||{};var r=t.font;if(!r||!r.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new he;var n=r.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Br.call(this,n,t),this.type="TextBufferGeometry"}function Fr(e,t,r,n,i,o,s){he.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new Gr(e,t,r,n,i,o,s)),this.mergeVertices()}function Gr(e,t,r,n,i,s,a){be.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:s,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),r=Math.max(2,Math.floor(r)||6),n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI,s=void 0!==s?s:0,a=void 0!==a?a:Math.PI;var c,l,u=s+a,h=0,d=[],p=new o,m=new o,f=[],v=[],y=[],g=[];for(l=0;l<=r;l++){var x=[],M=l/r;for(c=0;c<=t;c++){var A=c/t;p.x=-e*Math.cos(n+A*i)*Math.sin(s+M*a),p.y=e*Math.cos(s+M*a),p.z=e*Math.sin(n+A*i)*Math.sin(s+M*a),v.push(p.x,p.y,p.z),m.set(p.x,p.y,p.z).normalize(),y.push(m.x,m.y,m.z),g.push(A,1-M),x.push(h++)}d.push(x)}for(l=0;l<r;l++)for(c=0;c<t;c++){var w=d[l][c+1],E=d[l][c],b=d[l+1][c],T=d[l+1][c+1];(0!==l||s>0)&&f.push(w,E,T),(l!==r-1||u<Math.PI)&&f.push(E,b,T)}this.setIndex(f),this.addAttribute("position",new Me(v,3)),this.addAttribute("normal",new Me(y,3)),this.addAttribute("uv",new Me(g,2))}function Hr(e,t,r,n,i,o){he.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new Qr(e,t,r,n,i,o)),this.mergeVertices()}function Qr(e,t,n,i,s,a){be.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:s,thetaLength:a},e=e||.5,t=t||1,s=void 0!==s?s:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8,i=void 0!==i?Math.max(1,i):1;var c,l,u,h=[],d=[],p=[],m=[],f=e,v=(t-e)/i,y=new o,g=new r;for(l=0;l<=i;l++){for(u=0;u<=n;u++)c=s+u/n*a,y.x=f*Math.cos(c),y.y=f*Math.sin(c),d.push(y.x,y.y,y.z),p.push(0,0,1),g.x=(y.x/t+1)/2,g.y=(y.y/t+1)/2,m.push(g.x,g.y);f+=v}for(l=0;l<i;l++){var x=l*(n+1);for(u=0;u<n;u++){c=u+x;var M=c,A=c+n+1,w=c+n+2,E=c+1;h.push(M,A,E),h.push(A,w,E)}}this.setIndex(h),this.addAttribute("position",new Me(d,3)),this.addAttribute("normal",new Me(p,3)),this.addAttribute("uv",new Me(m,2))}function Vr(e,t,r,n){he.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},this.fromBufferGeometry(new Yr(e,t,r,n)),this.mergeVertices()}function Yr(e,t,n,i){be.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t)||12,n=n||0,i=i||2*Math.PI,i=uc.clamp(i,0,2*Math.PI);var s,a,c,l=[],u=[],h=[],d=1/t,p=new o,m=new r;for(a=0;a<=t;a++){var f=n+a*d*i,v=Math.sin(f),y=Math.cos(f);for(c=0;c<=e.length-1;c++)p.x=e[c].x*v,p.y=e[c].y,p.z=e[c].x*y,u.push(p.x,p.y,p.z),m.x=a/t,m.y=c/(e.length-1),h.push(m.x,m.y)}for(a=0;a<t;a++)for(c=0;c<e.length-1;c++){s=c+a*e.length;var g=s,x=s+e.length,M=s+e.length+1,A=s+1;l.push(g,x,A),l.push(x,M,A)}if(this.setIndex(l),this.addAttribute("position",new Me(u,3)),this.addAttribute("uv",new Me(h,2)),this.computeVertexNormals(),i===2*Math.PI){var w=this.attributes.normal.array,E=new o,b=new o,T=new o;for(s=t*e.length*3,a=0,c=0;a<e.length;a++,c+=3)E.x=w[c+0],E.y=w[c+1],E.z=w[c+2],b.x=w[s+c+0],b.y=w[s+c+1],b.z=w[s+c+2],T.addVectors(E,b).normalize(),w[c+0]=w[s+c+0]=T.x,w[c+1]=w[s+c+1]=T.y,w[c+2]=w[s+c+2]=T.z}}function Wr(e,t){he.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new qr(e,t)),this.mergeVertices()}function qr(e,t){function r(e){var r,a,l,u=i.length/3,h=e.extractPoints(t),d=h.shape,p=h.holes;if(!1===Ic.isClockWise(d))for(d=d.reverse(),r=0,a=p.length;r<a;r++)l=p[r],!0===Ic.isClockWise(l)&&(p[r]=l.reverse());var m=Ic.triangulateShape(d,p);for(r=0,a=p.length;r<a;r++)l=p[r],d=d.concat(l);for(r=0,a=d.length;r<a;r++){var f=d[r];i.push(f.x,f.y,0),o.push(0,0,1),s.push(f.x,f.y)}for(r=0,a=m.length;r<a;r++){var v=m[r],y=v[0]+u,g=v[1]+u,x=v[2]+u;n.push(y,g,x),c+=3}}be.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],i=[],o=[],s=[],a=0,c=0;if(!1===Array.isArray(e))r(e);else for(var l=0;l<e.length;l++)r(e[l]),this.addGroup(a,c,l),a+=c,c=0;this.setIndex(n),this.addAttribute("position",new Me(i,3)),this.addAttribute("normal",new Me(o,3)),this.addAttribute("uv",new Me(s,2))}function Xr(e,t){if(t.shapes=[],Array.isArray(e))for(var r=0,n=e.length;r<n;r++){var i=e[r];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function Zr(e,t){be.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var r,n,i,o,s=[],a=Math.cos(uc.DEG2RAD*t),c=[0,0],l={},u=["a","b","c"];e.isBufferGeometry?(o=new he,o.fromBufferGeometry(e)):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,d=o.faces,p=0,m=d.length;p<m;p++)for(var f=d[p],v=0;v<3;v++)r=f[u[v]],n=f[u[(v+1)%3]],c[0]=Math.min(r,n),c[1]=Math.max(r,n),i=c[0]+","+c[1],void 0===l[i]?l[i]={index1:c[0],index2:c[1],face1:p,face2:void 0}:l[i].face2=p;for(i in l){var y=l[i];if(void 0===y.face2||d[y.face1].normal.dot(d[y.face2].normal)<=a){var g=h[y.index1];s.push(g.x,g.y,g.z),g=h[y.index2],s.push(g.x,g.y,g.z)}}this.addAttribute("position",new Me(s,3))}function Jr(e,t,r,n,i,o,s,a){he.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a},this.fromBufferGeometry(new Kr(e,t,r,n,i,o,s,a)),this.mergeVertices()}function Kr(e,t,n,i,s,a,c,l){function u(n){var s,a,u,y=new r,M=new o,A=0,w=!0===n?e:t,E=!0===n?1:-1;for(a=v,s=1;s<=i;s++)p.push(0,g*E,0),m.push(0,E,0),f.push(.5,.5),v++;for(u=v,s=0;s<=i;s++){var b=s/i,T=b*l+c,L=Math.cos(T),N=Math.sin(T);M.x=w*N,M.y=g*E,M.z=w*L,p.push(M.x,M.y,M.z),m.push(0,E,0),y.x=.5*L+.5,y.y=.5*N*E+.5,f.push(y.x,y.y),v++}for(s=0;s<i;s++){var D=a+s,C=u+s;!0===n?d.push(C,C+1,D):d.push(C+1,C,D),A+=3}h.addGroup(x,A,!0===n?1:2),x+=A}be.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:s,openEnded:a,thetaStart:c,thetaLength:l};var h=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,i=Math.floor(i)||8,s=Math.floor(s)||1,a=void 0!==a&&a,c=void 0!==c?c:0,l=void 0!==l?l:2*Math.PI;var d=[],p=[],m=[],f=[],v=0,y=[],g=n/2,x=0;!function(){var r,a,u=new o,M=new o,A=0,w=(t-e)/n;for(a=0;a<=s;a++){var E=[],b=a/s,T=b*(t-e)+e;for(r=0;r<=i;r++){var L=r/i,N=L*l+c,D=Math.sin(N),C=Math.cos(N);M.x=T*D,M.y=-b*n+g,M.z=T*C,p.push(M.x,M.y,M.z),u.set(D,w,C).normalize(),m.push(u.x,u.y,u.z),f.push(L,1-b),E.push(v++)}y.push(E)}for(r=0;r<i;r++)for(a=0;a<s;a++){var S=y[a][r],I=y[a+1][r],_=y[a+1][r+1],j=y[a][r+1];d.push(S,I,j),d.push(I,_,j),A+=6}h.addGroup(x,A,0),x+=A}(),!1===a&&(e>0&&u(!0),t>0&&u(!1)),this.setIndex(d),this.addAttribute("position",new Me(p,3)),this.addAttribute("normal",new Me(m,3)),this.addAttribute("uv",new Me(f,2))}function $r(e,t,r,n,i,o,s){Jr.call(this,0,e,t,r,n,i,o,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:o,thetaLength:s}}function en(e,t,r,n,i,o,s){Kr.call(this,0,e,t,r,n,i,o,s),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:o,thetaLength:s}}function tn(e,t,r,n){he.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n},this.fromBufferGeometry(new rn(e,t,r,n)),this.mergeVertices()}function rn(e,t,n,i){be.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var s,a,c=[],l=[],u=[],h=[],d=new o,p=new r;for(l.push(0,0,0),u.push(0,0,1),h.push(.5,.5),a=0,s=3;a<=t;a++,s+=3){var m=n+a/t*i;d.x=e*Math.cos(m),d.y=e*Math.sin(m),l.push(d.x,d.y,d.z),u.push(0,0,1),p.x=(l[s]/e+1)/2,p.y=(l[s+1]/e+1)/2,h.push(p.x,p.y)}for(s=1;s<=t;s++)c.push(s,s+1,0);this.setIndex(c),this.addAttribute("position",new Me(l,3)),this.addAttribute("normal",new Me(u,3)),this.addAttribute("uv",new Me(h,2))}function nn(e){Z.call(this),this.type="ShadowMaterial",this.color=new W(0),this.opacity=1,this.lights=!0,this.transparent=!0,this.setValues(e)}function on(e){Se.call(this,e),this.type="RawShaderMaterial"}function sn(e){Z.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new W(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new W(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function an(e){sn.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function cn(e){Z.call(this),this.type="MeshPhongMaterial",this.color=new W(16777215),this.specular=new W(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new W(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ks,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ln(e){cn.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function un(e){Z.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function hn(e){Z.call(this),this.type="MeshLambertMaterial",this.color=new W(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new W(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ks,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function dn(e){_t.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}function pn(e,t,r){var n=this,i=!1,o=0,s=0,a=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(e){s++,!1===i&&void 0!==n.onStart&&n.onStart(e,o,s),i=!0},this.itemEnd=function(e){o++,void 0!==n.onProgress&&n.onProgress(e,o,s),o===s&&(i=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(e){void 0!==n.onError&&n.onError(e)},this.resolveURL=function(e){return a?a(e):e},this.setURLModifier=function(e){return a=e,this}}function mn(e){this.manager=void 0!==e?e:Rc}function fn(e){this.manager=void 0!==e?e:Rc,this._parser=null}function vn(e){this.manager=void 0!==e?e:Rc,this._parser=null}function yn(e){this.manager=void 0!==e?e:Rc}function gn(e){this.manager=void 0!==e?e:Rc}function xn(e){this.manager=void 0!==e?e:Rc}function Mn(){this.type="Curve",this.arcLengthDivisions=200}function An(e,t,r,n,i,o,s,a){Mn.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=r||1,this.yRadius=n||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=s||!1,this.aRotation=a||0}function wn(e,t,r,n,i,o){An.call(this,e,t,r,r,n,i,o),this.type="ArcCurve"}function En(){function e(e,o,s,a){t=e,r=s,n=-3*e+3*o-2*s-a,i=2*e-2*o+s+a}var t=0,r=0,n=0,i=0;return{initCatmullRom:function(t,r,n,i,o){e(r,n,o*(n-t),o*(i-r))},initNonuniformCatmullRom:function(t,r,n,i,o,s,a){var c=(r-t)/o-(n-t)/(o+s)+(n-r)/s,l=(n-r)/s-(i-r)/(s+a)+(i-n)/a;c*=s,l*=s,e(r,n,c,l)},calc:function(e){var o=e*e;return t+r*e+n*o+i*(o*e)}}}function bn(e,t,r,n){Mn.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=r||"centripetal",this.tension=n||.5}function Tn(e,t,r,n,i){var o=.5*(n-t),s=.5*(i-r),a=e*e;return(2*r-2*n+o+s)*(e*a)+(-3*r+3*n-2*o-s)*a+o*e+r}function Ln(e,t){var r=1-e;return r*r*t}function Nn(e,t){return 2*(1-e)*e*t}function Dn(e,t){return e*e*t}function Cn(e,t,r,n){return Ln(e,t)+Nn(e,r)+Dn(e,n)}function Sn(e,t){var r=1-e;return r*r*r*t}function In(e,t){var r=1-e;return 3*r*r*e*t}function _n(e,t){return 3*(1-e)*e*e*t}function jn(e,t){return e*e*e*t}function On(e,t,r,n,i){return Sn(e,t)+In(e,r)+_n(e,n)+jn(e,i)}function Rn(e,t,n,i){Mn.call(this),this.type="CubicBezierCurve",this.v0=e||new r,this.v1=t||new r,this.v2=n||new r,this.v3=i||new r}function zn(e,t,r,n){Mn.call(this),this.type="CubicBezierCurve3",this.v0=e||new o,this.v1=t||new o,this.v2=r||new o,this.v3=n||new o}function kn(e,t){Mn.call(this),this.type="LineCurve",this.v1=e||new r,this.v2=t||new r}function Bn(e,t){Mn.call(this),this.type="LineCurve3",this.v1=e||new o,this.v2=t||new o}function Un(e,t,n){Mn.call(this),this.type="QuadraticBezierCurve",this.v0=e||new r,this.v1=t||new r,this.v2=n||new r}function Pn(e,t,r){Mn.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new o,this.v1=t||new o,this.v2=r||new o}function Fn(e){Mn.call(this),this.type="SplineCurve",this.points=e||[]}function Gn(){Mn.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Hn(e){Gn.call(this),this.type="Path",this.currentPoint=new r,e&&this.setFromPoints(e)}function Qn(e){Hn.call(this,e),this.uuid=uc.generateUUID(),this.type="Shape",this.holes=[]}function Vn(e,t){ae.call(this),this.type="Light",this.color=new W(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Yn(e,t,r){Vn.call(this,e,r),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ae.DefaultUp),this.updateMatrix(),this.groundColor=new W(t)}function Wn(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new r(512,512),this.map=null,this.matrix=new n}function qn(){Wn.call(this,new dt(50,1,.5,500))}function Xn(e,t,r,n,i,o){Vn.call(this,e,t),this.type="SpotLight",this.position.copy(ae.DefaultUp),this.updateMatrix(),this.target=new ae,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==r?r:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new qn}function Zn(e,t,r,n){Vn.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==r?r:0,this.decay=void 0!==n?n:1,this.shadow=new Wn(new dt(90,1,.5,500))}function Jn(){Wn.call(this,new le(-5,5,5,-5,.5,500))}function Kn(e,t){Vn.call(this,e,t),this.type="DirectionalLight",this.position.copy(ae.DefaultUp),this.updateMatrix(),this.target=new ae,this.shadow=new Jn}function $n(e,t){Vn.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function ei(e,t,r,n){Vn.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==r?r:10,this.height=void 0!==n?n:10}function ti(e,t,r,n){hi.call(this,e,t,r,n)}function ri(e,t,r){hi.call(this,e,t,r)}function ni(e,t,r,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(r),this.sampleValues=t,this.valueSize=r}function ii(e,t,r,n){ni.call(this,e,t,r,n)}function oi(e,t,r,n){hi.call(this,e,t,r,n)}function si(e,t,r,n){hi.call(this,e,t,r,n)}function ai(e,t,r,n){hi.call(this,e,t,r,n)}function ci(e,t,r,n){ni.call(this,e,t,r,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function li(e,t,r,n){ni.call(this,e,t,r,n)}function ui(e,t,r,n){ni.call(this,e,t,r,n)}function hi(e,t,r,n){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Gc.convertArray(t,this.TimeBufferType),this.values=Gc.convertArray(r,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation),this.validate(),this.optimize()}function di(e,t,r,n){hi.call(this,e,t,r,n)}function pi(e,t,r){this.name=e,this.tracks=r,this.duration=void 0!==t?t:-1,this.uuid=uc.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function mi(e){this.manager=void 0!==e?e:Rc,this.textures={}}function fi(e){this.manager=void 0!==e?e:Rc}function vi(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function yi(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:Rc,this.withCredentials=!1}function gi(e){this.manager=void 0!==e?e:Rc,this.texturePath=""}function xi(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:Rc,this.options=void 0}function Mi(){this.type="ShapePath",this.subPaths=[],this.currentPath=null}function Ai(e){this.type="Font",this.data=e}function wi(e,t,r,n){for(var i=String(e).split(""),o=t/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*o,a=[],c=0,l=0,u=0;u<i.length;u++){var h=i[u];if("\n"===h)c=0,l-=s;else{var d=Ei(h,r,o,c,l,n);c+=d.offsetX,a.push(d.path)}}return a}function Ei(e,t,r,n,i,o){var s=o.glyphs[e]||o.glyphs["?"];if(s){var a,c,l,u,h,d,p,m,f=new Mi;if(s.o)for(var v=s._cachedOutline||(s._cachedOutline=s.o.split(" ")),y=0,g=v.length;y<g;){var x=v[y++];switch(x){case"m":a=v[y++]*r+n,c=v[y++]*r+i,f.moveTo(a,c);break;case"l":a=v[y++]*r+n,c=v[y++]*r+i,f.lineTo(a,c);break;case"q":l=v[y++]*r+n,u=v[y++]*r+i,h=v[y++]*r+n,d=v[y++]*r+i,f.quadraticCurveTo(h,d,l,u);break;case"b":l=v[y++]*r+n,u=v[y++]*r+i,h=v[y++]*r+n,d=v[y++]*r+i,p=v[y++]*r+n,m=v[y++]*r+i,f.bezierCurveTo(h,d,p,m,l,u)}}return{offsetX:s.ha*r,path:f}}}function bi(e){this.manager=void 0!==e?e:Rc}function Ti(e){this.manager=void 0!==e?e:Rc}function Li(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new dt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new dt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Ni(e,t,r){ae.call(this),this.type="CubeCamera";var n=new dt(90,1,e,t);n.up.set(0,-1,0),n.lookAt(new o(1,0,0)),this.add(n);var i=new dt(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new o(-1,0,0)),this.add(i);var s=new dt(90,1,e,t);s.up.set(0,0,1),s.lookAt(new o(0,1,0)),this.add(s);var a=new dt(90,1,e,t);a.up.set(0,0,-1),a.lookAt(new o(0,-1,0)),this.add(a);var c=new dt(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new o(0,0,1)),this.add(c);var l=new dt(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new o(0,0,-1)),this.add(l);var h={format:Ma,magFilter:ia,minFilter:ia};this.renderTarget=new u(r,r,h),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var r=this.renderTarget,o=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,r.activeCubeFace=0,e.render(t,n,r),r.activeCubeFace=1,e.render(t,i,r),r.activeCubeFace=2,e.render(t,s,r),r.activeCubeFace=3,e.render(t,a,r),r.activeCubeFace=4,e.render(t,c,r),r.texture.generateMipmaps=o,r.activeCubeFace=5,e.render(t,l,r),e.setRenderTarget(null)},this.clear=function(e,t,r,n){for(var i=this.renderTarget,o=0;o<6;o++)i.activeCubeFace=o,e.setRenderTarget(i),e.clear(t,r,n);e.setRenderTarget(null)}}function Di(){ae.call(this),this.type="AudioListener",this.context=Xc.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Ci(e){ae.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Si(e){Ci.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Ii(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function _i(e,t,r){this.binding=e,this.valueSize=r;var n,i=Float64Array;switch(t){case"quaternion":n=this._slerp;break;case"string":case"bool":i=Array,n=this._select;break;default:n=this._lerp}this.buffer=new i(4*r),this._mixBufferRegion=n,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function ji(e,t,r){var n=r||Oi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}function Oi(e,t,r){this.path=t,this.parsedPath=r||Oi.parseTrackName(t),this.node=Oi.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Ri(){this.uuid=uc.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,r=arguments.length;t!==r;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function zi(e,t,r){this._mixer=e,this._clip=t,this._localRoot=r||null;for(var n=t.tracks,i=n.length,o=new Array(i),s={endingStart:Ja,endingEnd:Ja},a=0;a!==i;++a){var c=n[a].createInterpolant(null);o[a]=c,c.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Za,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function ki(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Bi(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Ui(){be.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Pi(e,t,r,n){this.uuid=uc.generateUUID(),this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===n}function Fi(e,t){this.uuid=uc.generateUUID(),this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Gi(e,t,r){Fi.call(this,e,t),this.meshPerAttribute=r||1}function Hi(e,t,r){de.call(this,e,t),this.meshPerAttribute=r||1}function Qi(e,t,r,n){this.ray=new Ie(e,t),this.near=r||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Vi(e,t){return e.distance-t.distance}function Yi(e,t,r,n){if(!1!==e.visible&&(e.raycast(t,r),!0===n))for(var i=e.children,o=0,s=i.length;o<s;o++)Yi(i[o],t,r,!0)}function Wi(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function qi(e,t,r){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==r?r:0,this}function Xi(e,t,r){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==r?r:0,this}function Zi(e,t){this.min=void 0!==e?e:new r(1/0,1/0),this.max=void 0!==t?t:new r(-1/0,-1/0)}function Ji(e){ae.call(this),this.material=e,this.render=function(){}}function Ki(e,t,r,n){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==r?r:16711680,o=void 0!==n?n:1,s=0,a=this.object.geometry;a&&a.isGeometry?s=3*a.faces.length:a&&a.isBufferGeometry&&(s=a.attributes.normal.count);var c=new be,l=new Me(2*s*3,3);c.addAttribute("position",l),Ot.call(this,c,new _t({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function $i(e,t){ae.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var r=new be,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var s=i/32*Math.PI*2,a=o/32*Math.PI*2;n.push(Math.cos(s),Math.sin(s),1,Math.cos(a),Math.sin(a),1)}r.addAttribute("position",new Me(n,3));var c=new _t({fog:!1});this.cone=new Ot(r,c),this.add(this.cone),this.update()}function eo(e){var t=[];e&&e.isBone&&t.push(e);for(var r=0;r<e.children.length;r++)t.push.apply(t,eo(e.children[r]));return t}function to(e){for(var t=eo(e),r=new be,n=[],i=[],o=new W(0,0,1),s=new W(0,1,0),a=0;a<t.length;a++){var c=t[a];c.parent&&c.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),i.push(o.r,o.g,o.b),i.push(s.r,s.g,s.b))}r.addAttribute("position",new Me(n,3)),r.addAttribute("color",new Me(i,3));var l=new _t({vertexColors:ss,depthTest:!1,depthWrite:!1,transparent:!0});Ot.call(this,r,l),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function ro(e,t,r){this.light=e,this.light.updateMatrixWorld(),this.color=r;var n=new Gr(t,4,2),i=new Ce({wireframe:!0,fog:!1});Oe.call(this,n,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function no(e,t){ae.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var r=new _t({fog:!1}),n=new be;n.addAttribute("position",new de(new Float32Array(15),3)),this.line=new jt(n,r),this.add(this.line),this.update()}function io(e,t,r){ae.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;var n=new Zt(t);n.rotateY(.5*Math.PI),this.material=new Ce({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=ss);var i=n.getAttribute("position"),o=new Float32Array(3*i.count);n.addAttribute("color",new de(o,3)),this.add(new Oe(n,this.material)),this.update()}function oo(e,t,r,n){e=e||10,t=t||10,r=new W(void 0!==r?r:4473924),n=new W(void 0!==n?n:8947848);for(var i=t/2,o=e/t,s=e/2,a=[],c=[],l=0,u=0,h=-s;l<=t;l++,h+=o){a.push(-s,0,h,s,0,h),a.push(h,0,-s,h,0,s);var d=l===i?r:n;d.toArray(c,u),u+=3,d.toArray(c,u),u+=3,d.toArray(c,u),u+=3,d.toArray(c,u),u+=3}var p=new be;p.addAttribute("position",new Me(a,3)),p.addAttribute("color",new Me(c,3));var m=new _t({vertexColors:ss});Ot.call(this,p,m)}function so(e,t,r,n,i,o){e=e||10,t=t||16,r=r||8,n=n||64,i=new W(void 0!==i?i:4473924),o=new W(void 0!==o?o:8947848);var s,a,c,l,u,h,d,p=[],m=[];for(l=0;l<=t;l++)c=l/t*(2*Math.PI),s=Math.sin(c)*e,a=Math.cos(c)*e,p.push(0,0,0),p.push(s,0,a),d=1&l?i:o,m.push(d.r,d.g,d.b),m.push(d.r,d.g,d.b);for(l=0;l<=r;l++)for(d=1&l?i:o,h=e-e/r*l,u=0;u<n;u++)c=u/n*(2*Math.PI),s=Math.sin(c)*h,a=Math.cos(c)*h,p.push(s,0,a),m.push(d.r,d.g,d.b),c=(u+1)/n*(2*Math.PI),s=Math.sin(c)*h,a=Math.cos(c)*h,p.push(s,0,a),m.push(d.r,d.g,d.b);var f=new be;f.addAttribute("position",new Me(p,3)),f.addAttribute("color",new Me(m,3));var v=new _t({vertexColors:ss});Ot.call(this,f,v)}function ao(e,t,r,n){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==r?r:16776960,o=void 0!==n?n:1,s=0,a=this.object.geometry;a&&a.isGeometry?s=a.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var c=new be,l=new Me(2*s*3,3);c.addAttribute("position",l),Ot.call(this,c,new _t({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function co(e,t,r){ae.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,void 0===t&&(t=1);var n=new be;n.addAttribute("position",new Me([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new _t({fog:!1});this.lightPlane=new jt(n,i),this.add(this.lightPlane),n=new be,n.addAttribute("position",new Me([0,0,0,0,0,1],3)),this.targetLine=new jt(n,i),this.add(this.targetLine),this.update()}function lo(e){function t(e,t,n){r(e,n),r(t,n)}function r(e,t){o.push(0,0,0),s.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(o.length/3-1)}var n=new be,i=new _t({color:16777215,vertexColors:os}),o=[],s=[],a={},c=new W(16755200),l=new W(16711680),u=new W(43775),h=new W(16777215),d=new W(3355443);t("n1","n2",c),t("n2","n4",c),t("n4","n3",c),t("n3","n1",c),t("f1","f2",c),t("f2","f4",c),t("f4","f3",c),t("f3","f1",c),t("n1","f1",c),t("n2","f2",c),t("n3","f3",c),t("n4","f4",c),t("p","n1",l),t("p","n2",l),t("p","n3",l),t("p","n4",l),t("u1","u2",u),t("u2","u3",u),t("u3","u1",u),t("c","t",h),t("p","c",d),t("cn1","cn2",d),t("cn3","cn4",d),t("cf1","cf2",d),t("cf3","cf4",d),n.addAttribute("position",new Me(o,3)),n.addAttribute("color",new Me(s,3)),Ot.call(this,n,i),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function uo(e,t){this.object=e,void 0===t&&(t=16776960);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),i=new be;i.setIndex(new de(r,1)),i.addAttribute("position",new de(n,3)),Ot.call(this,i,new _t({color:t})),this.matrixAutoUpdate=!1,this.update()}function ho(e,t){this.type="Box3Helper",this.box=e;var r=void 0!==t?t:16776960,n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new be;o.setIndex(new de(n,1)),o.addAttribute("position",new Me(i,3)),Ot.call(this,o,new _t({color:r})),this.geometry.computeBoundingSphere()}function po(e,t,r){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var n=void 0!==r?r:16776960,i=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new be;o.addAttribute("position",new Me(i,3)),o.computeBoundingSphere(),jt.call(this,o,new _t({color:n}));var s=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],a=new be;a.addAttribute("position",new Me(s,3)),a.computeBoundingSphere(),this.add(new Oe(a,new Ce({color:n,opacity:.2,transparent:!0,depthWrite:!1})))}function mo(e,t,r,n,i,o){ae.call(this),void 0===n&&(n=16776960),void 0===r&&(r=1),void 0===i&&(i=.2*r),void 0===o&&(o=.2*i),void 0===Jc&&(Jc=new be,Jc.addAttribute("position",new Me([0,0,0,0,1,0],3)),Kc=new Kr(0,.5,1,5,1),Kc.translate(0,-.5,0)),this.position.copy(t),this.line=new jt(Jc,new _t({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Oe(Kc,new Ce({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,i,o)}function fo(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],n=new be;n.addAttribute("position",new Me(t,3)),n.addAttribute("color",new Me(r,3));var i=new _t({vertexColors:ss});Ot.call(this,n,i)}function vo(e,t,r,n,i,o,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new ue(e,t,r,i,o,s)}function yo(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function go(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function xo(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new kt(e,t)}function Mo(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Nt(e)}function Ao(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new kt(e,t)}function wo(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new zt(e)}function Eo(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new zt(e)}function bo(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new zt(e)}function To(e,t,r){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new o(e,t,r)}function Lo(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new de(e,t).setDynamic(!0)}function No(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new pe(e,t)}function Do(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new me(e,t)}function Co(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new fe(e,t)}function So(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new ve(e,t)}function Io(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new ye(e,t)}function _o(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new ge(e,t)}function jo(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new xe(e,t)}function Oo(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Me(e,t)}function Ro(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Ae(e,t)}function zo(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),bn.call(this,e),this.type="catmullrom",this.closed=!0}function ko(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),bn.call(this,e),this.type="catmullrom"}function Bo(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),bn.call(this,e),this.type="catmullrom"}function Uo(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new fo(e)}function Po(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new uo(e,t)}function Fo(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ot(new Zr(e.geometry),new _t({color:void 0!==t?t:16777215}))}function Go(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ot(new Gt(e.geometry),new _t({color:void 0!==t?t:16777215}))}function Ho(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new mn(e)}function Qo(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new vn(e)}function Vo(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Yo(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}function Wo(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(void 0!==n&&null!==n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}}(),Object.assign(t.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var r=this._listeners,n=r[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,r=t[e.type];if(void 0!==r){e.target=this;for(var n=r.slice(0),i=0,o=n.length;i<o;i++)n[i].call(this,e)}}}});var qo="90",Xo={LEFT:0,MIDDLE:1,RIGHT:2},Zo=0,Jo=1,Ko=2,$o=1,es=2,ts=0,rs=1,ns=2,is=0,os=1,ss=2,as=0,cs=1,ls=2,us=3,hs=4,ds=5,ps=100,ms=101,fs=102,vs=103,ys=104,gs=200,xs=201,Ms=202,As=203,ws=204,Es=205,bs=206,Ts=207,Ls=208,Ns=209,Ds=210,Cs=0,Ss=1,Is=2,_s=3,js=4,Os=5,Rs=6,zs=7,ks=0,Bs=1,Us=2,Ps=0,Fs=1,Gs=2,Hs=3,Qs=4,Vs=301,Ys=302,Ws=303,qs=304,Xs=305,Zs=306,Js=307,Ks=1e3,$s=1001,ea=1002,ta=1003,ra=1004,na=1005,ia=1006,oa=1007,sa=1008,aa=1009,ca=1010,la=1011,ua=1012,ha=1013,da=1014,pa=1015,ma=1016,fa=1017,va=1018,ya=1019,ga=1020,xa=1021,Ma=1022,Aa=1023,wa=1024,Ea=1025,ba=Aa,Ta=1026,La=1027,Na=33776,Da=33777,Ca=33778,Sa=33779,Ia=35840,_a=35841,ja=35842,Oa=35843,Ra=36196,za=37808,ka=37809,Ba=37810,Ua=37811,Pa=37812,Fa=37813,Ga=37814,Ha=37815,Qa=37816,Va=37817,Ya=37818,Wa=37819,qa=37820,Xa=37821,Za=2201,Ja=2400,Ka=0,$a=1,ec=2,tc=3e3,rc=3001,nc=3007,ic=3002,oc=3004,sc=3005,ac=3006,cc=3200,lc=3201,uc={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16).toUpperCase();return function(){var t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&r]+e[r>>8&255]+"-"+e[r>>16&15|64]+e[r>>24&255]+"-"+e[63&n|128]+e[n>>8&255]+"-"+e[n>>16&255]+e[n>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]}}(),clamp:function(e,t,r){return Math.max(t,Math.min(r,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)},lerp:function(e,t,r){return(1-r)*e+r*t},smoothstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*(3-2*e)},smootherstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*uc.DEG2RAD},radToDeg:function(e){return e*uc.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};Object.defineProperties(r.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(r.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,r=this.y,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6],this.y=n[1]*t+n[4]*r+n[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new r,t=new r;return function(r,n){return e.set(r,r),t.set(n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*r-o*n+e.x,this.y=i*n+o*r+e.y,this}}),Object.assign(n.prototype,{isMatrix4:!0,set:function(e,t,r,n,i,o,s,a,c,l,u,h,d,p,m,f){var v=this.elements;return v[0]=e,v[4]=t,v[8]=r,v[12]=n,v[1]=i,v[5]=o,v[9]=s,v[13]=a,v[2]=c,v[6]=l,v[10]=u,v[14]=h,v[3]=d,v[7]=p,v[11]=m,v[15]=f,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new n).fromArray(this.elements)},copy:function(e){var t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this},copyPosition:function(e){var t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this},extractBasis:function(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this},extractRotation:function(){var e=new o;return function(t){var r=this.elements,n=t.elements,i=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),s=1/e.setFromMatrixColumn(t,2).length();return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[4]=n[4]*o,r[5]=n[5]*o,r[6]=n[6]*o,r[8]=n[8]*s,r[9]=n[9]*s,r[10]=n[10]*s,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,r=e.x,n=e.y,i=e.z,o=Math.cos(r),s=Math.sin(r),a=Math.cos(n),c=Math.sin(n),l=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){var h=o*l,d=o*u,p=s*l,m=s*u;t[0]=a*l,t[4]=-a*u,t[8]=c,t[1]=d+p*c,t[5]=h-m*c,t[9]=-s*a,t[2]=m-h*c,t[6]=p+d*c,t[10]=o*a}else if("YXZ"===e.order){var f=a*l,v=a*u,y=c*l,g=c*u;t[0]=f+g*s,t[4]=y*s-v,t[8]=o*c,t[1]=o*u,t[5]=o*l,t[9]=-s,t[2]=v*s-y,t[6]=g+f*s,t[10]=o*a}else if("ZXY"===e.order){var f=a*l,v=a*u,y=c*l,g=c*u;t[0]=f-g*s,t[4]=-o*u,t[8]=y+v*s,t[1]=v+y*s,t[5]=o*l,t[9]=g-f*s,t[2]=-o*c,t[6]=s,t[10]=o*a}else if("ZYX"===e.order){var h=o*l,d=o*u,p=s*l,m=s*u;t[0]=a*l,t[4]=p*c-d,t[8]=h*c+m,t[1]=a*u,t[5]=m*c+h,t[9]=d*c-p,t[2]=-c,t[6]=s*a,t[10]=o*a}else if("YZX"===e.order){var x=o*a,M=o*c,A=s*a,w=s*c;t[0]=a*l,t[4]=w-x*u,t[8]=A*u+M,t[1]=u,t[5]=o*l,t[9]=-s*l,t[2]=-c*l,t[6]=M*u+A,t[10]=x-w*u}else if("XZY"===e.order){var x=o*a,M=o*c,A=s*a,w=s*c;t[0]=a*l,t[4]=-u,t[8]=c*l,t[1]=x*u+w,t[5]=o*l,t[9]=M*u-A,t[2]=A*u-M,t[6]=s*l,t[10]=w*u+x}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,r=e._x,n=e._y,i=e._z,o=e._w,s=r+r,a=n+n,c=i+i,l=r*s,u=r*a,h=r*c,d=n*a,p=n*c,m=i*c,f=o*s,v=o*a,y=o*c;return t[0]=1-(d+m),t[4]=u-y,t[8]=h+v,t[1]=u+y,t[5]=1-(l+m),t[9]=p-f,t[2]=h-v,t[6]=p+f,t[10]=1-(l+d),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new o,t=new o,r=new o;return function(n,i,o){var s=this.elements;return r.subVectors(n,i),0===r.lengthSq()&&(r.z=1),r.normalize(),e.crossVectors(o,r),0===e.lengthSq()&&(1===Math.abs(o.z)?r.x+=1e-4:r.z+=1e-4,r.normalize(),e.crossVectors(o,r)),e.normalize(),t.crossVectors(r,e),s[0]=e.x,s[4]=t.x,s[8]=r.x,s[1]=e.y,s[5]=t.y,s[9]=r.y,s[2]=e.z,s[6]=t.z,s[10]=r.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements,i=this.elements,o=r[0],s=r[4],a=r[8],c=r[12],l=r[1],u=r[5],h=r[9],d=r[13],p=r[2],m=r[6],f=r[10],v=r[14],y=r[3],g=r[7],x=r[11],M=r[15],A=n[0],w=n[4],E=n[8],b=n[12],T=n[1],L=n[5],N=n[9],D=n[13],C=n[2],S=n[6],I=n[10],_=n[14],j=n[3],O=n[7],R=n[11],z=n[15];return i[0]=o*A+s*T+a*C+c*j,i[4]=o*w+s*L+a*S+c*O,i[8]=o*E+s*N+a*I+c*R,i[12]=o*b+s*D+a*_+c*z,i[1]=l*A+u*T+h*C+d*j,i[5]=l*w+u*L+h*S+d*O,i[9]=l*E+u*N+h*I+d*R,i[13]=l*b+u*D+h*_+d*z,i[2]=p*A+m*T+f*C+v*j,i[6]=p*w+m*L+f*S+v*O,i[10]=p*E+m*N+f*I+v*R,i[14]=p*b+m*D+f*_+v*z,i[3]=y*A+g*T+x*C+M*j,i[7]=y*w+g*L+x*S+M*O,i[11]=y*E+g*N+x*I+M*R,i[15]=y*b+g*D+x*_+M*z,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new o;return function(t){for(var r=0,n=t.count;r<n;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix4(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],r=e[4],n=e[8],i=e[12],o=e[1],s=e[5],a=e[9],c=e[13],l=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+i*a*u-n*c*u-i*s*h+r*c*h+n*s*d-r*a*d)+e[7]*(+t*a*d-t*c*h+i*o*h-n*o*d+n*c*l-i*a*l)+e[11]*(+t*c*u-t*s*d-i*o*u+r*o*d+i*s*l-r*c*l)+e[15]*(-n*s*l-t*a*u+t*s*h+n*o*u-r*o*h+r*a*l)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var r=this.elements,n=e.elements,i=n[0],o=n[1],s=n[2],a=n[3],c=n[4],l=n[5],u=n[6],h=n[7],d=n[8],p=n[9],m=n[10],f=n[11],v=n[12],y=n[13],g=n[14],x=n[15],M=p*g*h-y*m*h+y*u*f-l*g*f-p*u*x+l*m*x,A=v*m*h-d*g*h-v*u*f+c*g*f+d*u*x-c*m*x,w=d*y*h-v*p*h+v*l*f-c*y*f-d*l*x+c*p*x,E=v*p*u-d*y*u-v*l*m+c*y*m+d*l*g-c*p*g,b=i*M+o*A+s*w+a*E;if(0===b){var T="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(T);return console.warn(T),this.identity()}var L=1/b;return r[0]=M*L,r[1]=(y*m*a-p*g*a-y*s*f+o*g*f+p*s*x-o*m*x)*L,r[2]=(l*g*a-y*u*a+y*s*h-o*g*h-l*s*x+o*u*x)*L,r[3]=(p*u*a-l*m*a-p*s*h+o*m*h+l*s*f-o*u*f)*L,r[4]=A*L,r[5]=(d*g*a-v*m*a+v*s*f-i*g*f-d*s*x+i*m*x)*L,r[6]=(v*u*a-c*g*a-v*s*h+i*g*h+c*s*x-i*u*x)*L,r[7]=(c*m*a-d*u*a+d*s*h-i*m*h-c*s*f+i*u*f)*L,r[8]=w*L,r[9]=(v*p*a-d*y*a-v*o*f+i*y*f+d*o*x-i*p*x)*L,r[10]=(c*y*a-v*l*a+v*o*h-i*y*h-c*o*x+i*l*x)*L,r[11]=(d*l*a-c*p*a-d*o*h+i*p*h+c*o*f-i*l*f)*L,r[12]=E*L,r[13]=(d*y*s-v*p*s+v*o*m-i*y*m-d*o*g+i*p*g)*L,r[14]=(v*l*s-c*y*s-v*o*u+i*y*u+c*o*g-i*l*g)*L,r[15]=(c*p*s-d*l*s+d*o*u-i*p*u-c*o*m+i*l*m)*L,this},scale:function(e){var t=this.elements,r=e.x,n=e.y,i=e.z;return t[0]*=r,t[4]*=n,t[8]*=i,t[1]*=r,t[5]*=n,t[9]*=i,t[2]*=r,t[6]*=n,t[10]*=i,t[3]*=r,t[7]*=n,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))},makeTranslation:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=1-r,o=e.x,s=e.y,a=e.z,c=i*o,l=i*s;return this.set(c*o+r,c*s-n*a,c*a+n*s,0,c*s+n*a,l*s+r,l*a-n*o,0,c*a-n*s,l*a+n*o,i*a*a+r,0,0,0,0,1),this},makeScale:function(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(e,t,r){return this.set(1,t,r,0,e,1,r,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,r){return this.makeRotationFromQuaternion(t),this.scale(r),this.setPosition(e),this},decompose:function(){var e=new o,t=new n;return function(r,n,i){var o=this.elements,s=e.set(o[0],o[1],o[2]).length(),a=e.set(o[4],o[5],o[6]).length(),c=e.set(o[8],o[9],o[10]).length();this.determinant()<0&&(s=-s),r.x=o[12],r.y=o[13],r.z=o[14],t.copy(this);var l=1/s,u=1/a,h=1/c;return t.elements[0]*=l,t.elements[1]*=l,t.elements[2]*=l,t.elements[4]*=u,t.elements[5]*=u,t.elements[6]*=u,t.elements[8]*=h,t.elements[9]*=h,t.elements[10]*=h,n.setFromRotationMatrix(t),i.x=s,i.y=a,i.z=c,this}}(),makePerspective:function(e,t,r,n,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=this.elements,a=2*i/(t-e),c=2*i/(r-n),l=(t+e)/(t-e),u=(r+n)/(r-n),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return s[0]=a,s[4]=0,s[8]=l,s[12]=0,s[1]=0,s[5]=c,s[9]=u,s[13]=0,s[2]=0,s[6]=0,s[10]=h,s[14]=d,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(e,t,r,n,i,o){var s=this.elements,a=1/(t-e),c=1/(r-n),l=1/(o-i),u=(t+e)*a,h=(r+n)*c,d=(o+i)*l;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-u,s[1]=0,s[5]=2*c,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=-2*l,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(e){for(var t=this.elements,r=e.elements,n=0;n<16;n++)if(t[n]!==r[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<16;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}),Object.assign(i,{slerp:function(e,t,r,n){return r.copy(e).slerp(t,n)},slerpFlat:function(e,t,r,n,i,o,s){var a=r[n+0],c=r[n+1],l=r[n+2],u=r[n+3],h=i[o+0],d=i[o+1],p=i[o+2],m=i[o+3];if(u!==m||a!==h||c!==d||l!==p){var f=1-s,v=a*h+c*d+l*p+u*m,y=v>=0?1:-1,g=1-v*v;if(g>Number.EPSILON){var x=Math.sqrt(g),M=Math.atan2(x,v*y);f=Math.sin(f*M)/x,s=Math.sin(s*M)/x}var A=s*y;if(a=a*f+h*A,c=c*f+d*A,l=l*f+p*A,u=u*f+m*A,f===1-s){var w=1/Math.sqrt(a*a+c*c+l*l+u*u);a*=w,c*=w,l*=w,u*=w}}e[t]=a,e[t+1]=c,e[t+2]=l,e[t+3]=u}}),Object.defineProperties(i.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(i.prototype,{set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=e._x,n=e._y,i=e._z,o=e.order,s=Math.cos,a=Math.sin,c=s(r/2),l=s(n/2),u=s(i/2),h=a(r/2),d=a(n/2),p=a(i/2);return"XYZ"===o?(this._x=h*l*u+c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u-h*d*p):"YXZ"===o?(this._x=h*l*u+c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u+h*d*p):"ZXY"===o?(this._x=h*l*u-c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u-h*d*p):"ZYX"===o?(this._x=h*l*u-c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u+h*d*p):"YZX"===o?(this._x=h*l*u+c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u-h*d*p):"XZY"===o&&(this._x=h*l*u-c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u+h*d*p),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var r=t/2,n=Math.sin(r);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(r),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,r=e.elements,n=r[0],i=r[4],o=r[8],s=r[1],a=r[5],c=r[9],l=r[2],u=r[6],h=r[10],d=n+a+h;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(u-c)*t,this._y=(o-l)*t,this._z=(s-i)*t):n>a&&n>h?(t=2*Math.sqrt(1+n-a-h),this._w=(u-c)/t,this._x=.25*t,this._y=(i+s)/t,this._z=(o+l)/t):a>h?(t=2*Math.sqrt(1+a-n-h),this._w=(o-l)/t,this._x=(i+s)/t,this._y=.25*t,this._z=(c+u)/t):(t=2*Math.sqrt(1+h-n-a),this._w=(s-i)/t,this._x=(o+l)/t,this._y=(c+u)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new o;return function(r,n){return void 0===t&&(t=new o),e=r.dot(n)+1,e<1e-6?(e=0,Math.abs(r.x)>Math.abs(r.z)?t.set(-r.y,r.x,0):t.set(0,-r.z,r.y)):t.crossVectors(r,n),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var r=e._x,n=e._y,i=e._z,o=e._w,s=t._x,a=t._y,c=t._z,l=t._w;return this._x=r*l+o*s+n*c-i*a,this._y=n*l+o*a+i*s-r*c,this._z=i*l+o*c+r*a-n*s,this._w=o*l-r*s-n*a-i*c,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this._x,n=this._y,i=this._z,o=this._w,s=o*e._w+r*e._x+n*e._y+i*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=r,this._y=n,this._z=i,this;var a=Math.sqrt(1-s*s);if(Math.abs(a)<.001)return this._w=.5*(o+this._w),this._x=.5*(r+this._x),this._y=.5*(n+this._y),this._z=.5*(i+this._z),this;var c=Math.atan2(a,s),l=Math.sin((1-t)*c)/a,u=Math.sin(t*c)/a;return this._w=o*l+this._w*u,this._x=r*l+this._x*u,this._y=n*l+this._y*u,this._z=i*l+this._z*u,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(o.prototype,{isVector3:!0,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new i;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new i;return function(t,r){return this.applyQuaternion(e.setFromAxisAngle(t,r))}}(),applyMatrix3:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6]*n,this.y=i[1]*t+i[4]*r+i[7]*n,this.z=i[2]*t+i[5]*r+i[8]*n,this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements,o=1/(i[3]*t+i[7]*r+i[11]*n+i[15]);return this.x=(i[0]*t+i[4]*r+i[8]*n+i[12])*o,this.y=(i[1]*t+i[5]*r+i[9]*n+i[13])*o,this.z=(i[2]*t+i[6]*r+i[10]*n+i[14])*o,this},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z,i=e.x,o=e.y,s=e.z,a=e.w,c=a*t+o*n-s*r,l=a*r+s*t-i*n,u=a*n+i*r-o*t,h=-i*t-o*r-s*n;return this.x=c*a+h*-i+l*-s-u*-o,this.y=l*a+h*-o+u*-i-c*-s,this.z=u*a+h*-s+c*-o-l*-i,this},project:function(){var e=new n;return function(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new n;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[4]*r+i[8]*n,this.y=i[1]*t+i[5]*r+i[9]*n,this.z=i[2]*t+i[6]*r+i[10]*n,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new o,t=new o;return function(r,n){return e.set(r,r,r),t.set(n,n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var r=e.x,n=e.y,i=e.z,o=t.x,s=t.y,a=t.z;return this.x=n*a-i*s,this.y=i*o-r*a,this.z=r*s-n*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new o;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new o;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(uc.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return t*t+r*r+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=n,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(s.prototype,{isMatrix3:!0,set:function(e,t,r,n,i,o,s,a,c){var l=this.elements;return l[0]=e,l[1]=n,l[2]=s,l[3]=t,l[4]=i,l[5]=a,l[6]=r,l[7]=o,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new o;return function(t){for(var r=0,n=t.count;r<n;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix3(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements,i=this.elements,o=r[0],s=r[3],a=r[6],c=r[1],l=r[4],u=r[7],h=r[2],d=r[5],p=r[8],m=n[0],f=n[3],v=n[6],y=n[1],g=n[4],x=n[7],M=n[2],A=n[5],w=n[8];return i[0]=o*m+s*y+a*M,i[3]=o*f+s*g+a*A,i[6]=o*v+s*x+a*w,i[1]=c*m+l*y+u*M,i[4]=c*f+l*g+u*A,i[7]=c*v+l*x+u*w,i[2]=h*m+d*y+p*M,i[5]=h*f+d*g+p*A,i[8]=h*v+d*x+p*w,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],s=e[5],a=e[6],c=e[7],l=e[8];return t*o*l-t*s*c-r*i*l+r*s*a+n*i*c-n*o*a},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var r=e.elements,n=this.elements,i=r[0],o=r[1],s=r[2],a=r[3],c=r[4],l=r[5],u=r[6],h=r[7],d=r[8],p=d*c-l*h,m=l*u-d*a,f=h*a-c*u,v=i*p+o*m+s*f;if(0===v){var y="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(y);return console.warn(y),this.identity()}var g=1/v;return n[0]=p*g,n[1]=(s*h-d*o)*g,n[2]=(l*o-s*c)*g,n[3]=m*g,n[4]=(d*i-s*u)*g,n[5]=(s*a-l*i)*g,n[6]=f*g,n[7]=(o*u-h*i)*g,n[8]=(c*i-o*a)*g,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,r,n,i,o,s){var a=Math.cos(i),c=Math.sin(i);this.set(r*a,r*c,-r*(a*o+c*s)+o+e,-n*c,n*a,-n*(-c*o+a*s)+s+t,0,0,1)},scale:function(e,t){var r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this},rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=this.elements,i=n[0],o=n[3],s=n[6],a=n[1],c=n[4],l=n[7];return n[0]=t*i+r*a,n[3]=t*o+r*c,n[6]=t*s+r*l,n[1]=-r*i+t*a,n[4]=-r*o+t*c,n[7]=-r*s+t*l,this},translate:function(e,t){var r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this},equals:function(e){for(var t=this.elements,r=e.elements,n=0;n<9;n++)if(t[n]!==r[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<9;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}});var hc=0;a.DEFAULT_IMAGE=void 0,a.DEFAULT_MAPPING=300,a.prototype=Object.assign(Object.create(t.prototype),{constructor:a,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var n=this.image;void 0===n.uuid&&(n.uuid=uc.generateUUID()),t||void 0!==e.images[n.uuid]||(e.images[n.uuid]={uuid:n.uuid,url:function(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),t.width=e.width,t.height=e.height;var r=t.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}(n)}),r.image=n.uuid}return t||(e.textures[this.uuid]=r),r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300===this.mapping){if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ks:e.x=e.x-Math.floor(e.x);break;case $s:e.x=e.x<0?0:1;break;case ea:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Ks:e.y=e.y-Math.floor(e.y);break;case $s:e.y=e.y<0?0:1;break;case ea:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}}),Object.defineProperty(a.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(c.prototype,{isVector4:!0,set:function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*n+o[12]*i,this.y=o[1]*t+o[5]*r+o[9]*n+o[13]*i,this.z=o[2]*t+o[6]*r+o[10]*n+o[14]*i,this.w=o[3]*t+o[7]*r+o[11]*n+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,r,n,i,o=e.elements,s=o[0],a=o[4],c=o[8],l=o[1],u=o[5],h=o[9],d=o[2],p=o[6],m=o[10];if(Math.abs(a-l)<.01&&Math.abs(c-d)<.01&&Math.abs(h-p)<.01){if(Math.abs(a+l)<.1&&Math.abs(c+d)<.1&&Math.abs(h+p)<.1&&Math.abs(s+u+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var f=(s+1)/2,v=(u+1)/2,y=(m+1)/2,g=(a+l)/4,x=(c+d)/4,M=(h+p)/4;return f>v&&f>y?f<.01?(r=0,n=.707106781,i=.707106781):(r=Math.sqrt(f),n=g/r,i=x/r):v>y?v<.01?(r=.707106781,n=0,i=.707106781):(n=Math.sqrt(v),r=g/n,i=M/n):y<.01?(r=.707106781,n=.707106781,i=0):(i=Math.sqrt(y),r=x/i,n=M/i),this.set(r,n,i,t),this}var A=Math.sqrt((p-h)*(p-h)+(c-d)*(c-d)+(l-a)*(l-a));return Math.abs(A)<.001&&(A=1),this.x=(p-h)/A,this.y=(c-d)/A,this.z=(l-a)/A,this.w=Math.acos((s+u+m-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(r,n){return void 0===e&&(e=new c,t=new c),e.set(r,r,r,r),t.set(n,n,n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),l.prototype=Object.assign(Object.create(t.prototype),{constructor:l,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),u.prototype=Object.create(l.prototype),u.prototype.constructor=u,u.prototype.isWebGLRenderTargetCube=!0,h.prototype=Object.create(a.prototype),h.prototype.constructor=h,h.prototype.isDataTexture=!0,d.prototype=Object.create(a.prototype),d.prototype.constructor=d,d.prototype.isCubeTexture=!0,Object.defineProperty(d.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var dc=new a,pc=new d,mc=[],fc=[],vc=new Float32Array(16),yc=new Float32Array(9);H.prototype.setValue=function(e,t){for(var r=this.seq,n=0,i=r.length;n!==i;++n){var o=r[n];o.setValue(e,t[o.id])}};var gc=/([\w\d_]+)(\])?(\[|\.)?/g;Y.prototype.setValue=function(e,t,r){var n=this.map[t];void 0!==n&&n.setValue(e,r,this.renderer)},Y.prototype.setOptional=function(e,t,r){var n=t[r];void 0!==n&&this.setValue(e,r,n)},Y.upload=function(e,t,r,n){for(var i=0,o=t.length;i!==o;++i){var s=t[i],a=r[s.id];!1!==a.needsUpdate&&s.setValue(e,a.value,n)}},Y.seqWithValue=function(e,t){for(var r=[],n=0,i=e.length;n!==i;++n){var o=e[n];o.id in t&&r.push(o)}return r};var xc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(W.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,r){return this.r=e,this.g=t,this.b=r,this},setHSL:function(){function e(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+6*(t-e)*(2/3-r):e}return function(t,r,n){if(t=uc.euclideanModulo(t,1),r=uc.clamp(r,0,1),n=uc.clamp(n,0,1),0===r)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+r):n+r-n*r,o=2*n-i;this.r=e(o,i,t+1/3),this.g=e(o,i,t),this.b=e(o,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n,i=r[1],o=r[2];switch(i){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,t(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,t(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var s=parseFloat(n[1])/360,a=parseInt(n[2],10)/100,c=parseInt(n[3],10)/100;return t(n[5]),this.setHSL(s,a,c)}}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(e)){var l=r[1],u=l.length;if(3===u)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}if(e&&e.length>0){var l=xc[e];void 0!==l?this.setHex(l):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this},convertGammaToLinear:function(){var e=this.r,t=this.g,r=this.b;return this.r=e*e,this.g=t*t,this.b=r*r,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,r,n=e||{h:0,s:0,l:0},i=this.r,o=this.g,s=this.b,a=Math.max(i,o,s),c=Math.min(i,o,s),l=(c+a)/2;if(c===a)t=0,r=0;else{var u=a-c;switch(r=l<=.5?u/(a+c):u/(2-a-c),a){case i:t=(o-s)/u+(o<s?6:0);break;case o:t=(s-i)/u+2;break;case s:t=(i-o)/u+4}t/=6}return n.h=t,n.s=r,n.l=l,n},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,r){var n=this.getHSL();return n.h+=e,n.s+=t,n.l+=r,this.setHSL(n.h,n.s,n.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var Mc={common:{diffuse:{value:new W(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new s},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new r(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new W(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new W(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new s}}},Ac={merge:function(e){for(var t={},r=0;r<e.length;r++){var n=this.clone(e[r]);for(var i in n)t[i]=n[i]}return t},clone:function(e){var t={};for(var r in e){t[r]={};for(var n in e[r]){var i=e[r][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[r][n]=i.clone():Array.isArray(i)?t[r][n]=i.slice():t[r][n]=i}}return t}},wc={alphamap_fragment:"#ifdef USE_ALPHAMAP\r\n\r\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\r\n\r\n#endif\r\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\r\n\r\n\tuniform sampler2D alphaMap;\r\n\r\n#endif\r\n",alphatest_fragment:"#ifdef ALPHATEST\r\n\r\n\tif ( diffuseColor.a < ALPHATEST ) discard;\r\n\r\n#endif\r\n",aomap_fragment:"#ifdef USE_AOMAP\r\n\r\n\t// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\r\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\r\n\r\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\r\n\r\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\r\n\r\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\r\n\r\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\r\n\r\n\t#endif\r\n\r\n#endif\r\n",aomap_pars_fragment:"#ifdef USE_AOMAP\r\n\r\n\tuniform sampler2D aoMap;\r\n\tuniform float aoMapIntensity;\r\n\r\n#endif",begin_vertex:"\r\nvec3 transformed = vec3( position );\r\n",beginnormal_vertex:"\r\nvec3 objectNormal = vec3( normal );\r\n",bsdfs:'float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\r\n\r\n\tif( decayExponent > 0.0 ) {\r\n\r\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\r\n\r\n\t\t// based upon Frostbite 3 Moving to Physically-based Rendering\r\n\t\t// page 32, equation 26: E[window1]\r\n\t\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n\t\t// this is intended to be used on spot and point lights who are represented as luminous intensity\r\n\t\t// but who must be converted to luminous irradiance for surface lighting calculation\r\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\r\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\r\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\r\n\r\n#else\r\n\r\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\r\n\r\n#endif\r\n\r\n\t}\r\n\r\n\treturn 1.0;\r\n\r\n}\r\n\r\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\r\n\r\n\treturn RECIPROCAL_PI * diffuseColor;\r\n\r\n} // validated\r\n\r\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\r\n\r\n\t// Original approximation by Christophe Schlick \'94\r\n\t// float fresnel = pow( 1.0 - dotLH, 5.0 );\r\n\r\n\t// Optimized variant (presented by Epic at SIGGRAPH \'13)\r\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\r\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\r\n\r\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\r\n\r\n} // validated\r\n\r\n// Microfacet Models for Refraction through Rough Surfaces - equation (34)\r\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\r\n// alpha is "roughness squared" in Disney’s reparameterization\r\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\r\n\r\n\t// geometry term (normalized) = G(l)⋅G(v) / 4(n⋅l)(n⋅v)\r\n\t// also see #12151\r\n\r\n\tfloat a2 = pow2( alpha );\r\n\r\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\r\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\r\n\r\n\treturn 1.0 / ( gl * gv );\r\n\r\n} // validated\r\n\r\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\r\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\r\n\r\n\tfloat a2 = pow2( alpha );\r\n\r\n\t// dotNL and dotNV are explicitly swapped. This is not a mistake.\r\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\r\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\r\n\r\n\treturn 0.5 / max( gv + gl, EPSILON );\r\n\r\n}\r\n\r\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\r\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\r\n// alpha is "roughness squared" in Disney’s reparameterization\r\nfloat D_GGX( const in float alpha, const in float dotNH ) {\r\n\r\n\tfloat a2 = pow2( alpha );\r\n\r\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\r\n\r\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\r\n\r\n}\r\n\r\n// GGX Distribution, Schlick Fresnel, GGX-Smith Visibility\r\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\r\n\r\n\tfloat alpha = pow2( roughness ); // UE4\'s roughness\r\n\r\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\r\n\r\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\r\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\r\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\r\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\r\n\r\n\tvec3 F = F_Schlick( specularColor, dotLH );\r\n\r\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\r\n\r\n\tfloat D = D_GGX( alpha, dotNH );\r\n\r\n\treturn F * ( G * D );\r\n\r\n} // validated\r\n\r\n// Rect Area Light\r\n\r\n// Real-Time Polygonal-Light Shading with Linearly Transformed Cosines\r\n// by Eric Heitz, Jonathan Dupuy, Stephen Hill and David Neubelt\r\n// code: https://github.com/selfshadow/ltc_code/\r\n\r\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\r\n\r\n\tconst float LUT_SIZE  = 64.0;\r\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\r\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\r\n\r\n\tfloat dotNV = saturate( dot( N, V ) );\r\n\r\n\t// texture parameterized by sqrt( GGX alpha ) and sqrt( 1 - cos( theta ) )\r\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\r\n\r\n\tuv = uv * LUT_SCALE + LUT_BIAS;\r\n\r\n\treturn uv;\r\n\r\n}\r\n\r\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\r\n\r\n\t// Real-Time Area Lighting: a Journey from Research to Production (p.102)\r\n\t// An approximation of the form factor of a horizon-clipped rectangle.\r\n\r\n\tfloat l = length( f );\r\n\r\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\r\n\r\n}\r\n\r\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\r\n\r\n\tfloat x = dot( v1, v2 );\r\n\r\n\tfloat y = abs( x );\r\n\r\n\t// rational polynomial approximation to theta / sin( theta ) / 2PI\r\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\r\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\r\n\tfloat v = a / b;\r\n\r\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\r\n\r\n\treturn cross( v1, v2 ) * theta_sintheta;\r\n\r\n}\r\n\r\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\r\n\r\n\t// bail if point is on back side of plane of light\r\n\t// assumes ccw winding order of light vertices\r\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\r\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\r\n\tvec3 lightNormal = cross( v1, v2 );\r\n\r\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\r\n\r\n\t// construct orthonormal basis around N\r\n\tvec3 T1, T2;\r\n\tT1 = normalize( V - N * dot( V, N ) );\r\n\tT2 = - cross( N, T1 ); // negated from paper; possibly due to a different handedness of world coordinate system\r\n\r\n\t// compute transform\r\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\r\n\r\n\t// transform rect\r\n\tvec3 coords[ 4 ];\r\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\r\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\r\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\r\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\r\n\r\n\t// project rect onto sphere\r\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\r\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\r\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\r\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\r\n\r\n\t// calculate vector form factor\r\n\tvec3 vectorFormFactor = vec3( 0.0 );\r\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\r\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\r\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\r\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\r\n\r\n\t// adjust for horizon clipping\r\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\r\n\r\n\r\n\r\n\treturn vec3( result );\r\n\r\n}\r\n\r\n// End Rect Area Light\r\n\r\n// ref: https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\r\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\r\n\r\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\r\n\r\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\r\n\r\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\r\n\r\n\tvec4 r = roughness * c0 + c1;\r\n\r\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\r\n\r\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\r\n\r\n\treturn specularColor * AB.x + AB.y;\r\n\r\n} // validated\r\n\r\n\r\nfloat G_BlinnPhong_Implicit( ) {\r\n\r\n\t// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\r\n\treturn 0.25;\r\n\r\n}\r\n\r\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\r\n\r\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\r\n\r\n}\r\n\r\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\r\n\r\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\r\n\r\n\t//float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\r\n\t//float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\r\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\r\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\r\n\r\n\tvec3 F = F_Schlick( specularColor, dotLH );\r\n\r\n\tfloat G = G_BlinnPhong_Implicit( );\r\n\r\n\tfloat D = D_BlinnPhong( shininess, dotNH );\r\n\r\n\treturn F * ( G * D );\r\n\r\n} // validated\r\n\r\n// source: http://simonstechblog.blogspot.ca/2011/12/microfacet-brdf.html\r\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\r\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\r\n}\r\n\r\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\r\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\r\n}\r\n',bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\r\n\r\n\tuniform sampler2D bumpMap;\r\n\tuniform float bumpScale;\r\n\r\n\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\r\n\t// http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\r\n\r\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\r\n\r\n\tvec2 dHdxy_fwd() {\r\n\r\n\t\tvec2 dSTdx = dFdx( vUv );\r\n\t\tvec2 dSTdy = dFdy( vUv );\r\n\r\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\r\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\r\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\r\n\r\n\t\treturn vec2( dBx, dBy );\r\n\r\n\t}\r\n\r\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\r\n\r\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\r\n\r\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\r\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\r\n\t\tvec3 vN = surf_norm;\t\t// normalized\r\n\r\n\t\tvec3 R1 = cross( vSigmaY, vN );\r\n\t\tvec3 R2 = cross( vN, vSigmaX );\r\n\r\n\t\tfloat fDet = dot( vSigmaX, R1 );\r\n\r\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\r\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\r\n\r\n\t}\r\n\r\n#endif\r\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\r\n\r\n\tvec4 plane;\r\n\r\n\t#pragma unroll_loop\r\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\r\n\r\n\t\tplane = clippingPlanes[ i ];\r\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\r\n\r\n\t}\r\n\r\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\r\n\r\n\t\tbool clipped = true;\r\n\r\n\t\t#pragma unroll_loop\r\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\r\n\r\n\t\t\tplane = clippingPlanes[ i ];\r\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\r\n\r\n\t\t}\r\n\r\n\t\tif ( clipped ) discard;\r\n\r\n\t#endif\r\n\r\n#endif\r\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\r\n\r\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\r\n\t\tvarying vec3 vViewPosition;\r\n\t#endif\r\n\r\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\r\n\r\n#endif\r\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\r\n\tvarying vec3 vViewPosition;\r\n#endif\r\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\r\n\tvViewPosition = - mvPosition.xyz;\r\n#endif\r\n\r\n",color_fragment:"#ifdef USE_COLOR\r\n\r\n\tdiffuseColor.rgb *= vColor;\r\n\r\n#endif",color_pars_fragment:"#ifdef USE_COLOR\r\n\r\n\tvarying vec3 vColor;\r\n\r\n#endif\r\n",color_pars_vertex:"#ifdef USE_COLOR\r\n\r\n\tvarying vec3 vColor;\r\n\r\n#endif",color_vertex:"#ifdef USE_COLOR\r\n\r\n\tvColor.xyz = color.xyz;\r\n\r\n#endif",common:"#define PI 3.14159265359\r\n#define PI2 6.28318530718\r\n#define PI_HALF 1.5707963267949\r\n#define RECIPROCAL_PI 0.31830988618\r\n#define RECIPROCAL_PI2 0.15915494\r\n#define LOG2 1.442695\r\n#define EPSILON 1e-6\r\n\r\n#define saturate(a) clamp( a, 0.0, 1.0 )\r\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\r\n\r\nfloat pow2( const in float x ) { return x*x; }\r\nfloat pow3( const in float x ) { return x*x*x; }\r\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\r\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\r\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\r\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\r\nhighp float rand( const in vec2 uv ) {\r\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\r\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\r\n\treturn fract(sin(sn) * c);\r\n}\r\n\r\nstruct IncidentLight {\r\n\tvec3 color;\r\n\tvec3 direction;\r\n\tbool visible;\r\n};\r\n\r\nstruct ReflectedLight {\r\n\tvec3 directDiffuse;\r\n\tvec3 directSpecular;\r\n\tvec3 indirectDiffuse;\r\n\tvec3 indirectSpecular;\r\n};\r\n\r\nstruct GeometricContext {\r\n\tvec3 position;\r\n\tvec3 normal;\r\n\tvec3 viewDir;\r\n};\r\n\r\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\r\n\r\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\r\n\r\n}\r\n\r\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\r\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\r\n\r\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\r\n\r\n}\r\n\r\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\r\n\r\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\r\n\r\n\treturn - distance * planeNormal + point;\r\n\r\n}\r\n\r\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\r\n\r\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\r\n\r\n}\r\n\r\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\r\n\r\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\r\n\r\n}\r\n\r\nmat3 transposeMat3( const in mat3 m ) {\r\n\r\n\tmat3 tmp;\r\n\r\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\r\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\r\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\r\n\r\n\treturn tmp;\r\n\r\n}\r\n\r\n// https://en.wikipedia.org/wiki/Relative_luminance\r\nfloat linearToRelativeLuminance( const in vec3 color ) {\r\n\r\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\r\n\r\n\treturn dot( weights, color.rgb );\r\n\r\n}\r\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\r\n\r\n#define cubeUV_textureSize (1024.0)\r\n\r\nint getFaceFromDirection(vec3 direction) {\r\n\tvec3 absDirection = abs(direction);\r\n\tint face = -1;\r\n\tif( absDirection.x > absDirection.z ) {\r\n\t\tif(absDirection.x > absDirection.y )\r\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\r\n\t\telse\r\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\r\n\t}\r\n\telse {\r\n\t\tif(absDirection.z > absDirection.y )\r\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\r\n\t\telse\r\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\r\n\t}\r\n\treturn face;\r\n}\r\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\r\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\r\n\r\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\r\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\r\n\tfloat dxRoughness = dFdx(roughness);\r\n\tfloat dyRoughness = dFdy(roughness);\r\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\r\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\r\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\r\n\t// Clamp the value to the max mip level counts. hard coded to 6 mips\r\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\r\n\tfloat mipLevel = 0.5 * log2(d);\r\n\treturn vec2(floor(mipLevel), fract(mipLevel));\r\n}\r\n\r\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\r\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\r\n\r\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\r\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\r\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\r\n\r\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\r\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\r\n\t// float powScale = exp2(roughnessLevel + mipLevel);\r\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\r\n\t// float scale =  1.0 / exp2(roughnessLevel + 2.0 + mipLevel);\r\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\r\n\t// float mipOffset = 0.75*(1.0 - 1.0/exp2(mipLevel))/exp2(roughnessLevel);\r\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\r\n\r\n\tbool bRes = mipLevel == 0.0;\r\n\tscale =  bRes && (scale < a) ? a : scale;\r\n\r\n\tvec3 r;\r\n\tvec2 offset;\r\n\tint face = getFaceFromDirection(direction);\r\n\r\n\tfloat rcpPowScale = 1.0 / powScale;\r\n\r\n\tif( face == 0) {\r\n\t\tr = vec3(direction.x, -direction.z, direction.y);\r\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\r\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\r\n\t}\r\n\telse if( face == 1) {\r\n\t\tr = vec3(direction.y, direction.x, direction.z);\r\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\r\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\r\n\t}\r\n\telse if( face == 2) {\r\n\t\tr = vec3(direction.z, direction.x, direction.y);\r\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\r\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\r\n\t}\r\n\telse if( face == 3) {\r\n\t\tr = vec3(direction.x, direction.z, direction.y);\r\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\r\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\r\n\t}\r\n\telse if( face == 4) {\r\n\t\tr = vec3(direction.y, direction.x, -direction.z);\r\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\r\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\r\n\t}\r\n\telse {\r\n\t\tr = vec3(direction.z, -direction.x, direction.y);\r\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\r\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\r\n\t}\r\n\tr = normalize(r);\r\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\r\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\r\n\tvec2 base = offset + vec2( texelOffset );\r\n\treturn base + s * ( scale - 2.0 * texelOffset );\r\n}\r\n\r\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\r\n\r\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\r\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\r\n\tfloat r1 = floor(roughnessVal);\r\n\tfloat r2 = r1 + 1.0;\r\n\tfloat t = fract(roughnessVal);\r\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\r\n\tfloat s = mipInfo.y;\r\n\tfloat level0 = mipInfo.x;\r\n\tfloat level1 = level0 + 1.0;\r\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\r\n\r\n\t// round to nearest mipmap if we are not interpolating.\r\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\r\n\r\n\t// Tri linear interpolation.\r\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\r\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\r\n\r\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\r\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\r\n\r\n\tvec4 result = mix(color10, color20, t);\r\n\r\n\treturn vec4(result.rgb, 1.0);\r\n}\r\n\r\n#endif\r\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\r\n\r\n#ifdef FLIP_SIDED\r\n\r\n\ttransformedNormal = - transformedNormal;\r\n\r\n#endif\r\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\r\n\r\n\tuniform sampler2D displacementMap;\r\n\tuniform float displacementScale;\r\n\tuniform float displacementBias;\r\n\r\n#endif\r\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\r\n\r\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\r\n\r\n#endif\r\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\r\n\r\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\r\n\r\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\r\n\r\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\r\n\r\n#endif\r\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\r\n\r\n\tuniform sampler2D emissiveMap;\r\n\r\n#endif\r\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\r\n",encodings_pars_fragment:"// For a discussion of what this is, please read this: http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/\r\n\r\nvec4 LinearToLinear( in vec4 value ) {\r\n\treturn value;\r\n}\r\n\r\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\r\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\r\n}\r\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\r\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\r\n}\r\n\r\nvec4 sRGBToLinear( in vec4 value ) {\r\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\r\n}\r\nvec4 LinearTosRGB( in vec4 value ) {\r\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\r\n}\r\n\r\nvec4 RGBEToLinear( in vec4 value ) {\r\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\r\n}\r\nvec4 LinearToRGBE( in vec4 value ) {\r\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\r\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\r\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\r\n//  return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );\r\n}\r\n\r\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\r\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\r\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\r\n}\r\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\r\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\r\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\r\n\tM            = ceil( M * 255.0 ) / 255.0;\r\n\treturn vec4( value.rgb / ( M * maxRange ), M );\r\n}\r\n\r\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\r\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\r\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\r\n}\r\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\r\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\r\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\r\n\tD            = min( floor( D ) / 255.0, 1.0 );\r\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\r\n}\r\n\r\n// LogLuv reference: http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html\r\n\r\n// M matrix, for encoding\r\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\r\nvec4 LinearToLogLuv( in vec4 value )  {\r\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\r\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\r\n\tvec4 vResult;\r\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\r\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\r\n\tvResult.w = fract(Le);\r\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\r\n\treturn vResult;\r\n}\r\n\r\n// Inverse M matrix, for decoding\r\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\r\nvec4 LogLuvToLinear( in vec4 value ) {\r\n\tfloat Le = value.z * 255.0 + value.w;\r\n\tvec3 Xp_Y_XYZp;\r\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\r\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\r\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\r\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\r\n\treturn vec4( max(vRGB, 0.0), 1.0 );\r\n}\r\n",envmap_fragment:"#ifdef USE_ENVMAP\r\n\r\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\r\n\r\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\r\n\r\n\t\t// Transforming Normal Vectors with the Inverse Transformation\r\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\r\n\r\n\t\t#ifdef ENVMAP_MODE_REFLECTION\r\n\r\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\r\n\r\n\t\t#else\r\n\r\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\r\n\r\n\t\t#endif\r\n\r\n\t#else\r\n\r\n\t\tvec3 reflectVec = vReflect;\r\n\r\n\t#endif\r\n\r\n\t#ifdef ENVMAP_TYPE_CUBE\r\n\r\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\r\n\r\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\r\n\r\n\t\tvec2 sampleUV;\r\n\r\n\t\treflectVec = normalize( reflectVec );\r\n\r\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\r\n\r\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\r\n\r\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\r\n\r\n\t#elif defined( ENVMAP_TYPE_SPHERE )\r\n\r\n\t\treflectVec = normalize( reflectVec );\r\n\r\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\r\n\r\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\r\n\r\n\t#else\r\n\r\n\t\tvec4 envColor = vec4( 0.0 );\r\n\r\n\t#endif\r\n\r\n\tenvColor = envMapTexelToLinear( envColor );\r\n\r\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\r\n\r\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\r\n\r\n\t#elif defined( ENVMAP_BLENDING_MIX )\r\n\r\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\r\n\r\n\t#elif defined( ENVMAP_BLENDING_ADD )\r\n\r\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\r\n\r\n\t#endif\r\n\r\n#endif\r\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\r\n\tuniform float reflectivity;\r\n\tuniform float envMapIntensity;\r\n#endif\r\n\r\n#ifdef USE_ENVMAP\r\n\r\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\r\n\t\tvarying vec3 vWorldPosition;\r\n\t#endif\r\n\r\n\t#ifdef ENVMAP_TYPE_CUBE\r\n\t\tuniform samplerCube envMap;\r\n\t#else\r\n\t\tuniform sampler2D envMap;\r\n\t#endif\r\n\tuniform float flipEnvMap;\r\n\r\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\r\n\t\tuniform float refractionRatio;\r\n\t#else\r\n\t\tvarying vec3 vReflect;\r\n\t#endif\r\n\r\n#endif\r\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\r\n\r\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\r\n\t\tvarying vec3 vWorldPosition;\r\n\r\n\t#else\r\n\r\n\t\tvarying vec3 vReflect;\r\n\t\tuniform float refractionRatio;\r\n\r\n\t#endif\r\n\r\n#endif\r\n",envmap_vertex:"#ifdef USE_ENVMAP\r\n\r\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\r\n\r\n\t\tvWorldPosition = worldPosition.xyz;\r\n\r\n\t#else\r\n\r\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\r\n\r\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\r\n\r\n\t\t#ifdef ENVMAP_MODE_REFLECTION\r\n\r\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\r\n\r\n\t\t#else\r\n\r\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\r\n\r\n\t\t#endif\r\n\r\n\t#endif\r\n\r\n#endif\r\n",fog_vertex:"\r\n#ifdef USE_FOG\r\nfogDepth = -mvPosition.z;\r\n#endif",fog_pars_vertex:"#ifdef USE_FOG\r\n\r\n  varying float fogDepth;\r\n\r\n#endif\r\n",fog_fragment:"#ifdef USE_FOG\r\n\r\n\t#ifdef FOG_EXP2\r\n\r\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\r\n\r\n\t#else\r\n\r\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\r\n\r\n\t#endif\r\n\r\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\r\n\r\n#endif\r\n",fog_pars_fragment:"#ifdef USE_FOG\r\n\r\n\tuniform vec3 fogColor;\r\n\tvarying float fogDepth;\r\n\r\n\t#ifdef FOG_EXP2\r\n\r\n\t\tuniform float fogDensity;\r\n\r\n\t#else\r\n\r\n\t\tuniform float fogNear;\r\n\t\tuniform float fogFar;\r\n\r\n\t#endif\r\n\r\n#endif\r\n",gradientmap_pars_fragment:"#ifdef TOON\r\n\r\n\tuniform sampler2D gradientMap;\r\n\r\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\r\n\r\n\t\t// dotNL will be from -1.0 to 1.0\r\n\t\tfloat dotNL = dot( normal, lightDirection );\r\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\r\n\r\n\t\t#ifdef USE_GRADIENTMAP\r\n\r\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\r\n\r\n\t\t#else\r\n\r\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\r\n\r\n\t\t#endif\r\n\r\n\r\n\t}\r\n\r\n#endif\r\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\r\n\r\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity; // factor of PI should not be present; included here to prevent breakage\r\n\r\n#endif\r\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\r\n\r\n\tuniform sampler2D lightMap;\r\n\tuniform float lightMapIntensity;\r\n\r\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\r\n\r\nGeometricContext geometry;\r\ngeometry.position = mvPosition.xyz;\r\ngeometry.normal = normalize( transformedNormal );\r\ngeometry.viewDir = normalize( -mvPosition.xyz );\r\n\r\nGeometricContext backGeometry;\r\nbackGeometry.position = geometry.position;\r\nbackGeometry.normal = -geometry.normal;\r\nbackGeometry.viewDir = geometry.viewDir;\r\n\r\nvLightFront = vec3( 0.0 );\r\n\r\n#ifdef DOUBLE_SIDED\r\n\tvLightBack = vec3( 0.0 );\r\n#endif\r\n\r\nIncidentLight directLight;\r\nfloat dotNL;\r\nvec3 directLightColor_Diffuse;\r\n\r\n#if NUM_POINT_LIGHTS > 0\r\n\r\n\t#pragma unroll_loop\r\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\r\n\r\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\r\n\r\n\t\tdotNL = dot( geometry.normal, directLight.direction );\r\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\r\n\r\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\r\n\r\n\t\t#ifdef DOUBLE_SIDED\r\n\r\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\r\n\r\n\t\t#endif\r\n\r\n\t}\r\n\r\n#endif\r\n\r\n#if NUM_SPOT_LIGHTS > 0\r\n\r\n\t#pragma unroll_loop\r\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\r\n\r\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\r\n\r\n\t\tdotNL = dot( geometry.normal, directLight.direction );\r\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\r\n\r\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\r\n\r\n\t\t#ifdef DOUBLE_SIDED\r\n\r\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\r\n\r\n\t\t#endif\r\n\t}\r\n\r\n#endif\r\n\r\n\r\n\r\n#if NUM_DIR_LIGHTS > 0\r\n\r\n\t#pragma unroll_loop\r\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\r\n\r\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\r\n\r\n\t\tdotNL = dot( geometry.normal, directLight.direction );\r\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\r\n\r\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\r\n\r\n\t\t#ifdef DOUBLE_SIDED\r\n\r\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\r\n\r\n\t\t#endif\r\n\r\n\t}\r\n\r\n#endif\r\n\r\n#if NUM_HEMI_LIGHTS > 0\r\n\r\n\t#pragma unroll_loop\r\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\r\n\r\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\r\n\r\n\t\t#ifdef DOUBLE_SIDED\r\n\r\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\r\n\r\n\t\t#endif\r\n\r\n\t}\r\n\r\n#endif\r\n",lights_pars:"uniform vec3 ambientLightColor;\r\n\r\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\r\n\r\n\tvec3 irradiance = ambientLightColor;\r\n\r\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\r\n\r\n\t\tirradiance *= PI;\r\n\r\n\t#endif\r\n\r\n\treturn irradiance;\r\n\r\n}\r\n\r\n#if NUM_DIR_LIGHTS > 0\r\n\r\n\tstruct DirectionalLight {\r\n\t\tvec3 direction;\r\n\t\tvec3 color;\r\n\r\n\t\tint shadow;\r\n\t\tfloat shadowBias;\r\n\t\tfloat shadowRadius;\r\n\t\tvec2 shadowMapSize;\r\n\t};\r\n\r\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\r\n\r\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\r\n\r\n\t\tdirectLight.color = directionalLight.color;\r\n\t\tdirectLight.direction = directionalLight.direction;\r\n\t\tdirectLight.visible = true;\r\n\r\n\t}\r\n\r\n#endif\r\n\r\n\r\n#if NUM_POINT_LIGHTS > 0\r\n\r\n\tstruct PointLight {\r\n\t\tvec3 position;\r\n\t\tvec3 color;\r\n\t\tfloat distance;\r\n\t\tfloat decay;\r\n\r\n\t\tint shadow;\r\n\t\tfloat shadowBias;\r\n\t\tfloat shadowRadius;\r\n\t\tvec2 shadowMapSize;\r\n\t\tfloat shadowCameraNear;\r\n\t\tfloat shadowCameraFar;\r\n\t};\r\n\r\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\r\n\r\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\r\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\r\n\r\n\t\tvec3 lVector = pointLight.position - geometry.position;\r\n\t\tdirectLight.direction = normalize( lVector );\r\n\r\n\t\tfloat lightDistance = length( lVector );\r\n\r\n\t\tdirectLight.color = pointLight.color;\r\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\r\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\r\n\r\n\t}\r\n\r\n#endif\r\n\r\n\r\n#if NUM_SPOT_LIGHTS > 0\r\n\r\n\tstruct SpotLight {\r\n\t\tvec3 position;\r\n\t\tvec3 direction;\r\n\t\tvec3 color;\r\n\t\tfloat distance;\r\n\t\tfloat decay;\r\n\t\tfloat coneCos;\r\n\t\tfloat penumbraCos;\r\n\r\n\t\tint shadow;\r\n\t\tfloat shadowBias;\r\n\t\tfloat shadowRadius;\r\n\t\tvec2 shadowMapSize;\r\n\t};\r\n\r\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\r\n\r\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\r\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\r\n\r\n\t\tvec3 lVector = spotLight.position - geometry.position;\r\n\t\tdirectLight.direction = normalize( lVector );\r\n\r\n\t\tfloat lightDistance = length( lVector );\r\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\r\n\r\n\t\tif ( angleCos > spotLight.coneCos ) {\r\n\r\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\r\n\r\n\t\t\tdirectLight.color = spotLight.color;\r\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\r\n\t\t\tdirectLight.visible = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdirectLight.color = vec3( 0.0 );\r\n\t\t\tdirectLight.visible = false;\r\n\r\n\t\t}\r\n\t}\r\n\r\n#endif\r\n\r\n\r\n#if NUM_RECT_AREA_LIGHTS > 0\r\n\r\n\tstruct RectAreaLight {\r\n\t\tvec3 color;\r\n\t\tvec3 position;\r\n\t\tvec3 halfWidth;\r\n\t\tvec3 halfHeight;\r\n\t};\r\n\r\n\t// Pre-computed values of LinearTransformedCosine approximation of BRDF\r\n\t// BRDF approximation Texture is 64x64\r\n\tuniform sampler2D ltc_1; // RGBA Float\r\n\tuniform sampler2D ltc_2; // RGBA Float\r\n\r\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\r\n\r\n#endif\r\n\r\n\r\n#if NUM_HEMI_LIGHTS > 0\r\n\r\n\tstruct HemisphereLight {\r\n\t\tvec3 direction;\r\n\t\tvec3 skyColor;\r\n\t\tvec3 groundColor;\r\n\t};\r\n\r\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\r\n\r\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\r\n\r\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\r\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\r\n\r\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\r\n\r\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\r\n\r\n\t\t\tirradiance *= PI;\r\n\r\n\t\t#endif\r\n\r\n\t\treturn irradiance;\r\n\r\n\t}\r\n\r\n#endif\r\n\r\n\r\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\r\n\r\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\r\n\r\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\r\n\r\n\t\t#ifdef ENVMAP_TYPE_CUBE\r\n\r\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\r\n\r\n\t\t\t// TODO: replace with properly filtered cubemaps and access the irradiance LOD level, be it the last LOD level\r\n\t\t\t// of a specular cubemap, or just the default level of a specially created irradiance cubemap.\r\n\r\n\t\t\t#ifdef TEXTURE_LOD_EXT\r\n\r\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\r\n\r\n\t\t\t#else\r\n\r\n\t\t\t\t// force the bias high to get the last LOD level as it is the most blurred.\r\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\r\n\r\n\t\t\t#endif\r\n\r\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\r\n\r\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\r\n\r\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\r\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\r\n\r\n\t\t#else\r\n\r\n\t\t\tvec4 envMapColor = vec4( 0.0 );\r\n\r\n\t\t#endif\r\n\r\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\r\n\r\n\t}\r\n\r\n\t// taken from here: http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\r\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\r\n\r\n\t\t//float envMapWidth = pow( 2.0, maxMIPLevelScalar );\r\n\t\t//float desiredMIPLevel = log2( envMapWidth * sqrt( 3.0 ) ) - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\r\n\r\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\r\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\r\n\r\n\t\t// clamp to allowable LOD ranges.\r\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\r\n\r\n\t}\r\n\r\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\r\n\r\n\t\t#ifdef ENVMAP_MODE_REFLECTION\r\n\r\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\r\n\r\n\t\t#else\r\n\r\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\r\n\r\n\t\t#endif\r\n\r\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\r\n\r\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\r\n\r\n\t\t#ifdef ENVMAP_TYPE_CUBE\r\n\r\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\r\n\r\n\t\t\t#ifdef TEXTURE_LOD_EXT\r\n\r\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\r\n\r\n\t\t\t#else\r\n\r\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\r\n\r\n\t\t\t#endif\r\n\r\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\r\n\r\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\r\n\r\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\r\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\r\n\r\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\r\n\r\n\t\t\tvec2 sampleUV;\r\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\r\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\r\n\r\n\t\t\t#ifdef TEXTURE_LOD_EXT\r\n\r\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\r\n\r\n\t\t\t#else\r\n\r\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\r\n\r\n\t\t\t#endif\r\n\r\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\r\n\r\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\r\n\r\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\r\n\r\n\t\t\t#ifdef TEXTURE_LOD_EXT\r\n\r\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\r\n\r\n\t\t\t#else\r\n\r\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\r\n\r\n\t\t\t#endif\r\n\r\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\r\n\r\n\t\t#endif\r\n\r\n\t\treturn envMapColor.rgb * envMapIntensity;\r\n\r\n\t}\r\n\r\n#endif\r\n",lights_phong_fragment:"BlinnPhongMaterial material;\r\nmaterial.diffuseColor = diffuseColor.rgb;\r\nmaterial.specularColor = specular;\r\nmaterial.specularShininess = shininess;\r\nmaterial.specularStrength = specularStrength;\r\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\r\n\r\n#ifndef FLAT_SHADED\r\n\r\n\tvarying vec3 vNormal;\r\n\r\n#endif\r\n\r\n\r\nstruct BlinnPhongMaterial {\r\n\r\n\tvec3\tdiffuseColor;\r\n\tvec3\tspecularColor;\r\n\tfloat\tspecularShininess;\r\n\tfloat\tspecularStrength;\r\n\r\n};\r\n\r\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\r\n\r\n\t#ifdef TOON\r\n\r\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\r\n\r\n\t#else\r\n\r\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\r\n\t\tvec3 irradiance = dotNL * directLight.color;\r\n\r\n\t#endif\r\n\r\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\r\n\r\n\t\tirradiance *= PI; // punctual light\r\n\r\n\t#endif\r\n\r\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\r\n\r\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\r\n\r\n}\r\n\r\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\r\n\r\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\r\n\r\n}\r\n\r\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\r\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\r\n\r\n#define Material_LightProbeLOD( material )\t(0)\r\n",lights_physical_fragment:"PhysicalMaterial material;\r\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\r\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\r\n#ifdef STANDARD\r\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\r\n#else\r\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\r\n\tmaterial.clearCoat = saturate( clearCoat ); // Burley clearcoat model\r\n\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\r\n#endif\r\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\r\n\r\n\tvec3\tdiffuseColor;\r\n\tfloat\tspecularRoughness;\r\n\tvec3\tspecularColor;\r\n\r\n\t#ifndef STANDARD\r\n\t\tfloat clearCoat;\r\n\t\tfloat clearCoatRoughness;\r\n\t#endif\r\n\r\n};\r\n\r\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\r\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\r\n\r\n// Clear coat directional hemishperical reflectance (this approximation should be improved)\r\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\r\n\r\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\r\n\r\n}\r\n\r\n#if NUM_RECT_AREA_LIGHTS > 0\r\n\r\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\r\n\r\n\t\tvec3 normal = geometry.normal;\r\n\t\tvec3 viewDir = geometry.viewDir;\r\n\t\tvec3 position = geometry.position;\r\n\t\tvec3 lightPos = rectAreaLight.position;\r\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\r\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\r\n\t\tvec3 lightColor = rectAreaLight.color;\r\n\t\tfloat roughness = material.specularRoughness;\r\n\r\n\t\tvec3 rectCoords[ 4 ];\r\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight; // counterclockwise\r\n\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\r\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\r\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\r\n\r\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\r\n\r\n\t\tvec4 t1 = texture2D( ltc_1, uv );\r\n\t\tvec4 t2 = texture2D( ltc_2, uv );\r\n\r\n\t\tmat3 mInv = mat3(\r\n\t\t\tvec3( t1.x, 0, t1.y ),\r\n\t\t\tvec3(    0, 1,    0 ),\r\n\t\t\tvec3( t1.z, 0, t1.w )\r\n\t\t);\r\n\r\n\t\t// LTC Fresnel Approximation by Stephen Hill\r\n\t\t// http://blog.selfshadow.com/publications/s2016-advances/s2016_ltc_fresnel.pdf\r\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\r\n\r\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\r\n\r\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\r\n\r\n\t}\r\n\r\n#endif\r\n\r\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\r\n\r\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\r\n\r\n\tvec3 irradiance = dotNL * directLight.color;\r\n\r\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\r\n\r\n\t\tirradiance *= PI; // punctual light\r\n\r\n\t#endif\r\n\r\n\t#ifndef STANDARD\r\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\r\n\t#else\r\n\t\tfloat clearCoatDHR = 0.0;\r\n\t#endif\r\n\r\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\r\n\r\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\r\n\r\n\t#ifndef STANDARD\r\n\r\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\r\n\r\n\t#endif\r\n\r\n}\r\n\r\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\r\n\r\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\r\n\r\n}\r\n\r\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\r\n\r\n\t#ifndef STANDARD\r\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\r\n\t\tfloat dotNL = dotNV;\r\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\r\n\t#else\r\n\t\tfloat clearCoatDHR = 0.0;\r\n\t#endif\r\n\r\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\r\n\r\n\t#ifndef STANDARD\r\n\r\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\r\n\r\n\t#endif\r\n\r\n}\r\n\r\n#define RE_Direct\t\t\t\tRE_Direct_Physical\r\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\r\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\r\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\r\n\r\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\r\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\r\n\r\n// ref: https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\r\n\r\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\r\n\r\n}\r\n",lights_template:"\r\n\r\nGeometricContext geometry;\r\n\r\ngeometry.position = - vViewPosition;\r\ngeometry.normal = normal;\r\ngeometry.viewDir = normalize( vViewPosition );\r\n\r\nIncidentLight directLight;\r\n\r\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\r\n\r\n\tPointLight pointLight;\r\n\r\n\t#pragma unroll_loop\r\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\r\n\r\n\t\tpointLight = pointLights[ i ];\r\n\r\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\r\n\r\n\t\t#ifdef USE_SHADOWMAP\r\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\r\n\t\t#endif\r\n\r\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\r\n\r\n\t}\r\n\r\n#endif\r\n\r\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\r\n\r\n\tSpotLight spotLight;\r\n\r\n\t#pragma unroll_loop\r\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\r\n\r\n\t\tspotLight = spotLights[ i ];\r\n\r\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\r\n\r\n\t\t#ifdef USE_SHADOWMAP\r\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\r\n\t\t#endif\r\n\r\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\r\n\r\n\t}\r\n\r\n#endif\r\n\r\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\r\n\r\n\tDirectionalLight directionalLight;\r\n\r\n\t#pragma unroll_loop\r\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\r\n\r\n\t\tdirectionalLight = directionalLights[ i ];\r\n\r\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\r\n\r\n\t\t#ifdef USE_SHADOWMAP\r\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\r\n\t\t#endif\r\n\r\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\r\n\r\n\t}\r\n\r\n#endif\r\n\r\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\r\n\r\n\tRectAreaLight rectAreaLight;\r\n\r\n\t#pragma unroll_loop\r\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\r\n\r\n\t\trectAreaLight = rectAreaLights[ i ];\r\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\r\n\r\n\t}\r\n\r\n#endif\r\n\r\n#if defined( RE_IndirectDiffuse )\r\n\r\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\r\n\r\n\t#ifdef USE_LIGHTMAP\r\n\r\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\r\n\r\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\r\n\r\n\t\t\tlightMapIrradiance *= PI; // factor of PI should not be present; included here to prevent breakage\r\n\r\n\t\t#endif\r\n\r\n\t\tirradiance += lightMapIrradiance;\r\n\r\n\t#endif\r\n\r\n\t#if ( NUM_HEMI_LIGHTS > 0 )\r\n\r\n\t\t#pragma unroll_loop\r\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\r\n\r\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\r\n\r\n\t\t}\r\n\r\n\t#endif\r\n\r\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\r\n\r\n\t\t// TODO, replace 8 with the real maxMIPLevel\r\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\r\n\r\n\t#endif\r\n\r\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\r\n\r\n#endif\r\n\r\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\r\n\r\n\t// TODO, replace 8 with the real maxMIPLevel\r\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\r\n\r\n\t#ifndef STANDARD\r\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\r\n\t#else\r\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\r\n\t#endif\r\n\r\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\r\n\r\n#endif\r\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\r\n\r\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\r\n\r\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\r\n\r\n\tuniform float logDepthBufFC;\r\n\r\n\t#ifdef USE_LOGDEPTHBUF_EXT\r\n\r\n\t\tvarying float vFragDepth;\r\n\r\n\t#endif\r\n\r\n#endif\r\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\r\n\r\n\t#ifdef USE_LOGDEPTHBUF_EXT\r\n\r\n\t\tvarying float vFragDepth;\r\n\r\n\t#endif\r\n\r\n\tuniform float logDepthBufFC;\r\n\r\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\r\n\r\n\t#ifdef USE_LOGDEPTHBUF_EXT\r\n\r\n\t\tvFragDepth = 1.0 + gl_Position.w;\r\n\r\n\t#else\r\n\r\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\r\n\r\n\t\tgl_Position.z *= gl_Position.w;\r\n\r\n\t#endif\r\n\r\n#endif\r\n",map_fragment:"#ifdef USE_MAP\r\n\r\n\tvec4 texelColor = texture2D( map, vUv );\r\n\r\n\ttexelColor = mapTexelToLinear( texelColor );\r\n\tdiffuseColor *= texelColor;\r\n\r\n#endif\r\n",map_pars_fragment:"#ifdef USE_MAP\r\n\r\n\tuniform sampler2D map;\r\n\r\n#endif\r\n",map_particle_fragment:"#ifdef USE_MAP\r\n\r\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\r\n\tvec4 mapTexel = texture2D( map, uv );\r\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\r\n\r\n#endif\r\n",map_particle_pars_fragment:"#ifdef USE_MAP\r\n\r\n\tuniform mat3 uvTransform;\r\n\tuniform sampler2D map;\r\n\r\n#endif\r\n",metalnessmap_fragment:"float metalnessFactor = metalness;\r\n\r\n#ifdef USE_METALNESSMAP\r\n\r\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\r\n\r\n\t// reads channel B, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\r\n\tmetalnessFactor *= texelMetalness.b;\r\n\r\n#endif\r\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\r\n\r\n\tuniform sampler2D metalnessMap;\r\n\r\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\r\n\r\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\r\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\r\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\r\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\r\n\r\n#endif\r\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\r\n\r\n\t#ifndef USE_MORPHNORMALS\r\n\r\n\tuniform float morphTargetInfluences[ 8 ];\r\n\r\n\t#else\r\n\r\n\tuniform float morphTargetInfluences[ 4 ];\r\n\r\n\t#endif\r\n\r\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\r\n\r\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\r\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\r\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\r\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\r\n\r\n\t#ifndef USE_MORPHNORMALS\r\n\r\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\r\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\r\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\r\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\r\n\r\n\t#endif\r\n\r\n#endif\r\n",normal_fragment:"#ifdef FLAT_SHADED\r\n\r\n\t// Workaround for Adreno/Nexus5 not able able to do dFdx( vViewPosition ) ...\r\n\r\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\r\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\r\n\tvec3 normal = normalize( cross( fdx, fdy ) );\r\n\r\n#else\r\n\r\n\tvec3 normal = normalize( vNormal );\r\n\r\n\t#ifdef DOUBLE_SIDED\r\n\r\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\r\n\r\n\t#endif\r\n\r\n#endif\r\n\r\n#ifdef USE_NORMALMAP\r\n\r\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\r\n\r\n#elif defined( USE_BUMPMAP )\r\n\r\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\r\n\r\n#endif\r\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\r\n\r\n\tuniform sampler2D normalMap;\r\n\tuniform vec2 normalScale;\r\n\r\n\t// Per-Pixel Tangent Space Normal Mapping\r\n\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\r\n\r\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\r\n\r\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\r\n\r\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\r\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\r\n\t\tvec2 st0 = dFdx( vUv.st );\r\n\t\tvec2 st1 = dFdy( vUv.st );\r\n\r\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\r\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\r\n\t\tvec3 N = normalize( surf_norm );\r\n\r\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\r\n\t\tmapN.xy = normalScale * mapN.xy;\r\n\t\tmat3 tsn = mat3( S, T, N );\r\n\t\treturn normalize( tsn * mapN );\r\n\r\n\t}\r\n\r\n#endif\r\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\r\n\treturn normalize( normal ) * 0.5 + 0.5;\r\n}\r\n\r\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\r\n\treturn 2.0 * rgb.xyz - 1.0;\r\n}\r\n\r\nconst float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\r\nconst float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\r\n\r\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\r\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\r\n\r\nconst float ShiftRight8 = 1. / 256.;\r\n\r\nvec4 packDepthToRGBA( const in float v ) {\r\n\tvec4 r = vec4( fract( v * PackFactors ), v );\r\n\tr.yzw -= r.xyz * ShiftRight8; // tidy overflow\r\n\treturn r * PackUpscale;\r\n}\r\n\r\nfloat unpackRGBAToDepth( const in vec4 v ) {\r\n\treturn dot( v, UnpackFactors );\r\n}\r\n\r\n// NOTE: viewZ/eyeZ is < 0 when in front of the camera per OpenGL conventions\r\n\r\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\r\n\treturn ( viewZ + near ) / ( near - far );\r\n}\r\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\r\n\treturn linearClipZ * ( near - far ) - near;\r\n}\r\n\r\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\r\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\r\n}\r\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\r\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\r\n}\r\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\r\n\r\n\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\r\n\tgl_FragColor.rgb *= gl_FragColor.a;\r\n\r\n#endif\r\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\r\n\r\ngl_Position = projectionMatrix * mvPosition;\r\n",dithering_fragment:"#if defined( DITHERING )\r\n\r\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\r\n\r\n#endif\r\n",dithering_pars_fragment:"#if defined( DITHERING )\r\n\r\n\t// based on https://www.shadertoy.com/view/MslGR8\r\n\tvec3 dithering( vec3 color ) {\r\n\t\t//Calculate grid position\r\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\r\n\r\n\t\t//Shift the individual colors differently, thus making it even harder to see the dithering pattern\r\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\r\n\r\n\t\t//modify shift acording to grid position.\r\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\r\n\r\n\t\t//shift the color by dither_shift\r\n\t\treturn color + dither_shift_RGB;\r\n\t}\r\n\r\n#endif\r\n",roughnessmap_fragment:"float roughnessFactor = roughness;\r\n\r\n#ifdef USE_ROUGHNESSMAP\r\n\r\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\r\n\r\n\t// reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\r\n\troughnessFactor *= texelRoughness.g;\r\n\r\n#endif\r\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\r\n\r\n\tuniform sampler2D roughnessMap;\r\n\r\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\r\n\r\n\t#if NUM_DIR_LIGHTS > 0\r\n\r\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\r\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\r\n\r\n\t#endif\r\n\r\n\t#if NUM_SPOT_LIGHTS > 0\r\n\r\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\r\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\r\n\r\n\t#endif\r\n\r\n\t#if NUM_POINT_LIGHTS > 0\r\n\r\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\r\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\r\n\r\n\t#endif\r\n\r\n\r\n\r\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\r\n\r\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\r\n\r\n\t}\r\n\r\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\r\n\r\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\r\n\r\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\r\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\r\n\r\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\r\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\r\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\r\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\r\n\r\n\t\tvec2 f = fract( uv * size + 0.5 );\r\n\r\n\t\tfloat a = mix( lb, lt, f.y );\r\n\t\tfloat b = mix( rb, rt, f.y );\r\n\t\tfloat c = mix( a, b, f.x );\r\n\r\n\t\treturn c;\r\n\r\n\t}\r\n\r\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\r\n\r\n\t\tfloat shadow = 1.0;\r\n\r\n\t\tshadowCoord.xyz /= shadowCoord.w;\r\n\t\tshadowCoord.z += shadowBias;\r\n\r\n\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\r\n\t\t// if ( all( something, something ) ) using this instead\r\n\r\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\r\n\t\tbool inFrustum = all( inFrustumVec );\r\n\r\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\r\n\r\n\t\tbool frustumTest = all( frustumTestVec );\r\n\r\n\t\tif ( frustumTest ) {\r\n\r\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\r\n\r\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\r\n\r\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\r\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\r\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\r\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\r\n\r\n\t\t\tshadow = (\r\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\r\n\t\t\t) * ( 1.0 / 9.0 );\r\n\r\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\r\n\r\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\r\n\r\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\r\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\r\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\r\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\r\n\r\n\t\t\tshadow = (\r\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\r\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\r\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\r\n\t\t\t) * ( 1.0 / 9.0 );\r\n\r\n\t\t#else // no percentage-closer filtering:\r\n\r\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\r\n\r\n\t\t#endif\r\n\r\n\t\t}\r\n\r\n\t\treturn shadow;\r\n\r\n\t}\r\n\r\n\t// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\r\n\t// vector suitable for 2D texture mapping. This code uses the following layout for the\r\n\t// 2D texture:\r\n\t//\r\n\t// xzXZ\r\n\t//  y Y\r\n\t//\r\n\t// Y - Positive y direction\r\n\t// y - Negative y direction\r\n\t// X - Positive x direction\r\n\t// x - Negative x direction\r\n\t// Z - Positive z direction\r\n\t// z - Negative z direction\r\n\t//\r\n\t// Source and test bed:\r\n\t// https://gist.github.com/tschw/da10c43c467ce8afd0c4\r\n\r\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\r\n\r\n\t\t// Number of texels to avoid at the edge of each square\r\n\r\n\t\tvec3 absV = abs( v );\r\n\r\n\t\t// Intersect unit cube\r\n\r\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\r\n\t\tabsV *= scaleToCube;\r\n\r\n\t\t// Apply scale to avoid seams\r\n\r\n\t\t// two texels less per square (one texel will do for NEAREST)\r\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\r\n\r\n\t\t// Unwrap\r\n\r\n\t\t// space: -1 ... 1 range for each square\r\n\t\t//\r\n\t\t// #X##\t\tdim    := ( 4 , 2 )\r\n\t\t//  # #\t\tcenter := ( 1 , 1 )\r\n\r\n\t\tvec2 planar = v.xy;\r\n\r\n\t\tfloat almostATexel = 1.5 * texelSizeY;\r\n\t\tfloat almostOne = 1.0 - almostATexel;\r\n\r\n\t\tif ( absV.z >= almostOne ) {\r\n\r\n\t\t\tif ( v.z > 0.0 )\r\n\t\t\t\tplanar.x = 4.0 - v.x;\r\n\r\n\t\t} else if ( absV.x >= almostOne ) {\r\n\r\n\t\t\tfloat signX = sign( v.x );\r\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\r\n\r\n\t\t} else if ( absV.y >= almostOne ) {\r\n\r\n\t\t\tfloat signY = sign( v.y );\r\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\r\n\t\t\tplanar.y = v.z * signY - 2.0;\r\n\r\n\t\t}\r\n\r\n\t\t// Transform to UV space\r\n\r\n\t\t// scale := 0.5 / dim\r\n\t\t// translate := ( center + 0.5 ) / dim\r\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\r\n\r\n\t}\r\n\r\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\r\n\r\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\r\n\r\n\t\t// for point lights, the uniform @vShadowCoord is re-purposed to hold\r\n\t\t// the vector from the light to the world-space position of the fragment.\r\n\t\tvec3 lightToPosition = shadowCoord.xyz;\r\n\r\n\t\t// dp = normalized distance from light to fragment position\r\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\r\n\t\tdp += shadowBias;\r\n\r\n\t\t// bd3D = base direction 3D\r\n\t\tvec3 bd3D = normalize( lightToPosition );\r\n\r\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\r\n\r\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\r\n\r\n\t\t\treturn (\r\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\r\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\r\n\t\t\t) * ( 1.0 / 9.0 );\r\n\r\n\t\t#else // no percentage-closer filtering\r\n\r\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\r\n\r\n\t\t#endif\r\n\r\n\t}\r\n\r\n#endif\r\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\r\n\r\n\t#if NUM_DIR_LIGHTS > 0\r\n\r\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\r\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\r\n\r\n\t#endif\r\n\r\n\t#if NUM_SPOT_LIGHTS > 0\r\n\r\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\r\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\r\n\r\n\t#endif\r\n\r\n\t#if NUM_POINT_LIGHTS > 0\r\n\r\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\r\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\r\n\r\n\t#endif\r\n\r\n\r\n\r\n#endif\r\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\r\n\r\n\t#if NUM_DIR_LIGHTS > 0\r\n\r\n\t#pragma unroll_loop\r\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\r\n\r\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\r\n\r\n\t}\r\n\r\n\t#endif\r\n\r\n\t#if NUM_SPOT_LIGHTS > 0\r\n\r\n\t#pragma unroll_loop\r\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\r\n\r\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\r\n\r\n\t}\r\n\r\n\t#endif\r\n\r\n\t#if NUM_POINT_LIGHTS > 0\r\n\r\n\t#pragma unroll_loop\r\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\r\n\r\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\r\n\r\n\t}\r\n\r\n\t#endif\r\n\r\n\r\n\r\n#endif\r\n",shadowmask_pars_fragment:"float getShadowMask() {\r\n\r\n\tfloat shadow = 1.0;\r\n\r\n\t#ifdef USE_SHADOWMAP\r\n\r\n\t#if NUM_DIR_LIGHTS > 0\r\n\r\n\tDirectionalLight directionalLight;\r\n\r\n\t#pragma unroll_loop\r\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\r\n\r\n\t\tdirectionalLight = directionalLights[ i ];\r\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\r\n\r\n\t}\r\n\r\n\t#endif\r\n\r\n\t#if NUM_SPOT_LIGHTS > 0\r\n\r\n\tSpotLight spotLight;\r\n\r\n\t#pragma unroll_loop\r\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\r\n\r\n\t\tspotLight = spotLights[ i ];\r\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\r\n\r\n\t}\r\n\r\n\t#endif\r\n\r\n\t#if NUM_POINT_LIGHTS > 0\r\n\r\n\tPointLight pointLight;\r\n\r\n\t#pragma unroll_loop\r\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\r\n\r\n\t\tpointLight = pointLights[ i ];\r\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\r\n\r\n\t}\r\n\r\n\t#endif\r\n\r\n\r\n\r\n\t#endif\r\n\r\n\treturn shadow;\r\n\r\n}\r\n",skinbase_vertex:"#ifdef USE_SKINNING\r\n\r\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\r\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\r\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\r\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\r\n\r\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\r\n\r\n\tuniform mat4 bindMatrix;\r\n\tuniform mat4 bindMatrixInverse;\r\n\r\n\t#ifdef BONE_TEXTURE\r\n\r\n\t\tuniform sampler2D boneTexture;\r\n\t\tuniform int boneTextureSize;\r\n\r\n\t\tmat4 getBoneMatrix( const in float i ) {\r\n\r\n\t\t\tfloat j = i * 4.0;\r\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\r\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\r\n\r\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\r\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\r\n\r\n\t\t\ty = dy * ( y + 0.5 );\r\n\r\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\r\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\r\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\r\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\r\n\r\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\r\n\r\n\t\t\treturn bone;\r\n\r\n\t\t}\r\n\r\n\t#else\r\n\r\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\r\n\r\n\t\tmat4 getBoneMatrix( const in float i ) {\r\n\r\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\r\n\t\t\treturn bone;\r\n\r\n\t\t}\r\n\r\n\t#endif\r\n\r\n#endif\r\n",skinning_vertex:"#ifdef USE_SKINNING\r\n\r\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\r\n\r\n\tvec4 skinned = vec4( 0.0 );\r\n\tskinned += boneMatX * skinVertex * skinWeight.x;\r\n\tskinned += boneMatY * skinVertex * skinWeight.y;\r\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\r\n\tskinned += boneMatW * skinVertex * skinWeight.w;\r\n\r\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\r\n\r\n#endif\r\n",skinnormal_vertex:"#ifdef USE_SKINNING\r\n\r\n\tmat4 skinMatrix = mat4( 0.0 );\r\n\tskinMatrix += skinWeight.x * boneMatX;\r\n\tskinMatrix += skinWeight.y * boneMatY;\r\n\tskinMatrix += skinWeight.z * boneMatZ;\r\n\tskinMatrix += skinWeight.w * boneMatW;\r\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\r\n\r\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\r\n\r\n#endif\r\n",specularmap_fragment:"float specularStrength;\r\n\r\n#ifdef USE_SPECULARMAP\r\n\r\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\r\n\tspecularStrength = texelSpecular.r;\r\n\r\n#else\r\n\r\n\tspecularStrength = 1.0;\r\n\r\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\r\n\r\n\tuniform sampler2D specularMap;\r\n\r\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\r\n\r\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\r\n\r\n#endif\r\n",tonemapping_pars_fragment:"#ifndef saturate\r\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\r\n#endif\r\n\r\nuniform float toneMappingExposure;\r\nuniform float toneMappingWhitePoint;\r\n\r\n// exposure only\r\nvec3 LinearToneMapping( vec3 color ) {\r\n\r\n\treturn toneMappingExposure * color;\r\n\r\n}\r\n\r\n// source: https://www.cs.utah.edu/~reinhard/cdrom/\r\nvec3 ReinhardToneMapping( vec3 color ) {\r\n\r\n\tcolor *= toneMappingExposure;\r\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\r\n\r\n}\r\n\r\n// source: http://filmicgames.com/archives/75\r\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\r\nvec3 Uncharted2ToneMapping( vec3 color ) {\r\n\r\n\t// John Hable's filmic operator from Uncharted 2 video game\r\n\tcolor *= toneMappingExposure;\r\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\r\n\r\n}\r\n\r\n// source: http://filmicgames.com/archives/75\r\nvec3 OptimizedCineonToneMapping( vec3 color ) {\r\n\r\n\t// optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\r\n\tcolor *= toneMappingExposure;\r\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\r\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\r\n\r\n}\r\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\r\n\r\n\tvarying vec2 vUv;\r\n\r\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\r\n\r\n\tvarying vec2 vUv;\r\n\tuniform mat3 uvTransform;\r\n\r\n#endif\r\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\r\n\r\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\r\n\r\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\r\n\r\n\tvarying vec2 vUv2;\r\n\r\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\r\n\r\n\tattribute vec2 uv2;\r\n\tvarying vec2 vUv2;\r\n\r\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\r\n\r\n\tvUv2 = uv2;\r\n\r\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\r\n\r\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\r\n\r\n#endif\r\n",cube_frag:"uniform samplerCube tCube;\r\nuniform float tFlip;\r\nuniform float opacity;\r\n\r\nvarying vec3 vWorldPosition;\r\n\r\nvoid main() {\r\n\r\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\r\n\tgl_FragColor.a *= opacity;\r\n\r\n}\r\n",cube_vert:"varying vec3 vWorldPosition;\r\n\r\n#include <common>\r\n\r\nvoid main() {\r\n\r\n\tvWorldPosition = transformDirection( position, modelMatrix );\r\n\r\n\t#include <begin_vertex>\r\n\t#include <project_vertex>\r\n\r\n\tgl_Position.z = gl_Position.w; // set z to camera.far\r\n\r\n}\r\n",depth_frag:"#if DEPTH_PACKING == 3200\r\n\r\n\tuniform float opacity;\r\n\r\n#endif\r\n\r\n#include <common>\r\n#include <packing>\r\n#include <uv_pars_fragment>\r\n#include <map_pars_fragment>\r\n#include <alphamap_pars_fragment>\r\n#include <logdepthbuf_pars_fragment>\r\n#include <clipping_planes_pars_fragment>\r\n\r\nvoid main() {\r\n\r\n\t#include <clipping_planes_fragment>\r\n\r\n\tvec4 diffuseColor = vec4( 1.0 );\r\n\r\n\t#if DEPTH_PACKING == 3200\r\n\r\n\t\tdiffuseColor.a = opacity;\r\n\r\n\t#endif\r\n\r\n\t#include <map_fragment>\r\n\t#include <alphamap_fragment>\r\n\t#include <alphatest_fragment>\r\n\r\n\t#include <logdepthbuf_fragment>\r\n\r\n\t#if DEPTH_PACKING == 3200\r\n\r\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\r\n\r\n\t#elif DEPTH_PACKING == 3201\r\n\r\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\r\n\r\n\t#endif\r\n\r\n}\r\n",depth_vert:"#include <common>\r\n#include <uv_pars_vertex>\r\n#include <displacementmap_pars_vertex>\r\n#include <morphtarget_pars_vertex>\r\n#include <skinning_pars_vertex>\r\n#include <logdepthbuf_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\n\r\nvoid main() {\r\n\r\n\t#include <uv_vertex>\r\n\r\n\t#include <skinbase_vertex>\r\n\r\n\t#ifdef USE_DISPLACEMENTMAP\r\n\r\n\t\t#include <beginnormal_vertex>\r\n\t\t#include <morphnormal_vertex>\r\n\t\t#include <skinnormal_vertex>\r\n\r\n\t#endif\r\n\r\n\t#include <begin_vertex>\r\n\t#include <morphtarget_vertex>\r\n\t#include <skinning_vertex>\r\n\t#include <displacementmap_vertex>\r\n\t#include <project_vertex>\r\n\t#include <logdepthbuf_vertex>\r\n\t#include <clipping_planes_vertex>\r\n\r\n}\r\n",distanceRGBA_frag:"#define DISTANCE\r\n\r\nuniform vec3 referencePosition;\r\nuniform float nearDistance;\r\nuniform float farDistance;\r\nvarying vec3 vWorldPosition;\r\n\r\n#include <common>\r\n#include <packing>\r\n#include <uv_pars_fragment>\r\n#include <map_pars_fragment>\r\n#include <alphamap_pars_fragment>\r\n#include <clipping_planes_pars_fragment>\r\n\r\nvoid main () {\r\n\r\n\t#include <clipping_planes_fragment>\r\n\r\n\tvec4 diffuseColor = vec4( 1.0 );\r\n\r\n\t#include <map_fragment>\r\n\t#include <alphamap_fragment>\r\n\t#include <alphatest_fragment>\r\n\r\n\tfloat dist = length( vWorldPosition - referencePosition );\r\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\r\n\tdist = saturate( dist ); // clamp to [ 0, 1 ]\r\n\r\n\tgl_FragColor = packDepthToRGBA( dist );\r\n\r\n}\r\n",distanceRGBA_vert:"#define DISTANCE\r\n\r\nvarying vec3 vWorldPosition;\r\n\r\n#include <common>\r\n#include <uv_pars_vertex>\r\n#include <displacementmap_pars_vertex>\r\n#include <morphtarget_pars_vertex>\r\n#include <skinning_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\n\r\nvoid main() {\r\n\r\n\t#include <uv_vertex>\r\n\r\n\t#include <skinbase_vertex>\r\n\r\n\t#ifdef USE_DISPLACEMENTMAP\r\n\r\n\t\t#include <beginnormal_vertex>\r\n\t\t#include <morphnormal_vertex>\r\n\t\t#include <skinnormal_vertex>\r\n\r\n\t#endif\r\n\r\n\t#include <begin_vertex>\r\n\t#include <morphtarget_vertex>\r\n\t#include <skinning_vertex>\r\n\t#include <displacementmap_vertex>\r\n\t#include <project_vertex>\r\n\t#include <worldpos_vertex>\r\n\t#include <clipping_planes_vertex>\r\n\r\n\tvWorldPosition = worldPosition.xyz;\r\n\r\n}\r\n",equirect_frag:"uniform sampler2D tEquirect;\r\n\r\nvarying vec3 vWorldPosition;\r\n\r\n#include <common>\r\n\r\nvoid main() {\r\n\r\n\tvec3 direction = normalize( vWorldPosition );\r\n\r\n\tvec2 sampleUV;\r\n\r\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\r\n\r\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\r\n\r\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\r\n\r\n}\r\n",equirect_vert:"varying vec3 vWorldPosition;\r\n\r\n#include <common>\r\n\r\nvoid main() {\r\n\r\n\tvWorldPosition = transformDirection( position, modelMatrix );\r\n\r\n\t#include <begin_vertex>\r\n\t#include <project_vertex>\r\n\r\n}\r\n",linedashed_frag:"uniform vec3 diffuse;\r\nuniform float opacity;\r\n\r\nuniform float dashSize;\r\nuniform float totalSize;\r\n\r\nvarying float vLineDistance;\r\n\r\n#include <common>\r\n#include <color_pars_fragment>\r\n#include <fog_pars_fragment>\r\n#include <logdepthbuf_pars_fragment>\r\n#include <clipping_planes_pars_fragment>\r\n\r\nvoid main() {\r\n\r\n\t#include <clipping_planes_fragment>\r\n\r\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\r\n\r\n\t\tdiscard;\r\n\r\n\t}\r\n\r\n\tvec3 outgoingLight = vec3( 0.0 );\r\n\tvec4 diffuseColor = vec4( diffuse, opacity );\r\n\r\n\t#include <logdepthbuf_fragment>\r\n\t#include <color_fragment>\r\n\r\n\toutgoingLight = diffuseColor.rgb; // simple shader\r\n\r\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\r\n\r\n\t#include <premultiplied_alpha_fragment>\r\n\t#include <tonemapping_fragment>\r\n\t#include <encodings_fragment>\r\n\t#include <fog_fragment>\r\n\r\n}\r\n",linedashed_vert:"uniform float scale;\r\nattribute float lineDistance;\r\n\r\nvarying float vLineDistance;\r\n\r\n#include <common>\r\n#include <color_pars_vertex>\r\n#include <fog_pars_vertex>\r\n#include <logdepthbuf_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\n\r\nvoid main() {\r\n\r\n\t#include <color_vertex>\r\n\r\n\tvLineDistance = scale * lineDistance;\r\n\r\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\r\n\tgl_Position = projectionMatrix * mvPosition;\r\n\r\n\t#include <logdepthbuf_vertex>\r\n\t#include <clipping_planes_vertex>\r\n\t#include <fog_vertex>\r\n\r\n}\r\n",meshbasic_frag:"uniform vec3 diffuse;\r\nuniform float opacity;\r\n\r\n#ifndef FLAT_SHADED\r\n\r\n\tvarying vec3 vNormal;\r\n\r\n#endif\r\n\r\n#include <common>\r\n#include <color_pars_fragment>\r\n#include <uv_pars_fragment>\r\n#include <uv2_pars_fragment>\r\n#include <map_pars_fragment>\r\n#include <alphamap_pars_fragment>\r\n#include <aomap_pars_fragment>\r\n#include <lightmap_pars_fragment>\r\n#include <envmap_pars_fragment>\r\n#include <fog_pars_fragment>\r\n#include <specularmap_pars_fragment>\r\n#include <logdepthbuf_pars_fragment>\r\n#include <clipping_planes_pars_fragment>\r\n\r\nvoid main() {\r\n\r\n\t#include <clipping_planes_fragment>\r\n\r\n\tvec4 diffuseColor = vec4( diffuse, opacity );\r\n\r\n\t#include <logdepthbuf_fragment>\r\n\t#include <map_fragment>\r\n\t#include <color_fragment>\r\n\t#include <alphamap_fragment>\r\n\t#include <alphatest_fragment>\r\n\t#include <specularmap_fragment>\r\n\r\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\r\n\r\n\t// accumulation (baked indirect lighting only)\r\n\t#ifdef USE_LIGHTMAP\r\n\r\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\r\n\r\n\t#else\r\n\r\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\r\n\r\n\t#endif\r\n\r\n\t// modulation\r\n\t#include <aomap_fragment>\r\n\r\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\r\n\r\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\r\n\r\n\t#include <envmap_fragment>\r\n\r\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\r\n\r\n\t#include <premultiplied_alpha_fragment>\r\n\t#include <tonemapping_fragment>\r\n\t#include <encodings_fragment>\r\n\t#include <fog_fragment>\r\n\r\n}\r\n",meshbasic_vert:"#include <common>\r\n#include <uv_pars_vertex>\r\n#include <uv2_pars_vertex>\r\n#include <envmap_pars_vertex>\r\n#include <color_pars_vertex>\r\n#include <fog_pars_vertex>\r\n#include <morphtarget_pars_vertex>\r\n#include <skinning_pars_vertex>\r\n#include <logdepthbuf_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\n\r\nvoid main() {\r\n\r\n\t#include <uv_vertex>\r\n\t#include <uv2_vertex>\r\n\t#include <color_vertex>\r\n\t#include <skinbase_vertex>\r\n\r\n\t#ifdef USE_ENVMAP\r\n\r\n\t#include <beginnormal_vertex>\r\n\t#include <morphnormal_vertex>\r\n\t#include <skinnormal_vertex>\r\n\t#include <defaultnormal_vertex>\r\n\r\n\t#endif\r\n\r\n\t#include <begin_vertex>\r\n\t#include <morphtarget_vertex>\r\n\t#include <skinning_vertex>\r\n\t#include <project_vertex>\r\n\t#include <logdepthbuf_vertex>\r\n\r\n\t#include <worldpos_vertex>\r\n\t#include <clipping_planes_vertex>\r\n\t#include <envmap_vertex>\r\n\t#include <fog_vertex>\r\n\r\n}\r\n",meshlambert_frag:"uniform vec3 diffuse;\r\nuniform vec3 emissive;\r\nuniform float opacity;\r\n\r\nvarying vec3 vLightFront;\r\n\r\n#ifdef DOUBLE_SIDED\r\n\r\n\tvarying vec3 vLightBack;\r\n\r\n#endif\r\n\r\n#include <common>\r\n#include <packing>\r\n#include <dithering_pars_fragment>\r\n#include <color_pars_fragment>\r\n#include <uv_pars_fragment>\r\n#include <uv2_pars_fragment>\r\n#include <map_pars_fragment>\r\n#include <alphamap_pars_fragment>\r\n#include <aomap_pars_fragment>\r\n#include <lightmap_pars_fragment>\r\n#include <emissivemap_pars_fragment>\r\n#include <envmap_pars_fragment>\r\n#include <bsdfs>\r\n#include <lights_pars>\r\n#include <fog_pars_fragment>\r\n#include <shadowmap_pars_fragment>\r\n#include <shadowmask_pars_fragment>\r\n#include <specularmap_pars_fragment>\r\n#include <logdepthbuf_pars_fragment>\r\n#include <clipping_planes_pars_fragment>\r\n\r\nvoid main() {\r\n\r\n\t#include <clipping_planes_fragment>\r\n\r\n\tvec4 diffuseColor = vec4( diffuse, opacity );\r\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\r\n\tvec3 totalEmissiveRadiance = emissive;\r\n\r\n\t#include <logdepthbuf_fragment>\r\n\t#include <map_fragment>\r\n\t#include <color_fragment>\r\n\t#include <alphamap_fragment>\r\n\t#include <alphatest_fragment>\r\n\t#include <specularmap_fragment>\r\n\t#include <emissivemap_fragment>\r\n\r\n\t// accumulation\r\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\r\n\r\n\t#include <lightmap_fragment>\r\n\r\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\r\n\r\n\t#ifdef DOUBLE_SIDED\r\n\r\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\r\n\r\n\t#else\r\n\r\n\t\treflectedLight.directDiffuse = vLightFront;\r\n\r\n\t#endif\r\n\r\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\r\n\r\n\t// modulation\r\n\t#include <aomap_fragment>\r\n\r\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\r\n\r\n\t#include <envmap_fragment>\r\n\r\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\r\n\r\n\t#include <tonemapping_fragment>\r\n\t#include <encodings_fragment>\r\n\t#include <fog_fragment>\r\n\t#include <premultiplied_alpha_fragment>\r\n\t#include <dithering_fragment>\r\n\r\n}\r\n",meshlambert_vert:"#define LAMBERT\r\n\r\nvarying vec3 vLightFront;\r\n\r\n#ifdef DOUBLE_SIDED\r\n\r\n\tvarying vec3 vLightBack;\r\n\r\n#endif\r\n\r\n#include <common>\r\n#include <uv_pars_vertex>\r\n#include <uv2_pars_vertex>\r\n#include <envmap_pars_vertex>\r\n#include <bsdfs>\r\n#include <lights_pars>\r\n#include <color_pars_vertex>\r\n#include <fog_pars_vertex>\r\n#include <morphtarget_pars_vertex>\r\n#include <skinning_pars_vertex>\r\n#include <shadowmap_pars_vertex>\r\n#include <logdepthbuf_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\n\r\nvoid main() {\r\n\r\n\t#include <uv_vertex>\r\n\t#include <uv2_vertex>\r\n\t#include <color_vertex>\r\n\r\n\t#include <beginnormal_vertex>\r\n\t#include <morphnormal_vertex>\r\n\t#include <skinbase_vertex>\r\n\t#include <skinnormal_vertex>\r\n\t#include <defaultnormal_vertex>\r\n\r\n\t#include <begin_vertex>\r\n\t#include <morphtarget_vertex>\r\n\t#include <skinning_vertex>\r\n\t#include <project_vertex>\r\n\t#include <logdepthbuf_vertex>\r\n\t#include <clipping_planes_vertex>\r\n\r\n\t#include <worldpos_vertex>\r\n\t#include <envmap_vertex>\r\n\t#include <lights_lambert_vertex>\r\n\t#include <shadowmap_vertex>\r\n\t#include <fog_vertex>\r\n\r\n}\r\n",meshphong_frag:"#define PHONG\r\n\r\nuniform vec3 diffuse;\r\nuniform vec3 emissive;\r\nuniform vec3 specular;\r\nuniform float shininess;\r\nuniform float opacity;\r\n\r\n#include <common>\r\n#include <packing>\r\n#include <dithering_pars_fragment>\r\n#include <color_pars_fragment>\r\n#include <uv_pars_fragment>\r\n#include <uv2_pars_fragment>\r\n#include <map_pars_fragment>\r\n#include <alphamap_pars_fragment>\r\n#include <aomap_pars_fragment>\r\n#include <lightmap_pars_fragment>\r\n#include <emissivemap_pars_fragment>\r\n#include <envmap_pars_fragment>\r\n#include <gradientmap_pars_fragment>\r\n#include <fog_pars_fragment>\r\n#include <bsdfs>\r\n#include <lights_pars>\r\n#include <lights_phong_pars_fragment>\r\n#include <shadowmap_pars_fragment>\r\n#include <bumpmap_pars_fragment>\r\n#include <normalmap_pars_fragment>\r\n#include <specularmap_pars_fragment>\r\n#include <logdepthbuf_pars_fragment>\r\n#include <clipping_planes_pars_fragment>\r\n\r\nvoid main() {\r\n\r\n\t#include <clipping_planes_fragment>\r\n\r\n\tvec4 diffuseColor = vec4( diffuse, opacity );\r\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\r\n\tvec3 totalEmissiveRadiance = emissive;\r\n\r\n\t#include <logdepthbuf_fragment>\r\n\t#include <map_fragment>\r\n\t#include <color_fragment>\r\n\t#include <alphamap_fragment>\r\n\t#include <alphatest_fragment>\r\n\t#include <specularmap_fragment>\r\n\t#include <normal_fragment>\r\n\t#include <emissivemap_fragment>\r\n\r\n\t// accumulation\r\n\t#include <lights_phong_fragment>\r\n\t#include <lights_template>\r\n\r\n\t// modulation\r\n\t#include <aomap_fragment>\r\n\r\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\r\n\r\n\t#include <envmap_fragment>\r\n\r\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\r\n\r\n\t#include <tonemapping_fragment>\r\n\t#include <encodings_fragment>\r\n\t#include <fog_fragment>\r\n\t#include <premultiplied_alpha_fragment>\r\n\t#include <dithering_fragment>\r\n\r\n}\r\n",meshphong_vert:"#define PHONG\r\n\r\nvarying vec3 vViewPosition;\r\n\r\n#ifndef FLAT_SHADED\r\n\r\n\tvarying vec3 vNormal;\r\n\r\n#endif\r\n\r\n#include <common>\r\n#include <uv_pars_vertex>\r\n#include <uv2_pars_vertex>\r\n#include <displacementmap_pars_vertex>\r\n#include <envmap_pars_vertex>\r\n#include <color_pars_vertex>\r\n#include <fog_pars_vertex>\r\n#include <morphtarget_pars_vertex>\r\n#include <skinning_pars_vertex>\r\n#include <shadowmap_pars_vertex>\r\n#include <logdepthbuf_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\n\r\nvoid main() {\r\n\r\n\t#include <uv_vertex>\r\n\t#include <uv2_vertex>\r\n\t#include <color_vertex>\r\n\r\n\t#include <beginnormal_vertex>\r\n\t#include <morphnormal_vertex>\r\n\t#include <skinbase_vertex>\r\n\t#include <skinnormal_vertex>\r\n\t#include <defaultnormal_vertex>\r\n\r\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\r\n\r\n\tvNormal = normalize( transformedNormal );\r\n\r\n#endif\r\n\r\n\t#include <begin_vertex>\r\n\t#include <morphtarget_vertex>\r\n\t#include <skinning_vertex>\r\n\t#include <displacementmap_vertex>\r\n\t#include <project_vertex>\r\n\t#include <logdepthbuf_vertex>\r\n\t#include <clipping_planes_vertex>\r\n\r\n\tvViewPosition = - mvPosition.xyz;\r\n\r\n\t#include <worldpos_vertex>\r\n\t#include <envmap_vertex>\r\n\t#include <shadowmap_vertex>\r\n\t#include <fog_vertex>\r\n\r\n}\r\n",meshphysical_frag:"#define PHYSICAL\r\n\r\nuniform vec3 diffuse;\r\nuniform vec3 emissive;\r\nuniform float roughness;\r\nuniform float metalness;\r\nuniform float opacity;\r\n\r\n#ifndef STANDARD\r\n\tuniform float clearCoat;\r\n\tuniform float clearCoatRoughness;\r\n#endif\r\n\r\nvarying vec3 vViewPosition;\r\n\r\n#ifndef FLAT_SHADED\r\n\r\n\tvarying vec3 vNormal;\r\n\r\n#endif\r\n\r\n#include <common>\r\n#include <packing>\r\n#include <dithering_pars_fragment>\r\n#include <color_pars_fragment>\r\n#include <uv_pars_fragment>\r\n#include <uv2_pars_fragment>\r\n#include <map_pars_fragment>\r\n#include <alphamap_pars_fragment>\r\n#include <aomap_pars_fragment>\r\n#include <lightmap_pars_fragment>\r\n#include <emissivemap_pars_fragment>\r\n#include <envmap_pars_fragment>\r\n#include <fog_pars_fragment>\r\n#include <bsdfs>\r\n#include <cube_uv_reflection_fragment>\r\n#include <lights_pars>\r\n#include <lights_physical_pars_fragment>\r\n#include <shadowmap_pars_fragment>\r\n#include <bumpmap_pars_fragment>\r\n#include <normalmap_pars_fragment>\r\n#include <roughnessmap_pars_fragment>\r\n#include <metalnessmap_pars_fragment>\r\n#include <logdepthbuf_pars_fragment>\r\n#include <clipping_planes_pars_fragment>\r\n\r\nvoid main() {\r\n\r\n\t#include <clipping_planes_fragment>\r\n\r\n\tvec4 diffuseColor = vec4( diffuse, opacity );\r\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\r\n\tvec3 totalEmissiveRadiance = emissive;\r\n\r\n\t#include <logdepthbuf_fragment>\r\n\t#include <map_fragment>\r\n\t#include <color_fragment>\r\n\t#include <alphamap_fragment>\r\n\t#include <alphatest_fragment>\r\n\t#include <roughnessmap_fragment>\r\n\t#include <metalnessmap_fragment>\r\n\t#include <normal_fragment>\r\n\t#include <emissivemap_fragment>\r\n\r\n\t// accumulation\r\n\t#include <lights_physical_fragment>\r\n\t#include <lights_template>\r\n\r\n\t// modulation\r\n\t#include <aomap_fragment>\r\n\r\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\r\n\r\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\r\n\r\n\t#include <tonemapping_fragment>\r\n\t#include <encodings_fragment>\r\n\t#include <fog_fragment>\r\n\t#include <premultiplied_alpha_fragment>\r\n\t#include <dithering_fragment>\r\n\r\n}\r\n",meshphysical_vert:"#define PHYSICAL\r\n\r\nvarying vec3 vViewPosition;\r\n\r\n#ifndef FLAT_SHADED\r\n\r\n\tvarying vec3 vNormal;\r\n\r\n#endif\r\n\r\n#include <common>\r\n#include <uv_pars_vertex>\r\n#include <uv2_pars_vertex>\r\n#include <displacementmap_pars_vertex>\r\n#include <color_pars_vertex>\r\n#include <fog_pars_vertex>\r\n#include <morphtarget_pars_vertex>\r\n#include <skinning_pars_vertex>\r\n#include <shadowmap_pars_vertex>\r\n#include <logdepthbuf_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\n\r\nvoid main() {\r\n\r\n\t#include <uv_vertex>\r\n\t#include <uv2_vertex>\r\n\t#include <color_vertex>\r\n\r\n\t#include <beginnormal_vertex>\r\n\t#include <morphnormal_vertex>\r\n\t#include <skinbase_vertex>\r\n\t#include <skinnormal_vertex>\r\n\t#include <defaultnormal_vertex>\r\n\r\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\r\n\r\n\tvNormal = normalize( transformedNormal );\r\n\r\n#endif\r\n\r\n\t#include <begin_vertex>\r\n\t#include <morphtarget_vertex>\r\n\t#include <skinning_vertex>\r\n\t#include <displacementmap_vertex>\r\n\t#include <project_vertex>\r\n\t#include <logdepthbuf_vertex>\r\n\t#include <clipping_planes_vertex>\r\n\r\n\tvViewPosition = - mvPosition.xyz;\r\n\r\n\t#include <worldpos_vertex>\r\n\t#include <shadowmap_vertex>\r\n\t#include <fog_vertex>\r\n\r\n}\r\n",normal_frag:"#define NORMAL\r\n\r\nuniform float opacity;\r\n\r\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\r\n\r\n\tvarying vec3 vViewPosition;\r\n\r\n#endif\r\n\r\n#ifndef FLAT_SHADED\r\n\r\n\tvarying vec3 vNormal;\r\n\r\n#endif\r\n\r\n#include <packing>\r\n#include <uv_pars_fragment>\r\n#include <bumpmap_pars_fragment>\r\n#include <normalmap_pars_fragment>\r\n#include <logdepthbuf_pars_fragment>\r\n\r\nvoid main() {\r\n\r\n\t#include <logdepthbuf_fragment>\r\n\t#include <normal_fragment>\r\n\r\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\r\n\r\n}\r\n",normal_vert:"#define NORMAL\r\n\r\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\r\n\r\n\tvarying vec3 vViewPosition;\r\n\r\n#endif\r\n\r\n#ifndef FLAT_SHADED\r\n\r\n\tvarying vec3 vNormal;\r\n\r\n#endif\r\n\r\n#include <uv_pars_vertex>\r\n#include <displacementmap_pars_vertex>\r\n#include <morphtarget_pars_vertex>\r\n#include <skinning_pars_vertex>\r\n#include <logdepthbuf_pars_vertex>\r\n\r\nvoid main() {\r\n\r\n\t#include <uv_vertex>\r\n\r\n\t#include <beginnormal_vertex>\r\n\t#include <morphnormal_vertex>\r\n\t#include <skinbase_vertex>\r\n\t#include <skinnormal_vertex>\r\n\t#include <defaultnormal_vertex>\r\n\r\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\r\n\r\n\tvNormal = normalize( transformedNormal );\r\n\r\n#endif\r\n\r\n\t#include <begin_vertex>\r\n\t#include <morphtarget_vertex>\r\n\t#include <skinning_vertex>\r\n\t#include <displacementmap_vertex>\r\n\t#include <project_vertex>\r\n\t#include <logdepthbuf_vertex>\r\n\r\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\r\n\r\n\tvViewPosition = - mvPosition.xyz;\r\n\r\n#endif\r\n\r\n}\r\n",points_frag:"uniform vec3 diffuse;\r\nuniform float opacity;\r\n\r\n#include <common>\r\n#include <packing>\r\n#include <color_pars_fragment>\r\n#include <map_particle_pars_fragment>\r\n#include <fog_pars_fragment>\r\n#include <shadowmap_pars_fragment>\r\n#include <logdepthbuf_pars_fragment>\r\n#include <clipping_planes_pars_fragment>\r\n\r\nvoid main() {\r\n\r\n\t#include <clipping_planes_fragment>\r\n\r\n\tvec3 outgoingLight = vec3( 0.0 );\r\n\tvec4 diffuseColor = vec4( diffuse, opacity );\r\n\r\n\t#include <logdepthbuf_fragment>\r\n\t#include <map_particle_fragment>\r\n\t#include <color_fragment>\r\n\t#include <alphatest_fragment>\r\n\r\n\toutgoingLight = diffuseColor.rgb;\r\n\r\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\r\n\r\n\t#include <premultiplied_alpha_fragment>\r\n\t#include <tonemapping_fragment>\r\n\t#include <encodings_fragment>\r\n\t#include <fog_fragment>\r\n\r\n}\r\n",points_vert:"uniform float size;\r\nuniform float scale;\r\n\r\n#include <common>\r\n#include <color_pars_vertex>\r\n#include <fog_pars_vertex>\r\n#include <shadowmap_pars_vertex>\r\n#include <logdepthbuf_pars_vertex>\r\n#include <clipping_planes_pars_vertex>\r\n\r\nvoid main() {\r\n\r\n\t#include <color_vertex>\r\n\t#include <begin_vertex>\r\n\t#include <project_vertex>\r\n\r\n\t#ifdef USE_SIZEATTENUATION\r\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\r\n\t#else\r\n\t\tgl_PointSize = size;\r\n\t#endif\r\n\r\n\t#include <logdepthbuf_vertex>\r\n\t#include <clipping_planes_vertex>\r\n\t#include <worldpos_vertex>\r\n\t#include <shadowmap_vertex>\r\n\t#include <fog_vertex>\r\n\r\n}\r\n",shadow_frag:"uniform vec3 color;\r\nuniform float opacity;\r\n\r\n#include <common>\r\n#include <packing>\r\n#include <fog_pars_fragment>\r\n#include <bsdfs>\r\n#include <lights_pars>\r\n#include <shadowmap_pars_fragment>\r\n#include <shadowmask_pars_fragment>\r\n\r\nvoid main() {\r\n\r\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\r\n\r\n\t#include <fog_fragment>\r\n\r\n}\r\n",shadow_vert:"#include <fog_pars_vertex>\r\n#include <shadowmap_pars_vertex>\r\n\r\nvoid main() {\r\n\r\n\t#include <begin_vertex>\r\n\t#include <project_vertex>\r\n\t#include <worldpos_vertex>\r\n\t#include <shadowmap_vertex>\r\n\t#include <fog_vertex>\r\n\r\n}\r\n"},Ec={basic:{uniforms:Ac.merge([Mc.common,Mc.specularmap,Mc.envmap,Mc.aomap,Mc.lightmap,Mc.fog]),vertexShader:wc.meshbasic_vert,fragmentShader:wc.meshbasic_frag},lambert:{uniforms:Ac.merge([Mc.common,Mc.specularmap,Mc.envmap,Mc.aomap,Mc.lightmap,Mc.emissivemap,Mc.fog,Mc.lights,{emissive:{value:new W(0)}}]),vertexShader:wc.meshlambert_vert,fragmentShader:wc.meshlambert_frag},phong:{uniforms:Ac.merge([Mc.common,Mc.specularmap,Mc.envmap,Mc.aomap,Mc.lightmap,Mc.emissivemap,Mc.bumpmap,Mc.normalmap,Mc.displacementmap,Mc.gradientmap,Mc.fog,Mc.lights,{emissive:{value:new W(0)},specular:{value:new W(1118481)},shininess:{value:30}}]),vertexShader:wc.meshphong_vert,fragmentShader:wc.meshphong_frag},standard:{uniforms:Ac.merge([Mc.common,Mc.envmap,Mc.aomap,Mc.lightmap,Mc.emissivemap,Mc.bumpmap,Mc.normalmap,Mc.displacementmap,Mc.roughnessmap,Mc.metalnessmap,Mc.fog,Mc.lights,{emissive:{value:new W(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:wc.meshphysical_vert,fragmentShader:wc.meshphysical_frag},points:{uniforms:Ac.merge([Mc.points,Mc.fog]),vertexShader:wc.points_vert,fragmentShader:wc.points_frag},dashed:{uniforms:Ac.merge([Mc.common,Mc.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:wc.linedashed_vert,fragmentShader:wc.linedashed_frag},depth:{uniforms:Ac.merge([Mc.common,Mc.displacementmap]),vertexShader:wc.depth_vert,fragmentShader:wc.depth_frag},normal:{uniforms:Ac.merge([Mc.common,Mc.bumpmap,Mc.normalmap,Mc.displacementmap,{opacity:{value:1}}]),vertexShader:wc.normal_vert,fragmentShader:wc.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:wc.cube_vert,fragmentShader:wc.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:wc.equirect_vert,fragmentShader:wc.equirect_frag},distanceRGBA:{uniforms:Ac.merge([Mc.common,Mc.displacementmap,{referencePosition:{value:new o},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:wc.distanceRGBA_vert,fragmentShader:wc.distanceRGBA_frag},shadow:{uniforms:Ac.merge([Mc.lights,Mc.fog,{color:{value:new W(0)},opacity:{value:1}}]),vertexShader:wc.shadow_vert,fragmentShader:wc.shadow_frag}};Ec.physical={uniforms:Ac.merge([Ec.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:wc.meshphysical_vert,fragmentShader:wc.meshphysical_frag},q.prototype=Object.create(a.prototype),q.prototype.constructor=q;var bc=0;Z.prototype=Object.assign(Object.create(t.prototype),{constructor:Z,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0!==r)if("shading"!==t){var n=this[t];void 0!==n?n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[t]="overdraw"===t?Number(r):r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===r;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){function t(e){var t=[];for(var r in e){var n=e[r];delete n.metadata,t.push(n)}return t}var r=void 0===e||"string"==typeof e;r&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==cs&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==ts&&(n.side=this.side),this.vertexColors!==is&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),r){var i=t(e.textures),o=t(e.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,r=null;if(null!==t){var n=t.length;r=new Array(n);for(var i=0;i!==n;++i)r[i]=t[i].clone()}return this.clippingPlanes=r,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),J.prototype=Object.create(Z.prototype),J.prototype.constructor=J,J.prototype.isMeshDepthMaterial=!0,J.prototype.copy=function(e){return Z.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},K.prototype=Object.create(Z.prototype),K.prototype.constructor=K,K.prototype.isMeshDistanceMaterial=!0,K.prototype.copy=function(e){return Z.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Object.assign($.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,r=1/0,n=1/0,i=-1/0,o=-1/0,s=-1/0,a=0,c=e.length;a<c;a+=3){var l=e[a],u=e[a+1],h=e[a+2];l<t&&(t=l),u<r&&(r=u),h<n&&(n=h),l>i&&(i=l),u>o&&(o=u),h>s&&(s=h)}return this.min.set(t,r,n),this.max.set(i,o,s),this},setFromBufferAttribute:function(e){for(var t=1/0,r=1/0,n=1/0,i=-1/0,o=-1/0,s=-1/0,a=0,c=e.count;a<c;a++){var l=e.getX(a),u=e.getY(a),h=e.getZ(a);l<t&&(t=l),u<r&&(r=u),h<n&&(n=h),l>i&&(i=l),u>o&&(o=u),h>s&&(s=h)}return this.min.set(t,r,n),this.max.set(i,o,s),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new o;return function(t,r){var n=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new o;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new o;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){function e(e){var o=e.geometry;if(void 0!==o)if(o.isGeometry){var s=o.vertices;for(r=0,n=s.length;r<n;r++)i.copy(s[r]),i.applyMatrix4(e.matrixWorld),t.expandByPoint(i)}else if(o.isBufferGeometry){var a=o.attributes.position;if(void 0!==a)for(r=0,n=a.count;r<n;r++)i.fromBufferAttribute(a,r).applyMatrix4(e.matrixWorld),t.expandByPoint(i)}}var t,r,n,i=new o;return function(r){return t=this,r.updateMatrixWorld(!0),r.traverse(e),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return(t||new o).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new o;return function(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=e.constant&&r>=e.constant},intersectsTriangle:function(){function e(e){var i,o;for(i=0,o=e.length-3;i<=o;i+=3){c.fromArray(e,i);var s=u.x*Math.abs(c.x)+u.y*Math.abs(c.y)+u.z*Math.abs(c.z),a=t.dot(c),l=r.dot(c),h=n.dot(c);if(Math.max(-Math.max(a,l,h),Math.min(a,l,h))>s)return!1}return!0}var t=new o,r=new o,n=new o,i=new o,s=new o,a=new o,c=new o,l=new o,u=new o,h=new o;return function(o){if(this.isEmpty())return!1;this.getCenter(l),u.subVectors(this.max,l),t.subVectors(o.a,l),r.subVectors(o.b,l),n.subVectors(o.c,l),i.subVectors(r,t),s.subVectors(n,r),a.subVectors(t,n);var c=[0,-i.z,i.y,0,-s.z,s.y,0,-a.z,a.y,i.z,0,-i.x,s.z,0,-s.x,a.z,0,-a.x,-i.y,i.x,0,-s.y,s.x,0,-a.y,a.x,0];return!!e(c)&&(c=[1,0,0,0,1,0,0,0,1],!!e(c)&&(h.crossVectors(i,s),c=[h.x,h.y,h.z],e(c)))}}(),clampPoint:function(e,t){return(t||new o).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new o;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new o;return function(t){var r=t||new ee;return this.getCenter(r.center),r.radius=.5*this.getSize(e).length(),r}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new o,new o,new o,new o,new o,new o,new o,new o];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(ee.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new $;return function(t,r){var n=this.center;void 0!==r?n.copy(r):e.setFromPoints(t).getCenter(n);for(var i=0,o=0,s=t.length;o<s;o++)i=Math.max(i,n.distanceToSquared(t[o]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var r=this.center.distanceToSquared(e),n=t||new o;return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(e){var t=e||new $;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(te.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,r,n){return this.normal.set(e,t,r),this.constant=n,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new o,t=new o;return function(r,n,i){var o=e.subVectors(i,n).cross(t.subVectors(r,n)).normalize();return this.setFromNormalAndCoplanarPoint(o,r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return(t||new o).copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new o;return function(t,r){var n=r||new o,i=t.delta(e),s=this.normal.dot(i);if(0!==s){var a=-(t.start.dot(this.normal)+this.constant)/s;if(!(a<0||a>1))return n.copy(i).multiplyScalar(a).add(t.start)}else if(0===this.distanceToPoint(t.start))return n.copy(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return(e||new o).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new o,t=new s;return function(r,n){var i=n||t.getNormalMatrix(r),o=this.coplanarPoint(e).applyMatrix4(r),s=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(s),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(re.prototype,{set:function(e,t,r,n,i,o){var s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(r),s[3].copy(n),s[4].copy(i),s[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,r=0;r<6;r++)t[r].copy(e.planes[r]);return this},setFromMatrix:function(e){var t=this.planes,r=e.elements,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],c=r[5],l=r[6],u=r[7],h=r[8],d=r[9],p=r[10],m=r[11],f=r[12],v=r[13],y=r[14],g=r[15];return t[0].setComponents(s-n,u-a,m-h,g-f).normalize(),t[1].setComponents(s+n,u+a,m+h,g+f).normalize(),t[2].setComponents(s+i,u+c,m+d,g+v).normalize(),t[3].setComponents(s-i,u-c,m-d,g-v).normalize(),t[4].setComponents(s-o,u-l,m-p,g-y).normalize(),t[5].setComponents(s+o,u+l,m+p,g+y).normalize(),this},intersectsObject:function(){var e=new ee;return function(t){var r=t.geometry;return null===r.boundingSphere&&r.computeBoundingSphere(),e.copy(r.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new ee;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,r=e.center,n=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(r)<n)return!1}return!0},intersectsBox:function(){var e=new o,t=new o;return function(r){for(var n=this.planes,i=0;i<6;i++){var o=n[i];e.x=o.normal.x>0?r.min.x:r.max.x,t.x=o.normal.x>0?r.max.x:r.min.x,e.y=o.normal.y>0?r.min.y:r.max.y,t.y=o.normal.y>0?r.max.y:r.min.y,e.z=o.normal.z>0?r.min.z:r.max.z,t.z=o.normal.z>0?r.max.z:r.min.z;var s=o.distanceToPoint(e),a=o.distanceToPoint(t);if(s<0&&a<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}}),oe.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],oe.DefaultOrder="XYZ",Object.defineProperties(oe.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(oe.prototype,{isEuler:!0,set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,r){var n=uc.clamp,i=e.elements,o=i[0],s=i[4],a=i[8],c=i[1],l=i[5],u=i[9],h=i[2],d=i[6],p=i[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(n(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(d,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-n(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(a,p),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(n(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(c,o))):"ZYX"===t?(this._y=Math.asin(-n(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(d,p),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-s,l))):"YZX"===t?(this._z=Math.asin(n(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(a,p))):"XZY"===t?(this._z=Math.asin(-n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(d,l),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-u,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==r&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new n;return function(t,r,n){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,r,n)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new i;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new o(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(se.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var Tc=0;ae.DefaultUp=new o(0,1,0),ae.DefaultMatrixAutoUpdate=!0,ae.prototype=Object.assign(Object.create(t.prototype),{constructor:ae,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new i;return function(t,r){return e.setFromAxisAngle(t,r),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new i;return function(t,r){return e.setFromAxisAngle(t,r),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new o(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new o(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new o(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new o;return function(t,r){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(r)),this}}(),translateX:function(){var e=new o(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new o(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new o(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new n;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new n,t=new o;return function(r,n,i){r.isVector3?t.copy(r):t.set(r,n,i),this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var r=this.children.indexOf(e);return-1!==r&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(r,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var r=0,n=this.children.length;r<n;r++){var i=this.children[r],o=i.getObjectByProperty(e,t);if(void 0!==o)return o}},getWorldPosition:function(e){var t=e||new o;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new o,t=new o;return function(r){var n=r||new i;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,n,t),n}}(),getWorldRotation:function(){var e=new i;return function(t){var r=t||new oe;return this.getWorldQuaternion(e),r.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new o,t=new i;return function(r){var n=r||new o;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(){var e=new i;return function(t){var r=t||new o;return this.getWorldQuaternion(e),r.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].updateMatrixWorld(e)},toJSON:function(e){function t(t,r){return void 0===t[r.uuid]&&(t[r.uuid]=r.toJSON(e)),r.uuid}function r(e){var t=[];for(var r in e){var n=e[r];delete n.metadata,t.push(n)}return t}var n=void 0===e||"string"==typeof e,i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var o={};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.matrix=this.matrix.toArray(),void 0!==this.geometry){o.geometry=t(e.geometries,this.geometry);var s=this.geometry.parameters;if(void 0!==s&&void 0!==s.shapes){var a=s.shapes;if(Array.isArray(a))for(var c=0,l=a.length;c<l;c++){var u=a[c];t(e.shapes,u)}else t(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var h=[],c=0,l=this.material.length;c<l;c++)h.push(t(e.materials,this.material[c]));o.material=h}else o.material=t(e.materials,this.material);if(this.children.length>0){o.children=[];for(var c=0;c<this.children.length;c++)o.children.push(this.children[c].toJSON(e).object)}if(n){var d=r(e.geometries),p=r(e.materials),m=r(e.textures),f=r(e.images),a=r(e.shapes);d.length>0&&(i.geometries=d),p.length>0&&(i.materials=p),m.length>0&&(i.textures=m),f.length>0&&(i.images=f),a.length>0&&(i.shapes=a)}return i.object=o,i},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var r=0;r<e.children.length;r++){var n=e.children[r];this.add(n.clone())}return this}}),ce.prototype=Object.assign(Object.create(ae.prototype),{constructor:ce,isCamera:!0,copy:function(e,t){return ae.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new i;return function(t){var r=t||new o;return this.getWorldQuaternion(e),r.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){ae.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),le.prototype=Object.assign(Object.create(ce.prototype),{constructor:le,isOrthographicCamera:!0,copy:function(e,t){return ce.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,r,n,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2,i=r-e,o=r+e,s=n+t,a=n-t;if(null!==this.view&&this.view.enabled){var c=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;i+=u*(this.view.offsetX/c),o=i+u*(this.view.width/c),s-=h*(this.view.offsetY/l),a=s-h*(this.view.height/l)}this.projectionMatrix.makeOrthographic(i,o,s,a,this.near,this.far)},toJSON:function(e){var t=ae.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(ue.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var Lc=0;he.prototype=Object.assign(Object.create(t.prototype),{constructor:he,isGeometry:!0,applyMatrix:function(e){for(var t=(new s).getNormalMatrix(e),r=0,n=this.vertices.length;r<n;r++){this.vertices[r].applyMatrix4(e)}for(var r=0,n=this.faces.length;r<n;r++){var i=this.faces[r];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new n;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new n;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new n;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new n;return function(t,r,n){return e.makeTranslation(t,r,n),this.applyMatrix(e),this}}(),scale:function(){var e=new n;return function(t,r,n){return e.makeScale(t,r,n),this.applyMatrix(e),this}}(),lookAt:function(){var e=new ae;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function t(e,t,r,i){var o=void 0!==c?[d[e].clone(),d[t].clone(),d[r].clone()]:[],s=void 0!==l?[n.colors[e].clone(),n.colors[t].clone(),n.colors[r].clone()]:[],a=new ue(e,t,r,o,s,i);n.faces.push(a),void 0!==u&&n.faceVertexUvs[0].push([p[e].clone(),p[t].clone(),p[r].clone()]),void 0!==h&&n.faceVertexUvs[1].push([m[e].clone(),m[t].clone(),m[r].clone()])}var n=this,i=null!==e.index?e.index.array:void 0,s=e.attributes,a=s.position.array,c=void 0!==s.normal?s.normal.array:void 0,l=void 0!==s.color?s.color.array:void 0,u=void 0!==s.uv?s.uv.array:void 0,h=void 0!==s.uv2?s.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var d=[],p=[],m=[],f=0,v=0;f<a.length;f+=3,v+=2)n.vertices.push(new o(a[f],a[f+1],a[f+2])),void 0!==c&&d.push(new o(c[f],c[f+1],c[f+2])),void 0!==l&&n.colors.push(new W(l[f],l[f+1],l[f+2])),void 0!==u&&p.push(new r(u[v],u[v+1])),void 0!==h&&m.push(new r(h[v],h[v+1]));var y=e.groups;if(y.length>0)for(var f=0;f<y.length;f++)for(var g=y[f],x=g.start,M=g.count,v=x,A=x+M;v<A;v+=3)void 0!==i?t(i[v],i[v+1],i[v+2],g.materialIndex):t(v,v+1,v+2,g.materialIndex);else if(void 0!==i)for(var f=0;f<i.length;f+=3)t(i[f],i[f+1],i[f+2]);else for(var f=0;f<a.length/3;f+=3)t(f,f+1,f+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,r=0===t?1:1/t,i=new n;return i.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new o,t=new o,r=0,n=this.faces.length;r<n;r++){var i=this.faces[r],s=this.vertices[i.a],a=this.vertices[i.b],c=this.vertices[i.c];e.subVectors(c,a),t.subVectors(s,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);var t,r,n,i,s,a;for(a=new Array(this.vertices.length),t=0,r=this.vertices.length;t<r;t++)a[t]=new o;if(e){var c,l,u,h=new o,d=new o;for(n=0,i=this.faces.length;n<i;n++)s=this.faces[n],c=this.vertices[s.a],l=this.vertices[s.b],u=this.vertices[s.c],h.subVectors(u,l),d.subVectors(c,l),h.cross(d),a[s.a].add(h),a[s.b].add(h),a[s.c].add(h)}else for(this.computeFaceNormals(),n=0,i=this.faces.length;n<i;n++)s=this.faces[n],a[s.a].add(s.normal),a[s.b].add(s.normal),a[s.c].add(s.normal);for(t=0,r=this.vertices.length;t<r;t++)a[t].normalize();for(n=0,i=this.faces.length;n<i;n++){s=this.faces[n];var p=s.vertexNormals;3===p.length?(p[0].copy(a[s.a]),p[1].copy(a[s.b]),p[2].copy(a[s.c])):(p[0]=a[s.a].clone(),p[1]=a[s.b].clone(),p[2]=a[s.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,r;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){r=this.faces[e];var n=r.vertexNormals;3===n.length?(n[0].copy(r.normal),n[1].copy(r.normal),n[2].copy(r.normal)):(n[0]=r.normal.clone(),n[1]=r.normal.clone(),n[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,r,n,i;for(r=0,n=this.faces.length;r<n;r++)for(i=this.faces[r],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var s=new he;for(s.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a,c,l=this.morphNormals[e].faceNormals,u=this.morphNormals[e].vertexNormals;for(r=0,n=this.faces.length;r<n;r++)a=new o,c={a:new o,b:new o,c:new o},l.push(a),u.push(c)}var h=this.morphNormals[e];s.vertices=this.morphTargets[e].vertices,s.computeFaceNormals(),s.computeVertexNormals();var a,c;for(r=0,n=this.faces.length;r<n;r++)i=this.faces[r],a=h.faceNormals[r],c=h.vertexNormals[r],a.copy(i.normal),c.a.copy(i.vertexNormals[0]),c.b.copy(i.vertexNormals[1]),c.c.copy(i.vertexNormals[2])}for(r=0,n=this.faces.length;r<n;r++)i=this.faces[r],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new $),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new ee),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,r){if(!e||!e.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);var n,i=this.vertices.length,o=this.vertices,a=e.vertices,c=this.faces,l=e.faces,u=this.faceVertexUvs[0],h=e.faceVertexUvs[0],d=this.colors,p=e.colors;void 0===r&&(r=0),void 0!==t&&(n=(new s).getNormalMatrix(t));for(var m=0,f=a.length;m<f;m++){var v=a[m],y=v.clone();void 0!==t&&y.applyMatrix4(t),o.push(y)}for(var m=0,f=p.length;m<f;m++)d.push(p[m].clone());for(m=0,f=l.length;m<f;m++){var g,x,M,A=l[m],w=A.vertexNormals,E=A.vertexColors;g=new ue(A.a+i,A.b+i,A.c+i),g.normal.copy(A.normal),void 0!==n&&g.normal.applyMatrix3(n).normalize();for(var b=0,T=w.length;b<T;b++)x=w[b].clone(),void 0!==n&&x.applyMatrix3(n).normalize(),g.vertexNormals.push(x);g.color.copy(A.color);for(var b=0,T=E.length;b<T;b++)M=E[b],g.vertexColors.push(M.clone());g.materialIndex=A.materialIndex+r,c.push(g)}for(m=0,f=h.length;m<f;m++){var L=h[m],N=[];if(void 0!==L){for(var b=0,T=L.length;b<T;b++)N.push(L[b].clone());u.push(N)}}},mergeMesh:function(e){if(!e||!e.isMesh)return void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)},mergeVertices:function(){var e,t,r,n,i,o,s,a,c={},l=[],u=[],h=Math.pow(10,4);for(r=0,n=this.vertices.length;r<n;r++)e=this.vertices[r],t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h),void 0===c[t]?(c[t]=r,l.push(this.vertices[r]),u[r]=l.length-1):u[r]=u[c[t]];var d=[];for(r=0,n=this.faces.length;r<n;r++){i=this.faces[r],i.a=u[i.a],i.b=u[i.b],i.c=u[i.c],o=[i.a,i.b,i.c];for(var p=0;p<3;p++)if(o[p]===o[(p+1)%3]){d.push(r);break}}for(r=d.length-1;r>=0;r--){var m=d[r];for(this.faces.splice(m,1),s=0,a=this.faceVertexUvs.length;s<a;s++)this.faceVertexUvs[s].splice(m,1)}var f=this.vertices.length-l.length;return this.vertices=l,f},setFromPoints:function(e){this.vertices=[];for(var t=0,r=e.length;t<r;t++){var n=e[t];this.vertices.push(new o(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){function e(e,t){return e.materialIndex-t.materialIndex}for(var t=this.faces,r=t.length,n=0;n<r;n++)t[n]._id=n;t.sort(e);var i,o,s=this.faceVertexUvs[0],a=this.faceVertexUvs[1];s&&s.length===r&&(i=[]),a&&a.length===r&&(o=[]);for(var n=0;n<r;n++){var c=t[n]._id;i&&i.push(s[c]),o&&o.push(a[c])}i&&(this.faceVertexUvs[0]=i),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){function e(e,t,r){return r?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==d[t]?d[t]:(d[t]=h.length/3,h.push(e.x,e.y,e.z),d[t])}function r(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==m[t]?m[t]:(m[t]=p.length,p.push(e.getHex()),m[t])}function n(e){var t=e.x.toString()+e.y.toString();return void 0!==v[t]?v[t]:(v[t]=f.length/2,f.push(e.x,e.y),v[t])}var i={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var s in o)void 0!==o[s]&&(i[s]=o[s]);return i}for(var a=[],c=0;c<this.vertices.length;c++){var l=this.vertices[c];a.push(l.x,l.y,l.z)}for(var u=[],h=[],d={},p=[],m={},f=[],v={},c=0;c<this.faces.length;c++){var y=this.faces[c],g=void 0!==this.faceVertexUvs[0][c],x=y.normal.length()>0,M=y.vertexNormals.length>0,A=1!==y.color.r||1!==y.color.g||1!==y.color.b,w=y.vertexColors.length>0,E=0;if(E=e(E,0,0),E=e(E,1,!0),E=e(E,2,!1),E=e(E,3,g),E=e(E,4,x),E=e(E,5,M),E=e(E,6,A),E=e(E,7,w),u.push(E),u.push(y.a,y.b,y.c),u.push(y.materialIndex),g){var b=this.faceVertexUvs[0][c];u.push(n(b[0]),n(b[1]),n(b[2]))}if(x&&u.push(t(y.normal)),M){var T=y.vertexNormals;u.push(t(T[0]),t(T[1]),t(T[2]))}if(A&&u.push(r(y.color)),w){var L=y.vertexColors;u.push(r(L[0]),r(L[1]),r(L[2]))}}return i.data={},i.data.vertices=a,i.data.normals=h,p.length>0&&(i.data.colors=p),f.length>0&&(i.data.uvs=[f]),i.data.faces=u,i},clone:function(){return(new he).copy(this)},copy:function(e){var t,r,n,i,o,s;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var a=e.vertices;for(t=0,r=a.length;t<r;t++)this.vertices.push(a[t].clone());var c=e.colors;for(t=0,r=c.length;t<r;t++)this.colors.push(c[t].clone());var l=e.faces;for(t=0,r=l.length;t<r;t++)this.faces.push(l[t].clone());for(t=0,r=e.faceVertexUvs.length;t<r;t++){var u=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),n=0,i=u.length;n<i;n++){var h=u[n],d=[];for(o=0,s=h.length;o<s;o++){var p=h[o];d.push(p.clone())}this.faceVertexUvs[t].push(d)}}var m=e.morphTargets;for(t=0,r=m.length;t<r;t++){var f={};if(f.name=m[t].name,void 0!==m[t].vertices)for(f.vertices=[],n=0,i=m[t].vertices.length;n<i;n++)f.vertices.push(m[t].vertices[n].clone());if(void 0!==m[t].normals)for(f.normals=[],n=0,i=m[t].normals.length;n<i;n++)f.normals.push(m[t].normals[n].clone());this.morphTargets.push(f)}var v=e.morphNormals;for(t=0,r=v.length;t<r;t++){var y={};if(void 0!==v[t].vertexNormals)for(y.vertexNormals=[],n=0,i=v[t].vertexNormals.length;n<i;n++){var g=v[t].vertexNormals[n],x={};x.a=g.a.clone(),x.b=g.b.clone(),x.c=g.c.clone(),y.vertexNormals.push(x)}if(void 0!==v[t].faceNormals)for(y.faceNormals=[],n=0,i=v[t].faceNormals.length;n<i;n++)y.faceNormals.push(v[t].faceNormals[n].clone());this.morphNormals.push(y)}var M=e.skinWeights;for(t=0,r=M.length;t<r;t++)this.skinWeights.push(M[t].clone());var A=e.skinIndices;for(t=0,r=A.length;t<r;t++)this.skinIndices.push(A[t].clone());var w=e.lineDistances;for(t=0,r=w.length;t<r;t++)this.lineDistances.push(w[t]);var E=e.boundingBox;null!==E&&(this.boundingBox=E.clone());var b=e.boundingSphere;return null!==b&&(this.boundingSphere=b.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(de.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(de.prototype,{isBufferAttribute:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.itemSize,r*=t.itemSize;for(var n=0,i=this.itemSize;n<i;n++)this.array[e+n]=t.array[r+n];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),o=new W),t[r++]=o.r,t[r++]=o.g,t[r++]=o.b}return this},copyIndicesArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];t[r++]=o.a,t[r++]=o.b,t[r++]=o.c}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,i=0,o=e.length;i<o;i++){var s=e[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new r),t[n++]=s.x,t[n++]=s.y}return this},copyVector3sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var s=e[n];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),s=new o),t[r++]=s.x,t[r++]=s.y,t[r++]=s.z}return this},copyVector4sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),o=new c),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z,t[r++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this},setXYZW:function(e,t,r,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),pe.prototype=Object.create(de.prototype),pe.prototype.constructor=pe,me.prototype=Object.create(de.prototype),me.prototype.constructor=me,fe.prototype=Object.create(de.prototype),fe.prototype.constructor=fe,ve.prototype=Object.create(de.prototype),ve.prototype.constructor=ve,ye.prototype=Object.create(de.prototype),ye.prototype.constructor=ye,ge.prototype=Object.create(de.prototype),ge.prototype.constructor=ge,xe.prototype=Object.create(de.prototype),xe.prototype.constructor=xe,Me.prototype=Object.create(de.prototype),Me.prototype.constructor=Me,Ae.prototype=Object.create(de.prototype),Ae.prototype.constructor=Ae,Object.assign(we.prototype,{computeGroups:function(e){for(var t,r=[],n=void 0,i=e.faces,o=0;o<i.length;o++){var s=i[o];s.materialIndex!==n&&(n=s.materialIndex,void 0!==t&&(t.count=3*o-t.start,r.push(t)),t={start:3*o,materialIndex:n})}void 0!==t&&(t.count=3*o-t.start,r.push(t)),this.groups=r},fromGeometry:function(e){var t,n=e.faces,i=e.vertices,o=e.faceVertexUvs,s=o[0]&&o[0].length>0,a=o[1]&&o[1].length>0,c=e.morphTargets,l=c.length;if(l>0){t=[];for(var u=0;u<l;u++)t[u]=[];this.morphTargets.position=t}var h,d=e.morphNormals,p=d.length;if(p>0){h=[];for(var u=0;u<p;u++)h[u]=[];this.morphTargets.normal=h}for(var m=e.skinIndices,f=e.skinWeights,v=m.length===i.length,y=f.length===i.length,u=0;u<n.length;u++){var g=n[u];this.vertices.push(i[g.a],i[g.b],i[g.c]);var x=g.vertexNormals;if(3===x.length)this.normals.push(x[0],x[1],x[2]);else{var M=g.normal;this.normals.push(M,M,M)}var A=g.vertexColors;if(3===A.length)this.colors.push(A[0],A[1],A[2]);else{var w=g.color;this.colors.push(w,w,w)}if(!0===s){var E=o[0][u];void 0!==E?this.uvs.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new r,new r,new r))}if(!0===a){var E=o[1][u];void 0!==E?this.uvs2.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new r,new r,new r))}for(var b=0;b<l;b++){var T=c[b].vertices;t[b].push(T[g.a],T[g.b],T[g.c])}for(var b=0;b<p;b++){var L=d[b].vertexNormals[u];h[b].push(L.a,L.b,L.c)}v&&this.skinIndices.push(m[g.a],m[g.b],m[g.c]),y&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Nc=1;be.prototype=Object.assign(Object.create(t.prototype),{constructor:be,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Ee(e)>65535?xe:ye)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new de(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,r){this.groups.push({start:e,count:t,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var r=this.attributes.normal;if(void 0!==r){(new s).getNormalMatrix(e).applyToBufferAttribute(r),r.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new n;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new n;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new n;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new n;return function(t,r,n){return e.makeTranslation(t,r,n),this.applyMatrix(e),this}}(),scale:function(){var e=new n;return function(t,r,n){return e.makeScale(t,r,n),this.applyMatrix(e),this}}(),lookAt:function(){var e=new ae;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var r=new Me(3*t.vertices.length,3),n=new Me(3*t.colors.length,3);if(this.addAttribute("position",r.copyVector3sArray(t.vertices)),this.addAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new Me(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];t.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new Me(t,3)),this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var r=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(r=void 0,t.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(t);r.verticesNeedUpdate=t.verticesNeedUpdate,r.normalsNeedUpdate=t.normalsNeedUpdate,r.colorsNeedUpdate=t.colorsNeedUpdate,r.uvsNeedUpdate=t.uvsNeedUpdate,r.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=r}var n;return!0===t.verticesNeedUpdate&&(n=this.attributes.position,void 0!==n&&(n.copyVector3sArray(t.vertices),n.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(n=this.attributes.normal,void 0!==n&&(n.copyVector3sArray(t.normals),n.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(n=this.attributes.color,void 0!==n&&(n.copyColorsArray(t.colors),n.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(n=this.attributes.uv,void 0!==n&&(n.copyVector2sArray(t.uvs),n.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(n=this.attributes.lineDistance,void 0!==n&&(n.copyArray(t.lineDistances),n.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new we).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new de(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var r=new Float32Array(3*e.normals.length);this.addAttribute("normal",new de(r,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var n=new Float32Array(3*e.colors.length);this.addAttribute("color",new de(n,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new de(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new de(o,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var s=Ee(e.indices)>65535?Uint32Array:Uint16Array,a=new s(3*e.indices.length);this.setIndex(new de(a,1).copyIndicesArray(e.indices))}this.groups=e.groups;for(var c in e.morphTargets){for(var l=[],u=e.morphTargets[c],h=0,d=u.length;h<d;h++){var p=u[h],m=new Me(3*p.length,3);l.push(m.copyVector3sArray(p))}this.morphAttributes[c]=l}if(e.skinIndices.length>0){var f=new Me(4*e.skinIndices.length,4);this.addAttribute("skinIndex",f.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var v=new Me(4*e.skinWeights.length,4);this.addAttribute("skinWeight",v.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new $);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new $,t=new o;return function(){null===this.boundingSphere&&(this.boundingSphere=new ee);var r=this.attributes.position;if(r){var n=this.boundingSphere.center;e.setFromBufferAttribute(r),e.getCenter(n);for(var i=0,o=0,s=r.count;o<s;o++)t.x=r.getX(o),t.y=r.getY(o),t.z=r.getZ(o),i=Math.max(i,n.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,r=this.groups;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new de(new Float32Array(n.length),3));else for(var i=t.normal.array,s=0,a=i.length;s<a;s++)i[s]=0;var c,l,u,h=t.normal.array,d=new o,p=new o,m=new o,f=new o,v=new o;if(e){var y=e.array;0===r.length&&this.addGroup(0,y.length);for(var g=0,x=r.length;g<x;++g)for(var M=r[g],A=M.start,w=M.count,s=A,a=A+w;s<a;s+=3)c=3*y[s+0],l=3*y[s+1],u=3*y[s+2],d.fromArray(n,c),p.fromArray(n,l),m.fromArray(n,u),f.subVectors(m,p),v.subVectors(d,p),f.cross(v),h[c]+=f.x,h[c+1]+=f.y,h[c+2]+=f.z,h[l]+=f.x,h[l+1]+=f.y,h[l+2]+=f.z,h[u]+=f.x,h[u+1]+=f.y,h[u+2]+=f.z}else for(var s=0,a=n.length;s<a;s+=9)d.fromArray(n,s),p.fromArray(n,s+3),m.fromArray(n,s+6),f.subVectors(m,p),v.subVectors(d,p),f.cross(v),h[s]=f.x,h[s+1]=f.y,h[s+2]=f.z,h[s+3]=f.x,h[s+4]=f.y,h[s+5]=f.z,h[s+6]=f.x,h[s+7]=f.y,h[s+8]=f.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0);var r=this.attributes;for(var n in r)if(void 0!==e.attributes[n])for(var i=r[n],o=i.array,s=e.attributes[n],a=s.array,c=s.itemSize,l=0,u=c*t;l<a.length;l++,u++)o[u]=a[l];return this},normalizeNormals:function(){var e=new o;return function(){for(var t=this.attributes.normal,r=0,n=t.count;r<n;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.normalize(),t.setXYZ(r,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new be,t=this.index.array,r=this.attributes;for(var n in r){for(var i=r[n],o=i.array,s=i.itemSize,a=new o.constructor(t.length*s),c=0,l=0,u=0,h=t.length;u<h;u++){c=t[u]*s;for(var d=0;d<s;d++)a[l++]=o[c++]}e.addAttribute(n,new de(a,s))}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}e.data={attributes:{}};var n=this.index;if(null!==n){var i=Array.prototype.slice.call(n.array);e.data.index={type:n.array.constructor.name,array:i}}var o=this.attributes;for(var r in o){var s=o[r],i=Array.prototype.slice.call(s.array);e.data.attributes[r]={itemSize:s.itemSize,type:s.array.constructor.name,array:i,normalized:s.normalized}}var a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));var c=this.boundingSphere;return null!==c&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e},clone:function(){return(new be).copy(this)},copy:function(e){var t,r,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var o=e.attributes;for(t in o){var s=o[t];this.addAttribute(t,s.clone())}var a=e.morphAttributes;for(t in a){var c=[],l=a[t];for(r=0,n=l.length;r<n;r++)c.push(l[r].clone());this.morphAttributes[t]=c}var u=e.groups;for(r=0,n=u.length;r<n;r++){var h=u[r];this.addGroup(h.start,h.count,h.materialIndex)}var d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());var p=e.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Te.prototype=Object.create(he.prototype),Te.prototype.constructor=Te,Le.prototype=Object.create(be.prototype),Le.prototype.constructor=Le,Ne.prototype=Object.create(he.prototype),Ne.prototype.constructor=Ne,De.prototype=Object.create(be.prototype),De.prototype.constructor=De,Ce.prototype=Object.create(Z.prototype),Ce.prototype.constructor=Ce,Ce.prototype.isMeshBasicMaterial=!0,Ce.prototype.copy=function(e){return Z.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Se.prototype=Object.create(Z.prototype),Se.prototype.constructor=Se,Se.prototype.isShaderMaterial=!0,Se.prototype.copy=function(e){return Z.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ac.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Se.prototype.toJSON=function(e){var t=Z.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(Ie.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new o).copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new o;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var r=t||new o;r.subVectors(e,this.origin);var n=r.dot(this.direction);return n<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new o;return function(t){var r=e.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(r).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new o,t=new o,r=new o;return function(n,i,o,s){e.copy(n).add(i).multiplyScalar(.5),t.copy(i).sub(n).normalize(),r.copy(this.origin).sub(e);var a,c,l,u,h=.5*n.distanceTo(i),d=-this.direction.dot(t),p=r.dot(this.direction),m=-r.dot(t),f=r.lengthSq(),v=Math.abs(1-d*d);if(v>0)if(a=d*m-p,c=d*p-m,u=h*v,a>=0)if(c>=-u)if(c<=u){var y=1/v;a*=y,c*=y,l=a*(a+d*c+2*p)+c*(d*a+c+2*m)+f}else c=h,a=Math.max(0,-(d*c+p)),l=-a*a+c*(c+2*m)+f;else c=-h,a=Math.max(0,-(d*c+p)),l=-a*a+c*(c+2*m)+f;else c<=-u?(a=Math.max(0,-(-d*h+p)),c=a>0?-h:Math.min(Math.max(-h,-m),h),l=-a*a+c*(c+2*m)+f):c<=u?(a=0,c=Math.min(Math.max(-h,-m),h),l=c*(c+2*m)+f):(a=Math.max(0,-(d*h+p)),c=a>0?h:Math.min(Math.max(-h,-m),h),l=-a*a+c*(c+2*m)+f);else c=d>0?-h:h,a=Math.max(0,-(d*c+p)),l=-a*a+c*(c+2*m)+f;return o&&o.copy(this.direction).multiplyScalar(a).add(this.origin),s&&s.copy(t).multiplyScalar(c).add(e),l}}(),intersectSphere:function(){var e=new o;return function(t,r){e.subVectors(t.center,this.origin);var n=e.dot(this.direction),i=e.dot(e)-n*n,o=t.radius*t.radius;if(i>o)return null;var s=Math.sqrt(o-i),a=n-s,c=n+s;return a<0&&c<0?null:a<0?this.at(c,r):this.at(a,r)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null},intersectPlane:function(e,t){var r=this.distanceToPlane(e);return null===r?null:this.at(r,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var r,n,i,o,s,a,c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(r=(e.min.x-h.x)*c,n=(e.max.x-h.x)*c):(r=(e.max.x-h.x)*c,n=(e.min.x-h.x)*c),l>=0?(i=(e.min.y-h.y)*l,o=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,o=(e.min.y-h.y)*l),r>o||i>n?null:((i>r||r!==r)&&(r=i),(o<n||n!==n)&&(n=o),u>=0?(s=(e.min.z-h.z)*u,a=(e.max.z-h.z)*u):(s=(e.max.z-h.z)*u,a=(e.min.z-h.z)*u),r>a||s>n?null:((s>r||r!==r)&&(r=s),(a<n||n!==n)&&(n=a),n<0?null:this.at(r>=0?r:n,t)))},intersectsBox:function(){var e=new o;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new o,t=new o,r=new o,n=new o;return function(i,o,s,a,c){t.subVectors(o,i),r.subVectors(s,i),n.crossVectors(t,r);var l,u=this.direction.dot(n);if(u>0){if(a)return null;l=1}else{if(!(u<0))return null;l=-1,u=-u}e.subVectors(this.origin,i);var h=l*this.direction.dot(r.crossVectors(e,r));if(h<0)return null;var d=l*this.direction.dot(t.cross(e));if(d<0)return null;if(h+d>u)return null;var p=-l*e.dot(n);return p<0?null:this.at(p/u,c)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(_e.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return(e||new o).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new o).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var r=t||new o;return this.delta(r).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new o,t=new o;return function(r,n){e.subVectors(r,this.start),t.subVectors(this.end,this.start);var i=t.dot(t),o=t.dot(e),s=o/i;return n&&(s=uc.clamp(s,0,1)),s}}(),closestPointToPoint:function(e,t,r){var n=this.closestPointToPointParameter(e,t),i=r||new o;return this.delta(i).multiplyScalar(n).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(je,{normal:function(){var e=new o;return function(t,r,n,i){var s=i||new o;s.subVectors(n,r),e.subVectors(t,r),s.cross(e);var a=s.lengthSq();return a>0?s.multiplyScalar(1/Math.sqrt(a)):s.set(0,0,0)}}(),barycoordFromPoint:function(){var e=new o,t=new o,r=new o;return function(n,i,s,a,c){e.subVectors(a,i),t.subVectors(s,i),r.subVectors(n,i);var l=e.dot(e),u=e.dot(t),h=e.dot(r),d=t.dot(t),p=t.dot(r),m=l*d-u*u,f=c||new o;if(0===m)return f.set(-2,-1,-1);var v=1/m,y=(d*h-u*p)*v,g=(l*p-u*h)*v;return f.set(1-y-g,g,y)}}(),containsPoint:function(){var e=new o;return function(t,r,n,i){var o=je.barycoordFromPoint(t,r,n,i,e);return o.x>=0&&o.y>=0&&o.x+o.y<=1}}()}),Object.assign(je.prototype,{set:function(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this},setFromPointsAndIndices:function(e,t,r,n){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new o,t=new o;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){return(e||new o).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return je.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new te).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return je.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return je.containsPoint(e,this.a,this.b,this.c)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new te,t=[new _e,new _e,new _e],r=new o,n=new o;return function(i,s){var a=s||new o,c=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(i,r),!0===this.containsPoint(r))a.copy(r);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var l=0;l<t.length;l++){t[l].closestPointToPoint(r,!0,n);var u=r.distanceToSquared(n);u<c&&(c=u,a.copy(n))}}return a}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),Oe.prototype=Object.assign(Object.create(ae.prototype),{constructor:Oe,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return ae.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,r,n=this.geometry;if(n.isBufferGeometry){var i=n.morphAttributes,o=Object.keys(i);if(o.length>0){var s=i[o[0]];if(void 0!==s)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)r=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=e}}else{var a=n.morphTargets;if(void 0!==a&&a.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)r=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=e}},raycast:function(){function e(e,t,r,n,i,o,s){return je.barycoordFromPoint(e,t,r,n,g),i.multiplyScalar(g.x),o.multiplyScalar(g.y),s.multiplyScalar(g.z),i.add(o).add(s),i.clone()}function t(e,t,r,n,i,o,s,a){if(null===(t.side===rs?n.intersectTriangle(s,o,i,!0,a):n.intersectTriangle(i,o,s,t.side!==ns,a)))return null;M.copy(a),M.applyMatrix4(e.matrixWorld);var c=r.ray.origin.distanceTo(M);return c<r.near||c>r.far?null:{distance:c,point:M.clone(),object:e}}function i(r,n,i,o,s,a,c,d){l.fromBufferAttribute(o,a),u.fromBufferAttribute(o,c),h.fromBufferAttribute(o,d);var p=t(r,r.material,n,i,l,u,h,x);return p&&(s&&(f.fromBufferAttribute(s,a),v.fromBufferAttribute(s,c),y.fromBufferAttribute(s,d),p.uv=e(x,l,u,h,f,v,y)),p.face=new ue(a,c,d,je.normal(l,u,h)),p.faceIndex=a),p}var s=new n,a=new Ie,c=new ee,l=new o,u=new o,h=new o,d=new o,p=new o,m=new o,f=new r,v=new r,y=new r,g=new o,x=new o,M=new o;return function(r,n){var o=this.geometry,g=this.material,M=this.matrixWorld;if(void 0!==g&&(null===o.boundingSphere&&o.computeBoundingSphere(),c.copy(o.boundingSphere),c.applyMatrix4(M),!1!==r.ray.intersectsSphere(c)&&(s.getInverse(M),a.copy(r.ray).applyMatrix4(s),null===o.boundingBox||!1!==a.intersectsBox(o.boundingBox)))){var A;if(o.isBufferGeometry){var w,E,b,T,L,N=o.index,D=o.attributes.position,C=o.attributes.uv;if(null!==N)for(T=0,L=N.count;T<L;T+=3)w=N.getX(T),E=N.getX(T+1),b=N.getX(T+2),(A=i(this,r,a,D,C,w,E,b))&&(A.faceIndex=Math.floor(T/3),n.push(A));else if(void 0!==D)for(T=0,L=D.count;T<L;T+=3)w=T,E=T+1,b=T+2,(A=i(this,r,a,D,C,w,E,b))&&(A.index=w,n.push(A))}else if(o.isGeometry){var S,I,_,j,O=Array.isArray(g),R=o.vertices,z=o.faces,k=o.faceVertexUvs[0];k.length>0&&(j=k);for(var B=0,U=z.length;B<U;B++){var P=z[B],F=O?g[P.materialIndex]:g;if(void 0!==F){if(S=R[P.a],I=R[P.b],_=R[P.c],!0===F.morphTargets){var G=o.morphTargets,H=this.morphTargetInfluences;l.set(0,0,0),u.set(0,0,0),h.set(0,0,0);for(var Q=0,V=G.length;Q<V;Q++){var Y=H[Q];if(0!==Y){var W=G[Q].vertices;l.addScaledVector(d.subVectors(W[P.a],S),Y),u.addScaledVector(p.subVectors(W[P.b],I),Y),h.addScaledVector(m.subVectors(W[P.c],_),Y)}}l.add(S),u.add(I),h.add(_),S=l,I=u,_=h}if(A=t(this,F,r,a,S,I,_,x)){if(j&&j[B]){var q=j[B];f.copy(q[0]),v.copy(q[1]),y.copy(q[2]),A.uv=e(x,S,I,_,f,v,y)}A.face=P,A.faceIndex=B,n.push(A)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Dc=0;dt.prototype=Object.assign(Object.create(ce.prototype),{constructor:dt,isPerspectiveCamera:!0,copy:function(e,t){return ce.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*uc.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*uc.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*uc.RAD2DEG*Math.atan(Math.tan(.5*uc.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,r,n,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*uc.DEG2RAD*this.fov)/this.zoom,r=2*t,n=this.aspect*r,i=-.5*n,o=this.view;if(null!==this.view&&this.view.enabled){var s=o.fullWidth,a=o.fullHeight;i+=o.offsetX*n/s,t-=o.offsetY*r/a,n*=o.width/s,r*=o.height/a}var c=this.filmOffset;0!==c&&(i+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+n,t,t-r,e,this.far)},toJSON:function(e){var t=ae.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),pt.prototype=Object.assign(Object.create(dt.prototype),{constructor:pt,isArrayCamera:!0});var Cc=0;Et.prototype.isFogExp2=!0,Et.prototype.clone=function(){return new Et(this.color.getHex(),this.density)},Et.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},bt.prototype.isFog=!0,bt.prototype.clone=function(){return new bt(this.color.getHex(),this.near,this.far)},bt.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Tt.prototype=Object.assign(Object.create(ae.prototype),{constructor:Tt,copy:function(e,t){return ae.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=ae.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Lt.prototype=Object.create(Z.prototype),Lt.prototype.constructor=Lt,Lt.prototype.isSpriteMaterial=!0,Lt.prototype.copy=function(e){return Z.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},Nt.prototype=Object.assign(Object.create(ae.prototype),{constructor:Nt,isSprite:!0,raycast:function(){var e=new o,t=new o,r=new o;return function(n,i){t.setFromMatrixPosition(this.matrixWorld),n.ray.closestPointToPoint(t,e),r.setFromMatrixScale(this.matrixWorld);var o=r.x*r.y/4;if(!(t.distanceToSquared(e)>o)){var s=n.ray.origin.distanceTo(e);s<n.near||s>n.far||i.push({distance:s,point:e.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return ae.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),Dt.prototype=Object.assign(Object.create(ae.prototype),{constructor:Dt,copy:function(e){ae.prototype.copy.call(this,e,!1);for(var t=e.levels,r=0,n=t.length;r<n;r++){var i=t[r];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var r=this.levels,n=0;n<r.length&&!(t<r[n].distance);n++);r.splice(n,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,r=1,n=t.length;r<n&&!(e<t[r].distance);r++);return t[r-1].object},raycast:function(){var e=new o;return function(t,r){e.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(e);this.getObjectForDistance(n).raycast(t,r)}}(),update:function(){var e=new o,t=new o;return function(r){var n=this.levels;if(n.length>1){e.setFromMatrixPosition(r.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);n[0].object.visible=!0;for(var o=1,s=n.length;o<s&&i>=n[o].distance;o++)n[o-1].object.visible=!1,n[o].object.visible=!0;for(;o<s;o++)n[o].object.visible=!1}}}(),toJSON:function(e){var t=ae.prototype.toJSON.call(this,e);t.object.levels=[];for(var r=this.levels,n=0,i=r.length;n<i;n++){var o=r[n];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Object.assign(Ct.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var r=new n;this.bones[e]&&r.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(r)}},pose:function(){var e,t,r;for(t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new n,t=new n;return function(){for(var r=this.bones,n=this.boneInverses,i=this.boneMatrices,o=this.boneTexture,s=0,a=r.length;s<a;s++){var c=r[s]?r[s].matrixWorld:t;e.multiplyMatrices(c,n[s]),e.toArray(i,16*s)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new Ct(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,r=this.bones.length;t<r;t++){var n=this.bones[t];if(n.name===e)return n}}}),St.prototype=Object.assign(Object.create(ae.prototype),{constructor:St,isBone:!0}),It.prototype=Object.assign(Object.create(Oe.prototype),{constructor:It,isSkinnedMesh:!0,initBones:function(){var e,t,r,n,i=[];if(this.geometry&&void 0!==this.geometry.bones){for(r=0,n=this.geometry.bones.length;r<n;r++)t=this.geometry.bones[r],e=new St,i.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(r=0,n=this.geometry.bones.length;r<n;r++)t=this.geometry.bones[r],-1!==t.parent&&null!==t.parent&&void 0!==i[t.parent]?i[t.parent].add(i[r]):this.add(i[r])}return this.updateMatrixWorld(!0),i},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var r=this.geometry.skinWeights[t];e=1/r.manhattanLength(),e!==1/0?r.multiplyScalar(e):r.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var n=new c,i=this.geometry.attributes.skinWeight;for(t=0;t<i.count;t++)n.x=i.getX(t),n.y=i.getY(t),n.z=i.getZ(t),n.w=i.getW(t),e=1/n.manhattanLength(),e!==1/0?n.multiplyScalar(e):n.set(1,0,0,0),i.setXYZW(t,n.x,n.y,n.z,n.w)}},updateMatrixWorld:function(e){Oe.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),_t.prototype=Object.create(Z.prototype),_t.prototype.constructor=_t,_t.prototype.isLineBasicMaterial=!0,_t.prototype.copy=function(e){return Z.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},jt.prototype=Object.assign(Object.create(ae.prototype),{constructor:jt,isLine:!0,computeLineDistances:function(){var e=new o,t=new o;return function(){var r=this.geometry;if(r.isBufferGeometry)if(null===r.index){for(var n=r.attributes.position,i=[0],o=1,s=n.count;o<s;o++)e.fromBufferAttribute(n,o-1),t.fromBufferAttribute(n,o),i[o]=i[o-1],i[o]+=e.distanceTo(t);r.addAttribute("lineDistance",new THREE.Float32BufferAttribute(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(r.isGeometry){var a=r.vertices,i=r.lineDistances;i[0]=0;for(var o=1,s=a.length;o<s;o++)i[o]=i[o-1],i[o]+=a[o-1].distanceTo(a[o])}return this}}(),raycast:function(){var e=new n,t=new Ie,r=new ee;return function(n,i){var s=n.linePrecision,a=s*s,c=this.geometry,l=this.matrixWorld;if(null===c.boundingSphere&&c.computeBoundingSphere(),r.copy(c.boundingSphere),r.applyMatrix4(l),!1!==n.ray.intersectsSphere(r)){e.getInverse(l),t.copy(n.ray).applyMatrix4(e);var u=new o,h=new o,d=new o,p=new o,m=this&&this.isLineSegments?2:1;if(c.isBufferGeometry){var f=c.index,v=c.attributes,y=v.position.array;if(null!==f)for(var g=f.array,x=0,M=g.length-1;x<M;x+=m){var A=g[x],w=g[x+1];u.fromArray(y,3*A),h.fromArray(y,3*w);var E=t.distanceSqToSegment(u,h,p,d);if(!(E>a)){p.applyMatrix4(this.matrixWorld);var b=n.ray.origin.distanceTo(p);b<n.near||b>n.far||i.push({distance:b,point:d.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else for(var x=0,M=y.length/3-1;x<M;x+=m){u.fromArray(y,3*x),h.fromArray(y,3*x+3);var E=t.distanceSqToSegment(u,h,p,d);if(!(E>a)){p.applyMatrix4(this.matrixWorld);var b=n.ray.origin.distanceTo(p);b<n.near||b>n.far||i.push({distance:b,point:d.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}else if(c.isGeometry)for(var T=c.vertices,L=T.length,x=0;x<L-1;x+=m){var E=t.distanceSqToSegment(T[x],T[x+1],p,d);if(!(E>a)){p.applyMatrix4(this.matrixWorld);var b=n.ray.origin.distanceTo(p);b<n.near||b>n.far||i.push({distance:b,point:d.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ot.prototype=Object.assign(Object.create(jt.prototype),{constructor:Ot,isLineSegments:!0,computeLineDistances:function(){var e=new o,t=new o;return function(){var r=this.geometry;if(r.isBufferGeometry)if(null===r.index){for(var n=r.attributes.position,i=[],o=0,s=n.count;o<s;o+=2)e.fromBufferAttribute(n,o),t.fromBufferAttribute(n,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t);r.addAttribute("lineDistance",new THREE.Float32BufferAttribute(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(r.isGeometry)for(var a=r.vertices,i=r.lineDistances,o=0,s=a.length;o<s;o+=2)e.copy(a[o]),t.copy(a[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t);return this}}()}),Rt.prototype=Object.assign(Object.create(jt.prototype),{constructor:Rt,isLineLoop:!0}),zt.prototype=Object.create(Z.prototype),zt.prototype.constructor=zt,zt.prototype.isPointsMaterial=!0,zt.prototype.copy=function(e){return Z.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},kt.prototype=Object.assign(Object.create(ae.prototype),{constructor:kt,isPoints:!0,raycast:function(){var e=new n,t=new Ie,r=new ee;return function(n,i){function s(e,r){var o=t.distanceSqToPoint(e);if(o<d){var s=t.closestPointToPoint(e);s.applyMatrix4(l);var c=n.ray.origin.distanceTo(s);if(c<n.near||c>n.far)return;i.push({distance:c,distanceToRay:Math.sqrt(o),point:s.clone(),index:r,face:null,object:a})}}var a=this,c=this.geometry,l=this.matrixWorld,u=n.params.Points.threshold;if(null===c.boundingSphere&&c.computeBoundingSphere(),r.copy(c.boundingSphere),r.applyMatrix4(l),r.radius+=u,!1!==n.ray.intersectsSphere(r)){e.getInverse(l),t.copy(n.ray).applyMatrix4(e);var h=u/((this.scale.x+this.scale.y+this.scale.z)/3),d=h*h,p=new o;if(c.isBufferGeometry){var m=c.index,f=c.attributes,v=f.position.array;if(null!==m)for(var y=m.array,g=0,x=y.length;g<x;g++){var M=y[g];p.fromArray(v,3*M),s(p,M)}else for(var g=0,A=v.length/3;g<A;g++)p.fromArray(v,3*g),s(p,g)}else for(var w=c.vertices,g=0,A=w.length;g<A;g++)s(w[g],g)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Bt.prototype=Object.assign(Object.create(ae.prototype),{constructor:Bt,isGroup:!0}),Ut.prototype=Object.assign(Object.create(a.prototype),{constructor:Ut,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Pt.prototype=Object.create(a.prototype),Pt.prototype.constructor=Pt,Pt.prototype.isCompressedTexture=!0,Ft.prototype=Object.create(a.prototype),Ft.prototype.constructor=Ft,Ft.prototype.isDepthTexture=!0,Gt.prototype=Object.create(be.prototype),Gt.prototype.constructor=Gt,Ht.prototype=Object.create(he.prototype),Ht.prototype.constructor=Ht,Qt.prototype=Object.create(be.prototype),Qt.prototype.constructor=Qt,Vt.prototype=Object.create(he.prototype),Vt.prototype.constructor=Vt,Yt.prototype=Object.create(be.prototype),Yt.prototype.constructor=Yt,Wt.prototype=Object.create(he.prototype),Wt.prototype.constructor=Wt,qt.prototype=Object.create(Yt.prototype),qt.prototype.constructor=qt,Xt.prototype=Object.create(he.prototype),Xt.prototype.constructor=Xt,Zt.prototype=Object.create(Yt.prototype),Zt.prototype.constructor=Zt,Jt.prototype=Object.create(he.prototype),Jt.prototype.constructor=Jt,Kt.prototype=Object.create(Yt.prototype),Kt.prototype.constructor=Kt,$t.prototype=Object.create(he.prototype),$t.prototype.constructor=$t,er.prototype=Object.create(Yt.prototype),er.prototype.constructor=er,tr.prototype=Object.create(he.prototype),tr.prototype.constructor=tr,rr.prototype=Object.create(be.prototype),rr.prototype.constructor=rr,nr.prototype=Object.create(he.prototype),nr.prototype.constructor=nr,ir.prototype=Object.create(be.prototype),ir.prototype.constructor=ir,or.prototype=Object.create(he.prototype),or.prototype.constructor=or,sr.prototype=Object.create(be.prototype),sr.prototype.constructor=sr;var Sc={triangulate:function(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,o=ar(e,0,i,r,!0),s=[];if(!o)return s;var a,c,l,u,h,d,p;if(n&&(o=mr(e,t,o,r)),e.length>80*r){a=l=e[0],c=u=e[1];for(var m=r;m<i;m+=r)h=e[m],d=e[m+1],h<a&&(a=h),d<c&&(c=d),h>l&&(l=h),d>u&&(u=d);p=Math.max(l-a,u-c),p=0!==p?1/p:0}return lr(o,s,r,a,c,p),s}},Ic={area:function(e){for(var t=e.length,r=0,n=t-1,i=0;i<t;n=i++)r+=e[n].x*e[i].y-e[i].x*e[n].y;return.5*r},isClockWise:function(e){return Ic.area(e)<0},triangulateShape:function(e,t){var r=[],n=[],i=[];Rr(e),zr(r,e);var o=e.length;t.forEach(Rr);for(var s=0;s<t.length;s++)n.push(o),o+=t[s].length,zr(r,t[s]);for(var a=Sc.triangulate(r,n),s=0;s<a.length;s+=3)i.push(a.slice(s,s+3));return i}};kr.prototype=Object.create(he.prototype),kr.prototype.constructor=kr,Br.prototype=Object.create(be.prototype),Br.prototype.constructor=Br,Br.prototype.getArrays=function(){var e=this.getAttribute("position"),t=e?Array.prototype.slice.call(e.array):[],r=this.getAttribute("uv"),n=r?Array.prototype.slice.call(r.array):[],i=this.index;return{position:t,uv:n,index:i?Array.prototype.slice.call(i.array):[]}},Br.prototype.addShapeList=function(e,t){var r=e.length;t.arrays=this.getArrays();for(var n=0;n<r;n++){var i=e[n];this.addShape(i,t)}this.setIndex(t.arrays.index),this.addAttribute("position",new Me(t.arrays.position,3)),this.addAttribute("uv",new Me(t.arrays.uv,2))},Br.prototype.addShape=function(e,t){function n(e,t,r){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(r).add(e)}function i(e,t,n){var i,o,s,a=e.x-t.x,c=e.y-t.y,l=n.x-e.x,u=n.y-e.y,h=a*a+c*c,d=a*u-c*l;if(Math.abs(d)>Number.EPSILON){var p=Math.sqrt(h),m=Math.sqrt(l*l+u*u),f=t.x-c/p,v=t.y+a/p,y=n.x-u/m,g=n.y+l/m,x=((y-f)*u-(g-v)*l)/(a*u-c*l);i=f+a*x-e.x,o=v+c*x-e.y;var M=i*i+o*o;if(M<=2)return new r(i,o);s=Math.sqrt(M/2)}else{var A=!1;a>Number.EPSILON?l>Number.EPSILON&&(A=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(A=!0):Math.sign(c)===Math.sign(u)&&(A=!0),A?(i=-c,o=a,s=Math.sqrt(h)):(i=a,o=c,s=Math.sqrt(h/2))}return new r(i/s,o/s)}function s(e,t){var r,n;for(Z=e.length;--Z>=0;){r=Z,n=Z-1,n<0&&(n=e.length-1);var i=0,o=D+2*T;for(i=0;i<o;i++){var s=W*i,a=W*(i+1);l(t+r+s,t+n+s,t+n+a,t+r+a)}}}function a(e,t,r){A.push(e),A.push(t),A.push(r)}function c(e,t,r){u(e),u(t),u(r);var n=g.length/3,i=I.generateTopUV(R,g,n-3,n-2,n-1);h(i[0]),h(i[1]),h(i[2])}function l(e,t,r,n){u(e),u(t),u(n),u(t),u(r),u(n);var i=g.length/3,o=I.generateSideWallUV(R,g,i-6,i-3,i-2,i-1);h(o[0]),h(o[1]),h(o[3]),h(o[1]),h(o[2]),h(o[3])}function u(e){x.push(g.length/3),g.push(A[3*e+0]),g.push(A[3*e+1]),g.push(A[3*e+2])}function h(e){M.push(e.x),M.push(e.y)}var d,p,m,f,v,y=t.arrays?t.arrays:this.getArrays(),g=y.position,x=y.index,M=y.uv,A=[],w=void 0!==t.amount?t.amount:100,E=void 0!==t.bevelThickness?t.bevelThickness:6,b=void 0!==t.bevelSize?t.bevelSize:E-2,T=void 0!==t.bevelSegments?t.bevelSegments:3,L=void 0===t.bevelEnabled||t.bevelEnabled,N=void 0!==t.curveSegments?t.curveSegments:12,D=void 0!==t.steps?t.steps:1,C=t.extrudePath,S=!1,I=void 0!==t.UVGenerator?t.UVGenerator:kr.WorldUVGenerator;C&&(d=C.getSpacedPoints(D),S=!0,L=!1,p=void 0!==t.frames?t.frames:C.computeFrenetFrames(D,!1),m=new o,f=new o,v=new o),L||(T=0,E=0,b=0);var _,j,O,R=this,z=e.extractPoints(N),k=z.shape,B=z.holes;if(!Ic.isClockWise(k))for(k=k.reverse(),j=0,O=B.length;j<O;j++)_=B[j],Ic.isClockWise(_)&&(B[j]=_.reverse());var U=Ic.triangulateShape(k,B),P=k;for(j=0,O=B.length;j<O;j++)_=B[j],k=k.concat(_);for(var F,G,H,Q,V,Y,W=k.length,q=U.length,X=[],Z=0,J=P.length,K=J-1,$=Z+1;Z<J;Z++,K++,$++)K===J&&(K=0),$===J&&($=0),X[Z]=i(P[Z],P[K],P[$]);var ee,te=[],re=X.concat();for(j=0,O=B.length;j<O;j++){for(_=B[j],ee=[],Z=0,J=_.length,K=J-1,$=Z+1;Z<J;Z++,K++,$++)K===J&&(K=0),$===J&&($=0),ee[Z]=i(_[Z],_[K],_[$]);te.push(ee),re=re.concat(ee)}for(F=0;F<T;F++){for(H=F/T,Q=E*Math.cos(H*Math.PI/2),G=b*Math.sin(H*Math.PI/2),Z=0,J=P.length;Z<J;Z++)V=n(P[Z],X[Z],G),a(V.x,V.y,-Q);for(j=0,O=B.length;j<O;j++)for(_=B[j],ee=te[j],Z=0,J=_.length;Z<J;Z++)V=n(_[Z],ee[Z],G),a(V.x,V.y,-Q)}for(G=b,Z=0;Z<W;Z++)V=L?n(k[Z],re[Z],G):k[Z],S?(f.copy(p.normals[0]).multiplyScalar(V.x),m.copy(p.binormals[0]).multiplyScalar(V.y),v.copy(d[0]).add(f).add(m),a(v.x,v.y,v.z)):a(V.x,V.y,0);var ne;for(ne=1;ne<=D;ne++)for(Z=0;Z<W;Z++)V=L?n(k[Z],re[Z],G):k[Z],S?(f.copy(p.normals[ne]).multiplyScalar(V.x),m.copy(p.binormals[ne]).multiplyScalar(V.y),v.copy(d[ne]).add(f).add(m),a(v.x,v.y,v.z)):a(V.x,V.y,w/D*ne);for(F=T-1;F>=0;F--){for(H=F/T,Q=E*Math.cos(H*Math.PI/2),G=b*Math.sin(H*Math.PI/2),Z=0,J=P.length;Z<J;Z++)V=n(P[Z],X[Z],G),a(V.x,V.y,w+Q);for(j=0,O=B.length;j<O;j++)for(_=B[j],ee=te[j],Z=0,J=_.length;Z<J;Z++)V=n(_[Z],ee[Z],G),S?a(V.x,V.y+d[D-1].y,d[D-1].x+Q):a(V.x,V.y,w+Q)}!function(){var e=g.length/3;if(L){var r=0,n=W*r;for(Z=0;Z<q;Z++)Y=U[Z],c(Y[2]+n,Y[1]+n,Y[0]+n);for(r=D+2*T,n=W*r,Z=0;Z<q;Z++)Y=U[Z],c(Y[0]+n,Y[1]+n,Y[2]+n)}else{for(Z=0;Z<q;Z++)Y=U[Z],c(Y[2],Y[1],Y[0]);for(Z=0;Z<q;Z++)Y=U[Z],c(Y[0]+W*D,Y[1]+W*D,Y[2]+W*D)}R.addGroup(e,g.length/3-e,void 0!==t.material?t.material:0)}(),function(){var e=g.length/3,r=0;for(s(P,r),r+=P.length,j=0,O=B.length;j<O;j++)_=B[j],s(_,r),r+=_.length;R.addGroup(e,g.length/3-e,void 0!==t.extrudeMaterial?t.extrudeMaterial:1)}(),t.arrays||(this.setIndex(x),this.addAttribute("position",new Me(g,3)),this.addAttribute("uv",new Me(M,2)))},kr.WorldUVGenerator={generateTopUV:function(e,t,n,i,o){var s=t[3*n],a=t[3*n+1],c=t[3*i],l=t[3*i+1],u=t[3*o],h=t[3*o+1];return[new r(s,a),new r(c,l),new r(u,h)]},generateSideWallUV:function(e,t,n,i,o,s){var a=t[3*n],c=t[3*n+1],l=t[3*n+2],u=t[3*i],h=t[3*i+1],d=t[3*i+2],p=t[3*o],m=t[3*o+1],f=t[3*o+2],v=t[3*s],y=t[3*s+1],g=t[3*s+2];return Math.abs(c-h)<.01?[new r(a,1-l),new r(u,1-d),new r(p,1-f),new r(v,1-g)]:[new r(c,1-l),new r(h,1-d),new r(m,1-f),new r(y,1-g)]}},Ur.prototype=Object.create(he.prototype),Ur.prototype.constructor=Ur,Pr.prototype=Object.create(Br.prototype),Pr.prototype.constructor=Pr,Fr.prototype=Object.create(he.prototype),Fr.prototype.constructor=Fr,Gr.prototype=Object.create(be.prototype),Gr.prototype.constructor=Gr,Hr.prototype=Object.create(he.prototype),Hr.prototype.constructor=Hr,Qr.prototype=Object.create(be.prototype),Qr.prototype.constructor=Qr,Vr.prototype=Object.create(he.prototype),Vr.prototype.constructor=Vr,Yr.prototype=Object.create(be.prototype),Yr.prototype.constructor=Yr,Wr.prototype=Object.create(he.prototype),Wr.prototype.constructor=Wr,Wr.prototype.toJSON=function(){var e=he.prototype.toJSON.call(this);return Xr(this.parameters.shapes,e)},qr.prototype=Object.create(be.prototype),qr.prototype.constructor=qr,qr.prototype.toJSON=function(){var e=be.prototype.toJSON.call(this);return Xr(this.parameters.shapes,e)},Zr.prototype=Object.create(be.prototype),Zr.prototype.constructor=Zr,Jr.prototype=Object.create(he.prototype),Jr.prototype.constructor=Jr,Kr.prototype=Object.create(be.prototype),Kr.prototype.constructor=Kr,$r.prototype=Object.create(Jr.prototype),$r.prototype.constructor=$r,en.prototype=Object.create(Kr.prototype),en.prototype.constructor=en,tn.prototype=Object.create(he.prototype),tn.prototype.constructor=tn,rn.prototype=Object.create(be.prototype),rn.prototype.constructor=rn;var _c=Object.freeze({WireframeGeometry:Gt,ParametricGeometry:Ht,ParametricBufferGeometry:Qt,TetrahedronGeometry:Wt,TetrahedronBufferGeometry:qt,OctahedronGeometry:Xt,OctahedronBufferGeometry:Zt,IcosahedronGeometry:Jt,IcosahedronBufferGeometry:Kt,DodecahedronGeometry:$t,DodecahedronBufferGeometry:er,PolyhedronGeometry:Vt,PolyhedronBufferGeometry:Yt,TubeGeometry:tr,TubeBufferGeometry:rr,TorusKnotGeometry:nr,TorusKnotBufferGeometry:ir,TorusGeometry:or,TorusBufferGeometry:sr,TextGeometry:Ur,TextBufferGeometry:Pr,SphereGeometry:Fr,SphereBufferGeometry:Gr,RingGeometry:Hr,RingBufferGeometry:Qr,PlaneGeometry:Ne,PlaneBufferGeometry:De,LatheGeometry:Vr,LatheBufferGeometry:Yr,ShapeGeometry:Wr,ShapeBufferGeometry:qr,ExtrudeGeometry:kr,ExtrudeBufferGeometry:Br,EdgesGeometry:Zr,ConeGeometry:$r,ConeBufferGeometry:en,CylinderGeometry:Jr,CylinderBufferGeometry:Kr,CircleGeometry:tn,CircleBufferGeometry:rn,BoxGeometry:Te,BoxBufferGeometry:Le});nn.prototype=Object.create(Z.prototype),nn.prototype.constructor=nn,nn.prototype.isShadowMaterial=!0,on.prototype=Object.create(Se.prototype),on.prototype.constructor=on,on.prototype.isRawShaderMaterial=!0,sn.prototype=Object.create(Z.prototype),sn.prototype.constructor=sn,sn.prototype.isMeshStandardMaterial=!0,sn.prototype.copy=function(e){return Z.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},an.prototype=Object.create(sn.prototype),an.prototype.constructor=an,an.prototype.isMeshPhysicalMaterial=!0,an.prototype.copy=function(e){return sn.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},cn.prototype=Object.create(Z.prototype),cn.prototype.constructor=cn,cn.prototype.isMeshPhongMaterial=!0,cn.prototype.copy=function(e){return Z.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ln.prototype=Object.create(cn.prototype),ln.prototype.constructor=ln,ln.prototype.isMeshToonMaterial=!0,ln.prototype.copy=function(e){return cn.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},un.prototype=Object.create(Z.prototype),un.prototype.constructor=un,un.prototype.isMeshNormalMaterial=!0,un.prototype.copy=function(e){return Z.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},hn.prototype=Object.create(Z.prototype),hn.prototype.constructor=hn,hn.prototype.isMeshLambertMaterial=!0,hn.prototype.copy=function(e){return Z.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},dn.prototype=Object.create(_t.prototype),dn.prototype.constructor=dn,dn.prototype.isLineDashedMaterial=!0,dn.prototype.copy=function(e){return _t.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var jc=Object.freeze({ShadowMaterial:nn,SpriteMaterial:Lt,RawShaderMaterial:on,ShaderMaterial:Se,PointsMaterial:zt,MeshPhysicalMaterial:an,MeshStandardMaterial:sn,MeshPhongMaterial:cn,MeshToonMaterial:ln,MeshNormalMaterial:un,MeshLambertMaterial:hn,MeshDepthMaterial:J,MeshDistanceMaterial:K,MeshBasicMaterial:Ce,LineDashedMaterial:dn,LineBasicMaterial:_t,Material:Z}),Oc={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Rc=new pn,zc={};Object.assign(mn.prototype,{load:function(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=Oc.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;if(void 0!==zc[e])return void zc[e].push({onLoad:t,onProgress:r,onError:n});var s=/^data:(.*?)(;base64)?,(.*)$/,a=e.match(s);if(a){var c=a[1],l=!!a[2],u=a[3];u=window.decodeURIComponent(u),l&&(u=window.atob(u));try{var h,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":for(var p=new Uint8Array(u.length),m=0;m<u.length;m++)p[m]=u.charCodeAt(m);h="blob"===d?new Blob([p.buffer],{type:c}):p.buffer;break;case"document":var f=new DOMParser;h=f.parseFromString(u,c);break;case"json":h=JSON.parse(u);break;default:h=u}window.setTimeout(function(){t&&t(h),i.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){n&&n(t),i.manager.itemEnd(e),i.manager.itemError(e)},0)}}else{zc[e]=[],zc[e].push({onLoad:t,onProgress:r,onError:n});var v=new XMLHttpRequest;v.open("GET",e,!0),v.addEventListener("load",function(t){var r=this.response;Oc.add(e,r);var n=zc[e];if(delete zc[e],200===this.status){for(var o=0,s=n.length;o<s;o++){var a=n[o];a.onLoad&&a.onLoad(r)}i.manager.itemEnd(e)}else if(0===this.status){console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,s=n.length;o<s;o++){var a=n[o];a.onLoad&&a.onLoad(r)}i.manager.itemEnd(e)}else{for(var o=0,s=n.length;o<s;o++){var a=n[o];a.onError&&a.onError(t)}i.manager.itemEnd(e),i.manager.itemError(e)}},!1),v.addEventListener("progress",function(t){for(var r=zc[e],n=0,i=r.length;n<i;n++){var o=r[n];o.onProgress&&o.onProgress(t)}},!1),v.addEventListener("error",function(t){var r=zc[e];delete zc[e];for(var n=0,o=r.length;n<o;n++){var s=r[n];s.onError&&s.onError(t)}i.manager.itemEnd(e),i.manager.itemError(e)},!1),void 0!==this.responseType&&(v.responseType=this.responseType),void 0!==this.withCredentials&&(v.withCredentials=this.withCredentials),v.overrideMimeType&&v.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(var y in this.requestHeader)v.setRequestHeader(y,this.requestHeader[y]);v.send(null)}return i.manager.itemStart(e),v},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(fn.prototype,{load:function(e,t,r,n){var i=this,o=[],s=new Pt;s.image=o;var a=new mn(this.manager);if(a.setPath(this.path),a.setResponseType("arraybuffer"),Array.isArray(e))for(var c=0,l=0,u=e.length;l<u;++l)!function(l){a.load(e[l],function(e){var r=i._parser(e,!0);o[l]={width:r.width,height:r.height,format:r.format,mipmaps:r.mipmaps},6===(c+=1)&&(1===r.mipmapCount&&(s.minFilter=ia),s.format=r.format,s.needsUpdate=!0,t&&t(s))},r,n)}(l);else a.load(e,function(e){var r=i._parser(e,!0);if(r.isCubemap)for(var n=r.mipmaps.length/r.mipmapCount,a=0;a<n;a++){o[a]={mipmaps:[]};for(var c=0;c<r.mipmapCount;c++)o[a].mipmaps.push(r.mipmaps[a*r.mipmapCount+c]),o[a].format=r.format,o[a].width=r.width,o[a].height=r.height}else s.image.width=r.width,s.image.height=r.height,s.mipmaps=r.mipmaps;1===r.mipmapCount&&(s.minFilter=ia),s.format=r.format,s.needsUpdate=!0,t&&t(s)},r,n);return s},setPath:function(e){return this.path=e,this}}),Object.assign(vn.prototype,{load:function(e,t,r,n){var i=this,o=new h,s=new mn(this.manager);return s.setResponseType("arraybuffer"),s.load(e,function(e){var r=i._parser(e);r&&(void 0!==r.image?o.image=r.image:void 0!==r.data&&(o.image.width=r.width,o.image.height=r.height,o.image.data=r.data),o.wrapS=void 0!==r.wrapS?r.wrapS:$s,o.wrapT=void 0!==r.wrapT?r.wrapT:$s,o.magFilter=void 0!==r.magFilter?r.magFilter:ia,o.minFilter=void 0!==r.minFilter?r.minFilter:sa,o.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,void 0!==r.format&&(o.format=r.format),void 0!==r.type&&(o.type=r.type),void 0!==r.mipmaps&&(o.mipmaps=r.mipmaps),1===r.mipmapCount&&(o.minFilter=ia),o.needsUpdate=!0,t&&t(o,r))},r,n),o}}),Object.assign(yn.prototype,{crossOrigin:"Anonymous",load:function(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=Oc.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;var s=document.createElementNS("http://www.w3.org/1999/xhtml","img");return s.addEventListener("load",function(){Oc.add(e,this),t&&t(this),i.manager.itemEnd(e)},!1),s.addEventListener("error",function(t){n&&n(t),i.manager.itemEnd(e),i.manager.itemError(e)},!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),i.manager.itemStart(e),s.src=e,s},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(gn.prototype,{crossOrigin:"Anonymous",load:function(e,t,r,n){var i=new d,o=new yn(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);for(var s=0,a=0;a<e.length;++a)!function(r){o.load(e[r],function(e){i.images[r]=e,6==++s&&(i.needsUpdate=!0,t&&t(i))},void 0,n)}(a);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(xn.prototype,{crossOrigin:"Anonymous",load:function(e,t,r,n){var i=new a,o=new yn(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(r){i.image=r;var n=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);i.format=n?Ma:Aa,i.needsUpdate=!0,void 0!==t&&t(i)},r,n),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Mn.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var r=this.getUtoTmapping(e);return this.getPoint(r,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,r,n=[],i=this.getPoint(0),o=0;for(n.push(0),r=1;r<=e;r++)t=this.getPoint(r/e),o+=t.distanceTo(i),n.push(o),i=t;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var r,n=this.getLengths(),i=0,o=n.length;r=t||e*n[o-1];for(var s,a=0,c=o-1;a<=c;)if(i=Math.floor(a+(c-a)/2),(s=n[i]-r)<0)a=i+1;else{if(!(s>0)){c=i;break}c=i-1}if(i=c,n[i]===r)return i/(o-1);var l=n[i];return(i+(r-l)/(n[i+1]-l))/(o-1)},getTangent:function(e){var t=e-1e-4,r=e+1e-4;t<0&&(t=0),r>1&&(r=1);var n=this.getPoint(t);return this.getPoint(r).clone().sub(n).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var r,i,s,a=new o,c=[],l=[],u=[],h=new o,d=new n;for(r=0;r<=e;r++)i=r/e,c[r]=this.getTangentAt(i),c[r].normalize();l[0]=new o,u[0]=new o;var p=Number.MAX_VALUE,m=Math.abs(c[0].x),f=Math.abs(c[0].y),v=Math.abs(c[0].z);for(m<=p&&(p=m,a.set(1,0,0)),f<=p&&(p=f,a.set(0,1,0)),v<=p&&a.set(0,0,1),h.crossVectors(c[0],a).normalize(),l[0].crossVectors(c[0],h),u[0].crossVectors(c[0],l[0]),r=1;r<=e;r++)l[r]=l[r-1].clone(),u[r]=u[r-1].clone(),h.crossVectors(c[r-1],c[r]),h.length()>Number.EPSILON&&(h.normalize(),s=Math.acos(uc.clamp(c[r-1].dot(c[r]),-1,1)),l[r].applyMatrix4(d.makeRotationAxis(h,s))),u[r].crossVectors(c[r],l[r]);if(!0===t)for(s=Math.acos(uc.clamp(l[0].dot(l[e]),-1,1)),s/=e,c[0].dot(h.crossVectors(l[0],l[e]))>0&&(s=-s),r=1;r<=e;r++)l[r].applyMatrix4(d.makeRotationAxis(c[r],s*r)),u[r].crossVectors(c[r],l[r]);return{tangents:c,normals:l,binormals:u}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),An.prototype=Object.create(Mn.prototype),An.prototype.constructor=An,An.prototype.isEllipseCurve=!0,An.prototype.getPoint=function(e,t){for(var n=t||new r,i=2*Math.PI,o=this.aEndAngle-this.aStartAngle,s=Math.abs(o)<Number.EPSILON;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(o=s?0:i),!0!==this.aClockwise||s||(o===i?o=-i:o-=i);var a=this.aStartAngle+e*o,c=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),d=c-this.aX,p=l-this.aY;c=d*u-p*h+this.aX,l=d*h+p*u+this.aY}return n.set(c,l)},An.prototype.copy=function(e){return Mn.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},An.prototype.toJSON=function(){var e=Mn.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},An.prototype.fromJSON=function(e){return Mn.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},wn.prototype=Object.create(An.prototype),wn.prototype.constructor=wn,wn.prototype.isArcCurve=!0;var kc=new o,Bc=new En,Uc=new En,Pc=new En;bn.prototype=Object.create(Mn.prototype),bn.prototype.constructor=bn,bn.prototype.isCatmullRomCurve3=!0,bn.prototype.getPoint=function(e,t){var r=t||new o,n=this.points,i=n.length,s=(i-(this.closed?0:1))*e,a=Math.floor(s),c=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/n.length)+1)*n.length:0===c&&a===i-1&&(a=i-2,c=1);var l,u,h,d;if(this.closed||a>0?l=n[(a-1)%i]:(kc.subVectors(n[0],n[1]).add(n[0]),l=kc),u=n[a%i],h=n[(a+1)%i],this.closed||a+2<i?d=n[(a+2)%i]:(kc.subVectors(n[i-1],n[i-2]).add(n[i-1]),d=kc),"centripetal"===this.curveType||"chordal"===this.curveType){var p="chordal"===this.curveType?.5:.25,m=Math.pow(l.distanceToSquared(u),p),f=Math.pow(u.distanceToSquared(h),p),v=Math.pow(h.distanceToSquared(d),p);f<1e-4&&(f=1),m<1e-4&&(m=f),v<1e-4&&(v=f),Bc.initNonuniformCatmullRom(l.x,u.x,h.x,d.x,m,f,v),Uc.initNonuniformCatmullRom(l.y,u.y,h.y,d.y,m,f,v),Pc.initNonuniformCatmullRom(l.z,u.z,h.z,d.z,m,f,v)}else"catmullrom"===this.curveType&&(Bc.initCatmullRom(l.x,u.x,h.x,d.x,this.tension),Uc.initCatmullRom(l.y,u.y,h.y,d.y,this.tension),Pc.initCatmullRom(l.z,u.z,h.z,d.z,this.tension));return r.set(Bc.calc(c),Uc.calc(c),Pc.calc(c)),r},bn.prototype.copy=function(e){Mn.prototype.copy.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},bn.prototype.toJSON=function(){var e=Mn.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},bn.prototype.fromJSON=function(e){Mn.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push((new o).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Rn.prototype=Object.create(Mn.prototype),Rn.prototype.constructor=Rn,Rn.prototype.isCubicBezierCurve=!0,Rn.prototype.getPoint=function(e,t){var n=t||new r,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return n.set(On(e,i.x,o.x,s.x,a.x),On(e,i.y,o.y,s.y,a.y)),n},Rn.prototype.copy=function(e){return Mn.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Rn.prototype.toJSON=function(){var e=Mn.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Rn.prototype.fromJSON=function(e){return Mn.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},zn.prototype=Object.create(Mn.prototype),zn.prototype.constructor=zn,zn.prototype.isCubicBezierCurve3=!0,zn.prototype.getPoint=function(e,t){var r=t||new o,n=this.v0,i=this.v1,s=this.v2,a=this.v3;return r.set(On(e,n.x,i.x,s.x,a.x),On(e,n.y,i.y,s.y,a.y),On(e,n.z,i.z,s.z,a.z)),r},zn.prototype.copy=function(e){return Mn.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},zn.prototype.toJSON=function(){var e=Mn.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},zn.prototype.fromJSON=function(e){return Mn.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},kn.prototype=Object.create(Mn.prototype),kn.prototype.constructor=kn,kn.prototype.isLineCurve=!0,kn.prototype.getPoint=function(e,t){var n=t||new r;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},kn.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},kn.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},kn.prototype.copy=function(e){return Mn.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},kn.prototype.toJSON=function(){var e=Mn.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},kn.prototype.fromJSON=function(e){return Mn.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Bn.prototype=Object.create(Mn.prototype),Bn.prototype.constructor=Bn,Bn.prototype.isLineCurve3=!0,Bn.prototype.getPoint=function(e,t){var r=t||new o;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r},Bn.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Bn.prototype.copy=function(e){return Mn.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Bn.prototype.toJSON=function(){var e=Mn.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Bn.prototype.fromJSON=function(e){return Mn.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Un.prototype=Object.create(Mn.prototype),Un.prototype.constructor=Un,Un.prototype.isQuadraticBezierCurve=!0,Un.prototype.getPoint=function(e,t){var n=t||new r,i=this.v0,o=this.v1,s=this.v2;return n.set(Cn(e,i.x,o.x,s.x),Cn(e,i.y,o.y,s.y)),n},Un.prototype.copy=function(e){return Mn.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Un.prototype.toJSON=function(){var e=Mn.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Un.prototype.fromJSON=function(e){return Mn.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Pn.prototype=Object.create(Mn.prototype),Pn.prototype.constructor=Pn,Pn.prototype.isQuadraticBezierCurve3=!0,Pn.prototype.getPoint=function(e,t){var r=t||new o,n=this.v0,i=this.v1,s=this.v2;return r.set(Cn(e,n.x,i.x,s.x),Cn(e,n.y,i.y,s.y),Cn(e,n.z,i.z,s.z)),r},Pn.prototype.copy=function(e){return Mn.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Pn.prototype.toJSON=function(){var e=Mn.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Pn.prototype.fromJSON=function(e){return Mn.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Fn.prototype=Object.create(Mn.prototype),Fn.prototype.constructor=Fn,Fn.prototype.isSplineCurve=!0,Fn.prototype.getPoint=function(e,t){var n=t||new r,i=this.points,o=(i.length-1)*e,s=Math.floor(o),a=o-s,c=i[0===s?s:s-1],l=i[s],u=i[s>i.length-2?i.length-1:s+1],h=i[s>i.length-3?i.length-1:s+2];return n.set(Tn(a,c.x,l.x,u.x,h.x),Tn(a,c.y,l.y,u.y,h.y)),n},Fn.prototype.copy=function(e){Mn.prototype.copy.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push(n.clone())}return this},Fn.prototype.toJSON=function(){var e=Mn.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var n=this.points[t];e.points.push(n.toArray())}return e},Fn.prototype.fromJSON=function(e){Mn.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new r).fromArray(i))}return this};var Fc=Object.freeze({ArcCurve:wn,CatmullRomCurve3:bn,CubicBezierCurve:Rn,CubicBezierCurve3:zn,EllipseCurve:An,LineCurve:kn,LineCurve3:Bn,QuadraticBezierCurve:Un,QuadraticBezierCurve3:Pn,SplineCurve:Fn});Gn.prototype=Object.assign(Object.create(Mn.prototype),{constructor:Gn,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new kn(t,e))},getPoint:function(e){for(var t=e*this.getLength(),r=this.getCurveLengths(),n=0;n<r.length;){if(r[n]>=t){var i=r[n]-t,o=this.curves[n],s=o.getLength(),a=0===s?0:1-i/s;return o.getPointAt(a)}n++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,r=0,n=this.curves.length;r<n;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,r=[],n=0,i=this.curves;n<i.length;n++)for(var o=i[n],s=o&&o.isEllipseCurve?2*e:o&&o.isLineCurve?1:o&&o.isSplineCurve?e*o.points.length:e,a=o.getPoints(s),c=0;c<a.length;c++){var l=a[c];t&&t.equals(l)||(r.push(l),t=l)}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},copy:function(e){Mn.prototype.copy.call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Mn.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var n=this.curves[t];e.curves.push(n.toJSON())}return e},fromJSON:function(e){Mn.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var n=e.curves[t];this.curves.push((new Fc[n.type]).fromJSON(n))}return this}}),Hn.prototype=Object.assign(Object.create(Gn.prototype),{constructor:Hn,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new kn(this.currentPoint.clone(),new r(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,i){var o=new Un(this.currentPoint.clone(),new r(e,t),new r(n,i));this.curves.push(o),this.currentPoint.set(n,i)},bezierCurveTo:function(e,t,n,i,o,s){var a=new Rn(this.currentPoint.clone(),new r(e,t),new r(n,i),new r(o,s));this.curves.push(a),this.currentPoint.set(o,s)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),r=new Fn(t);this.curves.push(r),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,r,n,i,o){var s=this.currentPoint.x,a=this.currentPoint.y;this.absarc(e+s,t+a,r,n,i,o)},absarc:function(e,t,r,n,i,o){this.absellipse(e,t,r,r,n,i,o)},ellipse:function(e,t,r,n,i,o,s,a){var c=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(e+c,t+l,r,n,i,o,s,a)},absellipse:function(e,t,r,n,i,o,s,a){var c=new An(e,t,r,n,i,o,s,a);if(this.curves.length>0){var l=c.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(c);var u=c.getPoint(1);this.currentPoint.copy(u)},copy:function(e){return Gn.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Gn.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Gn.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Qn.prototype=Object.assign(Object.create(Hn.prototype),{constructor:Qn,getPointsHoles:function(e){for(var t=[],r=0,n=this.holes.length;r<n;r++)t[r]=this.holes[r].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Hn.prototype.copy.call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var n=e.holes[t];this.holes.push(n.clone())}return this},toJSON:function(){var e=Hn.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var n=this.holes[t];e.holes.push(n.toJSON())}return e},fromJSON:function(e){Hn.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var n=e.holes[t];this.holes.push((new Hn).fromJSON(n))}return this}}),Vn.prototype=Object.assign(Object.create(ae.prototype),{constructor:Vn,isLight:!0,copy:function(e){return ae.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=ae.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Yn.prototype=Object.assign(Object.create(Vn.prototype),{constructor:Yn,isHemisphereLight:!0,copy:function(e){return Vn.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Wn.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),qn.prototype=Object.assign(Object.create(Wn.prototype),{constructor:qn,isSpotLightShadow:!0,update:function(e){var t=this.camera,r=2*uc.RAD2DEG*e.angle,n=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;r===t.fov&&n===t.aspect&&i===t.far||(t.fov=r,t.aspect=n,t.far=i,t.updateProjectionMatrix())}}),Xn.prototype=Object.assign(Object.create(Vn.prototype),{constructor:Xn,isSpotLight:!0,copy:function(e){return Vn.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Zn.prototype=Object.assign(Object.create(Vn.prototype),{constructor:Zn,isPointLight:!0,copy:function(e){return Vn.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Jn.prototype=Object.assign(Object.create(Wn.prototype),{constructor:Jn}),Kn.prototype=Object.assign(Object.create(Vn.prototype),{constructor:Kn,isDirectionalLight:!0,copy:function(e){return Vn.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),$n.prototype=Object.assign(Object.create(Vn.prototype),{constructor:$n,isAmbientLight:!0}),ei.prototype=Object.assign(Object.create(Vn.prototype),{constructor:ei,isRectAreaLight:!0,copy:function(e){return Vn.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Vn.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),ti.prototype=Object.assign(Object.create(hi.prototype),{constructor:ti,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ri.prototype=Object.assign(Object.create(hi.prototype),{constructor:ri,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(ni.prototype,{evaluate:function(e){var t=this.parameterPositions,r=this._cachedIndex,n=t[r],i=t[r-1];e:{t:{var o;r:{n:if(!(e<n)){for(var s=r+2;;){if(void 0===n){if(e<i)break n;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,i)}if(r===s)break;if(i=n,n=t[++r],e<n)break t}o=t.length;break r}{if(e>=i)break e;var a=t[1];e<a&&(r=2,i=a);for(var s=r-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(r===s)break;if(n=i,i=t[--r-1],e>=i)break t}o=r,r=0}}for(;r<o;){var c=r+o>>>1;e<t[c]?o=c:r=c+1}if(n=t[r],void 0===(i=t[r-1]))return this._cachedIndex=0,this.beforeStart_(0,e,n);if(void 0===n)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,i,e)}this._cachedIndex=r,this.intervalChanged_(r,i,n)}return this.interpolate_(r,i,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,i=e*n,o=0;o!==n;++o)t[o]=r[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(ni.prototype,{beforeStart_:ni.prototype.copySampleValue_,afterEnd_:ni.prototype.copySampleValue_}),ii.prototype=Object.assign(Object.create(ni.prototype),{constructor:ii,interpolate_:function(e,t,r,n){for(var o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=e*a,l=(r-t)/(n-t),u=c+a;c!==u;c+=4)i.slerpFlat(o,0,s,c-a,s,c,l);return o}}),oi.prototype=Object.assign(Object.create(hi.prototype),{constructor:oi,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new ii(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),si.prototype=Object.assign(Object.create(hi.prototype),{constructor:si,ValueTypeName:"color"}),ai.prototype=Object.assign(Object.create(hi.prototype),{constructor:ai,ValueTypeName:"number"}),ci.prototype=Object.assign(Object.create(ni.prototype),{constructor:ci,DefaultSettings_:{endingStart:Ja,endingEnd:Ja},intervalChanged_:function(e,t,r){var n=this.parameterPositions,i=e-2,o=e+1,s=n[i],a=n[o];if(void 0===s)switch(this.getSettings_().endingStart){case 2401:i=e,s=2*t-r;break;case 2402:i=n.length-2,s=t+n[i]-n[i+1];break;default:i=e,s=r}if(void 0===a)switch(this.getSettings_().endingEnd){case 2401:o=e,a=2*r-t;break;case 2402:o=1,a=r+n[1]-n[0];break;default:o=e-1,a=t}var c=.5*(r-t),l=this.valueSize;this._weightPrev=c/(t-s),this._weightNext=c/(a-r),this._offsetPrev=i*l,this._offsetNext=o*l},interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,c=a-s,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(r-t)/(n-t),m=p*p,f=m*p,v=-h*f+2*h*m-h*p,y=(1+h)*f+(-1.5-2*h)*m+(-.5+h)*p+1,g=(-1-d)*f+(1.5+d)*m+.5*p,x=d*f-d*m,M=0;M!==s;++M)i[M]=v*o[l+M]+y*o[c+M]+g*o[a+M]+x*o[u+M];return i}}),li.prototype=Object.assign(Object.create(ni.prototype),{constructor:li,interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,c=a-s,l=(r-t)/(n-t),u=1-l,h=0;h!==s;++h)i[h]=o[c+h]*u+o[a+h]*l;return i}}),ui.prototype=Object.assign(Object.create(ni.prototype),{constructor:ui,interpolate_:function(e){return this.copySampleValue_(e-1)}});var Gc={arraySlice:function(e,t,r){return Gc.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==r?r:e.length)):e.slice(t,r)},convertArray:function(e,t,r){return!e||!r&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,r){return e[t]-e[r]}for(var r=e.length,n=new Array(r),i=0;i!==r;++i)n[i]=i;return n.sort(t),n},sortedArray:function(e,t,r){for(var n=e.length,i=new e.constructor(n),o=0,s=0;s!==n;++o)for(var a=r[o]*t,c=0;c!==t;++c)i[s++]=e[a+c];return i},flattenJSON:function(e,t,r,n){for(var i=1,o=e[0];void 0!==o&&void 0===o[n];)o=e[i++];if(void 0!==o){var s=o[n];if(void 0!==s)if(Array.isArray(s))do{s=o[n],void 0!==s&&(t.push(o.time),r.push.apply(r,s)),o=e[i++]}while(void 0!==o);else if(void 0!==s.toArray)do{s=o[n],void 0!==s&&(t.push(o.time),s.toArray(r,r.length)),o=e[i++]}while(void 0!==o);else do{s=o[n],void 0!==s&&(t.push(o.time),r.push(s)),o=e[i++]}while(void 0!==o)}}};Object.assign(hi,{parse:function(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=hi._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var r=[],n=[];Gc.flattenJSON(e.keys,r,n,"value"),e.times=r,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,r=e.constructor;if(void 0!==r.toJSON)t=r.toJSON(e);else{t={name:e.name,times:Gc.convertArray(e.times,Array),values:Gc.convertArray(e.values,Array)};var n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ai;case"vector":case"vector2":case"vector3":case"vector4":return di;case"color":return si;case"quaternion":return oi;case"bool":case"boolean":return ri;case"string":return ti}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}}),Object.assign(hi.prototype,{constructor:hi,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new ui(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new li(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new ci(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return void console.warn("THREE.KeyframeTrack:",r)}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,r=0,n=t.length;r!==n;++r)t[r]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,r=0,n=t.length;r!==n;++r)t[r]*=e;return this},trim:function(e,t){for(var r=this.times,n=r.length,i=0,o=n-1;i!==n&&r[i]<e;)++i;for(;-1!==o&&r[o]>t;)--o;if(++o,0!==i||o!==n){i>=o&&(o=Math.max(o,1),i=o-1);var s=this.getValueSize();this.times=Gc.arraySlice(r,i,o),this.values=Gc.arraySlice(this.values,i*s,o*s)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var r=this.times,n=this.values,i=r.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,s=0;s!==i;s++){var a=r[s];if("number"==typeof a&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,a),e=!1;break}if(null!==o&&o>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,a,o),e=!1;break}o=a}if(void 0!==n&&Gc.isTypedArray(n))for(var s=0,c=n.length;s!==c;++s){var l=n[s];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,l),e=!1;break}}return e},optimize:function(){for(var e=this.times,t=this.values,r=this.getValueSize(),n=2302===this.getInterpolation(),i=1,o=e.length-1,s=1;s<o;++s){var a=!1,c=e[s];if(c!==e[s+1]&&(1!==s||c!==c[0]))if(n)a=!0;else for(var l=s*r,u=l-r,h=l+r,d=0;d!==r;++d){var p=t[l+d];if(p!==t[u+d]||p!==t[h+d]){a=!0;break}}if(a){if(s!==i){e[i]=e[s];for(var m=s*r,f=i*r,d=0;d!==r;++d)t[f+d]=t[m+d]}++i}}if(o>0){e[i]=e[o];for(var m=o*r,f=i*r,d=0;d!==r;++d)t[f+d]=t[m+d];++i}return i!==e.length&&(this.times=Gc.arraySlice(e,0,i),this.values=Gc.arraySlice(t,0,i*r)),this}}),di.prototype=Object.assign(Object.create(hi.prototype),{constructor:di,ValueTypeName:"vector"}),Object.assign(pi,{parse:function(e){for(var t=[],r=e.tracks,n=1/(e.fps||1),i=0,o=r.length;i!==o;++i)t.push(hi.parse(r[i]).scale(n));return new pi(e.name,e.duration,t)},toJSON:function(e){for(var t=[],r=e.tracks,n={name:e.name,duration:e.duration,tracks:t},i=0,o=r.length;i!==o;++i)t.push(hi.toJSON(r[i]));return n},CreateFromMorphTargetSequence:function(e,t,r,n){for(var i=t.length,o=[],s=0;s<i;s++){var a=[],c=[];a.push((s+i-1)%i,s,(s+1)%i),c.push(0,1,0);var l=Gc.getKeyframeOrder(a);a=Gc.sortedArray(a,1,l),c=Gc.sortedArray(c,1,l),n||0!==a[0]||(a.push(i),c.push(c[0])),o.push(new ai(".morphTargetInfluences["+t[s].name+"]",a,c).scale(1/r))}return new pi(e,-1,o)},findByName:function(e,t){var r=e;if(!Array.isArray(e)){var n=e;r=n.geometry&&n.geometry.animations||n.animations}for(var i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,r){for(var n={},i=/^([\w-]*?)([\d]+)$/,o=0,s=e.length;o<s;o++){var a=e[o],c=a.name.match(i);if(c&&c.length>1){var l=c[1],u=n[l];u||(n[l]=u=[]),u.push(a)}}var h=[];for(var l in n)h.push(pi.CreateFromMorphTargetSequence(l,n[l],t,r));return h},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var r=function(e,t,r,n,i){if(0!==r.length){var o=[],s=[];Gc.flattenJSON(r,o,s,n),0!==o.length&&i.push(new e(t,o,s))}},n=[],i=e.name||"default",o=e.length||-1,s=e.fps||30,a=e.hierarchy||[],c=0;c<a.length;c++){var l=a[c].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var u={},h=0;h<l.length;h++)if(l[h].morphTargets)for(var d=0;d<l[h].morphTargets.length;d++)u[l[h].morphTargets[d]]=-1;for(var p in u){for(var m=[],f=[],d=0;d!==l[h].morphTargets.length;++d){var v=l[h];m.push(v.time),f.push(v.morphTarget===p?1:0)}n.push(new ai(".morphTargetInfluence["+p+"]",m,f))}o=u.length*(s||1)}else{var y=".bones["+t[c].name+"]";r(di,y+".position",l,"pos",n),r(oi,y+".quaternion",l,"rot",n),r(di,y+".scale",l,"scl",n)}}return 0===n.length?null:new pi(i,o,n)}}),Object.assign(pi.prototype,{resetDuration:function(){for(var e=this.tracks,t=0,r=0,n=e.length;r!==n;++r){var i=this.tracks[r];t=Math.max(t,i.times[i.times.length-1])}this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(mi.prototype,{load:function(e,t,r,n){var i=this;new mn(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},r,n)},setTextures:function(e){this.textures=e},parse:function(e){function t(e){return void 0===n[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),n[e]}var n=this.textures,i=new jc[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearCoat&&(i.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(i.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(i.uniforms=e.uniforms),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(i.vertexColors=e.vertexColors),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.shading&&(i.flatShading=1===e.shading),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=t(e.map)),void 0!==e.alphaMap&&(i.alphaMap=t(e.alphaMap),i.transparent=!0),void 0!==e.bumpMap&&(i.bumpMap=t(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=t(e.normalMap)),void 0!==e.normalScale){var o=e.normalScale;!1===Array.isArray(o)&&(o=[o,o]),i.normalScale=(new r).fromArray(o)}return void 0!==e.displacementMap&&(i.displacementMap=t(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=t(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=t(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=t(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=t(e.specularMap)),void 0!==e.envMap&&(i.envMap=t(e.envMap)),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.lightMap&&(i.lightMap=t(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=t(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=t(e.gradientMap)),i}}),Object.assign(fi.prototype,{load:function(e,t,r,n){var i=this;new mn(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},r,n)},parse:function(e){var t=new be,r=e.data.index;if(void 0!==r){var n=new Hc[r.type](r.array);t.setIndex(new de(n,1))}var i=e.data.attributes;for(var s in i){var a=i[s],n=new Hc[a.type](a.array);t.addAttribute(s,new de(n,a.itemSize,a.normalized))}var c=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==c)for(var l=0,u=c.length;l!==u;++l){var h=c[l];t.addGroup(h.start,h.count,h.materialIndex)}var d=e.data.boundingSphere;if(void 0!==d){var p=new o;void 0!==d.center&&p.fromArray(d.center),t.boundingSphere=new ee(p,d.radius)}return t}});var Hc={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};vi.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,r=0,n=t.length;r<n;r+=2){var i=t[r],o=t[r+1];if(i.test(e))return o}return null}},Object.assign(vi.prototype,{crossOrigin:void 0,initMaterials:function(e,t,r){for(var n=[],i=0;i<e.length;++i)n[i]=this.createMaterial(e[i],t,r);return n},createMaterial:function(){var e={NoBlending:as,NormalBlending:cs,AdditiveBlending:ls,SubtractiveBlending:us,MultiplyBlending:hs,CustomBlending:ds},t=new W,r=new xn,n=new mi;return function(i,o,s){function a(e,t,n,i,a){var l,u=o+e,h=vi.Handlers.get(u);null!==h?l=h.load(u):(r.setCrossOrigin(s),l=r.load(u)),void 0!==t&&(l.repeat.fromArray(t),1!==t[0]&&(l.wrapS=Ks),1!==t[1]&&(l.wrapT=Ks)),void 0!==n&&l.offset.fromArray(n),void 0!==i&&("repeat"===i[0]&&(l.wrapS=Ks),"mirror"===i[0]&&(l.wrapS=ea),"repeat"===i[1]&&(l.wrapT=Ks),"mirror"===i[1]&&(l.wrapT=ea)),void 0!==a&&(l.anisotropy=a);var d=uc.generateUUID();return c[d]=l,d}var c={},l={uuid:uc.generateUUID(),type:"MeshLambertMaterial"};for(var u in i){var h=i[u];switch(u){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=h;break;case"blending":l.blending=e[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",u,"is no longer supported.");break;case"colorDiffuse":l.color=t.fromArray(h).getHex();break;case"colorSpecular":l.specular=t.fromArray(h).getHex();break;case"colorEmissive":l.emissive=t.fromArray(h).getHex();break;case"specularCoef":l.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(l.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(l.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(l.type="MeshStandardMaterial");break;case"mapDiffuse":l.map=a(h,i.mapDiffuseRepeat,i.mapDiffuseOffset,i.mapDiffuseWrap,i.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=a(h,i.mapEmissiveRepeat,i.mapEmissiveOffset,i.mapEmissiveWrap,i.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=a(h,i.mapLightRepeat,i.mapLightOffset,i.mapLightWrap,i.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=a(h,i.mapAORepeat,i.mapAOOffset,i.mapAOWrap,i.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=a(h,i.mapBumpRepeat,i.mapBumpOffset,i.mapBumpWrap,i.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=a(h,i.mapNormalRepeat,i.mapNormalOffset,i.mapNormalWrap,i.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=[h,h];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=a(h,i.mapSpecularRepeat,i.mapSpecularOffset,i.mapSpecularWrap,i.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=a(h,i.mapMetalnessRepeat,i.mapMetalnessOffset,i.mapMetalnessWrap,i.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=a(h,i.mapRoughnessRepeat,i.mapRoughnessOffset,i.mapRoughnessWrap,i.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=a(h,i.mapAlphaRepeat,i.mapAlphaOffset,i.mapAlphaWrap,i.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=rs;break;case"doubleSided":l.side=ns;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),l.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[u]=h;break;case"vertexColors":!0===h&&(l.vertexColors=ss),"face"===h&&(l.vertexColors=os);break;default:console.error("THREE.Loader.createMaterial: Unsupported",u,h)}}return"MeshBasicMaterial"===l.type&&delete l.emissive,"MeshPhongMaterial"!==l.type&&delete l.specular,l.opacity<1&&(l.transparent=!0),n.setTextures(c),n.parse(l)}}()});var Qc={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",r=0,n=e.length;r<n;r++)t+=String.fromCharCode(e[r]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")}};Object.assign(yi.prototype,{load:function(e,t,r,n){var i=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Qc.extractUrlBase(e),s=new mn(this.manager);s.setWithCredentials(this.withCredentials),s.load(e,function(r){var n=JSON.parse(r),s=n.metadata;if(void 0!==s){var a=s.type;if(void 0!==a){if("object"===a.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");if("scene"===a.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.")}}var c=i.parse(n,o);t(c.geometry,c.materials)},r,n)},setTexturePath:function(e){this.texturePath=e},parse:function(){function e(e,t){function n(e,t){return e&1<<t}var i,s,a,c,l,u,h,d,p,m,f,v,y,g,x,M,A,w,E,b,T,L,N,D,C,S,I,_=e.faces,j=e.vertices,O=e.normals,R=e.colors,z=e.scale,k=0;if(void 0!==e.uvs){for(i=0;i<e.uvs.length;i++)e.uvs[i].length&&k++;for(i=0;i<k;i++)t.faceVertexUvs[i]=[]}for(c=0,l=j.length;c<l;)w=new o,w.x=j[c++]*z,w.y=j[c++]*z,w.z=j[c++]*z,t.vertices.push(w);for(c=0,l=_.length;c<l;)if(m=_[c++],f=n(m,0),v=n(m,1),y=n(m,3),g=n(m,4),x=n(m,5),M=n(m,6),A=n(m,7),f){if(b=new ue,b.a=_[c],b.b=_[c+1],b.c=_[c+3],T=new ue,T.a=_[c+1],T.b=_[c+2],T.c=_[c+3],c+=4,v&&(p=_[c++],b.materialIndex=p,T.materialIndex=p),a=t.faces.length,y)for(i=0;i<k;i++)for(D=e.uvs[i],t.faceVertexUvs[i][a]=[],t.faceVertexUvs[i][a+1]=[],s=0;s<4;s++)d=_[c++],S=D[2*d],I=D[2*d+1],C=new r(S,I),2!==s&&t.faceVertexUvs[i][a].push(C),0!==s&&t.faceVertexUvs[i][a+1].push(C);if(g&&(h=3*_[c++],b.normal.set(O[h++],O[h++],O[h]),T.normal.copy(b.normal)),x)for(i=0;i<4;i++)h=3*_[c++],N=new o(O[h++],O[h++],O[h]),2!==i&&b.vertexNormals.push(N),0!==i&&T.vertexNormals.push(N);if(M&&(u=_[c++],L=R[u],b.color.setHex(L),T.color.setHex(L)),A)for(i=0;i<4;i++)u=_[c++],L=R[u],2!==i&&b.vertexColors.push(new W(L)),0!==i&&T.vertexColors.push(new W(L));t.faces.push(b),t.faces.push(T)}else{if(E=new ue,E.a=_[c++],E.b=_[c++],E.c=_[c++],v&&(p=_[c++],E.materialIndex=p),a=t.faces.length,y)for(i=0;i<k;i++)for(D=e.uvs[i],t.faceVertexUvs[i][a]=[],s=0;s<3;s++)d=_[c++],S=D[2*d],I=D[2*d+1],C=new r(S,I),t.faceVertexUvs[i][a].push(C);if(g&&(h=3*_[c++],E.normal.set(O[h++],O[h++],O[h])),x)for(i=0;i<3;i++)h=3*_[c++],N=new o(O[h++],O[h++],O[h]),E.vertexNormals.push(N);if(M&&(u=_[c++],E.color.setHex(R[u])),A)for(i=0;i<3;i++)u=_[c++],E.vertexColors.push(new W(R[u]));t.faces.push(E)}}function t(e,t){var r=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var n=0,i=e.skinWeights.length;n<i;n+=r){var o=e.skinWeights[n],s=r>1?e.skinWeights[n+1]:0,a=r>2?e.skinWeights[n+2]:0,l=r>3?e.skinWeights[n+3]:0;t.skinWeights.push(new c(o,s,a,l))}if(e.skinIndices)for(var n=0,i=e.skinIndices.length;n<i;n+=r){var u=e.skinIndices[n],h=r>1?e.skinIndices[n+1]:0,d=r>2?e.skinIndices[n+2]:0,p=r>3?e.skinIndices[n+3]:0;t.skinIndices.push(new c(u,h,d,p))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}function n(e,t){var r=e.scale;if(void 0!==e.morphTargets)for(var n=0,i=e.morphTargets.length;n<i;n++){t.morphTargets[n]={},t.morphTargets[n].name=e.morphTargets[n].name,t.morphTargets[n].vertices=[];for(var s=t.morphTargets[n].vertices,a=e.morphTargets[n].vertices,c=0,l=a.length;c<l;c+=3){var u=new o;u.x=a[c]*r,u.y=a[c+1]*r,u.z=a[c+2]*r,s.push(u)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var h=t.faces,d=e.morphColors[0].colors,n=0,i=h.length;n<i;n++)h[n].color.fromArray(d,3*n)}}function i(e,t){var r=[],n=[];void 0!==e.animation&&n.push(e.animation),void 0!==e.animations&&(e.animations.length?n=n.concat(e.animations):n.push(e.animations));for(var i=0;i<n.length;i++){var o=pi.parseAnimation(n[i],t.bones);o&&r.push(o)}if(t.morphTargets){var s=pi.CreateClipsFromMorphTargetSequences(t.morphTargets,10);r=r.concat(s)}r.length>0&&(t.animations=r)}return function(r,o){void 0!==r.data&&(r=r.data),void 0!==r.scale?r.scale=1/r.scale:r.scale=1;var s=new he;return e(r,s),t(r,s),n(r,s),i(r,s),s.computeFaceNormals(),s.computeBoundingSphere(),void 0===r.materials||0===r.materials.length?{geometry:s}:{geometry:s,materials:vi.prototype.initMaterials(r.materials,o,this.crossOrigin)}}}()}),Object.assign(gi.prototype,{load:function(e,t,r,n){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this;new mn(i.manager).load(e,function(r){var o=null;try{o=JSON.parse(r)}catch(t){return void 0!==n&&n(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var s=o.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())return void console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.");i.parse(o,t)},r,n)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var r=this.parseShape(e.shapes),n=this.parseGeometries(e.geometries,r),i=this.parseImages(e.images,function(){void 0!==t&&t(a)}),o=this.parseTextures(e.textures,i),s=this.parseMaterials(e.materials,o),a=this.parseObject(e.object,n,s);return e.animations&&(a.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(a),a},parseShape:function(e){var t={};if(void 0!==e)for(var r=0,n=e.length;r<n;r++){var i=(new Qn).fromJSON(e[r]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var r={};if(void 0!==e)for(var n=new yi,i=new fi,o=0,s=e.length;o<s;o++){var a,c=e[o];switch(c.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new _c[c.type](c.width,c.height,c.widthSegments,c.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new _c[c.type](c.width,c.height,c.depth,c.widthSegments,c.heightSegments,c.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new _c[c.type](c.radius,c.segments,c.thetaStart,c.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new _c[c.type](c.radiusTop,c.radiusBottom,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new _c[c.type](c.radius,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new _c[c.type](c.radius,c.widthSegments,c.heightSegments,c.phiStart,c.phiLength,c.thetaStart,c.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new _c[c.type](c.radius,c.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new _c[c.type](c.innerRadius,c.outerRadius,c.thetaSegments,c.phiSegments,c.thetaStart,c.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new _c[c.type](c.radius,c.tube,c.radialSegments,c.tubularSegments,c.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new _c[c.type](c.radius,c.tube,c.tubularSegments,c.radialSegments,c.p,c.q);break;case"LatheGeometry":case"LatheBufferGeometry":a=new _c[c.type](c.points,c.segments,c.phiStart,c.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new _c[c.type](c.vertices,c.indices,c.radius,c.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],o=0,s=c.shapes.length;o<s;o++){var u=t[c.shapes[o]];l.push(u)}a=new _c[c.type](l,c.curveSegments);break;case"BufferGeometry":a=i.parse(c);break;case"Geometry":a=n.parse(c,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+c.type+'"');continue}a.uuid=c.uuid,void 0!==c.name&&(a.name=c.name),r[c.uuid]=a}return r},parseMaterials:function(e,t){var r={};if(void 0!==e){var n=new mi;n.setTextures(t);for(var i=0,o=e.length;i<o;i++){var s=e[i];if("MultiMaterial"===s.type){for(var a=[],c=0;c<s.materials.length;c++)a.push(n.parse(s.materials[c]));r[s.uuid]=a}else r[s.uuid]=n.parse(s)}}return r},parseAnimations:function(e){for(var t=[],r=0;r<e.length;r++){var n=pi.parse(e[r]);t.push(n)}return t},parseImages:function(e,t){var r=this,n={};if(void 0!==e&&e.length>0){var i=new pn(t),o=new yn(i);o.setCrossOrigin(this.crossOrigin);for(var s=0,a=e.length;s<a;s++){var c=e[s],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:r.texturePath+c.url;n[c.uuid]=function(e){return r.manager.itemStart(e),o.load(e,function(){r.manager.itemEnd(e)},void 0,function(){r.manager.itemEnd(e),r.manager.itemError(e)})}(l)}}return n},parseTextures:function(e,t){function r(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var n={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var s=e[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var c=new a(t[s.image]);c.needsUpdate=!0,c.uuid=s.uuid,void 0!==s.name&&(c.name=s.name),void 0!==s.mapping&&(c.mapping=r(s.mapping,Vc)),void 0!==s.offset&&c.offset.fromArray(s.offset),void 0!==s.repeat&&c.repeat.fromArray(s.repeat),void 0!==s.center&&c.center.fromArray(s.center),void 0!==s.rotation&&(c.rotation=s.rotation),void 0!==s.wrap&&(c.wrapS=r(s.wrap[0],Yc),c.wrapT=r(s.wrap[1],Yc)),void 0!==s.minFilter&&(c.minFilter=r(s.minFilter,Wc)),void 0!==s.magFilter&&(c.magFilter=r(s.magFilter,Wc)),void 0!==s.anisotropy&&(c.anisotropy=s.anisotropy),void 0!==s.flipY&&(c.flipY=s.flipY),n[s.uuid]=c}return n},parseObject:function(e,t,r){function n(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function i(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],n=0,i=e.length;n<i;n++){var o=e[n];void 0===r[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(r[o])}return t}return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),r[e]}}var o;switch(e.type){case"Scene":o=new Tt,void 0!==e.background&&Number.isInteger(e.background)&&(o.background=new W(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new bt(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new Et(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new dt(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new le(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":o=new $n(e.color,e.intensity);break;case"DirectionalLight":o=new Kn(e.color,e.intensity);break;case"PointLight":o=new Zn(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new ei(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Xn(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Yn(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var s=n(e.geometry),a=i(e.material);o=s.bones&&s.bones.length>0?new It(s,a):new Oe(s,a);break;case"LOD":o=new Dt;break;case"Line":o=new jt(n(e.geometry),i(e.material),e.mode);break;case"LineLoop":o=new Rt(n(e.geometry),i(e.material));break;case"LineSegments":o=new Ot(n(e.geometry),i(e.material));break;case"PointCloud":case"Points":o=new kt(n(e.geometry),i(e.material));break;case"Sprite":o=new Nt(i(e.material));break;case"Group":o=new Bt;break;default:o=new ae}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.children)for(var c=e.children,l=0;l<c.length;l++)o.add(this.parseObject(c[l],t,r));if("LOD"===e.type)for(var u=e.levels,h=0;h<u.length;h++){var d=u[h],p=o.getObjectByProperty("uuid",d.object);void 0!==p&&o.addLevel(p,d.distance)}return o}});var Vc={UVMapping:300,CubeReflectionMapping:Vs,CubeRefractionMapping:Ys,EquirectangularReflectionMapping:Ws,EquirectangularRefractionMapping:qs,SphericalReflectionMapping:Xs,CubeUVReflectionMapping:Zs,CubeUVRefractionMapping:Js},Yc={RepeatWrapping:Ks,ClampToEdgeWrapping:$s,MirroredRepeatWrapping:ea},Wc={NearestFilter:ta,NearestMipMapNearestFilter:ra,NearestMipMapLinearFilter:na,LinearFilter:ia,LinearMipMapNearestFilter:oa,LinearMipMapLinearFilter:sa};xi.prototype={constructor:xi,setOptions:function(e){return this.options=e,this},load:function(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var i=this,o=Oc.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;fetch(e).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,i.options)}).then(function(r){Oc.add(e,r),t&&t(r),i.manager.itemEnd(e)}).catch(function(t){n&&n(t),i.manager.itemEnd(e),i.manager.itemError(e)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(Mi.prototype,{moveTo:function(e,t){this.currentPath=new Hn,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,r,n){this.currentPath.quadraticCurveTo(e,t,r,n)},bezierCurveTo:function(e,t,r,n,i,o){this.currentPath.bezierCurveTo(e,t,r,n,i,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function r(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r],o=new Qn;o.curves=i.curves,t.push(o)}return t}var n=Ic.isClockWise,i=this.subPaths;if(0===i.length)return[];if(!0===t)return r(i);var o,s,a,c=[];if(1===i.length)return s=i[0],a=new Qn,a.curves=s.curves,c.push(a),c;var l=!n(i[0].getPoints());l=e?!l:l;var u,h=[],d=[],p=[],m=0;d[m]=void 0,p[m]=[];for(var f=0,v=i.length;f<v;f++)s=i[f],u=s.getPoints(),o=n(u),o=e?!o:o,o?(!l&&d[m]&&m++,d[m]={s:new Qn,p:u},d[m].s.curves=s.curves,l&&m++,p[m]=[]):p[m].push({h:s,p:u[0]});if(!d[0])return r(i);if(d.length>1){for(var y=!1,g=[],x=0,M=d.length;x<M;x++)h[x]=[];for(var x=0,M=d.length;x<M;x++)for(var A=p[x],w=0;w<A.length;w++){for(var E=A[w],b=!0,T=0;T<d.length;T++)(function(e,t){for(var r=t.length,n=!1,i=r-1,o=0;o<r;i=o++){var s=t[i],a=t[o],c=a.x-s.x,l=a.y-s.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(s=t[o],c=-c,a=t[i],l=-l),e.y<s.y||e.y>a.y)continue;if(e.y===s.y){if(e.x===s.x)return!0}else{var u=l*(e.x-s.x)-c*(e.y-s.y);if(0===u)return!0;if(u<0)continue;n=!n}}else{if(e.y!==s.y)continue;if(a.x<=e.x&&e.x<=s.x||s.x<=e.x&&e.x<=a.x)return!0}}return n})(E.p,d[T].p)&&(x!==T&&g.push({froms:x,tos:T,hole:w}),b?(b=!1,h[T].push(E)):y=!0);b&&h[x].push(E)}g.length>0&&(y||(p=h))}for(var L,f=0,N=d.length;f<N;f++){a=d[f].s,c.push(a),L=p[f];for(var D=0,C=L.length;D<C;D++)a.holes.push(L[D].h)}return c}}),Object.assign(Ai.prototype,{isFont:!0,generateShapes:function(e,t,r){void 0===t&&(t=100),void 0===r&&(r=4);for(var n=[],i=wi(e,t,r,this.data),o=0,s=i.length;o<s;o++)Array.prototype.push.apply(n,i[o].toShapes());return n}}),Object.assign(bi.prototype,{load:function(e,t,r,n){var i=this,o=new mn(this.manager);o.setPath(this.path),o.load(e,function(e){var r;try{r=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),r=JSON.parse(e.substring(65,e.length-2))}var n=i.parse(r);t&&t(n)},r,n)},parse:function(e){return new Ai(e)},setPath:function(e){return this.path=e,this}});var qc,Xc={getContext:function(){return void 0===qc&&(qc=new(window.AudioContext||window.webkitAudioContext)),qc},setContext:function(e){qc=e}};Object.assign(Ti.prototype,{load:function(e,t,r,n){var i=new mn(this.manager);i.setResponseType("arraybuffer"),i.load(e,function(e){Xc.getContext().decodeAudioData(e,function(e){t(e)})},r,n)}}),Object.assign(Li.prototype,{update:function(){var e,t,r,i,o,s,a,c,l=new n,u=new n;return function(n){if(e!==this||t!==n.focus||r!==n.fov||i!==n.aspect*this.aspect||o!==n.near||s!==n.far||a!==n.zoom||c!==this.eyeSep){e=this,t=n.focus,r=n.fov,i=n.aspect*this.aspect,o=n.near,s=n.far,a=n.zoom;var h=n.projectionMatrix.clone();c=this.eyeSep/2;var d,p,m=c*o/t,f=o*Math.tan(uc.DEG2RAD*r*.5)/a;u.elements[12]=-c,l.elements[12]=c,d=-f*i+m,p=f*i+m,h.elements[0]=2*o/(p-d),h.elements[8]=(p+d)/(p-d),this.cameraL.projectionMatrix.copy(h),d=-f*i-m,p=f*i-m,h.elements[0]=2*o/(p-d),h.elements[8]=(p+d)/(p-d),this.cameraR.projectionMatrix.copy(h)}this.cameraL.matrixWorld.copy(n.matrixWorld).multiply(u),this.cameraR.matrixWorld.copy(n.matrixWorld).multiply(l)}}()}),Ni.prototype=Object.create(ae.prototype),Ni.prototype.constructor=Ni,Di.prototype=Object.assign(Object.create(ae.prototype),{constructor:Di,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new o,t=new i,r=new o,n=new o;return function(i){ae.prototype.updateMatrixWorld.call(this,i);var o=this.context.listener,s=this.up;this.matrixWorld.decompose(e,t,r),n.set(0,0,-1).applyQuaternion(t),o.positionX?(o.positionX.setValueAtTime(e.x,this.context.currentTime),o.positionY.setValueAtTime(e.y,this.context.currentTime),o.positionZ.setValueAtTime(e.z,this.context.currentTime),o.forwardX.setValueAtTime(n.x,this.context.currentTime),o.forwardY.setValueAtTime(n.y,this.context.currentTime),o.forwardZ.setValueAtTime(n.z,this.context.currentTime),o.upX.setValueAtTime(s.x,this.context.currentTime),o.upY.setValueAtTime(s.y,this.context.currentTime),o.upZ.setValueAtTime(s.z,this.context.currentTime)):(o.setPosition(e.x,e.y,e.z),o.setOrientation(n.x,n.y,n.z,s.x,s.y,s.z))}}()}),Ci.prototype=Object.assign(Object.create(ae.prototype),{constructor:Ci,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()},pause:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this)},stop:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.offset=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),Si.prototype=Object.assign(Object.create(Ci.prototype),{constructor:Si,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new o;return function(t){ae.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(Ii.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),r=0;r<t.length;r++)e+=t[r];return e/t.length}}),Object.assign(_i.prototype,{accumulate:function(e,t){var r=this.buffer,n=this.valueSize,i=e*n+n,o=this.cumulativeWeight;if(0===o){for(var s=0;s!==n;++s)r[i+s]=r[s];o=t}else{o+=t;var a=t/o;this._mixBufferRegion(r,i,0,a,n)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,r=this.buffer,n=e*t+t,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var s=3*t;this._mixBufferRegion(r,n,s,1-i,t)}for(var a=t,c=t+t;a!==c;++a)if(r[a]!==r[a+t]){o.setValue(r,n);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,r=this.valueSize,n=3*r;e.getValue(t,n);for(var i=r,o=n;i!==o;++i)t[i]=t[n+i%r];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,r,n,i){if(n>=.5)for(var o=0;o!==i;++o)e[t+o]=e[r+o]},_slerp:function(e,t,r,n){i.slerpFlat(e,t,e,t,e,r,n)},_lerp:function(e,t,r,n,i){for(var o=1-n,s=0;s!==i;++s){var a=t+s;e[a]=e[a]*o+e[r+s]*n}}});var Zc="\\[\\]\\.:\\/";Object.assign(ji.prototype,{getValue:function(e,t){this.bind();var r=this._targetGroup.nCachedObjects_,n=this._bindings[r];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){for(var r=this._bindings,n=this._targetGroup.nCachedObjects_,i=r.length;n!==i;++n)r[n].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}),Object.assign(Oi,{Composite:ji,create:function(e,t,r){return e&&e.isAnimationObjectGroup?new Oi.Composite(e,t,r):new Oi(e,t,r)},sanitizeNodeName:function(){var e=new RegExp("["+Zc+"]","g");return function(t){return t.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){var e="[^"+Zc+"]",t="[^"+Zc.replace("\\.","")+"]",r=/((?:WC+[\/:])*)/.source.replace("WC",e),n=/(WCOD+)?/.source.replace("WCOD",t),i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e),s=new RegExp("^"+r+n+i+o+"$"),a=["material","materials","bones"];return function(e){var t=s.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){var i=r.nodeName.substring(n+1);-1!==a.indexOf(i)&&(r.nodeName=r.nodeName.substring(0,n),r.objectName=i)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var r=e.skeleton.getBoneByName(t);if(void 0!==r)return r}if(e.children){var n=function(e){for(var r=0;r<e.length;r++){var i=e[r];if(i.name===t||i.uuid===t)return i;var o=n(i.children);if(o)return o}return null},i=n(e.children);if(i)return i}return null}}),Object.assign(Oi.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)e[t++]=r[n]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++]},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,r=t.objectName,n=t.propertyName,i=t.propertyIndex;if(e||(e=Oi.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){var o=t.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var s=0;s<e.length;s++)if(e[s].name===o){o=s;break}break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var a=e[n];if(void 0===a){var c=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+n+" but it wasn't found.",e)}var l=this.Versioning.None;void 0!==e.needsUpdate?(l=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var u=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(var s=0;s<this.node.geometry.morphAttributes.position.length;s++)if(e.geometry.morphAttributes.position[s].name===i){i=s;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(var s=0;s<this.node.geometry.morphTargets.length;s++)if(e.geometry.morphTargets[s].name===i){i=s;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=n;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Oi.prototype,{_getValue_unbound:Oi.prototype.getValue,_setValue_unbound:Oi.prototype.setValue}),Object.assign(Ri.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._paths,o=this._parsedPaths,s=this._bindings,a=s.length,c=void 0,l=0,u=arguments.length;l!==u;++l){var h=arguments[l],d=h.uuid,p=n[d];if(void 0===p){p=t++,n[d]=p,e.push(h);for(var m=0,f=a;m!==f;++m)s[m].push(new Oi(h,i[m],o[m]))}else if(p<r){c=e[p];var v=--r,y=e[v];n[y.uuid]=p,e[p]=y,n[d]=v,e[v]=h;for(var m=0,f=a;m!==f;++m){var g=s[m],x=g[v],M=g[p];g[p]=x,void 0===M&&(M=new Oi(h,i[m],o[m])),g[v]=M}}else e[p]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=r},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,r=this._indicesByUUID,n=this._bindings,i=n.length,o=0,s=arguments.length;o!==s;++o){var a=arguments[o],c=a.uuid,l=r[c];if(void 0!==l&&l>=t){var u=t++,h=e[u];r[h.uuid]=l,e[l]=h,r[c]=u,e[u]=a;for(var d=0,p=i;d!==p;++d){var m=n[d],f=m[u],v=m[l];m[l]=f,m[u]=v}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,o=i.length,s=0,a=arguments.length;s!==a;++s){var c=arguments[s],l=c.uuid,u=n[l];if(void 0!==u)if(delete n[l],u<r){var h=--r,d=e[h],p=--t,m=e[p];n[d.uuid]=u,e[u]=d,n[m.uuid]=h,e[h]=m,e.pop();for(var f=0,v=o;f!==v;++f){var y=i[f],g=y[h],x=y[p];y[u]=g,y[h]=x,y.pop()}}else{var p=--t,m=e[p];n[m.uuid]=u,e[u]=m,e.pop();for(var f=0,v=o;f!==v;++f){var y=i[f];y[u]=y[p],y.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){var r=this._bindingsIndicesByPath,n=r[e],i=this._bindings;if(void 0!==n)return i[n];var o=this._paths,s=this._parsedPaths,a=this._objects,c=a.length,l=this.nCachedObjects_,u=new Array(c);n=i.length,r[e]=n,o.push(e),s.push(t),i.push(u);for(var h=l,d=a.length;h!==d;++h){var p=a[h];u[h]=new Oi(p,e,t)}return u},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,r=t[e];if(void 0!==r){var n=this._paths,i=this._parsedPaths,o=this._bindings,s=o.length-1,a=o[s];t[e[s]]=r,o[r]=a,o.pop(),i[r]=i[s],i.pop(),n[r]=n[s],n.pop()}}}),Object.assign(zi.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){var n=this._clip.duration,i=e._clip.duration,o=i/n,s=n/i;e.warp(1,o,t),this.warp(s,1,t)}return this},crossFadeTo:function(e,t,r){return e.crossFadeFrom(this,t,r)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,r){var n=this._mixer,i=n.time,o=this._timeScaleInterpolant,s=this.timeScale;null===o&&(o=n._lendControlInterpolant(),this._timeScaleInterpolant=o);var a=o.parameterPositions,c=o.sampleValues;return a[0]=i,a[1]=i+r,c[0]=e/s,c[1]=t/s,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,r,n){if(!this.enabled)return void this._updateWeight(e);var i=this._startTime;if(null!==i){var o=(e-i)*r;if(o<0||0===r)return;this._startTime=null,t=r*o}t*=this._updateTimeScale(e);var s=this._updateTime(t),a=this._updateWeight(e);if(a>0)for(var c=this._interpolants,l=this._propertyBindings,u=0,h=c.length;u!==h;++u)c[u].evaluate(s),l[u].accumulate(n,a)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var r=this._weightInterpolant;if(null!==r){var n=r.evaluate(e)[0];t*=n,e>r.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var r=this._timeScaleInterpolant;if(null!==r){t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var r=this._clip.duration,n=this.loop,i=this._loopCount;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=r)t=r;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var o=2202===n;if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=r||t<0){var s=Math.floor(t/r);t-=r*s,i+=Math.abs(s);var a=this.repetitions-i;if(a<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?r:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(0===a){var c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}if(o&&1==(1&i))return this.time=t,r-t}return this.time=t,t},_setEndings:function(e,t,r){var n=this._interpolantSettings;r?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=e?this.zeroSlopeAtStart?2401:Ja:2402,n.endingEnd=t?this.zeroSlopeAtEnd?2401:Ja:2402)},_scheduleFading:function(e,t,r){var n=this._mixer,i=n.time,o=this._weightInterpolant;null===o&&(o=n._lendControlInterpolant(),this._weightInterpolant=o);var s=o.parameterPositions,a=o.sampleValues;return s[0]=i,a[0]=t,s[1]=i+e,a[1]=r,this}}),ki.prototype=Object.assign(Object.create(t.prototype),{constructor:ki,_bindAction:function(e,t){var r=e._localRoot||this._root,n=e._clip.tracks,i=n.length,o=e._propertyBindings,s=e._interpolants,a=r.uuid,c=this._bindingsByRootAndName,l=c[a];void 0===l&&(l={},c[a]=l);for(var u=0;u!==i;++u){var h=n[u],d=h.name,p=l[d];if(void 0!==p)o[u]=p;else{if(void 0!==(p=o[u])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,a,d));continue}var m=t&&t._propertyBindings[u].binding.parsedPath;p=new _i(Oi.create(r,d,m),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,a,d),o[u]=p}s[u].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,r=e._clip.uuid,n=this._actionsByClip[r];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,r,t)}for(var i=e._propertyBindings,o=0,s=i.length;o!==s;++o){var a=i[o];0==a.useCount++&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,r=0,n=t.length;r!==n;++r){var i=t[r];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,r){var n=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var s=o.knownActions;e._byClipCacheIndex=s.length,s.push(e)}e._cacheIndex=n.length,n.push(e),o.actionByRoot[r]=e},_removeInactiveAction:function(e){var t=this._actions,r=t[t.length-1],n=e._cacheIndex;r._cacheIndex=n,t[n]=r,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,s=o[i],a=s.knownActions,c=a[a.length-1],l=e._byClipCacheIndex;c._byClipCacheIndex=l,a[l]=c,a.pop(),e._byClipCacheIndex=null,delete s.actionByRoot[(e._localRoot||this._root).uuid],0===a.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,r=0,n=t.length;r!==n;++r){var i=t[r];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,r=e._cacheIndex,n=this._nActiveActions++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_takeBackAction:function(e){var t=this._actions,r=e._cacheIndex,n=--this._nActiveActions,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_addInactiveBinding:function(e,t,r){var n=this._bindingsByRootAndName,i=n[t],o=this._bindings;void 0===i&&(i={},n[t]=i),i[r]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,r=e.binding,n=r.rootNode.uuid,i=r.path,o=this._bindingsByRootAndName,s=o[n],a=t[t.length-1],c=e._cacheIndex;a._cacheIndex=c,t[c]=a,t.pop(),delete s[i];e:{for(var l in s)break e;delete o[n]}},_lendBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=this._nActiveBindings++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_takeBackBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=--this._nActiveBindings,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return void 0===r&&(r=new li(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,r=e.__cacheIndex,n=--this._nActiveControlInterpolants,i=t[n];e.__cacheIndex=n,t[n]=e,i.__cacheIndex=r,t[r]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var r=t||this._root,n=r.uuid,i="string"==typeof e?pi.findByName(r,e):e,o=null!==i?i.uuid:e,s=this._actionsByClip[o],a=null;if(void 0!==s){var c=s.actionByRoot[n];if(void 0!==c)return c;a=s.knownActions[0],null===i&&(i=a._clip)}if(null===i)return null;var l=new zi(this,i,t);return this._bindAction(l,a),this._addInactiveAction(l,o,n),l},existingAction:function(e,t){var r=t||this._root,n=r.uuid,i="string"==typeof e?pi.findByName(r,e):e,o=i?i.uuid:e,s=this._actionsByClip[o];return void 0!==s?s.actionByRoot[n]||null:null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,r=this._bindings,n=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(var i=0;i!==n;++i)r[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,r=this._nActiveActions,n=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,s=0;s!==r;++s){t[s]._update(n,e,i,o)}for(var a=this._bindings,c=this._nActiveBindings,s=0;s!==c;++s)a[s].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,r=e.uuid,n=this._actionsByClip,i=n[r];if(void 0!==i){for(var o=i.knownActions,s=0,a=o.length;s!==a;++s){var c=o[s];this._deactivateAction(c);var l=c._cacheIndex,u=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=l,t[l]=u,t.pop(),this._removeInactiveBindingsForAction(c)}delete n[r]}},uncacheRoot:function(e){var t=e.uuid,r=this._actionsByClip;for(var n in r){var i=r[n].actionByRoot,o=i[t];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var s=this._bindingsByRootAndName,a=s[t];if(void 0!==a)for(var c in a){var l=a[c];l.restoreOriginalState(),this._removeInactiveBinding(l)}},uncacheAction:function(e,t){var r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}),Bi.prototype.clone=function(){return new Bi(void 0===this.value.clone?this.value:this.value.clone())},Ui.prototype=Object.assign(Object.create(be.prototype),{constructor:Ui,isInstancedBufferGeometry:!0,copy:function(e){return be.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties(Pi.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Pi.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this},setXYZW:function(e,t,r,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this.data.array[e+3]=i,this}}),Object.defineProperty(Fi.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Fi.prototype,{isInterleavedBuffer:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.stride,r*=t.stride;for(var n=0,i=this.stride;n<i;n++)this.array[e+n]=t.array[r+n];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Gi.prototype=Object.assign(Object.create(Fi.prototype),{constructor:Gi,isInstancedInterleavedBuffer:!0,copy:function(e){return Fi.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Hi.prototype=Object.assign(Object.create(de.prototype),{constructor:Hi,isInstancedBufferAttribute:!0,copy:function(e){return de.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Qi.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,r){var n=r||[];return Yi(e,this,n,t),n.sort(Vi),n},intersectObjects:function(e,t,r){var n=r||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var i=0,o=e.length;i<o;i++)Yi(e[i],this,n,t);return n.sort(Vi),n}}),Object.assign(Wi.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(qi.prototype,{set:function(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(uc.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(Xi.prototype,{set:function(e,t,r){return this.radius=e,this.theta=t,this.y=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}),Object.assign(Zi.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new r;return function(t,r){var n=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new r;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new r;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return(t||new r).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return(t||new r).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new r;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Ji.prototype=Object.create(ae.prototype),Ji.prototype.constructor=Ji,Ji.prototype.isImmediateRenderObject=!0,Ki.prototype=Object.create(Ot.prototype),Ki.prototype.constructor=Ki,Ki.prototype.update=function(){var e=new o,t=new o,r=new s;return function(){var n=["a","b","c"];this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,s=this.object.geometry;if(s&&s.isGeometry)for(var a=s.vertices,c=s.faces,l=0,u=0,h=c.length;u<h;u++)for(var d=c[u],p=0,m=d.vertexNormals.length;p<m;p++){var f=a[d[n[p]]],v=d.vertexNormals[p];e.copy(f).applyMatrix4(i),t.copy(v).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),o.setXYZ(l,e.x,e.y,e.z),l+=1,o.setXYZ(l,t.x,t.y,t.z),l+=1}else if(s&&s.isBufferGeometry)for(var y=s.attributes.position,g=s.attributes.normal,l=0,p=0,m=y.count;p<m;p++)e.set(y.getX(p),y.getY(p),y.getZ(p)).applyMatrix4(i),t.set(g.getX(p),g.getY(p),g.getZ(p)),t.applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),o.setXYZ(l,e.x,e.y,e.z),l+=1,o.setXYZ(l,t.x,t.y,t.z),l+=1;o.needsUpdate=!0}}(),$i.prototype=Object.create(ae.prototype),$i.prototype.constructor=$i,$i.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},$i.prototype.update=function(){var e=new o,t=new o;return function(){this.light.updateMatrixWorld();var r=this.light.distance?this.light.distance:1e3,n=r*Math.tan(this.light.angle);this.cone.scale.set(n,n,r),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),to.prototype=Object.create(Ot.prototype),to.prototype.constructor=to,to.prototype.updateMatrixWorld=function(){var e=new o,t=new n,r=new n;return function(n){var i=this.bones,o=this.geometry,s=o.getAttribute("position");r.getInverse(this.root.matrixWorld);for(var a=0,c=0;a<i.length;a++){var l=i[a];l.parent&&l.parent.isBone&&(t.multiplyMatrices(r,l.matrixWorld),e.setFromMatrixPosition(t),s.setXYZ(c,e.x,e.y,e.z),t.multiplyMatrices(r,l.parent.matrixWorld),e.setFromMatrixPosition(t),s.setXYZ(c+1,e.x,e.y,e.z),c+=2)}o.getAttribute("position").needsUpdate=!0,ae.prototype.updateMatrixWorld.call(this,n)}}(),ro.prototype=Object.create(Oe.prototype),ro.prototype.constructor=ro,ro.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},ro.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},no.prototype=Object.create(ae.prototype),no.prototype.constructor=no,no.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},no.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,r=this.line.geometry.attributes.position,n=r.array;n[0]=e,n[1]=-t,n[2]=0,n[3]=e,n[4]=t,n[5]=0,n[6]=-e,n[7]=t,n[8]=0,n[9]=-e,n[10]=-t,n[11]=0,n[12]=e,n[13]=-t,n[14]=0,r.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},io.prototype=Object.create(ae.prototype),io.prototype.constructor=io,io.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},io.prototype.update=function(){var e=new o,t=new W,r=new W;return function(){var n=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=n.geometry.getAttribute("color");t.copy(this.light.color),r.copy(this.light.groundColor);for(var o=0,s=i.count;o<s;o++){var a=o<s/2?t:r;i.setXYZ(o,a.r,a.g,a.b)}i.needsUpdate=!0}n.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),oo.prototype=Object.create(Ot.prototype),oo.prototype.constructor=oo,so.prototype=Object.create(Ot.prototype),so.prototype.constructor=so,ao.prototype=Object.create(Ot.prototype),ao.prototype.constructor=ao,ao.prototype.update=function(){var e=new o,t=new o,r=new s;return function(){this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);for(var n=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,s=o.vertices,a=o.faces,c=0,l=0,u=a.length;l<u;l++){var h=a[l],d=h.normal;e.copy(s[h.a]).add(s[h.b]).add(s[h.c]).divideScalar(3).applyMatrix4(n),t.copy(d).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),i.setXYZ(c,e.x,e.y,e.z),c+=1,i.setXYZ(c,t.x,t.y,t.z),c+=1}i.needsUpdate=!0}}(),co.prototype=Object.create(ae.prototype),co.prototype.constructor=co,co.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},co.prototype.update=function(){var e=new o,t=new o,r=new o;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),r.subVectors(t,e),this.lightPlane.lookAt(r),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(r),this.targetLine.scale.z=r.length()}}(),lo.prototype=Object.create(Ot.prototype),lo.prototype.constructor=lo,lo.prototype.update=function(){function e(e,o,s,a){n.set(o,s,a).unproject(i);var c=r[e];if(void 0!==c)for(var l=t.getAttribute("position"),u=0,h=c.length;u<h;u++)l.setXYZ(c[u],n.x,n.y,n.z)}var t,r,n=new o,i=new ce;return function(){t=this.geometry,r=this.pointMap;i.projectionMatrix.copy(this.camera.projectionMatrix),e("c",0,0,-1),e("t",0,0,1),e("n1",-1,-1,-1),e("n2",1,-1,-1),e("n3",-1,1,-1),e("n4",1,1,-1),e("f1",-1,-1,1),e("f2",1,-1,1),e("f3",-1,1,1),e("f4",1,1,1),e("u1",.7,1.1,-1),e("u2",-.7,1.1,-1),e("u3",0,2,-1),e("cf1",-1,0,1),e("cf2",1,0,1),e("cf3",0,-1,1),e("cf4",0,1,1),e("cn1",-1,0,-1),e("cn2",1,0,-1),e("cn3",0,-1,-1),e("cn4",0,1,-1),t.getAttribute("position").needsUpdate=!0}}(),uo.prototype=Object.create(Ot.prototype),uo.prototype.constructor=uo,uo.prototype.update=function(){var e=new $;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var r=e.min,n=e.max,i=this.geometry.attributes.position,o=i.array;o[0]=n.x,o[1]=n.y,o[2]=n.z,o[3]=r.x,o[4]=n.y,o[5]=n.z,o[6]=r.x,o[7]=r.y,o[8]=n.z,o[9]=n.x,o[10]=r.y,o[11]=n.z,o[12]=n.x,o[13]=n.y,o[14]=r.z,o[15]=r.x,o[16]=n.y,o[17]=r.z,o[18]=r.x,o[19]=r.y,o[20]=r.z,o[21]=n.x,o[22]=r.y,o[23]=r.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),uo.prototype.setFromObject=function(e){return this.object=e,this.update(),this},ho.prototype=Object.create(Ot.prototype),ho.prototype.constructor=ho,ho.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),ae.prototype.updateMatrixWorld.call(this,e))},po.prototype=Object.create(jt.prototype),po.prototype.constructor=po,po.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.lookAt(this.plane.normal),ae.prototype.updateMatrixWorld.call(this,e)};var Jc,Kc;mo.prototype=Object.create(ae.prototype),mo.prototype.constructor=mo,mo.prototype.setDirection=function(){var e,t=new o;return function(r){r.y>.99999?this.quaternion.set(0,0,0,1):r.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(r.z,0,-r.x).normalize(),e=Math.acos(r.y),this.quaternion.setFromAxisAngle(t,e))}}(),mo.prototype.setLength=function(e,t,r){void 0===t&&(t=.2*e),void 0===r&&(r=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()},mo.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},fo.prototype=Object.create(Ot.prototype),fo.prototype.constructor=fo;Mn.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Mn.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Gn.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new he,r=0,n=e.length;r<n;r++){var i=e[r];t.vertices.push(new o(i.x,i.y,i.z||0))}return t}}),Object.assign(Hn.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),zo.prototype=Object.create(bn.prototype),ko.prototype=Object.create(bn.prototype),Bo.prototype=Object.create(bn.prototype),Object.assign(Bo.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),oo.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},to.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(vi.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Qc.extractUrlBase(e)}}),Object.assign(Zi.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign($.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),_e.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(uc,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),uc.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),uc.ceilPowerOfTwo(e)}}),Object.assign(s.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(n.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new o),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,r,n,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,n,r,i,o)}}),te.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},i.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Ie.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Qn.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new kr(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Wr(this,e)}}),Object.assign(r.prototype,{fromAttribute:function(e,t,r){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(o.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,r){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(c.prototype,{fromAttribute:function(e,t,r){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(he.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(ae.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}}),Object.defineProperties(ae.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Dt.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Ct.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Mn.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),dt.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Vn.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(de.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(be.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(be.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Bi.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Z.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new W}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}}}),Object.defineProperties(cn.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Se.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(wt.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(wt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(ne.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(l.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(mt.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),Ci.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Ti).load(e,function(e){t.setBuffer(e)}),this},Ii.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Ni.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var $c={merge:function(e,t,r){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var n;t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),n=t.matrix,t=t.geometry),e.merge(t,n,r)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},el={crossOrigin:void 0,loadTexture:function(e,t,r,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new xn;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,r,void 0,n);return t&&(o.mapping=t),o},loadTextureCube:function(e,t,r,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new gn;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,r,void 0,n);return t&&(o.mapping=t),o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},tl={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};e.WebGLRenderTargetCube=u,e.WebGLRenderTarget=l,e.WebGLRenderer=wt,e.ShaderLib=Ec,e.UniformsLib=Mc,e.UniformsUtils=Ac,e.ShaderChunk=wc,e.FogExp2=Et,e.Fog=bt,e.Scene=Tt,e.Sprite=Nt,e.LOD=Dt,e.SkinnedMesh=It,e.Skeleton=Ct,e.Bone=St,e.Mesh=Oe,e.LineSegments=Ot,e.LineLoop=Rt,e.Line=jt,e.Points=kt,e.Group=Bt,e.VideoTexture=Ut,e.DataTexture=h,e.CompressedTexture=Pt,e.CubeTexture=d,e.CanvasTexture=q,e.DepthTexture=Ft,e.Texture=a,e.CompressedTextureLoader=fn,e.DataTextureLoader=vn,e.CubeTextureLoader=gn,e.TextureLoader=xn,e.ObjectLoader=gi,e.MaterialLoader=mi,e.BufferGeometryLoader=fi,e.DefaultLoadingManager=Rc,e.LoadingManager=pn,e.JSONLoader=yi,e.ImageLoader=yn,e.ImageBitmapLoader=xi,e.FontLoader=bi,e.FileLoader=mn,e.Loader=vi,e.LoaderUtils=Qc,e.Cache=Oc,e.AudioLoader=Ti,e.SpotLightShadow=qn,e.SpotLight=Xn,e.PointLight=Zn,e.RectAreaLight=ei,e.HemisphereLight=Yn,e.DirectionalLightShadow=Jn,e.DirectionalLight=Kn,e.AmbientLight=$n,e.LightShadow=Wn,e.Light=Vn,e.StereoCamera=Li,e.PerspectiveCamera=dt,e.OrthographicCamera=le,e.CubeCamera=Ni,e.ArrayCamera=pt,e.Camera=ce,e.AudioListener=Di,e.PositionalAudio=Si,e.AudioContext=Xc,e.AudioAnalyser=Ii,e.Audio=Ci,e.VectorKeyframeTrack=di,e.StringKeyframeTrack=ti,e.QuaternionKeyframeTrack=oi,e.NumberKeyframeTrack=ai,e.ColorKeyframeTrack=si,e.BooleanKeyframeTrack=ri,e.PropertyMixer=_i,e.PropertyBinding=Oi,e.KeyframeTrack=hi,e.AnimationUtils=Gc,e.AnimationObjectGroup=Ri,e.AnimationMixer=ki,e.AnimationClip=pi,e.Uniform=Bi,e.InstancedBufferGeometry=Ui,e.BufferGeometry=be,e.Geometry=he,e.InterleavedBufferAttribute=Pi,e.InstancedInterleavedBuffer=Gi,e.InterleavedBuffer=Fi,e.InstancedBufferAttribute=Hi,e.Face3=ue,e.Object3D=ae,e.Raycaster=Qi,e.Layers=se,e.EventDispatcher=t,e.Clock=Wi,e.QuaternionLinearInterpolant=ii,e.LinearInterpolant=li,e.DiscreteInterpolant=ui,e.CubicInterpolant=ci,e.Interpolant=ni,e.Triangle=je,e.Math=uc,e.Spherical=qi,e.Cylindrical=Xi,e.Plane=te,e.Frustum=re,e.Sphere=ee,e.Ray=Ie,e.Matrix4=n,e.Matrix3=s,e.Box3=$,e.Box2=Zi,e.Line3=_e,e.Euler=oe,e.Vector4=c,e.Vector3=o,e.Vector2=r,e.Quaternion=i,e.Color=W,e.ImmediateRenderObject=Ji,e.VertexNormalsHelper=Ki,e.SpotLightHelper=$i,e.SkeletonHelper=to,e.PointLightHelper=ro,e.RectAreaLightHelper=no,e.HemisphereLightHelper=io,e.GridHelper=oo,e.PolarGridHelper=so,e.FaceNormalsHelper=ao,e.DirectionalLightHelper=co,e.CameraHelper=lo,e.BoxHelper=uo,e.Box3Helper=ho,e.PlaneHelper=po,e.ArrowHelper=mo,e.AxesHelper=fo,e.Shape=Qn,e.Path=Hn,e.ShapePath=Mi,e.Font=Ai,e.CurvePath=Gn,e.Curve=Mn,e.ShapeUtils=Ic,e.WebGLUtils=yt,e.WireframeGeometry=Gt,e.ParametricGeometry=Ht,e.ParametricBufferGeometry=Qt,e.TetrahedronGeometry=Wt,e.TetrahedronBufferGeometry=qt,e.OctahedronGeometry=Xt,e.OctahedronBufferGeometry=Zt,e.IcosahedronGeometry=Jt,e.IcosahedronBufferGeometry=Kt,e.DodecahedronGeometry=$t,e.DodecahedronBufferGeometry=er,e.PolyhedronGeometry=Vt,e.PolyhedronBufferGeometry=Yt,e.TubeGeometry=tr,e.TubeBufferGeometry=rr,e.TorusKnotGeometry=nr,e.TorusKnotBufferGeometry=ir,e.TorusGeometry=or,e.TorusBufferGeometry=sr,e.TextGeometry=Ur,e.TextBufferGeometry=Pr,e.SphereGeometry=Fr,e.SphereBufferGeometry=Gr,e.RingGeometry=Hr,e.RingBufferGeometry=Qr,e.PlaneGeometry=Ne,e.PlaneBufferGeometry=De,e.LatheGeometry=Vr,e.LatheBufferGeometry=Yr,e.ShapeGeometry=Wr,e.ShapeBufferGeometry=qr,e.ExtrudeGeometry=kr,e.ExtrudeBufferGeometry=Br,e.EdgesGeometry=Zr,e.ConeGeometry=$r,e.ConeBufferGeometry=en,e.CylinderGeometry=Jr,e.CylinderBufferGeometry=Kr,e.CircleGeometry=tn,e.CircleBufferGeometry=rn,e.BoxGeometry=Te,e.BoxBufferGeometry=Le,e.ShadowMaterial=nn,e.SpriteMaterial=Lt,e.RawShaderMaterial=on,e.ShaderMaterial=Se,e.PointsMaterial=zt,e.MeshPhysicalMaterial=an,e.MeshStandardMaterial=sn,e.MeshPhongMaterial=cn,e.MeshToonMaterial=ln,e.MeshNormalMaterial=un,e.MeshLambertMaterial=hn,e.MeshDepthMaterial=J,e.MeshDistanceMaterial=K,e.MeshBasicMaterial=Ce,e.LineDashedMaterial=dn;e.LineBasicMaterial=_t,e.Material=Z,e.Float64BufferAttribute=Ae,e.Float32BufferAttribute=Me,e.Uint32BufferAttribute=xe,e.Int32BufferAttribute=ge,e.Uint16BufferAttribute=ye,e.Int16BufferAttribute=ve,e.Uint8ClampedBufferAttribute=fe,e.Uint8BufferAttribute=me,e.Int8BufferAttribute=pe,e.BufferAttribute=de,e.ArcCurve=wn,e.CatmullRomCurve3=bn,e.CubicBezierCurve=Rn,e.CubicBezierCurve3=zn,e.EllipseCurve=An,e.LineCurve=kn,e.LineCurve3=Bn,e.QuadraticBezierCurve=Un,e.QuadraticBezierCurve3=Pn,e.SplineCurve=Fn,e.REVISION=qo,e.MOUSE=Xo,e.CullFaceNone=Zo,e.CullFaceBack=Jo,e.CullFaceFront=Ko,e.CullFaceFrontBack=3,e.FrontFaceDirectionCW=0,e.FrontFaceDirectionCCW=1,e.BasicShadowMap=0,e.PCFShadowMap=$o,e.PCFSoftShadowMap=es,e.FrontSide=ts,e.BackSide=rs,e.DoubleSide=ns,e.FlatShading=1,e.SmoothShading=2,e.NoColors=is,e.FaceColors=os,e.VertexColors=ss,e.NoBlending=as,e.NormalBlending=cs,e.AdditiveBlending=ls,e.SubtractiveBlending=us,e.MultiplyBlending=hs,e.CustomBlending=ds,e.AddEquation=ps,e.SubtractEquation=ms,e.ReverseSubtractEquation=fs,e.MinEquation=vs,e.MaxEquation=ys,e.ZeroFactor=gs,e.OneFactor=xs,e.SrcColorFactor=Ms,e.OneMinusSrcColorFactor=As,e.SrcAlphaFactor=ws,e.OneMinusSrcAlphaFactor=Es,e.DstAlphaFactor=bs,e.OneMinusDstAlphaFactor=Ts,e.DstColorFactor=Ls,e.OneMinusDstColorFactor=Ns,e.SrcAlphaSaturateFactor=Ds,e.NeverDepth=Cs,e.AlwaysDepth=Ss,e.LessDepth=Is,e.LessEqualDepth=_s,e.EqualDepth=js,e.GreaterEqualDepth=Os,e.GreaterDepth=Rs,e.NotEqualDepth=zs,e.MultiplyOperation=ks,e.MixOperation=Bs,e.AddOperation=Us,e.NoToneMapping=Ps,e.LinearToneMapping=Fs,e.ReinhardToneMapping=Gs,e.Uncharted2ToneMapping=Hs,e.CineonToneMapping=Qs,e.UVMapping=300,e.CubeReflectionMapping=Vs,e.CubeRefractionMapping=Ys,e.EquirectangularReflectionMapping=Ws,e.EquirectangularRefractionMapping=qs,e.SphericalReflectionMapping=Xs,e.CubeUVReflectionMapping=Zs,e.CubeUVRefractionMapping=Js,e.RepeatWrapping=Ks,e.ClampToEdgeWrapping=$s,e.MirroredRepeatWrapping=ea,e.NearestFilter=ta,e.NearestMipMapNearestFilter=ra,e.NearestMipMapLinearFilter=na,e.LinearFilter=ia,e.LinearMipMapNearestFilter=oa,e.LinearMipMapLinearFilter=sa,e.UnsignedByteType=aa,e.ByteType=ca,e.ShortType=la,e.UnsignedShortType=ua,e.IntType=ha,e.UnsignedIntType=da,e.FloatType=pa,e.HalfFloatType=ma,e.UnsignedShort4444Type=fa,e.UnsignedShort5551Type=va,e.UnsignedShort565Type=ya,e.UnsignedInt248Type=ga,e.AlphaFormat=xa,e.RGBFormat=Ma,e.RGBAFormat=Aa,e.LuminanceFormat=wa,e.LuminanceAlphaFormat=Ea,e.RGBEFormat=ba,e.DepthFormat=Ta,e.DepthStencilFormat=La,e.RGB_S3TC_DXT1_Format=Na,e.RGBA_S3TC_DXT1_Format=Da,e.RGBA_S3TC_DXT3_Format=Ca,e.RGBA_S3TC_DXT5_Format=Sa,e.RGB_PVRTC_4BPPV1_Format=Ia,e.RGB_PVRTC_2BPPV1_Format=_a,e.RGBA_PVRTC_4BPPV1_Format=ja,e.RGBA_PVRTC_2BPPV1_Format=Oa,e.RGB_ETC1_Format=Ra,e.RGBA_ASTC_4x4_Format=za,e.RGBA_ASTC_5x4_Format=ka,e.RGBA_ASTC_5x5_Format=Ba,e.RGBA_ASTC_6x5_Format=Ua,e.RGBA_ASTC_6x6_Format=Pa,e.RGBA_ASTC_8x5_Format=Fa,e.RGBA_ASTC_8x6_Format=Ga,e.RGBA_ASTC_8x8_Format=Ha,e.RGBA_ASTC_10x5_Format=Qa,e.RGBA_ASTC_10x6_Format=Va,e.RGBA_ASTC_10x8_Format=Ya,e.RGBA_ASTC_10x10_Format=Wa,e.RGBA_ASTC_12x10_Format=qa,e.RGBA_ASTC_12x12_Format=Xa,e.LoopOnce=2200,e.LoopRepeat=Za,e.LoopPingPong=2202,e.InterpolateDiscrete=2300,e.InterpolateLinear=2301,e.InterpolateSmooth=2302,e.ZeroCurvatureEnding=Ja,e.ZeroSlopeEnding=2401,e.WrapAroundEnding=2402,e.TrianglesDrawMode=Ka,e.TriangleStripDrawMode=$a,e.TriangleFanDrawMode=ec,e.LinearEncoding=tc,e.sRGBEncoding=rc,e.GammaEncoding=nc,e.RGBEEncoding=ic,e.LogLuvEncoding=3003,e.RGBM7Encoding=oc,e.RGBM16Encoding=sc,e.RGBDEncoding=ac,e.BasicDepthPacking=cc,e.RGBADepthPacking=lc,e.CubeGeometry=Te,e.Face4=vo,e.LineStrip=0,e.LinePieces=1,e.MeshFaceMaterial=yo,e.MultiMaterial=go,e.PointCloud=xo,e.Particle=Mo,e.ParticleSystem=Ao,e.PointCloudMaterial=wo,e.ParticleBasicMaterial=Eo,e.ParticleSystemMaterial=bo,e.Vertex=To,e.DynamicBufferAttribute=Lo,e.Int8Attribute=No,e.Uint8Attribute=Do,e.Uint8ClampedAttribute=Co,e.Int16Attribute=So,e.Uint16Attribute=Io,e.Int32Attribute=_o,e.Uint32Attribute=jo,e.Float32Attribute=Oo,e.Float64Attribute=Ro,e.ClosedSplineCurve3=zo,e.SplineCurve3=ko,e.Spline=Bo,e.AxisHelper=Uo,e.BoundingBoxHelper=Po,e.EdgesHelper=Fo,e.WireframeHelper=Go,e.XHRLoader=Ho,e.BinaryTextureLoader=Qo,e.GeometryUtils=$c,e.ImageUtils=el,e.Projector=Vo,e.CanvasRenderer=Yo,e.SceneUtils=tl,e.LensFlare=Wo,Object.defineProperty(e,"__esModule",{value:!0})})},{}],41:[function(e,t,r){THREE.ColladaLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.ColladaLoader.prototype={constructor:THREE.ColladaLoader,crossOrigin:"Anonymous",load:function(e,t,r,n){var i=this,o=void 0===i.path?THREE.LoaderUtils.extractUrlBase(e):i.path;new THREE.FileLoader(i.manager).load(e,function(e){t(i.parse(e,o))},r,n)},setPath:function(e){this.path=e},options:{set convertUpAxis(e){console.warn("THREE.ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.")}},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){function r(e,t){for(var r=[],n=e.childNodes,i=0,o=n.length;i<o;i++){var s=n[i];s.nodeName===t&&r.push(s)}return r}function n(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),r=new Array(t.length),n=0,i=t.length;n<i;n++)r[n]=t[n];return r}function i(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),r=new Array(t.length),n=0,i=t.length;n<i;n++)r[n]=parseFloat(t[n]);return r}function o(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),r=new Array(t.length),n=0,i=t.length;n<i;n++)r[n]=parseInt(t[n]);return r}function s(e){return e.substring(1)}function a(){return"three_default_"+ct++}function c(e){return 0===Object.keys(e).length}function l(e){return void 0!==e?parseFloat(e.getAttribute("meter")):1}function u(e){return void 0!==e?e.textContent:"Y_UP"}function h(e,t,n,i){var o=r(e,t)[0];if(void 0!==o)for(var s=r(o,n),a=0;a<s.length;a++)i(s[a])}function d(e,t){for(var r in e){e[r].build=t(e[r])}}function p(e,t){return void 0!==e.build?e.build:(e.build=t(e),e.build)}function m(e){for(var t={sources:{},samplers:{},channels:{}},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType){var o;switch(i.nodeName){case"source":o=i.getAttribute("id"),t.sources[o]=ve(i);break;case"sampler":o=i.getAttribute("id"),t.samplers[o]=f(i);break;case"channel":o=i.getAttribute("target"),t.channels[o]=v(i);break;default:console.log(i)}}}lt.animations[e.getAttribute("id")]=t}function f(e){for(var t={inputs:{}},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"input":var o=s(i.getAttribute("source")),a=i.getAttribute("semantic");t.inputs[a]=o}}return t}function v(e){var t={},r=e.getAttribute("target"),n=r.split("/"),i=n.shift(),o=n.shift(),a=-1!==o.indexOf("("),c=-1!==o.indexOf(".");if(c)n=o.split("."),o=n.shift(),t.member=n.shift();else if(a){var l=o.split("(");o=l.shift();for(var u=0;u<l.length;u++)l[u]=parseInt(l[u].replace(/\)/,""));t.indices=l}return t.id=i,t.sid=o,t.arraySyntax=a,t.memberSyntax=c,t.sampler=s(e.getAttribute("source")),t}function y(e){var t=[],r=e.channels,n=e.samplers,i=e.sources;for(var o in r)if(r.hasOwnProperty(o)){var s=r[o],a=n[s.sampler],c=a.inputs.INPUT,l=a.inputs.OUTPUT,u=i[c],h=i[l],d=x(s,u,h);A(d,t)}return t}function g(e){return p(lt.animations[e],y)}function x(e,t,r){var n,i,o,s,a,c,l=lt.nodes[e.id],u=Ye(l.id),h=l.transforms[e.sid],d=l.matrix.clone().transpose(),p={};switch(h){case"matrix":for(o=0,s=t.array.length;o<s;o++)if(n=t.array[o],i=o*r.stride,void 0===p[n]&&(p[n]={}),!0===e.arraySyntax){var m=r.array[i],f=e.indices[0]+4*e.indices[1];p[n][f]=m}else for(a=0,c=r.stride;a<c;a++)p[n][a]=r.array[i+a];break;case"translate":case"rotate":case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',h)}var v=M(p,d);return{name:u.uuid,keyframes:v}}function M(e,t){function r(e,t){return e.time-t.time}var n=[];for(var i in e)n.push({time:parseFloat(i),value:e[i]});n.sort(r);for(var o=0;o<16;o++)w(n,o,t.elements[o]);return n}function A(e,t){for(var r=e.keyframes,n=e.name,i=[],o=[],s=[],a=[],c=0,l=r.length;c<l;c++){var u=r[c],h=u.time,d=u.value;$e.fromArray(d).transpose(),$e.decompose(Ze,Ke,Je),i.push(h),o.push(Ze.x,Ze.y,Ze.z),s.push(Ke.x,Ke.y,Ke.z,Ke.w),a.push(Je.x,Je.y,Je.z)}return o.length>0&&t.push(new THREE.VectorKeyframeTrack(n+".position",i,o)),s.length>0&&t.push(new THREE.QuaternionKeyframeTrack(n+".quaternion",i,s)),a.length>0&&t.push(new THREE.VectorKeyframeTrack(n+".scale",i,a)),t}function w(e,t,r){var n,i,o,s=!0;for(i=0,o=e.length;i<o;i++)n=e[i],void 0===n.value[t]?n.value[t]=null:s=!1;if(!0===s)for(i=0,o=e.length;i<o;i++)n=e[i],n.value[t]=r;else E(e,t)}function E(e,t){for(var r,n,i=0,o=e.length;i<o;i++){var s=e[i];if(null===s.value[t]){if(r=b(e,i,t),n=T(e,i,t),null===r){s.value[t]=n.value[t];continue}if(null===n){s.value[t]=r.value[t];continue}L(s,r,n,t)}}}function b(e,t,r){for(;t>=0;){var n=e[t];if(null!==n.value[r])return n;t--}return null}function T(e,t,r){for(;t<e.length;){var n=e[t];if(null!==n.value[r])return n;t++}return null}function L(e,t,r,n){if(r.time-t.time==0)return void(e.value[n]=t.value[n]);e.value[n]=(e.time-t.time)*(r.value[n]-t.value[n])/(r.time-t.time)+t.value[n]}function N(e){for(var t={name:e.getAttribute("id")||"default",start:parseFloat(e.getAttribute("start")||0),end:parseFloat(e.getAttribute("end")||0),animations:[]},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"instance_animation":t.animations.push(s(i.getAttribute("url")))}}lt.clips[e.getAttribute("id")]=t}function D(e){for(var t=[],r=e.name,n=e.end-e.start||-1,i=e.animations,o=0,s=i.length;o<s;o++)for(var a=g(i[o]),c=0,l=a.length;c<l;c++)t.push(a[c]);return new THREE.AnimationClip(r,n,t)}function C(e){return p(lt.clips[e],D)}function S(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"skin":t.id=s(i.getAttribute("source")),t.skin=I(i);break;case"morph":t.id=s(i.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.")}}lt.controllers[e.getAttribute("id")]=t}function I(e){for(var t={sources:{}},r=0,n=e.childNodes.length;r<n;r++){var o=e.childNodes[r];if(1===o.nodeType)switch(o.nodeName){case"bind_shape_matrix":t.bindShapeMatrix=i(o.textContent);break;case"source":var s=o.getAttribute("id");t.sources[s]=ve(o);break;case"joints":t.joints=_(o);break;case"vertex_weights":t.vertexWeights=j(o)}}return t}function _(e){for(var t={inputs:{}},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"input":var o=i.getAttribute("semantic"),a=s(i.getAttribute("source"));t.inputs[o]=a}}return t}function j(e){for(var t={inputs:{}},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"input":var a=i.getAttribute("semantic"),c=s(i.getAttribute("source")),l=parseInt(i.getAttribute("offset"));t.inputs[a]={id:c,offset:l};break;case"vcount":t.vcount=o(i.textContent);break;case"v":t.v=o(i.textContent)}}return t}function O(e){var t={id:e.id},r=lt.geometries[t.id];return void 0!==e.skin&&(t.skin=R(e.skin),r.sources.skinIndices=t.skin.indices,r.sources.skinWeights=t.skin.weights),t}function R(e){function t(e,t){return t.weight-e.weight}var r,n,i,o={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},s=e.sources,a=e.vertexWeights,c=a.vcount,l=a.v,u=a.inputs.JOINT.offset,h=a.inputs.WEIGHT.offset,d=e.sources[e.joints.inputs.JOINT],p=e.sources[e.joints.inputs.INV_BIND_MATRIX],m=s[a.inputs.WEIGHT.id].array,f=0;for(r=0,i=c.length;r<i;r++){var v=c[r],y=[];for(n=0;n<v;n++){var g=l[f+u],x=l[f+h],M=m[x];y.push({index:g,weight:M}),f+=2}for(y.sort(t),n=0;n<4;n++){var A=y[n];void 0!==A?(o.indices.array.push(A.index),o.weights.array.push(A.weight)):(o.indices.array.push(0),o.weights.array.push(0))}}for(o.bindMatrix=(new THREE.Matrix4).fromArray(e.bindShapeMatrix).transpose(),r=0,i=d.array.length;r<i;r++){var w=d.array[r],E=(new THREE.Matrix4).fromArray(p.array,r*p.stride).transpose();o.joints.push({name:w,boneInverse:E})}return o}function z(e){return p(lt.controllers[e],O)}function k(e){var t={init_from:r(e,"init_from")[0].textContent};lt.images[e.getAttribute("id")]=t}function B(e){return void 0!==e.build?e.build:e.init_from}function U(e){return p(lt.images[e],B)}function P(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"profile_COMMON":t.profile=F(i)}}lt.effects[e.getAttribute("id")]=t}function F(e){for(var t={surfaces:{},samplers:{}},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"newparam":G(i,t);break;case"technique":t.technique=V(i);break;case"extra":t.extra=J(i)}}return t}function G(e,t){for(var r=e.getAttribute("sid"),n=0,i=e.childNodes.length;n<i;n++){var o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"surface":t.surfaces[r]=H(o);break;case"sampler2D":t.samplers[r]=Q(o)}}}function H(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"init_from":t.init_from=i.textContent}}return t}function Q(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"source":t.source=i.textContent}}return t}function V(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"constant":case"lambert":case"blinn":case"phong":t.type=i.nodeName,t.parameters=Y(i)}}return t}function Y(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"emission":case"diffuse":case"specular":case"shininess":case"transparency":t[i.nodeName]=W(i);break;case"transparent":t[i.nodeName]={opaque:i.getAttribute("opaque"),data:W(i)}}}return t}function W(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var o=e.childNodes[r];if(1===o.nodeType)switch(o.nodeName){case"color":t[o.nodeName]=i(o.textContent);break;case"float":t[o.nodeName]=parseFloat(o.textContent);break;case"texture":t[o.nodeName]={id:o.getAttribute("texture"),extra:q(o)}}}return t}function q(e){for(var t={technique:{}},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"extra":X(i,t)}}return t}function X(e,t){for(var r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"technique":Z(i,t)}}}function Z(e,t){for(var r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":t.technique[i.nodeName]=parseFloat(i.textContent);break;case"wrapU":case"wrapV":"TRUE"===i.textContent.toUpperCase()?t.technique[i.nodeName]=1:"FALSE"===i.textContent.toUpperCase()?t.technique[i.nodeName]=0:t.technique[i.nodeName]=parseInt(i.textContent)}}}function J(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"technique":t.technique=K(i)}}return t}function K(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"double_sided":t[i.nodeName]=parseInt(i.textContent)}}return t}function $(e){return e}function ee(e){return p(lt.effects[e],$)}function te(e){for(var t={name:e.getAttribute("name")},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"instance_effect":t.url=s(i.getAttribute("url"))}}lt.materials[e.getAttribute("id")]=t}function re(e){function t(e){var t,r=n.profile.samplers[e.id];if(void 0!==r){t=U(n.profile.surfaces[r.source].init_from)}else console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),t=U(e.id);if(void 0!==t){var i=ot.load(t),o=e.extra;if(void 0!==o&&void 0!==o.technique&&!1===c(o.technique)){var s=o.technique;i.wrapS=s.wrapU?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,i.wrapT=s.wrapV?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,i.offset.set(s.offsetU||0,s.offsetV||0),i.repeat.set(s.repeatU||1,s.repeatV||1)}else i.wrapS=THREE.RepeatWrapping,i.wrapT=THREE.RepeatWrapping;return i}return console.error("THREE.ColladaLoader: Unable to load texture with ID:",e.id),null}var r,n=ee(e.url),i=n.profile.technique,o=n.profile.extra;switch(i.type){case"phong":case"blinn":r=new THREE.MeshPhongMaterial;break;case"lambert":r=new THREE.MeshLambertMaterial;break;default:r=new THREE.MeshBasicMaterial}r.name=e.name;var s=i.parameters;for(var a in s){var l=s[a];switch(a){case"diffuse":l.color&&r.color.fromArray(l.color),l.texture&&(r.map=t(l.texture));break;case"specular":l.color&&r.specular&&r.specular.fromArray(l.color),l.texture&&(r.specularMap=t(l.texture));break;case"shininess":l.float&&r.shininess&&(r.shininess=l.float);break;case"emission":l.color&&r.emissive&&r.emissive.fromArray(l.color)}}var u=s.transparent,h=s.transparency;if(void 0===h&&u&&(h={float:1}),void 0===u&&h&&(u={opaque:"A_ONE",data:{color:[1,1,1,1]}}),u&&h)if(u.data.texture)r.alphaMap=t(u.data.texture),r.transparent=!0;else{var d=u.data.color;switch(u.opaque){case"A_ONE":r.opacity=d[3]*h.float;break;case"RGB_ZERO":r.opacity=1-d[0]*h.float;break;case"A_ZERO":r.opacity=1-d[3]*h.float;break;case"RGB_ONE":r.opacity=d[0]*h.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',u.opaque)}r.opacity<1&&(r.transparent=!0)}return void 0!==o&&void 0!==o.technique&&1===o.technique.double_sided&&(r.side=THREE.DoubleSide),r}function ne(e){return p(lt.materials[e],re)}function ie(e){for(var t={name:e.getAttribute("name")},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"optics":t.optics=oe(i)}}lt.cameras[e.getAttribute("id")]=t}function oe(e){for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];switch(r.nodeName){case"technique_common":return se(r)}}return{}}function se(e){for(var t={},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];switch(n.nodeName){case"perspective":case"orthographic":t.technique=n.nodeName,t.parameters=ae(n)}}return t}function ae(e){for(var t={},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];switch(n.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":t[n.nodeName]=parseFloat(n.textContent)}}return t}function ce(e){var t;switch(e.optics.technique){case"perspective":t=new THREE.PerspectiveCamera(e.optics.parameters.yfov,e.optics.parameters.aspect_ratio,e.optics.parameters.znear,e.optics.parameters.zfar);break;case"orthographic":var r=e.optics.parameters.ymag,n=e.optics.parameters.xmag,i=e.optics.parameters.aspect_ratio;n=void 0===n?r*i:n,r=void 0===r?n/i:r,n*=.5,r*=.5,t=new THREE.OrthographicCamera(-n,n,r,-r,e.optics.parameters.znear,e.optics.parameters.zfar);break;default:t=new THREE.PerspectiveCamera}return t.name=e.name,t}function le(e){var t=lt.cameras[e];return void 0!==t?p(t,ce):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",e),null)}function ue(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"technique_common":t=he(i)}}lt.lights[e.getAttribute("id")]=t}function he(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"directional":case"point":case"spot":case"ambient":t.technique=i.nodeName,t.parameters=de(i)}}return t}function de(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var o=e.childNodes[r];if(1===o.nodeType)switch(o.nodeName){case"color":var s=i(o.textContent);t.color=(new THREE.Color).fromArray(s);break;case"falloff_angle":t.falloffAngle=parseFloat(o.textContent);break;case"quadratic_attenuation":var a=parseFloat(o.textContent);t.distance=a?Math.sqrt(1/a):0}}return t}function pe(e){var t;switch(e.technique){case"directional":t=new THREE.DirectionalLight;break;case"point":t=new THREE.PointLight;break;case"spot":t=new THREE.SpotLight;break;case"ambient":t=new THREE.AmbientLight}return e.parameters.color&&t.color.copy(e.parameters.color),e.parameters.distance&&(t.distance=e.parameters.distance),t}function me(e){var t=lt.lights[e];return void 0!==t?p(t,pe):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",e),null)}function fe(e){var t={name:e.getAttribute("name"),sources:{},vertices:{},primitives:[]},n=r(e,"mesh")[0];if(void 0!==n){for(var i=0;i<n.childNodes.length;i++){var o=n.childNodes[i];if(1===o.nodeType){var s=o.getAttribute("id");switch(o.nodeName){case"source":t.sources[s]=ve(o);break;case"vertices":t.vertices=ye(o);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",o.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":t.primitives.push(ge(o));break;default:console.log(o)}}}lt.geometries[e.getAttribute("id")]=t}}function ve(e){for(var t={array:[],stride:3},o=0;o<e.childNodes.length;o++){var s=e.childNodes[o];if(1===s.nodeType)switch(s.nodeName){case"float_array":t.array=i(s.textContent);break;case"Name_array":t.array=n(s.textContent);break;case"technique_common":var a=r(s,"accessor")[0];void 0!==a&&(t.stride=parseInt(a.getAttribute("stride")))}}return t}function ye(e){for(var t={},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];1===n.nodeType&&(t[n.getAttribute("semantic")]=s(n.getAttribute("source")))}return t}function ge(e){for(var t={type:e.nodeName,material:e.getAttribute("material"),count:parseInt(e.getAttribute("count")),inputs:{},stride:0},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"input":var a=s(i.getAttribute("source")),c=i.getAttribute("semantic"),l=parseInt(i.getAttribute("offset"));t.inputs[c]={id:a,offset:l},t.stride=Math.max(t.stride,l+1);break;case"vcount":t.vcount=o(i.textContent);break;case"p":t.p=o(i.textContent)}}return t}function xe(e){for(var t={},r=0;r<e.length;r++){var n=e[r];void 0===t[n.type]&&(t[n.type]=[]),t[n.type].push(n)}return t}function Me(e){var t={},r=e.sources,n=e.vertices,i=e.primitives;if(0===i.length)return{};var o=xe(i);for(var s in o)t[s]=Ae(o[s],r,n);return t}function Ae(e,t,r){for(var n={},i={array:[],stride:0},o={array:[],stride:0},s={array:[],stride:0},a={array:[],stride:0},c={array:[],stride:4},l={array:[],stride:4},u=new THREE.BufferGeometry,h=[],d=0,p=0,m=0;m<e.length;m++){var f=e[m],v=f.inputs,y=1;f.vcount&&4===f.vcount[0]&&(y=2),p="lines"===f.type||"linestrips"===f.type?2*f.count:3*f.count*y,u.addGroup(d,p,m),d+=p,f.material&&h.push(f.material);for(var g in v){var x=v[g];switch(g){case"VERTEX":for(var M in r){var A=r[M];switch(M){case"POSITION":we(f,t[A],x.offset,i.array),i.stride=t[A].stride,t.skinWeights&&t.skinIndices&&(we(f,t.skinIndices,x.offset,c.array),we(f,t.skinWeights,x.offset,l.array));break;case"NORMAL":we(f,t[A],x.offset,o.array),o.stride=t[A].stride;break;case"COLOR":we(f,t[A],x.offset,a.array),a.stride=t[A].stride;break;case"TEXCOORD":we(f,t[A],x.offset,s.array),s.stride=t[A].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',M)}}break;case"NORMAL":we(f,t[x.id],x.offset,o.array),o.stride=t[x.id].stride;break;case"COLOR":we(f,t[x.id],x.offset,a.array),a.stride=t[x.id].stride;break;case"TEXCOORD":we(f,t[x.id],x.offset,s.array),s.stride=t[x.id].stride}}}return i.array.length>0&&u.addAttribute("position",new THREE.Float32BufferAttribute(i.array,i.stride)),o.array.length>0&&u.addAttribute("normal",new THREE.Float32BufferAttribute(o.array,o.stride)),a.array.length>0&&u.addAttribute("color",new THREE.Float32BufferAttribute(a.array,a.stride)),s.array.length>0&&u.addAttribute("uv",new THREE.Float32BufferAttribute(s.array,s.stride)),c.array.length>0&&u.addAttribute("skinIndex",new THREE.Float32BufferAttribute(c.array,c.stride)),l.array.length>0&&u.addAttribute("skinWeight",new THREE.Float32BufferAttribute(l.array,l.stride)),n.data=u,n.type=e[0].type,n.materialKeys=h,n}function we(e,t,r,n){function i(e){for(var t=o[e+r]*u,i=t+u;t<i;t++)n.push(l[t])}var o=e.p,s=e.stride,a=e.vcount,c=0,l=t.array,u=t.stride;if(void 0!==e.vcount){for(var h=0,d=0,p=a.length;d<p;d++){var m=a[d];if(4===m){var f=h+0*s,v=h+1*s,y=h+2*s,g=h+3*s;i(f),i(v),i(g),i(v),i(y),i(g)}else if(3===m){var f=h+0*s,v=h+1*s,y=h+2*s;i(f),i(v),i(y)}else c=Math.max(c,m);h+=s*m}c>0&&console.log("THREE.ColladaLoader: Geometry has faces with more than 4 vertices.")}else for(var d=0,p=o.length;d<p;d+=s)i(d)}function Ee(e){return p(lt.geometries[e],Me)}function be(e){for(var t={name:e.getAttribute("name")||"",joints:{},links:[]},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"technique_common":Ne(n,t)}}lt.kinematicsModels[e.getAttribute("id")]=t}function Te(e){return void 0!==e.build?e.build:e}function Le(e){return p(lt.kinematicsModels[e],Te)}function Ne(e,t){for(var r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"joint":t.joints[n.getAttribute("sid")]=De(n);break;case"link":t.links.push(Se(n))}}}function De(e){for(var t,r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"prismatic":case"revolute":t=Ce(n)}}return t}function Ce(e,t){for(var t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",axis:new THREE.Vector3,limits:{min:0,max:0},type:e.nodeName,static:!1,zeroPosition:0,middlePosition:0},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"axis":var o=i(n.textContent);t.axis.fromArray(o);break;case"limits":var s=n.getElementsByTagName("max")[0],a=n.getElementsByTagName("min")[0];t.limits.max=parseFloat(s.textContent),t.limits.min=parseFloat(a.textContent)}}return t.limits.min>=t.limits.max&&(t.static=!0),t.middlePosition=(t.limits.min+t.limits.max)/2,t}function Se(e){for(var t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",attachments:[],transforms:[]},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"attachment_full":t.attachments.push(Ie(n));break;case"matrix":case"translate":case"rotate":t.transforms.push(_e(n))}}return t}function Ie(e){for(var t={joint:e.getAttribute("joint").split("/").pop(),transforms:[],links:[]},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"link":t.links.push(Se(n));break;case"matrix":case"translate":case"rotate":t.transforms.push(_e(n))}}return t}function _e(e){var t={type:e.nodeName},r=i(e.textContent);switch(t.type){case"matrix":t.obj=new THREE.Matrix4,t.obj.fromArray(r).transpose();break;case"translate":t.obj=new THREE.Vector3,t.obj.fromArray(r);break;case"rotate":t.obj=new THREE.Vector3,t.obj.fromArray(r),t.angle=THREE.Math.degToRad(r[3])}return t}function je(e){for(var t={bindJointAxis:[]},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"bind_joint_axis":t.bindJointAxis.push(Oe(n))}}lt.kinematicsScenes[s(e.getAttribute("url"))]=t}function Oe(e){for(var t={target:e.getAttribute("target").split("/").pop()},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"axis":var i=n.getElementsByTagName("param")[0];t.axis=i.textContent;var o=t.axis.split("inst_").pop().split("axis")[0];t.jointIndex=o.substr(0,o.length-1)}}return t}function Re(e){return void 0!==e.build?e.build:e}function ze(e){return p(lt.kinematicsScenes[e],Re)}function ke(e){for(var t=[],r=rt.querySelector('[id="'+e.id+'"]'),n=0;n<r.childNodes.length;n++){var o=r.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"matrix":var s=i(o.textContent),a=(new THREE.Matrix4).fromArray(s).transpose();t.push({sid:o.getAttribute("sid"),type:o.nodeName,obj:a});break;case"translate":case"scale":var s=i(o.textContent),c=(new THREE.Vector3).fromArray(s);t.push({sid:o.getAttribute("sid"),type:o.nodeName,obj:c});break;case"rotate":var s=i(o.textContent),c=(new THREE.Vector3).fromArray(s),l=THREE.Math.degToRad(s[3]);t.push({sid:o.getAttribute("sid"),type:o.nodeName,obj:c,angle:l})}}return t}function Be(e){for(var t=e.getElementsByTagName("node"),r=0;r<t.length;r++){var n=t[r];!1===n.hasAttribute("id")&&n.setAttribute("id",a())}}function Ue(e){for(var t={name:e.getAttribute("name")||"",type:e.getAttribute("type"),id:e.getAttribute("id"),sid:e.getAttribute("sid"),matrix:new THREE.Matrix4,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"node":t.nodes.push(n.getAttribute("id")),Ue(n);break;case"instance_camera":t.instanceCameras.push(s(n.getAttribute("url")));break;case"instance_controller":t.instanceControllers.push(Pe(n));break;case"instance_light":t.instanceLights.push(s(n.getAttribute("url")));break;case"instance_geometry":t.instanceGeometries.push(Pe(n));break;case"instance_node":t.instanceNodes.push(s(n.getAttribute("url")));break;case"matrix":var o=i(n.textContent);t.matrix.multiply($e.fromArray(o).transpose()),t.transforms[n.getAttribute("sid")]=n.nodeName;break;case"translate":var o=i(n.textContent);et.fromArray(o),t.matrix.multiply($e.makeTranslation(et.x,et.y,et.z)),t.transforms[n.getAttribute("sid")]=n.nodeName;break;case"rotate":var o=i(n.textContent),a=THREE.Math.degToRad(o[3]);t.matrix.multiply($e.makeRotationAxis(et.fromArray(o),a)),t.transforms[n.getAttribute("sid")]=n.nodeName;break;case"scale":var o=i(n.textContent);t.matrix.scale(et.fromArray(o)),t.transforms[n.getAttribute("sid")]=n.nodeName;break;case"extra":break;default:console.log(n)}}return lt.nodes[t.id]=t,t}function Pe(e){for(var t={id:s(e.getAttribute("url")),materials:{},skeletons:[]},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];switch(n.nodeName){case"bind_material":for(var i=n.getElementsByTagName("instance_material"),o=0;o<i.length;o++){var a=i[o],c=a.getAttribute("symbol"),l=a.getAttribute("target");t.materials[c]=s(l)}break;case"skeleton":t.skeletons.push(s(n.textContent))}}return t}function Fe(e,t){var r,n,i,o=[],s=[];for(r=0;r<e.length;r++){Ge(Ye(e[r]),t,o)}for(r=0;r<t.length;r++)for(n=0;n<o.length;n++)if(i=o[n],i.bone.name===t[r].name){s[r]=i,i.processed=!0;break}for(r=0;r<o.length;r++)i=o[r],!1===i.processed&&(s.push(i),i.processed=!0);var a=[],c=[];for(r=0;r<s.length;r++)i=s[r],a.push(i.bone),c.push(i.boneInverse);return new THREE.Skeleton(a,c)}function Ge(e,t,r){e.traverse(function(e){if(!0===e.isBone){for(var n,i=0;i<t.length;i++){var o=t[i];if(o.name===e.name){n=o.boneInverse;break}}void 0===n&&(n=new THREE.Matrix4),r.push({bone:e,boneInverse:n,processed:!1})}})}function He(e){for(var t=[],r=e.matrix,n=e.nodes,i=e.type,o=e.instanceCameras,s=e.instanceControllers,a=e.instanceLights,c=e.instanceGeometries,l=e.instanceNodes,u=0,h=n.length;u<h;u++)t.push(Ye(n[u]));for(var u=0,h=o.length;u<h;u++){var d=le(o[u]);null!==d&&t.push(d.clone())}for(var u=0,h=s.length;u<h;u++)for(var p=s[u],m=z(p.id),f=Ee(m.id),v=Ve(f,p.materials),y=p.skeletons,g=m.skin.joints,x=Fe(y,g),M=0,A=v.length;M<A;M++){var w=v[M];w.isSkinnedMesh&&(w.bind(x,m.skin.bindMatrix),w.normalizeSkinWeights()),t.push(w)}for(var u=0,h=a.length;u<h;u++){var E=me(a[u]);null!==E&&t.push(E.clone())}for(var u=0,h=c.length;u<h;u++)for(var p=c[u],f=Ee(p.id),v=Ve(f,p.materials),M=0,A=v.length;M<A;M++)t.push(v[M]);for(var u=0,h=l.length;u<h;u++)t.push(Ye(l[u]).clone());var w;if(0===n.length&&1===t.length)w=t[0];else{w="JOINT"===i?new THREE.Bone:new THREE.Group;for(var u=0;u<t.length;u++)w.add(t[u])}return w.name="JOINT"===i?e.sid:e.name,w.matrix.copy(r),w.matrix.decompose(w.position,w.quaternion,w.scale),w}function Qe(e,t){for(var r=[],n=0,i=e.length;n<i;n++){var o=t[e[n]];r.push(ne(o))}return r}function Ve(e,t){var r=[];for(var n in e){var i=e[n],o=Qe(i.materialKeys,t);0===o.length&&("lines"===n||"linestrips"===n?o.push(new THREE.LineBasicMaterial):o.push(new THREE.MeshPhongMaterial));var s=void 0!==i.data.attributes.skinIndex;if(s)for(var a=0,c=o.length;a<c;a++)o[a].skinning=!0;var l,u=1===o.length?o[0]:o;switch(n){case"lines":l=new THREE.LineSegments(i.data,u);break;case"linestrips":l=new THREE.Line(i.data,u);break;case"triangles":case"polylist":l=s?new THREE.SkinnedMesh(i.data,u):new THREE.Mesh(i.data,u)}r.push(l)}return r}function Ye(e){return p(lt.nodes[e],He)}function We(e){var t={name:e.getAttribute("name"),children:[]};Be(e);for(var n=r(e,"node"),i=0;i<n.length;i++)t.children.push(Ue(n[i]));lt.visualScenes[e.getAttribute("id")]=t}function qe(e){var t=new THREE.Group;t.name=e.name;for(var r=e.children,n=0;n<r.length;n++){var i=r[n];null===i.id?t.add(He(i)):t.add(Ye(i.id))}return t}function Xe(e){return p(lt.visualScenes[e],qe)}var Ze=new THREE.Vector3,Je=new THREE.Vector3,Ke=new THREE.Quaternion,$e=new THREE.Matrix4,et=new THREE.Vector3;if(console.time("THREE.ColladaLoader"),0===e.length)return{scene:new THREE.Scene};console.time("THREE.ColladaLoader: DOMParser");var tt=(new DOMParser).parseFromString(e,"application/xml");console.timeEnd("THREE.ColladaLoader: DOMParser");var rt=r(tt,"COLLADA")[0],nt=rt.getAttribute("version");console.log("THREE.ColladaLoader: File version",nt);var it=function(e){return{unit:l(r(e,"unit")[0]),upAxis:u(r(e,"up_axis")[0])}}(r(rt,"asset")[0]),ot=new THREE.TextureLoader(this.manager);ot.setPath(t).setCrossOrigin(this.crossOrigin);var st=[],at={},ct=0,lt={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},kinematicsScenes:{}};console.time("THREE.ColladaLoader: Parse"),h(rt,"library_animations","animation",m),h(rt,"library_animation_clips","animation_clip",N),h(rt,"library_controllers","controller",S),h(rt,"library_images","image",k),h(rt,"library_effects","effect",P),h(rt,"library_materials","material",te),h(rt,"library_cameras","camera",ie),h(rt,"library_lights","light",ue),h(rt,"library_geometries","geometry",fe),h(rt,"library_nodes","node",Ue),h(rt,"library_visual_scenes","visual_scene",We),h(rt,"library_kinematics_models","kinematics_model",be),h(rt,"scene","instance_kinematics_scene",je),console.timeEnd("THREE.ColladaLoader: Parse"),console.time("THREE.ColladaLoader: Build"),d(lt.animations,y),d(lt.clips,D),d(lt.controllers,O),d(lt.images,B),d(lt.effects,$),d(lt.materials,re),d(lt.cameras,ce),d(lt.lights,pe),d(lt.geometries,Me),d(lt.visualScenes,qe),console.timeEnd("THREE.ColladaLoader: Build"),function(){var e=lt.clips;if(!0===c(e)){if(!1===c(lt.animations)){var t=[];for(var r in lt.animations)for(var n=g(r),i=0,o=n.length;i<o;i++)t.push(n[i]);st.push(new THREE.AnimationClip("default",-1,t))}}else for(var r in e)st.push(C(r))}(),function(){var e=Object.keys(lt.kinematicsModels)[0],t=Object.keys(lt.kinematicsScenes)[0],r=Object.keys(lt.visualScenes)[0];if(void 0!==e&&void 0!==t){for(var n=Le(e),i=ze(t),o=Xe(r),s=i.bindJointAxis,a={},c=0,l=s.length;c<l;c++){var u=s[c],h=rt.querySelector('[sid="'+u.target+'"]');if(h){var d=h.parentElement;!function(e,t){var r=t.getAttribute("name"),i=n.joints[e];o.traverse(function(n){n.name===r&&(a[e]={object:n,transforms:ke(t),joint:i,position:i.zeroPosition})})}(u.jointIndex,d)}}var p=new THREE.Matrix4;at={joints:n&&n.joints,getJointValue:function(e){var t=a[e];if(t)return t.position;console.warn("THREE.ColladaLoader: Joint "+e+" doesn't exist.")},setJointValue:function(e,t){var r=a[e];if(r){var n=r.joint;if(t>n.limits.max||t<n.limits.min)console.warn("THREE.ColladaLoader: Joint "+e+" value "+t+" outside of limits (min: "+n.limits.min+", max: "+n.limits.max+").");else if(n.static)console.warn("THREE.ColladaLoader: Joint "+e+" is static.");else{var i=r.object,o=n.axis,s=r.transforms;$e.identity();for(var c=0;c<s.length;c++){var l=s[c];if(l.sid&&-1!==l.sid.indexOf(e))switch(n.type){case"revolute":$e.multiply(p.makeRotationAxis(o,THREE.Math.degToRad(t)));break;case"prismatic":$e.multiply(p.makeTranslation(o.x*t,o.y*t,o.z*t));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+n.type)}else switch(l.type){case"matrix":$e.multiply(l.obj);break;case"translate":$e.multiply(p.makeTranslation(l.obj.x,l.obj.y,l.obj.z));break;case"scale":$e.scale(l.obj);break;case"rotate":$e.multiply(p.makeRotationAxis(l.obj,l.angle))}}i.matrix.copy($e),i.matrix.decompose(i.position,i.quaternion,i.scale),a[e].position=t}}else console.log("THREE.ColladaLoader: "+e+" does not exist.")}}}}();var ut=function(e){return Xe(s(r(e,"instance_visual_scene")[0].getAttribute("url")))}(r(rt,"scene")[0]);return"Z_UP"===it.upAxis&&(ut.rotation.x=-Math.PI/2),ut.scale.multiplyScalar(it.unit),console.timeEnd("THREE.ColladaLoader"),{animations:st,kinematics:at,library:lt,scene:ut}}}},{}],42:[function(e,t,r){THREE.GLTFLoader=function(){function e(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager}function t(){var e={};return{get:function(t){return e[t]},add:function(t,r){e[t]=r},remove:function(t){delete e[t]},removeAll:function(){e={}}}}function r(e){this.name=p.KHR_LIGHTS,this.lights={};var t=e.extensions&&e.extensions[p.KHR_LIGHTS]||{},r=t.lights||{};for(var n in r){var i,o=r[n],s=(new THREE.Color).fromArray(o.color);switch(o.type){case"directional":i=new THREE.DirectionalLight(s),i.position.set(0,0,1);break;case"point":i=new THREE.PointLight(s);break;case"spot":i=new THREE.SpotLight(s),i.position.set(0,0,1);break;case"ambient":i=new THREE.AmbientLight(s)}i&&(void 0!==o.constantAttenuation&&(i.intensity=o.constantAttenuation),void 0!==o.linearAttenuation&&(i.distance=1/o.linearAttenuation),void 0!==o.quadraticAttenuation&&(i.decay=o.quadraticAttenuation),void 0!==o.fallOffAngle&&(i.angle=o.fallOffAngle),void 0!==o.fallOffExponent&&console.warn("THREE.GLTFLoader:: light.fallOffExponent not currently supported."),i.name=o.name||"light_"+n,this.lights[n]=i)}}function n(e){this.name=p.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,f);if(this.header={magic:THREE.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==m)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var r=new DataView(e,f),n=0;n<r.byteLength;){var i=r.getUint32(n,!0);n+=4;var o=r.getUint32(n,!0);if(n+=4,o===v.JSON){var s=new Uint8Array(e,f+n,i);this.content=THREE.LoaderUtils.decodeText(s)}else if(o===v.BIN){var a=f+n;this.body=e.slice(a,a+i)}n+=i}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function i(){return{name:p.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return THREE.ShaderMaterial},extendParams:function(e,t,r){var n=t.extensions[this.name],i=THREE.ShaderLib.standard,o=THREE.UniformsUtils.clone(i.uniforms),s=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),a=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),c=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),l=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),u=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),h=i.fragmentShader.replace("#include <specularmap_fragment>","").replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",s).replace("#include <metalnessmap_pars_fragment>",a).replace("#include <roughnessmap_fragment>",c).replace("#include <metalnessmap_fragment>",l).replace("#include <lights_physical_fragment>",u);delete o.roughness,delete o.metalness,delete o.roughnessMap,delete o.metalnessMap,o.specular={value:(new THREE.Color).setHex(1118481)},o.glossiness={value:.5},o.specularMap={value:null},o.glossinessMap={value:null},e.vertexShader=i.vertexShader,e.fragmentShader=h,e.uniforms=o,e.defines={STANDARD:""},e.color=new THREE.Color(1,1,1),e.opacity=1;var d=[];if(Array.isArray(n.diffuseFactor)){var p=n.diffuseFactor;e.color.fromArray(p),e.opacity=p[3]}if(void 0!==n.diffuseTexture&&d.push(r.assignTexture(e,"map",n.diffuseTexture.index)),e.emissive=new THREE.Color(0,0,0),e.glossiness=void 0!==n.glossinessFactor?n.glossinessFactor:1,e.specular=new THREE.Color(1,1,1),Array.isArray(n.specularFactor)&&e.specular.fromArray(n.specularFactor),void 0!==n.specularGlossinessTexture){var m=n.specularGlossinessTexture.index;d.push(r.assignTexture(e,"glossinessMap",m)),d.push(r.assignTexture(e,"specularMap",m))}return Promise.all(d)},createMaterial:function(e){var t=new THREE.ShaderMaterial({defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,fog:!0,lights:!0,opacity:e.opacity,transparent:e.transparent});return t.isGLTFSpecularGlossinessMaterial=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t.extensions.derivatives=!0,t},cloneMaterial:function(e){var t=e.clone();t.isGLTFSpecularGlossinessMaterial=!0;for(var r=this.specularGlossinessParams,n=0,i=r.length;n<i;n++)t[r[n]]=e[r[n]];return t},refreshUniforms:function(e,t,r,n,i,o){if(!0===i.isGLTFSpecularGlossinessMaterial){var s=i.uniforms,a=i.defines;s.opacity.value=i.opacity,s.diffuse.value.copy(i.color),s.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),s.map.value=i.map,s.specularMap.value=i.specularMap,s.alphaMap.value=i.alphaMap,s.lightMap.value=i.lightMap,s.lightMapIntensity.value=i.lightMapIntensity,s.aoMap.value=i.aoMap,s.aoMapIntensity.value=i.aoMapIntensity;var c;if(i.map?c=i.map:i.specularMap?c=i.specularMap:i.displacementMap?c=i.displacementMap:i.normalMap?c=i.normalMap:i.bumpMap?c=i.bumpMap:i.glossinessMap?c=i.glossinessMap:i.alphaMap?c=i.alphaMap:i.emissiveMap&&(c=i.emissiveMap),void 0!==c){c.isWebGLRenderTarget&&(c=c.texture);var l,u;if(void 0!==c.matrix){if(!0===c.matrixAutoUpdate){l=c.offset,u=c.repeat;var h=c.rotation,d=c.center;c.matrix.setUvTransform(l.x,l.y,u.x,u.y,h,d.x,d.y)}s.uvTransform.value.copy(c.matrix)}else l=c.offset,u=c.repeat,s.offsetRepeat.value.set(l.x,l.y,u.x,u.y)}s.envMap.value=i.envMap,s.envMapIntensity.value=i.envMapIntensity,s.flipEnvMap.value=i.envMap&&i.envMap.isCubeTexture?-1:1,s.refractionRatio.value=i.refractionRatio,s.specular.value.copy(i.specular),s.glossiness.value=i.glossiness,s.glossinessMap.value=i.glossinessMap,s.emissiveMap.value=i.emissiveMap,s.bumpMap.value=i.bumpMap,s.normalMap.value=i.normalMap,s.displacementMap.value=i.displacementMap,s.displacementScale.value=i.displacementScale,s.displacementBias.value=i.displacementBias,null!==s.glossinessMap.value&&void 0===a.USE_GLOSSINESSMAP&&(a.USE_GLOSSINESSMAP="",a.USE_ROUGHNESSMAP=""),null===s.glossinessMap.value&&void 0!==a.USE_GLOSSINESSMAP&&(delete a.USE_GLOSSINESSMAP,delete a.USE_ROUGHNESSMAP)}}}}function o(e,t,r,n){THREE.Interpolant.call(this,e,t,r,n)}function s(e,t){return"string"!=typeof e||""===e?"":/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e}function a(){return new THREE.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:THREE.FrontSide})}function c(e,t,r,n){var i=e.geometry,o=e.material,s=r.targets,a=i.morphAttributes;a.position=[],a.normal=[],o.morphTargets=!0;for(var c=0,l=s.length;c<l;c++){var u,d,p=s[c],m="morphTarget"+c;if(void 0!==p.POSITION){u=h(n[p.POSITION]);for(var f=i.attributes.position,v=0,y=u.count;v<y;v++)u.setXYZ(v,u.getX(v)+f.getX(v),u.getY(v)+f.getY(v),u.getZ(v)+f.getZ(v))}else i.attributes.position&&(u=h(i.attributes.position));if(void 0!==u&&(u.name=m,a.position.push(u)),void 0!==p.NORMAL){o.morphNormals=!0,d=h(n[p.NORMAL]);for(var g=i.attributes.normal,v=0,y=d.count;v<y;v++)d.setXYZ(v,d.getX(v)+g.getX(v),d.getY(v)+g.getY(v),d.getZ(v)+g.getZ(v))}else void 0!==i.attributes.normal&&(d=h(i.attributes.normal));void 0!==d&&(d.name=m,a.normal.push(d))}if(e.updateMorphTargets(),void 0!==t.weights)for(var c=0,l=t.weights.length;c<l;c++)e.morphTargetInfluences[c]=t.weights[c]}function l(e,t){if(e.indices!==t.indices)return!1;var r=e.attributes||{},n=t.attributes||{},i=Object.keys(r),o=Object.keys(n);if(i.length!==o.length)return!1;for(var s=0,a=i.length;s<a;s++){var c=i[s];if(r[c]!==n[c])return!1}return!0}function u(e,t){for(var r=0,n=e.length;r<n;r++){var i=e[r];if(l(i.primitive,t))return i.geometry}return null}function h(e){if(e.isInterleavedBufferAttribute){for(var t=e.count,r=e.itemSize,n=e.array.slice(0,t*r),i=0;i<t;++i)n[i]=e.getX(i),r>=2&&(n[i+1]=e.getY(i)),r>=3&&(n[i+2]=e.getZ(i)),r>=4&&(n[i+3]=e.getW(i));return new THREE.BufferAttribute(n,r,e.normalized)}return e.clone()}function d(e,r,n){this.json=e||{},this.extensions=r||{},this.options=n||{},this.cache=new t,this.primitiveCache=[],this.textureLoader=new THREE.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new THREE.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer")}e.prototype={constructor:e,crossOrigin:"Anonymous",load:function(e,t,r,n){var i=this,o=void 0!==this.path?this.path:THREE.LoaderUtils.extractUrlBase(e),s=new THREE.FileLoader(i.manager);s.setResponseType("arraybuffer"),s.load(e,function(e){try{i.parse(e,o,t,n)}catch(e){if(void 0===n)throw e;n(e)}},r,n)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},parse:function(e,t,o,s){var a,c={};if("string"==typeof e)a=e;else{if(THREE.LoaderUtils.decodeText(new Uint8Array(e,0,4))===m){try{c[p.KHR_BINARY_GLTF]=new n(e)}catch(e){return void(s&&s(e))}a=c[p.KHR_BINARY_GLTF].content}else a=THREE.LoaderUtils.decodeText(new Uint8Array(e))}var l=JSON.parse(a);if(void 0===l.asset||l.asset.version[0]<2)return void(s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead.")));l.extensionsUsed&&(l.extensionsUsed.indexOf(p.KHR_LIGHTS)>=0&&(c[p.KHR_LIGHTS]=new r(l)),l.extensionsUsed.indexOf(p.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS)>=0&&(c[p.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]=new i)),console.time("GLTFLoader"),new d(l,c,{path:t||this.path||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(function(e,t,r,n,i){console.timeEnd("GLTFLoader"),o({scene:e,scenes:t,cameras:r,animations:n,asset:i})},s)}};var p={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_LIGHTS:"KHR_lights",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness"},m="glTF",f=12,v={JSON:1313821514,BIN:5130562};o.prototype=Object.create(THREE.Interpolant.prototype),o.prototype.constructor=o,o.prototype.interpolate_=function(e,t,r,n){for(var i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=2*s,c=3*s,l=n-t,u=(r-t)/l,h=u*u,d=h*u,p=e*c,m=p-c,f=2*d-3*h+1,v=d-2*h+u,y=-2*d+3*h,g=d-h,x=0;x!==s;x++){var M=o[m+x+s],A=o[m+x+a]*l,w=o[p+x+s],E=o[p+x]*l;i[x]=f*M+v*A+y*w+g*E}return i};var y={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},g=(Number,THREE.Matrix3,THREE.Matrix4,THREE.Vector2,THREE.Vector3,THREE.Vector4,THREE.Texture,{5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array}),x={9728:THREE.NearestFilter,9729:THREE.LinearFilter,9984:THREE.NearestMipMapNearestFilter,9985:THREE.LinearMipMapNearestFilter,9986:THREE.NearestMipMapLinearFilter,9987:THREE.LinearMipMapLinearFilter},M={33071:THREE.ClampToEdgeWrapping,33648:THREE.MirroredRepeatWrapping,10497:THREE.RepeatWrapping},A={6406:THREE.AlphaFormat,6407:THREE.RGBFormat,6408:THREE.RGBAFormat,6409:THREE.LuminanceFormat,6410:THREE.LuminanceAlphaFormat},w={5121:THREE.UnsignedByteType,32819:THREE.UnsignedShort4444Type,32820:THREE.UnsignedShort5551Type,33635:THREE.UnsignedShort565Type},E=(THREE.BackSide,THREE.FrontSide,THREE.NeverDepth,THREE.LessDepth,THREE.EqualDepth,THREE.LessEqualDepth,THREE.GreaterEqualDepth,THREE.NotEqualDepth,THREE.GreaterEqualDepth,THREE.AlwaysDepth,THREE.AddEquation,THREE.SubtractEquation,THREE.ReverseSubtractEquation,THREE.ZeroFactor,THREE.OneFactor,THREE.SrcColorFactor,THREE.OneMinusSrcColorFactor,THREE.SrcAlphaFactor,THREE.OneMinusSrcAlphaFactor,THREE.DstAlphaFactor,THREE.OneMinusDstAlphaFactor,THREE.DstColorFactor,THREE.OneMinusDstColorFactor,THREE.SrcAlphaSaturateFactor,{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16}),b={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},T={CUBICSPLINE:THREE.InterpolateSmooth,LINEAR:THREE.InterpolateLinear,STEP:THREE.InterpolateDiscrete},L={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};return d.prototype.parse=function(e,t){var r=this.json;this.cache.removeAll(),this.markDefs(),this.getMultiDependencies(["scene","animation","camera"]).then(function(t){var n=t.scenes||[],i=n[r.scene||0],o=t.animations||[],s=r.asset,a=t.cameras||[];e(i,n,a,o,s)}).catch(t)},d.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[],n={},i={},o=0,s=t.length;o<s;o++)for(var a=t[o].joints,c=0,l=a.length;c<l;c++)e[a[c]].isBone=!0;for(var u=0,h=e.length;u<h;u++){var d=e[u];void 0!==d.mesh&&(void 0===n[d.mesh]&&(n[d.mesh]=i[d.mesh]=0),n[d.mesh]++,void 0!==d.skin&&(r[d.mesh].isSkinnedMesh=!0))}this.json.meshReferences=n,this.json.meshUses=i},d.prototype.getDependency=function(e,t){var r=e+":"+t,n=this.cache.get(r);if(!n){n=this["load"+e.charAt(0).toUpperCase()+e.slice(1)](t),this.cache.add(r,n)}return n},d.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var r=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(n.map(function(t,n){return r.getDependency(e,n)})),this.cache.add(e,t)}return t},d.prototype.getMultiDependencies=function(e){for(var t={},r=[],n=0,i=e.length;n<i;n++){var o=e[n],s=this.getDependencies(o);s=s.then(function(e,r){t[e]=r}.bind(this,o+("mesh"===o?"es":"s"))),r.push(s)}return Promise.all(r).then(function(){return t})},d.prototype.loadBuffer=function(e){var t=this.json.buffers[e],r=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[p.KHR_BINARY_GLTF].body);var n=this.options;return new Promise(function(e,i){r.load(s(t.uri,n.path),e,void 0,function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})},d.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){var r=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+r)})},d.prototype.loadAccessor=function(e){var t=this,r=this.json,n=this.json.accessors[e],i=[];return void 0!==n.bufferView?i.push(this.getDependency("bufferView",n.bufferView)):i.push(null),void 0!==n.sparse&&(i.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(i).then(function(e){var i,o,s=e[0],a=E[n.type],c=g[n.componentType],l=c.BYTES_PER_ELEMENT,u=l*a,h=n.byteOffset||0,d=r.bufferViews[n.bufferView].byteStride,p=!0===n.normalized;if(d&&d!==u){var m="InterleavedBuffer:"+n.bufferView+":"+n.componentType,f=t.cache.get(m);f||(i=new c(s),f=new THREE.InterleavedBuffer(i,d/l),t.cache.add(m,f)),o=new THREE.InterleavedBufferAttribute(f,a,h/l,p)}else i=null===s?new c(n.count*a):new c(s,h,n.count*a),o=new THREE.BufferAttribute(i,a,p);if(void 0!==n.sparse){var v=E.SCALAR,y=g[n.sparse.indices.componentType],x=n.sparse.indices.byteOffset||0,M=n.sparse.values.byteOffset||0,A=new y(e[1],x,n.sparse.count*v),w=new c(e[2],M,n.sparse.count*a);null!==s&&o.setArray(o.array.slice());for(var b=0,T=A.length;b<T;b++){var L=A[b];if(o.setX(L,w[b*a]),a>=2&&o.setY(L,w[b*a+1]),a>=3&&o.setZ(L,w[b*a+2]),a>=4&&o.setW(L,w[b*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return o})},d.prototype.loadTexture=function(e){var t=this,r=this.json,n=this.options,i=this.textureLoader,o=window.URL||window.webkitURL,a=r.textures[e],c=r.images[a.source],l=c.uri,u=!1;return void 0!==c.bufferView&&(l=t.getDependency("bufferView",c.bufferView).then(function(e){u=!0;var t=new Blob([e],{type:c.mimeType});return l=o.createObjectURL(t)})),Promise.resolve(l).then(function(e){var t=THREE.Loader.Handlers.get(e)||i;return new Promise(function(r,i){t.load(s(e,n.path),r,void 0,i)})}).then(function(e){!0===u&&o.revokeObjectURL(l),e.flipY=!1,void 0!==a.name&&(e.name=a.name),e.format=void 0!==a.format?A[a.format]:THREE.RGBAFormat,void 0!==a.internalFormat&&e.format!==A[a.internalFormat]&&console.warn("THREE.GLTFLoader: Three.js does not support texture internalFormat which is different from texture format. internalFormat will be forced to be the same value as format."),e.type=void 0!==a.type?w[a.type]:THREE.UnsignedByteType;var t=r.samplers||{},n=t[a.sampler]||{};return e.magFilter=x[n.magFilter]||THREE.LinearFilter,e.minFilter=x[n.minFilter]||THREE.LinearMipMapLinearFilter,e.wrapS=M[n.wrapS]||THREE.RepeatWrapping,e.wrapT=M[n.wrapT]||THREE.RepeatWrapping,e})},d.prototype.assignTexture=function(e,t,r){return this.getDependency("texture",r).then(function(r){e[t]=r})},d.prototype.loadMaterial=function(e){var t,r=this,n=(this.json,this.extensions),i=this.json.materials[e],o={},s=i.extensions||{},a=[];if(s[p.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var c=n[p.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=c.getMaterialType(i),a.push(c.extendParams(o,i,r))}else if(void 0!==i.pbrMetallicRoughness){t=THREE.MeshStandardMaterial;var l=i.pbrMetallicRoughness;if(o.color=new THREE.Color(1,1,1),o.opacity=1,Array.isArray(l.baseColorFactor)){var u=l.baseColorFactor;o.color.fromArray(u),o.opacity=u[3]}if(void 0!==l.baseColorTexture&&a.push(r.assignTexture(o,"map",l.baseColorTexture.index)),o.metalness=void 0!==l.metallicFactor?l.metallicFactor:1,o.roughness=void 0!==l.roughnessFactor?l.roughnessFactor:1,void 0!==l.metallicRoughnessTexture){var h=l.metallicRoughnessTexture.index;a.push(r.assignTexture(o,"metalnessMap",h)),a.push(r.assignTexture(o,"roughnessMap",h))}}else t=THREE.MeshPhongMaterial;!0===i.doubleSided&&(o.side=THREE.DoubleSide);var d=i.alphaMode||L.OPAQUE;return d===L.BLEND?o.transparent=!0:(o.transparent=!1,d===L.MASK&&(o.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&(a.push(r.assignTexture(o,"normalMap",i.normalTexture.index)),o.normalScale=new THREE.Vector2(1,1),void 0!==i.normalTexture.scale&&o.normalScale.set(i.normalTexture.scale,i.normalTexture.scale)),void 0!==i.occlusionTexture&&(a.push(r.assignTexture(o,"aoMap",i.occlusionTexture.index)),void 0!==i.occlusionTexture.strength&&(o.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&(t===THREE.MeshBasicMaterial?o.color=(new THREE.Color).fromArray(i.emissiveFactor):o.emissive=(new THREE.Color).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&(t===THREE.MeshBasicMaterial?a.push(r.assignTexture(o,"map",i.emissiveTexture.index)):a.push(r.assignTexture(o,"emissiveMap",i.emissiveTexture.index))),Promise.all(a).then(function(){var e;return e=t===THREE.ShaderMaterial?n[p.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):new t(o),void 0!==i.name&&(e.name=i.name),e.normalScale&&(e.normalScale.x=-e.normalScale.x),e.map&&(e.map.encoding=THREE.sRGBEncoding),e.emissiveMap&&(e.emissiveMap.encoding=THREE.sRGBEncoding),i.extras&&(e.userData=i.extras),e})},d.prototype.loadGeometries=function(e){var t=this.primitiveCache;return this.getDependencies("accessor").then(function(r){for(var n=[],i=0,o=e.length;i<o;i++){var s=e[i],a=u(t,s);if(a)n.push(a);else{var c=new THREE.BufferGeometry,l=s.attributes;for(var h in l){var d=l[h],p=r[d];switch(h){case"POSITION":c.addAttribute("position",p);break;case"NORMAL":c.addAttribute("normal",p);break;case"TEXCOORD_0":case"TEXCOORD0":case"TEXCOORD":c.addAttribute("uv",p);break;case"TEXCOORD_1":c.addAttribute("uv2",p);break;case"COLOR_0":case"COLOR0":case"COLOR":c.addAttribute("color",p);break;case"WEIGHTS_0":case"WEIGHT":c.addAttribute("skinWeight",p);break;case"JOINTS_0":case"JOINT":c.addAttribute("skinIndex",p)}}void 0!==s.indices&&c.setIndex(r[s.indices]),t.push({primitive:s,geometry:c}),n.push(c)}}return n})},d.prototype.loadMesh=function(e){var t=this,r=(this.json,this.extensions),n=this.json.meshes[e];return this.getMultiDependencies(["accessor","material"]).then(function(i){var o=new THREE.Group,s=n.primitives;return t.loadGeometries(s).then(function(l){for(var u=0,h=s.length;u<h;u++){var d=s[u],m=l[u],f=void 0===d.material?a():i.materials[d.material];f.aoMap&&void 0===m.attributes.uv2&&void 0!==m.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),m.addAttribute("uv2",new THREE.BufferAttribute(m.attributes.uv.array,2)));var v=void 0!==m.attributes.color,g=void 0===m.attributes.normal,x=!0===n.isSkinnedMesh,M=void 0!==d.targets;if(v||g||x||M)if(f.isGLTFSpecularGlossinessMaterial){var A=r[p.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];f=A.cloneMaterial(f)}else f=f.clone();v&&(f.vertexColors=THREE.VertexColors,f.needsUpdate=!0),g&&(f.flatShading=!0);var w;if(d.mode===y.TRIANGLES||d.mode===y.TRIANGLE_STRIP||d.mode===y.TRIANGLE_FAN||void 0===d.mode)x?(w=new THREE.SkinnedMesh(m,f),f.skinning=!0):w=new THREE.Mesh(m,f),d.mode===y.TRIANGLE_STRIP?w.drawMode=THREE.TriangleStripDrawMode:d.mode===y.TRIANGLE_FAN&&(w.drawMode=THREE.TriangleFanDrawMode);else if(d.mode===y.LINES||d.mode===y.LINE_STRIP||d.mode===y.LINE_LOOP){var E="LineBasicMaterial:"+f.uuid,b=t.cache.get(E);b||(b=new THREE.LineBasicMaterial,THREE.Material.prototype.copy.call(b,f),b.color.copy(f.color),b.lights=!1,t.cache.add(E,b)),f=b,w=d.mode===y.LINES?new THREE.LineSegments(m,f):d.mode===y.LINE_STRIP?new THREE.Line(m,f):new THREE.LineLoop(m,f)}else{if(d.mode!==y.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+d.mode);var E="PointsMaterial:"+f.uuid,T=t.cache.get(E);T||(T=new THREE.PointsMaterial,THREE.Material.prototype.copy.call(T,f),T.color.copy(f.color),T.map=f.map,T.lights=!1,t.cache.add(E,T)),f=T,w=new THREE.Points(m,f)}if(w.name=n.name||"mesh_"+e,M&&c(w,n,d,i.accessors),void 0!==n.extras&&(w.userData=n.extras),void 0!==d.extras&&(w.geometry.userData=d.extras),!0===f.isGLTFSpecularGlossinessMaterial&&(w.onBeforeRender=r[p.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms),!(s.length>1))return w;w.name+="_"+u,o.add(w)}return o})})},d.prototype.loadCamera=function(e){var t,r=this.json.cameras[e],n=r[r.type];if(!n)return void console.warn("THREE.GLTFLoader: Missing camera parameters.");if("perspective"===r.type){var i=n.aspectRatio||1,o=n.yfov*i;t=new THREE.PerspectiveCamera(THREE.Math.radToDeg(o),i,n.znear||1,n.zfar||2e6)}else"orthographic"===r.type&&(t=new THREE.OrthographicCamera(n.xmag/-2,n.xmag/2,n.ymag/2,n.ymag/-2,n.znear,n.zfar));return void 0!==r.name&&(t.name=r.name),r.extras&&(t.userData=r.extras),Promise.resolve(t)},d.prototype.loadSkin=function(e){var t=this.json.skins[e],r={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then(function(e){return r.inverseBindMatrices=e,r})},d.prototype.loadAnimation=function(e){var t=(this.json,this.json.animations[e]);return this.getMultiDependencies(["accessor","node"]).then(function(r){for(var n=[],i=0,s=t.channels.length;i<s;i++){var a=t.channels[i],c=t.samplers[a.sampler];if(c){var l=a.target,u=void 0!==l.node?l.node:l.id,h=void 0!==t.parameters?t.parameters[c.input]:c.input,d=void 0!==t.parameters?t.parameters[c.output]:c.output,p=r.accessors[h],m=r.accessors[d],f=r.nodes[u];if(f){f.updateMatrix(),f.matrixAutoUpdate=!0;var v;switch(b[l.path]){case b.weights:v=THREE.NumberKeyframeTrack;break;case b.rotation:v=THREE.QuaternionKeyframeTrack;break;case b.position:case b.scale:default:v=THREE.VectorKeyframeTrack}var y=f.name?f.name:f.uuid,g=void 0!==c.interpolation?T[c.interpolation]:THREE.InterpolateLinear,x=[];b[l.path]===b.weights?f.traverse(function(e){!0===e.isMesh&&!0===e.material.morphTargets&&x.push(e.name?e.name:e.uuid)}):x.push(y);for(var M=0,A=x.length;M<A;M++){var w=new v(x[M]+"."+b[l.path],THREE.AnimationUtils.arraySlice(p.array,0),THREE.AnimationUtils.arraySlice(m.array,0),g);"CUBICSPLINE"===c.interpolation&&(w.createInterpolant=function(e){return new o(this.times,this.values,this.getValueSize()/3,e)}),n.push(w)}}}}var u=void 0!==t.name?t.name:"animation_"+e;return new THREE.AnimationClip(u,void 0,n)})},d.prototype.loadNode=function(e){var t=(this.json,this.extensions),r=this.json.meshReferences,n=this.json.meshUses,i=this.json.nodes[e];return this.getMultiDependencies(["mesh","skin","camera"]).then(function(e){var o;if(!0===i.isBone)o=new THREE.Bone;else if(void 0!==i.mesh){var s=e.meshes[i.mesh];if(o=s.clone(),!0===s.isGroup)for(var a=0,c=s.children.length;a<c;a++){var l=s.children[a];l.material&&!0===l.material.isGLTFSpecularGlossinessMaterial&&(o.children[a].onBeforeRender=l.onBeforeRender)}else s.material&&!0===s.material.isGLTFSpecularGlossinessMaterial&&(o.onBeforeRender=s.onBeforeRender);r[i.mesh]>1&&(o.name+="_instance_"+n[i.mesh]++)}else if(void 0!==i.camera)o=e.cameras[i.camera];else if(i.extensions&&i.extensions[p.KHR_LIGHTS]&&void 0!==i.extensions[p.KHR_LIGHTS].light){var u=t[p.KHR_LIGHTS].lights;o=u[i.extensions[p.KHR_LIGHTS].light]}else o=new THREE.Object3D;if(void 0!==i.name&&(o.name=THREE.PropertyBinding.sanitizeNodeName(i.name)),i.extras&&(o.userData=i.extras),void 0!==i.matrix){var h=new THREE.Matrix4;h.fromArray(i.matrix),o.applyMatrix(h)}else void 0!==i.translation&&o.position.fromArray(i.translation),void 0!==i.rotation&&o.quaternion.fromArray(i.rotation),void 0!==i.scale&&o.scale.fromArray(i.scale);return o})},d.prototype.loadScene=function(){function e(t,r,n,i,o){var s=i[t],a=n.nodes[t];if(void 0!==a.skin)for(var c=!0===s.isGroup?s.children:[s],l=0,u=c.length;l<u;l++){for(var h=c[l],d=o[a.skin],p=[],m=[],f=0,v=d.joints.length;f<v;f++){var y=d.joints[f],g=i[y];if(g){p.push(g);var x=new THREE.Matrix4;void 0!==d.inverseBindMatrices&&x.fromArray(d.inverseBindMatrices.array,16*f),m.push(x)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',y)}h.bind(new THREE.Skeleton(p,m),h.matrixWorld)}if(r.add(s),a.children)for(var M=a.children,l=0,u=M.length;l<u;l++){var A=M[l];e(A,s,n,i,o)}}return function(t){var r=this.json,n=this.extensions,i=this.json.scenes[t];return this.getMultiDependencies(["node","skin"]).then(function(t){var o=new THREE.Scene;void 0!==i.name&&(o.name=i.name),i.extras&&(o.userData=i.extras);for(var s=i.nodes||[],a=0,c=s.length;a<c;a++)e(s[a],o,r,t.nodes,t.skins);if(i.extensions&&i.extensions[p.KHR_LIGHTS]&&void 0!==i.extensions[p.KHR_LIGHTS].light){var l=n[p.KHR_LIGHTS].lights;o.add(l[i.extensions[p.KHR_LIGHTS].light])}return o})}}(),e}()},{}],43:[function(e,t,r){THREE.MTLLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.MTLLoader.prototype={constructor:THREE.MTLLoader,load:function(e,t,r,n){var i=this,o=new THREE.FileLoader(this.manager);o.setPath(this.path),o.load(e,function(e){t(i.parse(e))},r,n)},setPath:function(e){this.path=e},setTexturePath:function(e){this.texturePath=e},setBaseUrl:function(e){console.warn("THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead."),this.setTexturePath(e)},setCrossOrigin:function(e){this.crossOrigin=e},setMaterialOptions:function(e){this.materialOptions=e},parse:function(e){for(var t=e.split("\n"),r={},n=/\s+/,i={},o=0;o<t.length;o++){var s=t[o];if(s=s.trim(),0!==s.length&&"#"!==s.charAt(0)){var a=s.indexOf(" "),c=a>=0?s.substring(0,a):s;c=c.toLowerCase();var l=a>=0?s.substring(a+1):"";if(l=l.trim(),"newmtl"===c)r={name:l},i[l]=r;else if(r)if("ka"===c||"kd"===c||"ks"===c){var u=l.split(n,3);r[c]=[parseFloat(u[0]),parseFloat(u[1]),parseFloat(u[2])]}else r[c]=l}}var h=new THREE.MTLLoader.MaterialCreator(this.texturePath||this.path,this.materialOptions);return h.setCrossOrigin(this.crossOrigin),h.setManager(this.manager),h.setMaterials(i),h}},THREE.MTLLoader.MaterialCreator=function(e,t){this.baseUrl=e||"",this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping},THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,crossOrigin:"Anonymous",setCrossOrigin:function(e){this.crossOrigin=e},setManager:function(e){this.manager=e},setMaterials:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(e){if(!this.options)return e;var t={};for(var r in e){var n=e[r],i={};t[r]=i;for(var o in n){var s=!0,a=n[o],c=o.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(a=[a[0]/255,a[1]/255,a[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===a[0]&&0===a[1]&&0===a[2]&&(s=!1)}s&&(i[c]=a)}}return t},preload:function(){for(var e in this.materialsInfo)this.create(e)},getIndex:function(e){return this.nameLookup[e]},getAsArray:function(){var e=0;for(var t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray},create:function(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]},createMaterial_:function(e){function t(e,t){return"string"!=typeof t||""===t?"":/^https?:\/\//i.test(t)?t:e+t}function r(e,r){if(!o[e]){var i=n.getTextureParams(r,o),s=n.loadTexture(t(n.baseUrl,i.url));s.repeat.copy(i.scale),s.offset.copy(i.offset),s.wrapS=n.wrap,s.wrapT=n.wrap,o[e]=s}}var n=this,i=this.materialsInfo[e],o={name:e,side:this.side};for(var s in i){var a,c=i[s];if(""!==c)switch(s.toLowerCase()){case"kd":o.color=(new THREE.Color).fromArray(c);break;case"ks":o.specular=(new THREE.Color).fromArray(c);break;case"map_kd":r("map",c);break;case"map_ks":r("specularMap",c);break;case"norm":r("normalMap",c);break;case"map_bump":case"bump":r("bumpMap",c);break;case"ns":o.shininess=parseFloat(c);break;case"d":a=parseFloat(c),a<1&&(o.opacity=a,o.transparent=!0);break;case"tr":a=parseFloat(c),this.options&&this.options.invertTrProperty&&(a=1-a),a>0&&(o.opacity=1-a,o.transparent=!0)}}return this.materials[e]=new THREE.MeshPhongMaterial(o),this.materials[e]},getTextureParams:function(e,t){var r,n={scale:new THREE.Vector2(1,1),offset:new THREE.Vector2(0,0)},i=e.split(/\s+/);return r=i.indexOf("-bm"),r>=0&&(t.bumpScale=parseFloat(i[r+1]),i.splice(r,2)),r=i.indexOf("-s"),r>=0&&(n.scale.set(parseFloat(i[r+1]),parseFloat(i[r+2])),i.splice(r,4)),r=i.indexOf("-o"),r>=0&&(n.offset.set(parseFloat(i[r+1]),parseFloat(i[r+2])),i.splice(r,4)),n.url=i.join(" ").trim(),n},loadTexture:function(e,t,r,n,i){var o,s=THREE.Loader.Handlers.get(e),a=void 0!==this.manager?this.manager:THREE.DefaultLoadingManager;return null===s&&(s=new THREE.TextureLoader(a)),s.setCrossOrigin&&s.setCrossOrigin(this.crossOrigin),o=s.load(e,r,n,i),void 0!==t&&(o.mapping=t),o}}},{}],44:[function(e,t,r){THREE.OBJLoader=function(){function e(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var r=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var r=this._finalize(!1);r&&(r.inherited||r.groupCount<=0)&&this.materials.splice(r.index,1);var n={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==r?r.smooth:this.smooth,groupStart:void 0!==r?r.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(n),n},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var r=this.materials.length-1;r>=0;r--)this.materials[r].groupCount<=0&&this.materials.splice(r,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},r&&r.name&&"function"==typeof r.clone){var n=r.clone(0);n.inherited=!0,this.object.materials.push(n)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseNormalIndex:function(e,t){var r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseUVIndex:function(e,t){var r=parseInt(e,10);return 2*(r>=0?r-1:r+t/2)},addVertex:function(e,t,r){var n=this.vertices,i=this.object.geometry.vertices;i.push(n[e+0],n[e+1],n[e+2]),i.push(n[t+0],n[t+1],n[t+2]),i.push(n[r+0],n[r+1],n[r+2])},addVertexPoint:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,r){var n=this.normals,i=this.object.geometry.normals;i.push(n[e+0],n[e+1],n[e+2]),i.push(n[t+0],n[t+1],n[t+2]),i.push(n[r+0],n[r+1],n[r+2])},addColor:function(e,t,r){var n=this.colors,i=this.object.geometry.colors;i.push(n[e+0],n[e+1],n[e+2]),i.push(n[t+0],n[t+1],n[t+2]),i.push(n[r+0],n[r+1],n[r+2])},addUV:function(e,t,r){var n=this.uvs,i=this.object.geometry.uvs;i.push(n[e+0],n[e+1]),i.push(n[t+0],n[t+1]),i.push(n[r+0],n[r+1])},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,r,n,i,o,s,a,c){var l=this.vertices.length,u=this.parseVertexIndex(e,l),h=this.parseVertexIndex(t,l),d=this.parseVertexIndex(r,l);if(this.addVertex(u,h,d),void 0!==n){var p=this.uvs.length;u=this.parseUVIndex(n,p),h=this.parseUVIndex(i,p),d=this.parseUVIndex(o,p),this.addUV(u,h,d)}if(void 0!==s){var m=this.normals.length;u=this.parseNormalIndex(s,m),h=s===a?u:this.parseNormalIndex(a,m),d=s===c?u:this.parseNormalIndex(c,m),this.addNormal(u,h,d)}this.colors.length>0&&this.addColor(u,h,d)},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,r=0,n=e.length;r<n;r++)this.addVertexPoint(this.parseVertexIndex(e[r],t))},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var r=this.vertices.length,n=this.uvs.length,i=0,o=e.length;i<o;i++)this.addVertexLine(this.parseVertexIndex(e[i],r));for(var s=0,o=t.length;s<o;s++)this.addUVLine(this.parseUVIndex(t[s],n))}};return e.startObject("",!1),e}function t(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.materials=null}var r=/^[og]\s*(.+)?/,n=/^mtllib /,i=/^usemtl /;return t.prototype={constructor:t,load:function(e,t,r,n){var i=this,o=new THREE.FileLoader(i.manager);o.setPath(this.path),o.load(e,function(e){t(i.parse(e))},r,n)},setPath:function(e){this.path=e},setMaterials:function(e){return this.materials=e,this},parse:function(t){console.time("OBJLoader");var o=new e;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));for(var s=t.split("\n"),a="",c="",l=[],u="function"==typeof"".trimLeft,h=0,d=s.length;h<d;h++)if(a=s[h],a=u?a.trimLeft():a.trim(),0!==a.length&&"#"!==(c=a.charAt(0)))if("v"===c){var p=a.split(/\s+/);switch(p[0]){case"v":o.vertices.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])),8===p.length&&o.colors.push(parseFloat(p[4]),parseFloat(p[5]),parseFloat(p[6]));break;case"vn":o.normals.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3]));break;case"vt":o.uvs.push(parseFloat(p[1]),parseFloat(p[2]))}}else if("f"===c){for(var m=a.substr(1).trim(),f=m.split(/\s+/),v=[],y=0,g=f.length;y<g;y++){var x=f[y];if(x.length>0){var M=x.split("/");v.push(M)}}for(var A=v[0],y=1,g=v.length-1;y<g;y++){var w=v[y],E=v[y+1];o.addFace(A[0],w[0],E[0],A[1],w[1],E[1],A[2],w[2],E[2])}}else if("l"===c){var b=a.substring(1).trim().split(" "),T=[],L=[];if(-1===a.indexOf("/"))T=b;else for(var N=0,D=b.length;N<D;N++){var C=b[N].split("/");""!==C[0]&&T.push(C[0]),""!==C[1]&&L.push(C[1])}o.addLineGeometry(T,L)}else if("p"===c){var m=a.substr(1).trim(),S=m.split(" ");o.addPointGeometry(S)}else if(null!==(l=r.exec(a))){var I=(" "+l[0].substr(1).trim()).substr(1);o.startObject(I)}else if(i.test(a))o.object.startMaterial(a.substring(7).trim(),o.materialLibraries);else if(n.test(a))o.materialLibraries.push(a.substring(7).trim());else{if("s"!==c){if("\0"===a)continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+a+'"')}if(l=a.split(" "),l.length>1){var _=l[1].trim().toLowerCase();o.object.smooth="0"!==_&&"off"!==_}else o.object.smooth=!0;var j=o.object.currentMaterial();j&&(j.smooth=o.object.smooth)}o.finalize();var O=new THREE.Group;O.materialLibraries=[].concat(o.materialLibraries);for(var h=0,d=o.objects.length;h<d;h++){var R=o.objects[h],z=R.geometry,k=R.materials,B="Line"===z.type,U="Points"===z.type,P=!1;if(0!==z.vertices.length){var F=new THREE.BufferGeometry;F.addAttribute("position",new THREE.Float32BufferAttribute(z.vertices,3)),z.normals.length>0?F.addAttribute("normal",new THREE.Float32BufferAttribute(z.normals,3)):F.computeVertexNormals(),z.colors.length>0&&(P=!0,F.addAttribute("color",new THREE.Float32BufferAttribute(z.colors,3))),z.uvs.length>0&&F.addAttribute("uv",new THREE.Float32BufferAttribute(z.uvs,2));for(var G=[],H=0,Q=k.length;H<Q;H++){var V=k[H],j=void 0;if(null!==this.materials)if(j=this.materials.create(V.name),!B||!j||j instanceof THREE.LineBasicMaterial){if(U&&j&&!(j instanceof THREE.PointsMaterial)){var Y=new THREE.PointsMaterial({size:10,sizeAttenuation:!1});W.copy(j),j=Y}}else{var W=new THREE.LineBasicMaterial;W.copy(j),W.lights=!1,j=W}j||(j=B?new THREE.LineBasicMaterial:U?new THREE.PointsMaterial({size:1,sizeAttenuation:!1}):new THREE.MeshPhongMaterial,j.name=V.name),j.flatShading=!V.smooth,j.vertexColors=P?THREE.VertexColors:THREE.NoColors,G.push(j)}var q;if(G.length>1){for(var H=0,Q=k.length;H<Q;H++){var V=k[H];F.addGroup(V.groupStart,V.groupCount,H)}q=B?new THREE.LineSegments(F,G):U?new THREE.Points(F,G):new THREE.Mesh(F,G)}else q=B?new THREE.LineSegments(F,G[0]):U?new THREE.Points(F,G[0]):new THREE.Mesh(F,G[0]);q.name=R.name,O.add(q)}}return console.timeEnd("OBJLoader"),O}},t}()},{}],45:[function(e,t,r){function n(e){return e.replace(/^\s*|\s*$/g,"")}r=t.exports=n,r.left=function(e){return e.replace(/^\s*/,"")},r.right=function(e){return e.replace(/\s*$/,"")}},{}],46:[function(e,n,i){(function(e){/**
 * @license
 * webvr-polyfill
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * webvr-polyfill-dpdb 
 * Copyright (c) 2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * wglu-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
/**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
!function(e,r){"object"==typeof i&&void 0!==n?n.exports=r():"function"==typeof t&&t.amd?t(r):e.WebVRPolyfill=r()}(this,function(){"use strict";function t(e){this.config=s(s({},l),e),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=window.VRFrameData,this.native.VRDisplay=window.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&i())&&(this.enable(),this.getVRDisplays().then(function(e){e&&e[0]&&e[0].fireVRDisplayConnect_&&e[0].fireVRDisplayConnect_()}))}var r="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},n=function(e){return Promise.race?Promise.race(e):new Promise(function(t,r){for(var n=0;n<e.length;n++)e[n].then(t,r)})},i=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},o=function(e,t){for(var r=0,n=e.length;r<n;r++)t[r]=e[r]},s=function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},a=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e,t){/**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * gl-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
/**
 * @license
 * webvr-polyfill-dpdb
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
!function(t,n){e.exports=function(){function e(e,t,r){if(!t)return void r(e);for(var n=[],i=null,o=0;o<t.length;++o){var s=t[o];switch(s){case e.TEXTURE_BINDING_2D:case e.TEXTURE_BINDING_CUBE_MAP:var a=t[++o];if(a<e.TEXTURE0||a>e.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),n.push(null,null);break}i||(i=e.getParameter(e.ACTIVE_TEXTURE)),e.activeTexture(a),n.push(e.getParameter(s),null);break;case e.ACTIVE_TEXTURE:i=e.getParameter(e.ACTIVE_TEXTURE),n.push(null);break;default:n.push(e.getParameter(s))}}r(e);for(var o=0;o<t.length;++o){var s=t[o],c=n[o];switch(s){case e.ACTIVE_TEXTURE:break;case e.ARRAY_BUFFER_BINDING:e.bindBuffer(e.ARRAY_BUFFER,c);break;case e.COLOR_CLEAR_VALUE:e.clearColor(c[0],c[1],c[2],c[3]);break;case e.COLOR_WRITEMASK:e.colorMask(c[0],c[1],c[2],c[3]);break;case e.CURRENT_PROGRAM:e.useProgram(c);break;case e.ELEMENT_ARRAY_BUFFER_BINDING:e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,c);break;case e.FRAMEBUFFER_BINDING:e.bindFramebuffer(e.FRAMEBUFFER,c);break;case e.RENDERBUFFER_BINDING:e.bindRenderbuffer(e.RENDERBUFFER,c);break;case e.TEXTURE_BINDING_2D:var a=t[++o];if(a<e.TEXTURE0||a>e.TEXTURE31)break;e.activeTexture(a),e.bindTexture(e.TEXTURE_2D,c);break;case e.TEXTURE_BINDING_CUBE_MAP:var a=t[++o];if(a<e.TEXTURE0||a>e.TEXTURE31)break;e.activeTexture(a),e.bindTexture(e.TEXTURE_CUBE_MAP,c);break;case e.VIEWPORT:e.viewport(c[0],c[1],c[2],c[3]);break;case e.BLEND:case e.CULL_FACE:case e.DEPTH_TEST:case e.SCISSOR_TEST:case e.STENCIL_TEST:c?e.enable(s):e.disable(s);break;default:console.log("No GL restore behavior for 0x"+s.toString(16))}i&&e.activeTexture(i)}}function t(e,t,r,n){this.gl=e,this.cardboardUI=t,this.bufferScale=r,this.dirtySubmitFrameBindings=n,this.ctxAttribs=e.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=e.drawingBufferWidth,this.bufferHeight=e.drawingBufferHeight,this.realBindFramebuffer=e.bindFramebuffer,this.realEnable=e.enable,this.realDisable=e.disable,this.realColorMask=e.colorMask,this.realClearColor=e.clearColor,this.realViewport=e.viewport,T()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=B(e,J,K,this.attribs),this.uniforms=U(e,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.indexCount=0,this.renderTarget=e.createTexture(),this.framebuffer=e.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=e.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=e.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=e.createRenderbuffer()),this.patch(),this.onResize()}function n(e){this.gl=e,this.attribs={position:0},this.program=B(e,$,ee,this.attribs),this.uniforms=U(e,this.program),this.vertexBuffer=e.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function i(e){this.coefficients=e}function o(e){this.width=e.width||j(),this.height=e.height||O(),this.widthMeters=e.widthMeters,this.heightMeters=e.heightMeters,this.bevelMeters=e.bevelMeters}function s(e){this.viewer=le.CardboardV2,this.updateDeviceParams(e),this.distortion=new i(this.viewer.distortionCoefficients)}function a(e){this.id=e.id,this.label=e.label,this.fov=e.fov,this.interLensDistance=e.interLensDistance,this.baselineLensDistance=e.baselineLensDistance,this.screenLensDistance=e.screenLensDistance,this.distortionCoefficients=e.distortionCoefficients,this.inverseCoefficients=e.inverseCoefficients}function c(e,t){if(this.dpdb=he,this.recalculateDeviceParams_(),e){this.onDeviceParamsUpdated=t;var r=new XMLHttpRequest,n=this;r.open("GET",e,!0),r.addEventListener("load",function(){n.loading=!1,r.status>=200&&r.status<=299?(n.dpdb=JSON.parse(r.response),n.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),r.send()}}function l(e){this.xdpi=e.xdpi,this.ydpi=e.ydpi,this.bevelMm=e.bevelMm}function u(e,t){this.set(e,t)}function h(e,t){this.kFilter=e,this.isDebug=t,this.currentAccelMeasurement=new u,this.currentGyroMeasurement=new u,this.previousGyroMeasurement=new u,T()?this.filterQ=new se(-1,0,0,1):this.filterQ=new se(1,0,0,1),this.previousFilterQ=new se,this.previousFilterQ.copy(this.filterQ),this.accelQ=new se,this.isOrientationInitialized=!1,this.estimatedGravity=new oe,this.measuredGravity=new oe,this.gyroIntegralQ=new se}function d(e,t){this.predictionTimeS=e,this.isDebug=t,this.previousQ=new se,this.previousTimestampS=null,this.deltaQ=new se,this.outQ=new se}function p(e,t,r,n){this.yawOnly=r,this.accelerometer=new oe,this.gyroscope=new oe,this.filter=new h(e,n),this.posePredictor=new d(t,n),this.isFirefoxAndroid=N(),this.isIOS=T();var i=D();this.isDeviceMotionInRadians=!this.isIOS&&i&&i<66,this.isWithoutDeviceMotion=C(),this.filterToWorldQ=new se,T()?this.filterToWorldQ.setFromAxisAngle(new oe(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new oe(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new se,this.worldToScreenQ=new se,this.originalPoseAdjustQ=new se,this.originalPoseAdjustQ.setFromAxisAngle(new oe(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),I()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new se,this.orientationOut_=new Float32Array(4),this.start()}function m(){this.loadIcon_();var e=document.createElement("div"),t=e.style;t.position="fixed",t.top=0,t.right=0,t.bottom=0,t.left=0,t.backgroundColor="gray",t.fontFamily="sans-serif",t.zIndex=1e6;var r=document.createElement("img");r.src=this.icon;var t=r.style;t.marginLeft="25%",t.marginTop="25%",t.width="50%",e.appendChild(r);var n=document.createElement("div"),t=n.style;t.textAlign="center",t.fontSize="16px",t.lineHeight="24px",t.margin="24px 25%",t.width="50%",n.innerHTML="Place your phone into your Cardboard viewer.",e.appendChild(n);var i=document.createElement("div"),t=i.style;t.backgroundColor="#CFD8DC",t.position="fixed",t.bottom=0,t.width="100%",t.height="48px",t.padding="14px 24px",t.boxSizing="border-box",t.color="#656A6B",e.appendChild(i);var o=document.createElement("div");o.style.float="left",o.innerHTML="No Cardboard viewer?";var s=document.createElement("a");s.href="https://www.google.com/get/cardboard/get-cardboard/",s.innerHTML="get one",s.target="_blank";var t=s.style;t.float="right",t.fontWeight=600,t.textTransform="uppercase",t.borderLeft="1px solid gray",t.paddingLeft="24px",t.textDecoration="none",t.color="#656A6B",i.appendChild(o),i.appendChild(s),this.overlay=e,this.text=n,this.hide()}function f(){try{this.selectedKey=localStorage.getItem(ge)}catch(e){console.error("Failed to load viewer profile: %s",e)}this.selectedKey||(this.selectedKey=ye),this.dialog=this.createDialog_(s.Viewers),this.root=null,this.onChangeCallbacks_=[]}function v(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null}function y(e){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:e.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:e.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:e.canPresent},maxLayers:{writable:!1,enumerable:!0,value:e.maxLayers},hasOrientation:{enumerable:!0,get:function(){return X("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),e.hasOrientation}}})}function g(e){e=e||{};var t=!("wakelock"in e)||e.wakelock;this.isPolyfilled=!0,this.displayId=Ae++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return X("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new y({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,t&&F()&&(this.wakelock_=new Me)}function x(e){var t=G({},Le);e=G(t,e||{}),g.call(this,{wakelock:e.MOBILE_WAKE_LOCK}),this.config=e,this.displayName="Cardboard VRDisplay",this.capabilities=new y({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new ve(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new c(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new s(this.dpdb_.getDeviceParams()),this.viewerSelector_=new f,this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new m),T()&&window.addEventListener("resize",this.onResize_.bind(this))}var M=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},A=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),w=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),E=function(e,t){return"data:"+e+";base64,"+t},b=function(e,t,r){return e+(t-e)*r},T=function(){var e=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return e}}(),L=function(){var e=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome");return function(){return e}}(),N=(function(){var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}(),function(){var e=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return e}}()),D=function(){var e=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),t=e?parseInt(e[1],10):null;return function(){return t}}(),C=function(){var e=!1;if(65===D()){var t=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(t){var r=t[1].split("."),n=w(r,4),i=(n[0],n[1],n[2]),o=n[3];e=3325===parseInt(i,10)&&parseInt(o,10)<148}}return function(){return e}}(),S=function(){var e=-1!==navigator.userAgent.indexOf("R7 Build");return function(){return e}}(),I=function(){var e=90==window.orientation||-90==window.orientation;return S()?!e:e},_=function(e){return!isNaN(e)&&(!(e<=.001)&&!(e>1))},j=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},O=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},R=function(e){if(L())return!1;if(e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0},z=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},k=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},B=function(e,t,r,n){var i=e.createShader(e.VERTEX_SHADER);e.shaderSource(i,t),e.compileShader(i);var o=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(o,r),e.compileShader(o);var s=e.createProgram();e.attachShader(s,i),e.attachShader(s,o);for(var a in n)e.bindAttribLocation(s,n[a],a);return e.linkProgram(s),e.deleteShader(i),e.deleteShader(o),s},U=function(e,t){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i="",o=0;o<n;o++){i=e.getActiveUniform(t,o).name.replace("[0]",""),r[i]=e.getUniformLocation(t,i)}return r},P=function(e,t,r,n,i,o,s){var a=1/(t-r),c=1/(n-i),l=1/(o-s);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+r)*a,e[13]=(i+n)*c,e[14]=(s+o)*l,e[15]=1,e},F=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},G=function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},H=function(e){if(T()){var t=e.style.width,r=e.style.height;e.style.width=parseInt(t)+1+"px",e.style.height=parseInt(r)+"px",setTimeout(function(){e.style.width=t,e.style.height=r},100)}window.canvas=e},Q=function(){function e(e,t,r,n){var i=Math.tan(t?t.upDegrees*o:s),a=Math.tan(t?t.downDegrees*o:s),c=Math.tan(t?t.leftDegrees*o:s),l=Math.tan(t?t.rightDegrees*o:s),u=2/(c+l),h=2/(i+a);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=h,e[6]=0,e[7]=0,e[8]=-(c-l)*u*.5,e[9]=(i-a)*h*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}function t(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3],a=n+n,c=i+i,l=o+o,u=n*a,h=n*c,d=n*l,p=i*c,m=i*l,f=o*l,v=s*a,y=s*c,g=s*l;return e[0]=1-(p+f),e[1]=h+g,e[2]=d-y,e[3]=0,e[4]=h-g,e[5]=1-(u+f),e[6]=m+v,e[7]=0,e[8]=d+y,e[9]=m-v,e[10]=1-(u+p),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function r(e,t,r){var n,i,o,s,a,c,l,u,h,d,p,m,f=r[0],v=r[1],y=r[2];return t===e?(e[12]=t[0]*f+t[4]*v+t[8]*y+t[12],e[13]=t[1]*f+t[5]*v+t[9]*y+t[13],e[14]=t[2]*f+t[6]*v+t[10]*y+t[14],e[15]=t[3]*f+t[7]*v+t[11]*y+t[15]):(n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],c=t[5],l=t[6],u=t[7],h=t[8],d=t[9],p=t[10],m=t[11],e[0]=n,e[1]=i,e[2]=o,e[3]=s,e[4]=a,e[5]=c,e[6]=l,e[7]=u,e[8]=h,e[9]=d,e[10]=p,e[11]=m,e[12]=n*f+a*v+h*y+t[12],e[13]=i*f+c*v+d*y+t[13],e[14]=o*f+l*v+p*y+t[14],e[15]=s*f+u*v+m*y+t[15]),e}function n(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],c=t[6],l=t[7],u=t[8],h=t[9],d=t[10],p=t[11],m=t[12],f=t[13],v=t[14],y=t[15],g=r*a-n*s,x=r*c-i*s,M=r*l-o*s,A=n*c-i*a,w=n*l-o*a,E=i*l-o*c,b=u*f-h*m,T=u*v-d*m,L=u*y-p*m,N=h*v-d*f,D=h*y-p*f,C=d*y-p*v,S=g*C-x*D+M*N+A*L-w*T+E*b;return S?(S=1/S,e[0]=(a*C-c*D+l*N)*S,e[1]=(i*D-n*C-o*N)*S,e[2]=(f*E-v*w+y*A)*S,e[3]=(d*w-h*E-p*A)*S,e[4]=(c*L-s*C-l*T)*S,e[5]=(r*C-i*L+o*T)*S,e[6]=(v*M-m*E-y*x)*S,e[7]=(u*E-d*M+p*x)*S,e[8]=(s*D-a*L+l*b)*S,e[9]=(n*L-r*D-o*b)*S,e[10]=(m*w-f*M+y*g)*S,e[11]=(h*M-u*w-p*g)*S,e[12]=(a*T-s*N-c*b)*S,e[13]=(r*N-n*T+i*b)*S,e[14]=(f*x-m*A-v*g)*S,e[15]=(u*A-h*x+d*g)*S,e):null}function i(i,o,s,l,u,h){e(i,l||null,h.depthNear,h.depthFar),t(o,s.orientation||a,s.position||c),u&&r(o,o,u),n(o,o)}var o=Math.PI/180,s=.25*Math.PI,a=new Float32Array([0,0,0,1]),c=new Float32Array([0,0,0]);return function(e,t,r){return!(!e||!t)&&(e.pose=t,e.timestamp=t.timestamp,i(e.leftProjectionMatrix,e.leftViewMatrix,t,r._getFieldOfView("left"),r._getEyeOffset("left"),r),i(e.rightProjectionMatrix,e.rightViewMatrix,t,r._getFieldOfView("right"),r._getEyeOffset("right"),r),!0)}}(),V=function(){var e=window.self!==window.top,t=Y(document.referrer),r=Y(window.location.href);return e&&t!==r},Y=function(e){var t,r=e.indexOf("://");t=-1!==r?r+3:0;var n=e.indexOf("/",t);return-1===n&&(n=e.length),e.substring(0,n)},W=function(e){return e.w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*Math.acos(e.w)},q=function(){var e={};return function(t,r){void 0===e[t]&&(console.warn("webvr-polyfill: "+r),e[t]=!0)}}(),X=function(e,t){q(e,e+" has been deprecated. This may not work on native WebVR displays. "+(t?"Please use "+t+" instead.":""))},Z=e,J=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),K=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");t.prototype.destroy=function(){var e=this.gl;this.unpatch(),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer),e.deleteTexture(this.renderTarget),e.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&e.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&e.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&e.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},t.prototype.onResize=function(){var e=this.gl,t=this,r=[e.RENDERBUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0];Z(e,r,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.framebuffer),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.texImage2D(e.TEXTURE_2D,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,t.bufferWidth,t.bufferHeight,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.renderTarget,0),t.ctxAttribs.depth&&t.ctxAttribs.stencil?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t.depthStencilBuffer)):t.ctxAttribs.depth?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t.depthBuffer)):t.ctxAttribs.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,t.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.STENCIL_INDEX8,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,t.stencilBuffer)),!e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),t.realClearColor.apply(e,t.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},t.prototype.patch=function(){if(!this.isPatched){var e=this,t=this.gl.canvas,r=this.gl;T()||(t.width=j()*this.bufferScale,t.height=O()*this.bufferScale,Object.defineProperty(t,"width",{configurable:!0,enumerable:!0,get:function(){return e.bufferWidth},set:function(r){e.bufferWidth=r,e.realCanvasWidth.set.call(t,r),e.onResize()}}),Object.defineProperty(t,"height",{configurable:!0,enumerable:!0,get:function(){return e.bufferHeight},set:function(r){e.bufferHeight=r,e.realCanvasHeight.set.call(t,r),e.onResize()}})),this.lastBoundFramebuffer=r.getParameter(r.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(t,n){e.lastBoundFramebuffer=n||e.framebuffer,e.realBindFramebuffer.call(r,t,e.lastBoundFramebuffer)},this.cullFace=r.getParameter(r.CULL_FACE),this.depthTest=r.getParameter(r.DEPTH_TEST),this.blend=r.getParameter(r.BLEND),this.scissorTest=r.getParameter(r.SCISSOR_TEST),this.stencilTest=r.getParameter(r.STENCIL_TEST),r.enable=function(t){switch(t){case r.CULL_FACE:e.cullFace=!0;break;case r.DEPTH_TEST:e.depthTest=!0;break;case r.BLEND:e.blend=!0;break;case r.SCISSOR_TEST:e.scissorTest=!0;break;case r.STENCIL_TEST:e.stencilTest=!0}e.realEnable.call(r,t)},r.disable=function(t){switch(t){case r.CULL_FACE:e.cullFace=!1;break;case r.DEPTH_TEST:e.depthTest=!1;break;case r.BLEND:e.blend=!1;break;case r.SCISSOR_TEST:e.scissorTest=!1;break;case r.STENCIL_TEST:e.stencilTest=!1}e.realDisable.call(r,t)},this.colorMask=r.getParameter(r.COLOR_WRITEMASK),r.colorMask=function(t,n,i,o){e.colorMask[0]=t,e.colorMask[1]=n,e.colorMask[2]=i,e.colorMask[3]=o,e.realColorMask.call(r,t,n,i,o)},this.clearColor=r.getParameter(r.COLOR_CLEAR_VALUE),r.clearColor=function(t,n,i,o){e.clearColor[0]=t,e.clearColor[1]=n,e.clearColor[2]=i,e.clearColor[3]=o,e.realClearColor.call(r,t,n,i,o)},this.viewport=r.getParameter(r.VIEWPORT),r.viewport=function(t,n,i,o){e.viewport[0]=t,e.viewport[1]=n,e.viewport[2]=i,e.viewport[3]=o,e.realViewport.call(r,t,n,i,o)},this.isPatched=!0,H(t)}},t.prototype.unpatch=function(){if(this.isPatched){var e=this.gl,t=this.gl.canvas;T()||(Object.defineProperty(t,"width",this.realCanvasWidth),Object.defineProperty(t,"height",this.realCanvasHeight)),t.width=this.bufferWidth,t.height=this.bufferHeight,e.bindFramebuffer=this.realBindFramebuffer,e.enable=this.realEnable,e.disable=this.realDisable,e.colorMask=this.realColorMask,e.clearColor=this.realClearColor,e.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&e.bindFramebuffer(e.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){H(t)},1)}},t.prototype.setTextureBounds=function(e,t){e||(e=[0,0,.5,1]),t||(t=[.5,0,.5,1]),this.viewportOffsetScale[0]=e[0],this.viewportOffsetScale[1]=e[1],this.viewportOffsetScale[2]=e[2],this.viewportOffsetScale[3]=e[3],this.viewportOffsetScale[4]=t[0],this.viewportOffsetScale[5]=t[1],this.viewportOffsetScale[6]=t[2],this.viewportOffsetScale[7]=t[3]},t.prototype.submitFrame=function(){var e=this.gl,t=this,r=[];if(this.dirtySubmitFrameBindings||r.push(e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0),Z(e,r,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.cullFace&&t.realDisable.call(e,e.CULL_FACE),t.depthTest&&t.realDisable.call(e,e.DEPTH_TEST),t.blend&&t.realDisable.call(e,e.BLEND),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realDisable.call(e,e.STENCIL_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),(t.ctxAttribs.alpha||T())&&(t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)),e.useProgram(t.program),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexBuffer),e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.enableVertexAttribArray(t.attribs.position),e.enableVertexAttribArray(t.attribs.texCoord),e.vertexAttribPointer(t.attribs.position,2,e.FLOAT,!1,20,0),e.vertexAttribPointer(t.attribs.texCoord,3,e.FLOAT,!1,20,8),e.activeTexture(e.TEXTURE0),e.uniform1i(t.uniforms.diffuse,0),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.uniform4fv(t.uniforms.viewportOffsetScale,t.viewportOffsetScale),e.drawElements(e.TRIANGLES,t.indexCount,e.UNSIGNED_SHORT,0),t.cardboardUI&&t.cardboardUI.renderNoState(),t.realBindFramebuffer.call(t.gl,e.FRAMEBUFFER,t.framebuffer),t.ctxAttribs.preserveDrawingBuffer||(t.realClearColor.call(e,0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),t.dirtySubmitFrameBindings||t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.cullFace&&t.realEnable.call(e,e.CULL_FACE),t.depthTest&&t.realEnable.call(e,e.DEPTH_TEST),t.blend&&t.realEnable.call(e,e.BLEND),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realEnable.call(e,e.STENCIL_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),!t.ctxAttribs.alpha&&t.ctxAttribs.preserveDrawingBuffer||t.realClearColor.apply(e,t.clearColor)}),T()){var n=e.canvas;n.width==t.bufferWidth&&n.height==t.bufferHeight||(t.bufferWidth=n.width,t.bufferHeight=n.height,t.onResize())}},t.prototype.updateDeviceInfo=function(e){var t=this.gl,r=this,n=[t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING];Z(t,n,function(t){var n=r.computeMeshVertices_(r.meshWidth,r.meshHeight,e);if(t.bindBuffer(t.ARRAY_BUFFER,r.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),!r.indexCount){var i=r.computeMeshIndices_(r.meshWidth,r.meshHeight);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i,t.STATIC_DRAW),r.indexCount=i.length}})},t.prototype.computeMeshVertices_=function(e,t,r){for(var n=new Float32Array(2*e*t*5),i=r.getLeftEyeVisibleTanAngles(),o=r.getLeftEyeNoLensTanAngles(),s=r.getLeftEyeVisibleScreenRect(o),a=0,c=0;c<2;c++){for(var l=0;l<t;l++)for(var u=0;u<e;u++,a++){var h=u/(e-1),d=l/(t-1),p=h,m=d,f=b(i[0],i[2],h),v=b(i[3],i[1],d),y=Math.sqrt(f*f+v*v),g=r.distortion.distortInverse(y),x=f*g/y,M=v*g/y;h=(x-o[0])/(o[2]-o[0]),d=(M-o[3])/(o[1]-o[3]),h=2*(s.x+h*s.width-.5),d=2*(s.y+d*s.height-.5),n[5*a+0]=h,n[5*a+1]=d,n[5*a+2]=p,n[5*a+3]=m,n[5*a+4]=c}var A=i[2]-i[0];i[0]=-(A+i[0]),i[2]=A-i[2],A=o[2]-o[0],o[0]=-(A+o[0]),o[2]=A-o[2],s.x=1-(s.x+s.width)}return n},t.prototype.computeMeshIndices_=function(e,t){for(var r=new Uint16Array(2*(e-1)*(t-1)*6),n=e/2,i=t/2,o=0,s=0,a=0;a<2;a++)for(var c=0;c<t;c++)for(var l=0;l<e;l++,o++)0!=l&&0!=c&&(l<=n==c<=i?(r[s++]=o,r[s++]=o-e-1,r[s++]=o-e,r[s++]=o-e-1,r[s++]=o,r[s++]=o-1):(r[s++]=o-1,r[s++]=o-e,r[s++]=o,r[s++]=o-e,r[s++]=o-1,r[s++]=o-e-1));return r},t.prototype.getOwnPropertyDescriptor_=function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return void 0!==r.get&&void 0!==r.set||(r.configurable=!0,r.enumerable=!0,r.get=function(){return this.getAttribute(t)},r.set=function(e){this.setAttribute(t,e)}),r};var $=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),ee=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),te=Math.PI/180,re=.3125;n.prototype.destroy=function(){var e=this.gl;this.listener&&e.canvas.removeEventListener("click",this.listener,!1),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer)},n.prototype.listen=function(e,t){var r=this.gl.canvas;this.listener=function(n){var i=r.clientWidth/2;n.clientX>i-42&&n.clientX<i+42&&n.clientY>r.clientHeight-42?e(n):n.clientX<42&&n.clientY<42&&t(n)},r.addEventListener("click",this.listener,!1)},n.prototype.onResize=function(){var e=this.gl,t=this,r=[e.ARRAY_BUFFER_BINDING];Z(e,r,function(e){function r(e,t){var r=(90-e)*te,n=Math.cos(r),s=Math.sin(r);i.push(re*n*h+o,re*s*h+h),i.push(t*n*h+o,t*s*h+h)}function n(t,r){i.push(d+t,e.drawingBufferHeight-d-r)}var i=[],o=e.drawingBufferWidth/2,s=Math.max(screen.width,screen.height)*window.devicePixelRatio,a=e.drawingBufferWidth/s,c=a*window.devicePixelRatio,l=4*c/2,u=42*c,h=28*c/2,d=14*c;i.push(o-l,u),i.push(o-l,e.drawingBufferHeight),i.push(o+l,u),i.push(o+l,e.drawingBufferHeight),t.gearOffset=i.length/2;for(var p=0;p<=6;p++){var m=60*p;r(m,1),r(m+12,1),r(m+20,.75),r(m+40,.75),r(m+48,1)}t.gearVertexCount=i.length/2-t.gearOffset,t.arrowOffset=i.length/2;var f=l/Math.sin(45*te);n(0,h),n(h,0),n(h+f,f),n(f,h+f),n(f,h-f),n(0,h),n(h,2*h),n(h+f,2*h-f),n(f,h-f),n(0,h),n(f,h-l),n(28*c,h-l),n(f,h+l),n(28*c,h+l),t.arrowVertexCount=i.length/2-t.arrowOffset,e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW)})},n.prototype.render=function(){var e=this.gl,t=this,r=[e.CULL_FACE,e.DEPTH_TEST,e.BLEND,e.SCISSOR_TEST,e.STENCIL_TEST,e.COLOR_WRITEMASK,e.VIEWPORT,e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING];Z(e,r,function(e){e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.BLEND),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.colorMask(!0,!0,!0,!0),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.renderNoState()})},n.prototype.renderNoState=function(){var e=this.gl;e.useProgram(this.program),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.enableVertexAttribArray(this.attribs.position),e.vertexAttribPointer(this.attribs.position,2,e.FLOAT,!1,8,0),e.uniform4f(this.uniforms.color,1,1,1,1),P(this.projMat,0,e.drawingBufferWidth,0,e.drawingBufferHeight,.1,1024),e.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.drawArrays(e.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),e.drawArrays(e.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},i.prototype.distortInverse=function(e){for(var t=0,r=1,n=e-this.distort(t);Math.abs(r-t)>1e-4;){var i=e-this.distort(r),o=r-i*((r-t)/(i-n));t=r,r=o,n=i}return r},i.prototype.distort=function(e){for(var t=e*e,r=0,n=0;n<this.coefficients.length;n++)r=t*(r+this.coefficients[n]);return(r+1)*e};var ne=Math.PI/180,ie=180/Math.PI,oe=function(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0};oe.prototype={constructor:oe,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();if(0!==e){var t=1/e;this.multiplyScalar(t)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(e){this.x*=e,this.y*=e,this.z*=e},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z,i=e.x,o=e.y,s=e.z,a=e.w,c=a*t+o*n-s*r,l=a*r+s*t-i*n,u=a*n+i*r-o*t,h=-i*t-o*r-s*n;return this.x=c*a+h*-i+l*-s-u*-o,this.y=l*a+h*-o+u*-i-c*-s,this.z=u*a+h*-s+c*-o-l*-i,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},crossVectors:function(e,t){var r=e.x,n=e.y,i=e.z,o=t.x,s=t.y,a=t.z;return this.x=n*a-i*s,this.y=i*o-r*a,this.z=r*s-n*o,this}};var se=function(e,t,r,n){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==n?n:1};se.prototype={constructor:se,set:function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEulerXYZ:function(e,t,r){var n=Math.cos(e/2),i=Math.cos(t/2),o=Math.cos(r/2),s=Math.sin(e/2),a=Math.sin(t/2),c=Math.sin(r/2);return this.x=s*i*o+n*a*c,this.y=n*a*o-s*i*c,this.z=n*i*c+s*a*o,this.w=n*i*o-s*a*c,this},setFromEulerYXZ:function(e,t,r){var n=Math.cos(e/2),i=Math.cos(t/2),o=Math.cos(r/2),s=Math.sin(e/2),a=Math.sin(t/2),c=Math.sin(r/2);return this.x=s*i*o+n*a*c,this.y=n*a*o-s*i*c,this.z=n*i*c-s*a*o,this.w=n*i*o+s*a*c,this},setFromAxisAngle:function(e,t){var r=t/2,n=Math.sin(r);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(r),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var r=e.x,n=e.y,i=e.z,o=e.w,s=t.x,a=t.y,c=t.z,l=t.w;return this.x=r*l+o*s+n*c-i*a,this.y=n*l+o*a+i*s-r*c,this.z=i*l+o*c+r*a-n*s,this.w=o*l-r*s-n*a-i*c,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this.x,n=this.y,i=this.z,o=this.w,s=o*e.w+r*e.x+n*e.y+i*e.z;if(s<0?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,s=-s):this.copy(e),s>=1)return this.w=o,this.x=r,this.y=n,this.z=i,this;var a=Math.acos(s),c=Math.sqrt(1-s*s);if(Math.abs(c)<.001)return this.w=.5*(o+this.w),this.x=.5*(r+this.x),this.y=.5*(n+this.y),this.z=.5*(i+this.z),this;var l=Math.sin((1-t)*a)/c,u=Math.sin(t*a)/c;return this.w=o*l+this.w*u,this.x=r*l+this.x*u,this.y=n*l+this.y*u,this.z=i*l+this.z*u,this},setFromUnitVectors:function(){var e,t;return function(r,n){return void 0===e&&(e=new oe),t=r.dot(n)+1,t<1e-6?(t=0,Math.abs(r.x)>Math.abs(r.z)?e.set(-r.y,r.x,0):e.set(0,-r.z,r.y)):e.crossVectors(r,n),this.x=e.x,this.y=e.y,this.z=e.z,this.w=t,this.normalize(),this}}()};var ae=new o({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),ce=new o({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),le={CardboardV1:new a({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new a({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};s.prototype.updateDeviceParams=function(e){this.device=this.determineDevice_(e)||this.device},s.prototype.getDevice=function(){return this.device},s.prototype.setViewer=function(e){this.viewer=e,this.distortion=new i(this.viewer.distortionCoefficients)},s.prototype.determineDevice_=function(e){if(!e)return T()?(console.warn("Using fallback iOS device measurements."),ce):(console.warn("Using fallback Android device measurements."),ae);var t=.0254/e.xdpi,r=.0254/e.ydpi;return new o({widthMeters:t*j(),heightMeters:r*O(),bevelMeters:.001*e.bevelMm})},s.prototype.getDistortedFieldOfViewLeftEye=function(){var e=this.viewer,t=this.device,r=this.distortion,n=e.screenLensDistance,i=(t.widthMeters-e.interLensDistance)/2,o=e.interLensDistance/2,s=e.baselineLensDistance-t.bevelMeters,a=t.heightMeters-s,c=ie*Math.atan(r.distort(i/n)),l=ie*Math.atan(r.distort(o/n)),u=ie*Math.atan(r.distort(s/n)),h=ie*Math.atan(r.distort(a/n));return{leftDegrees:Math.min(c,e.fov),rightDegrees:Math.min(l,e.fov),downDegrees:Math.min(u,e.fov),upDegrees:Math.min(h,e.fov)}},s.prototype.getLeftEyeVisibleTanAngles=function(){var e=this.viewer,t=this.device,r=this.distortion,n=Math.tan(-ne*e.fov),i=Math.tan(ne*e.fov),o=Math.tan(ne*e.fov),s=Math.tan(-ne*e.fov),a=t.widthMeters/4,c=t.heightMeters/2,l=e.baselineLensDistance-t.bevelMeters-c,u=e.interLensDistance/2-a,h=-l,d=e.screenLensDistance,p=r.distort((u-a)/d),m=r.distort((h+c)/d),f=r.distort((u+a)/d),v=r.distort((h-c)/d),y=new Float32Array(4);return y[0]=Math.max(n,p),y[1]=Math.min(i,m),y[2]=Math.min(o,f),y[3]=Math.max(s,v),y},s.prototype.getLeftEyeNoLensTanAngles=function(){var e=this.viewer,t=this.device,r=this.distortion,n=new Float32Array(4),i=r.distortInverse(Math.tan(-ne*e.fov)),o=r.distortInverse(Math.tan(ne*e.fov)),s=r.distortInverse(Math.tan(ne*e.fov)),a=r.distortInverse(Math.tan(-ne*e.fov)),c=t.widthMeters/4,l=t.heightMeters/2,u=e.baselineLensDistance-t.bevelMeters-l,h=e.interLensDistance/2-c,d=-u,p=e.screenLensDistance,m=(h-c)/p,f=(d+l)/p,v=(h+c)/p,y=(d-l)/p;return n[0]=Math.max(i,m),n[1]=Math.min(o,f),n[2]=Math.min(s,v),n[3]=Math.max(a,y),n},s.prototype.getLeftEyeVisibleScreenRect=function(e){var t=this.viewer,r=this.device,n=t.screenLensDistance,i=(r.widthMeters-t.interLensDistance)/2,o=t.baselineLensDistance-r.bevelMeters,s=(e[0]*n+i)/r.widthMeters,a=(e[1]*n+o)/r.heightMeters,c=(e[2]*n+i)/r.widthMeters,l=(e[3]*n+o)/r.heightMeters;return{x:s,y:l,width:c-s,height:a-l}},s.prototype.getFieldOfViewLeftEye=function(e){return e?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},s.prototype.getFieldOfViewRightEye=function(e){var t=this.getFieldOfViewLeftEye(e);return{leftDegrees:t.rightDegrees,rightDegrees:t.leftDegrees,upDegrees:t.upDegrees,downDegrees:t.downDegrees}},s.prototype.getUndistortedFieldOfViewLeftEye=function(){var e=this.getUndistortedParams_();return{leftDegrees:ie*Math.atan(e.outerDist),rightDegrees:ie*Math.atan(e.innerDist),downDegrees:ie*Math.atan(e.bottomDist),upDegrees:ie*Math.atan(e.topDist)}},s.prototype.getUndistortedViewportLeftEye=function(){var e=this.getUndistortedParams_(),t=this.viewer,r=this.device,n=t.screenLensDistance,i=r.widthMeters/n,o=r.heightMeters/n,s=r.width/i,a=r.height/o,c=Math.round((e.eyePosX-e.outerDist)*s),l=Math.round((e.eyePosY-e.bottomDist)*a);return{x:c,y:l,width:Math.round((e.eyePosX+e.innerDist)*s)-c,height:Math.round((e.eyePosY+e.topDist)*a)-l}},s.prototype.getUndistortedParams_=function(){var e=this.viewer,t=this.device,r=this.distortion,n=e.screenLensDistance,i=e.interLensDistance/2/n,o=t.widthMeters/n,s=t.heightMeters/n,a=o/2-i,c=(e.baselineLensDistance-t.bevelMeters)/n,l=e.fov,u=r.distortInverse(Math.tan(ne*l)),h=Math.min(a,u),d=Math.min(i,u),p=Math.min(c,u);return{outerDist:h,innerDist:d,topDist:Math.min(s-c,u),bottomDist:p,eyePosX:a,eyePosY:c}},s.Viewers=le;var ue=[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3}],he={format:1,last_updated:"2018-02-20T22:55:10Z",devices:ue};c.prototype.getDeviceParams=function(){return this.deviceParams},c.prototype.recalculateDeviceParams_=function(){var e=this.calcDeviceParams_();e?(this.deviceParams=e,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},c.prototype.calcDeviceParams_=function(){var e=this.dpdb;if(!e)return console.error("DPDB not available."),null;if(1!=e.format)return console.error("DPDB has unexpected format version."),null;if(!e.devices||!e.devices.length)return console.error("DPDB does not have a devices section."),null;var t=navigator.userAgent||navigator.vendor||window.opera,r=j(),n=O();if(!e.devices)return console.error("DPDB has no devices section."),null;for(var i=0;i<e.devices.length;i++){var o=e.devices[i];if(o.rules)if("ios"==o.type||"android"==o.type){if(T()==("ios"==o.type)){for(var s=!1,a=0;a<o.rules.length;a++){var c=o.rules[a];if(this.matchRule_(c,t,r,n)){s=!0;break}}if(s){var u=o.dpi[0]||o.dpi,h=o.dpi[1]||o.dpi;return new l({xdpi:u,ydpi:h,bevelMm:o.bw})}}}else console.warn("Device["+i+"] has invalid type.");else console.warn("Device["+i+"] has no rules section.")}return console.warn("No DPDB device match."),null},c.prototype.matchRule_=function(e,t,r,n){if(!e.ua&&!e.res)return!1;if(e.ua&&t.indexOf(e.ua)<0)return!1;if(e.res){if(!e.res[0]||!e.res[1])return!1;var i=e.res[0],o=e.res[1];if(Math.min(r,n)!=Math.min(i,o)||Math.max(r,n)!=Math.max(i,o))return!1}return!0},u.prototype.set=function(e,t){this.sample=e,this.timestampS=t},u.prototype.copy=function(e){this.set(e.sample,e.timestampS)},h.prototype.addAccelMeasurement=function(e,t){this.currentAccelMeasurement.set(e,t)},h.prototype.addGyroMeasurement=function(e,t){this.currentGyroMeasurement.set(e,t);var r=t-this.previousGyroMeasurement.timestampS;_(r)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},h.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var r=new se;r.copy(this.filterQ),r.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(r),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var n=new se;n.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),n.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",ie*W(n),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var i=new se;i.copy(this.filterQ),i.multiply(n),this.filterQ.slerp(i,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},h.prototype.getOrientation=function(){return this.filterQ},h.prototype.accelToQuaternion_=function(e){var t=new oe;t.copy(e),t.normalize();var r=new se;return r.setFromUnitVectors(new oe(0,0,-1),t),r.inverse(),r},h.prototype.gyroToQuaternionDelta_=function(e,t){var r=new se,n=new oe;return n.copy(e),n.normalize(),r.setFromAxisAngle(n,e.length()*t),r},d.prototype.getPrediction=function(e,t,r){if(!this.previousTimestampS)return this.previousQ.copy(e),this.previousTimestampS=r,e;var n=new oe;n.copy(t),n.normalize();var i=t.length();if(i<20*ne)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(ie*i).toFixed(1)),this.outQ.copy(e),this.previousQ.copy(e),this.outQ;var o=i*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(n,o),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(e),this.previousTimestampS=r,this.outQ},p.prototype.getPosition=function(){return null},p.prototype.getOrientation=function(){var e=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var e=(new se).setFromAxisAngle(new oe(0,0,-1),0),t=new se;return-90===window.orientation?t.setFromAxisAngle(new oe(0,1,0),Math.PI/-2):t.setFromAxisAngle(new oe(0,1,0),Math.PI/2),e.multiply(t)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var e=new se;return e.setFromAxisAngle(new oe(1,0,0),-Math.PI/2),e}(),e=this._deviceOrientationQ;var t=new se;return t.copy(e),t.multiply(this.deviceOrientationFilterToWorldQ),t.multiply(this.resetQ),t.multiply(this.worldToScreenQ),t.multiplyQuaternions(this.deviceOrientationFixQ,t),this.yawOnly&&(t.x=0,t.z=0,t.normalize()),this.orientationOut_[0]=t.x,this.orientationOut_[1]=t.y,this.orientationOut_[2]=t.z,this.orientationOut_[3]=t.w,this.orientationOut_}var r=this.filter.getOrientation();e=this.posePredictor.getPrediction(r,this.gyroscope,this.previousTimestampS);var t=new se;return t.copy(this.filterToWorldQ),t.multiply(this.resetQ),t.multiply(e),t.multiply(this.worldToScreenQ),this.yawOnly&&(t.x=0,t.z=0,t.normalize()),this.orientationOut_[0]=t.x,this.orientationOut_[1]=t.y,this.orientationOut_[2]=t.z,this.orientationOut_[3]=t.w,this.orientationOut_},p.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),I()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},p.prototype.onDeviceOrientation_=function(e){this._deviceOrientationQ=this._deviceOrientationQ||new se;var t=e.alpha,r=e.beta,n=e.gamma;t=(t||0)*Math.PI/180,r=(r||0)*Math.PI/180,n=(n||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(r,t,-n)},p.prototype.onDeviceMotion_=function(e){this.updateDeviceMotion_(e)},p.prototype.updateDeviceMotion_=function(e){var t=e.accelerationIncludingGravity,r=e.rotationRate,n=e.timeStamp/1e3,i=n-this.previousTimestampS;return i<0?(q("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=n)):i<=.001||i>1?(q("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=n)):(this.accelerometer.set(-t.x,-t.y,-t.z),S()?this.gyroscope.set(-r.beta,r.alpha,r.gamma):this.gyroscope.set(r.alpha,r.beta,r.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,n),this.filter.addGyroMeasurement(this.gyroscope,n),void(this.previousTimestampS=n))},p.prototype.onOrientationChange_=function(e){this.setScreenTransform_()},p.prototype.onMessage_=function(e){var t=e.data;if(t&&t.type){"devicemotion"===t.type.toLowerCase()&&this.updateDeviceMotion_(t.deviceMotionEvent)}},p.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new oe(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new oe(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},p.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),T()&&V()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},p.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var de=new oe(1,0,0),pe=new oe(0,0,1),me={};screen.orientation?me=screen.orientation:screen.msOrientation?me=screen.msOrientation:Object.defineProperty(me,"angle",{get:function(){return window.orientation||0}});var fe=new se;fe.setFromAxisAngle(de,-Math.PI/2),fe.multiply((new se).setFromAxisAngle(pe,Math.PI/2));var ve=function(){function e(t){M(this,e),this.config=t,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new se,this._worldToScreenQ=new se,this._outQ=new se,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onOrientationChange(),this.init()}return A(e,[{key:"init",value:function(){var e=null;try{e=new RelativeOrientationSensor({frequency:60}),e.addEventListener("error",this._onSensorError)}catch(e){this.errors.push(e),"SecurityError"===e.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===e.name?this.useDeviceMotion():console.error(e)}e&&(this.api="sensor",this.sensor=e,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start()),window.addEventListener("orientationchange",this._onOrientationChange)}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new p(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var e=this.sensor.quaternion;this._sensorQ.set(e[0],e[1],e[2],e[3]);var t=this._outQ;return t.copy(fe),t.multiply(this._sensorQ),t.multiply(this._worldToScreenQ),this.config.YAW_ONLY&&(t.x=t.z=0,t.normalize()),this._out[0]=t.x,this._out[1]=t.y,this._out[2]=t.z,this._out[3]=t.w,this._out}},{key:"_onSensorError",value:function(e){this.errors.push(e.error),"NotAllowedError"===e.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===e.error.name?console.error("Sensor could not be read"):console.error(e.error)}},{key:"_onSensorRead",value:function(){}},{key:"_onOrientationChange",value:function(){var e=-me.angle*Math.PI/180;this._worldToScreenQ.setFromAxisAngle(pe,e)}}]),e}();m.prototype.show=function(e){e||this.overlay.parentElement?e&&(this.overlay.parentElement&&this.overlay.parentElement!=e&&this.overlay.parentElement.removeChild(this.overlay),e.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var t=this.overlay.querySelector("img"),r=t.style;I()?(r.width="20%",r.marginLeft="40%",r.marginTop="3%"):(r.width="50%",r.marginLeft="25%",r.marginTop="25%")},m.prototype.hide=function(){this.overlay.style.display="none"},m.prototype.showTemporarily=function(e,t){this.show(t),this.timer=setTimeout(this.hide.bind(this),e)},m.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},m.prototype.update=function(){this.disableShowTemporarily(),!I()&&F()?this.show():this.hide()},m.prototype.loadIcon_=function(){this.icon=E("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+")};var ye="CardboardV1",ge="WEBVR_CARDBOARD_VIEWER";f.prototype.show=function(e){this.root=e,e.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},f.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},f.prototype.getCurrentViewer=function(){return s.Viewers[this.selectedKey]},f.prototype.getSelectedKey_=function(){var e=this.dialog.querySelector("input[name=field]:checked");return e?e.id:null},f.prototype.onChange=function(e){this.onChangeCallbacks_.push(e)},f.prototype.fireOnChange_=function(e){for(var t=0;t<this.onChangeCallbacks_.length;t++)this.onChangeCallbacks_[t](e)},f.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),!this.selectedKey||!s.Viewers[this.selectedKey])return void console.error("ViewerSelector.onSave_: this should never happen!");this.fireOnChange_(s.Viewers[this.selectedKey]);try{localStorage.setItem(ge,this.selectedKey)}catch(e){console.error("Failed to save viewer profile: %s",e)}this.hide()},f.prototype.createDialog_=function(e){var t=document.createElement("div");t.classList.add("webvr-polyfill-viewer-selector"),t.style.display="none";var r=document.createElement("div"),n=r.style;n.position="fixed",n.left=0,n.top=0,n.width="100%",n.height="100%",n.background="rgba(0, 0, 0, 0.3)",r.addEventListener("click",this.hide.bind(this));var i=document.createElement("div"),n=i.style;n.boxSizing="border-box",n.position="fixed",n.top="24px",n.left="50%",n.marginLeft="-140px",n.width="280px",n.padding="24px",n.overflow="hidden",n.background="#fafafa",n.fontFamily="'Roboto', sans-serif",n.boxShadow="0px 5px 20px #666",i.appendChild(this.createH1_("Select your viewer"));for(var o in e)i.appendChild(this.createChoice_(o,e[o].label));return i.appendChild(this.createButton_("Save",this.onSave_.bind(this))),t.appendChild(r),t.appendChild(i),t},f.prototype.createH1_=function(e){var t=document.createElement("h1"),r=t.style;return r.color="black",r.fontSize="20px",r.fontWeight="bold",r.marginTop=0,r.marginBottom="24px",t.innerHTML=e,t},f.prototype.createChoice_=function(e,t){var r=document.createElement("div");r.style.marginTop="8px",r.style.color="black";var n=document.createElement("input");n.style.fontSize="30px",n.setAttribute("id",e),n.setAttribute("type","radio"),n.setAttribute("value",e),n.setAttribute("name","field");var i=document.createElement("label");return i.style.marginLeft="4px",i.setAttribute("for",e),i.innerHTML=t,r.appendChild(n),r.appendChild(i),r},f.prototype.createButton_=function(e,t){var r=document.createElement("button");r.innerHTML=e;var n=r.style;return n.float="right",n.textTransform="uppercase",n.color="#1094f7",n.fontSize="14px",n.letterSpacing=0,n.border=0,n.background="none",n.marginTop="16px",r.addEventListener("click",t),r};var xe=("undefined"!=typeof window?window:void 0!==r||"undefined"!=typeof self&&self,function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e,t){!function(t,r){e.exports=r()}(0,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(1),s="undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,a=function(){function e(){n(this,e),s?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",o),this.noSleepVideo.addEventListener("timeupdate",function(e){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return i(e,[{key:"enable",value:function(){s?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){s?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),e}();e.exports=a},function(e,t,r){e.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])})})),Me=function(e){return e&&e.__esModule?e.default:e}(xe),Ae=1e3,we=[0,0,.5,1],Ee=[.5,0,.5,1],be=window.requestAnimationFrame,Te=window.cancelAnimationFrame;g.prototype.getFrameData=function(e){return Q(e,this._getPose(),this)},g.prototype.getPose=function(){return X("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},g.prototype.resetPose=function(){return X("VRDisplay.prototype.resetPose"),this._resetPose()},g.prototype.getImmediatePose=function(){return X("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},g.prototype.requestAnimationFrame=function(e){return be(e)},g.prototype.cancelAnimationFrame=function(e){return Te(e)},g.prototype.wrapForFullscreen=function(e){if(T())return e;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var t=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",t.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==e)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=e,this.originalParent_=e.parentElement,this.originalParent_||document.body.appendChild(e),!this.fullscreenWrapper_.parentElement){var r=this.fullscreenElement_.parentElement;r.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),r.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var n=this;return function(){if(n.fullscreenElement_){var e=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];n.fullscreenElement_.setAttribute("style",e.join("; ")+";")}}(),this.fullscreenWrapper_},g.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var e=this.fullscreenElement_;this.fullscreenElementCachedStyle_?e.setAttribute("style",this.fullscreenElementCachedStyle_):e.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var t=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(e),this.originalParent_===t?t.insertBefore(e,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(e),t.removeChild(this.fullscreenWrapper_),e}},g.prototype.requestPresent=function(e){var t=this.isPresenting,r=this;return e instanceof Array||(X("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),e=[e]),new Promise(function(n,i){if(!r.capabilities.canPresent)return void i(new Error("VRDisplay is not capable of presenting."));if(0==e.length||e.length>r.capabilities.maxLayers)return void i(new Error("Invalid number of layers."));var o=e[0];if(!o.source)return void n();var s=o.leftBounds||we,a=o.rightBounds||Ee;if(t){var c=r.layer_;c.source!==o.source&&(c.source=o.source);for(var l=0;l<4;l++)c.leftBounds[l]=s[l],c.rightBounds[l]=a[l];return r.wrapForFullscreen(r.layer_.source),r.updatePresent_(),void n()}if(r.layer_={predistorted:o.predistorted,source:o.source,leftBounds:s.slice(0),rightBounds:a.slice(0)},r.waitingForPresent_=!1,r.layer_&&r.layer_.source){var u=r.wrapForFullscreen(r.layer_.source),h=function(){var e=k();r.isPresenting=u===e,r.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(e){console.error("screen.orientation.lock() failed due to",e.message)}),r.waitingForPresent_=!1,r.beginPresent_(),n()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),r.removeFullscreenWrapper(),r.disableWakeLock(),r.endPresent_(),r.removeFullscreenListeners_()),r.fireVRDisplayPresentChange_()},d=function(){r.waitingForPresent_&&(r.removeFullscreenWrapper(),r.removeFullscreenListeners_(),r.disableWakeLock(),r.waitingForPresent_=!1,r.isPresenting=!1,i(new Error("Unable to present.")))};r.addFullscreenListeners_(u,h,d),R(u)?(r.enableWakeLock(),r.waitingForPresent_=!0):(T()||L())&&(r.enableWakeLock(),r.isPresenting=!0,r.beginPresent_(),r.fireVRDisplayPresentChange_(),n())}r.waitingForPresent_||T()||(z(),i(new Error("Unable to present.")))})},g.prototype.exitPresent=function(){var e=this.isPresenting,t=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(r,n){e?(!z()&&T()&&(t.endPresent_(),t.fireVRDisplayPresentChange_()),L()&&(t.removeFullscreenWrapper(),t.removeFullscreenListeners_(),t.endPresent_(),t.fireVRDisplayPresentChange_()),r()):n(new Error("Was not presenting to VRDisplay."))})},g.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},g.prototype.fireVRDisplayPresentChange_=function(){var e=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(e)},g.prototype.fireVRDisplayConnect_=function(){var e=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(e)},g.prototype.addFullscreenListeners_=function(e,t,r){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=e,this.fullscreenChangeHandler_=t,this.fullscreenErrorHandler_=r,t&&(document.fullscreenEnabled?e.addEventListener("fullscreenchange",t,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenchange",t,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",t,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenchange",t,!1)),r&&(document.fullscreenEnabled?e.addEventListener("fullscreenerror",r,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenerror",r,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",r,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenerror",r,!1))},g.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var e=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var t=this.fullscreenChangeHandler_;e.removeEventListener("fullscreenchange",t,!1),e.removeEventListener("webkitfullscreenchange",t,!1),document.removeEventListener("mozfullscreenchange",t,!1),e.removeEventListener("msfullscreenchange",t,!1)}if(this.fullscreenErrorHandler_){var r=this.fullscreenErrorHandler_;e.removeEventListener("fullscreenerror",r,!1),e.removeEventListener("webkitfullscreenerror",r,!1),document.removeEventListener("mozfullscreenerror",r,!1),e.removeEventListener("msfullscreenerror",r,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},g.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},g.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},g.prototype.beginPresent_=function(){},g.prototype.endPresent_=function(){},g.prototype.submitFrame=function(e){},g.prototype.getEyeParameters=function(e){return null};var Le={MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},Ne={LEFT:"left",RIGHT:"right"};return x.prototype=Object.create(g.prototype),x.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},x.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},x.prototype._getFieldOfView=function(e){var t;if(e==Ne.LEFT)t=this.deviceInfo_.getFieldOfViewLeftEye();else{if(e!=Ne.RIGHT)return console.error("Invalid eye provided: %s",e),null;t=this.deviceInfo_.getFieldOfViewRightEye()}return t},x.prototype._getEyeOffset=function(e){var t;if(e==Ne.LEFT)t=[.5*-this.deviceInfo_.viewer.interLensDistance,0,0];else{if(e!=Ne.RIGHT)return console.error("Invalid eye provided: %s",e),null;t=[.5*this.deviceInfo_.viewer.interLensDistance,0,0]}return t},x.prototype.getEyeParameters=function(e){var t=this._getEyeOffset(e),r=this._getFieldOfView(e),n={offset:t,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(n,"fieldOfView",{enumerable:!0,get:function(){return X("VRFieldOfView","VRFrameData's projection matrices"),r}}),n},x.prototype.onDeviceParamsUpdated_=function(e){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},x.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},x.prototype.beginPresent_=function(){var e=this.layer_.source.getContext("webgl");e||(e=this.layer_.source.getContext("experimental-webgl")),e||(e=this.layer_.source.getContext("webgl2")),e&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(e.canvas.width=j()*this.bufferScale_,e.canvas.height=O()*this.bufferScale_,this.cardboardUI_=new n(e)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new n(e)),this.distorter_=new t(e,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen(function(e){this.viewerSelector_.show(this.layer_.source.parentElement),e.stopPropagation(),e.preventDefault()}.bind(this),function(e){this.exitPresent(),e.stopPropagation(),e.preventDefault()}.bind(this)),this.rotateInstructions_&&(I()&&F()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},x.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},x.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},x.prototype.submitFrame=function(e){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var t=this.layer_.source.getContext("webgl").canvas;t.width==this.lastWidth&&t.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=t.width,this.lastHeight=t.height,this.cardboardUI_.render()}},x.prototype.onOrientationChange_=function(e){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},x.prototype.onResize_=function(e){if(this.layer_){var t=this.layer_.source.getContext("webgl"),r=["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"];t.canvas.setAttribute("style",r.join("; ")+";"),H(t.canvas)}},x.prototype.onViewerChanged_=function(e){this.deviceInfo_.setViewer(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},x.prototype.fireVRDisplayDeviceParamsChange_=function(){var e=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(e)},x.VRFrameData=v,x.VRDisplay=g,x}()}()}),c=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(a),l={PROVIDE_MOBILE_VRDISPLAY:!0,GET_VR_DISPLAYS_TIMEOUT:1e3,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};t.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(i()){var e=new c({MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,TOUCH_PANNER_DISABLED:this.config.TOUCH_PANNER_DISABLED,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(e)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},t.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var e=this.native.VRFrameData,t=new this.native.VRFrameData,r=this.native.VRDisplay.prototype.getFrameData;window.VRDisplay.prototype.getFrameData=function(n){if(n instanceof e)return void r.call(this,n);r.call(this,t),n.pose=t.pose,o(t.leftProjectionMatrix,n.leftProjectionMatrix),o(t.rightProjectionMatrix,n.rightProjectionMatrix),o(t.leftViewMatrix,n.leftViewMatrix),o(t.rightViewMatrix,n.rightViewMatrix)}}navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=c.VRDisplay,window.VRFrameData=c.VRFrameData},t.prototype.getVRDisplays=function(){var e=this,t=this.config;if(!this.hasNative)return Promise.resolve(this.getPolyfillDisplays());var r,i=this.native.getVRDisplays.call(navigator),o=new Promise(function(e){r=setTimeout(function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),e([])},t.GET_VR_DISPLAYS_TIMEOUT)});return n([i,o]).then(function(t){return clearTimeout(r),t.length>0?t:e.getPolyfillDisplays()})},t.version="0.10.5",t.VRFrameData=c.VRFrameData,t.VRDisplay=c.VRDisplay;var u=Object.freeze({default:t}),h=u&&t||u;return void 0!==r&&r.window&&(r.document||(r.document=r.window.document),r.navigator||(r.navigator=r.window.navigator)),h})}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],47:[function(e,t,r){function n(e,t,r,n){var i=e.indexOf(t,r);return-1===i||i>n?n:i}function i(e){return u.test(e)}function o(e,t,r,n,i){for(var o=[],s=r,a=r;a<n&&a<t.length;a++){var l=t.charAt(a),u=c.test(l);if(u||a===n-1){var h=u?a:a+1,d=e(t,s,h,i);o.push(d),s=a+1}}return o}function s(e,t,r,o,s,a){var c=[],u=s;for("nowrap"===a&&(u=Number.MAX_VALUE);r<o&&r<t.length;){for(var h=n(t,l,r,o);r<h&&i(t.charAt(r));)r++;var d=e(t,r,h,u),p=r+(d.end-d.start),m=p+l.length;if(p<h){for(;p>r&&!i(t.charAt(p));)p--;if(p===r)m>r+l.length&&m--,p=m;else for(m=p;p>r&&i(t.charAt(p-l.length));)p--}if(p>=r){var f=e(t,r,p,u);c.push(f)}r=m}return c}function a(e,t,r,n){return{start:t,end:t+Math.min(n,r-t)}}var c=/\n/,l="\n",u=/\s/;t.exports=function(e,r){return t.exports.lines(e,r).map(function(t){return e.substring(t.start,t.end)}).join("\n")},t.exports.lines=function(e,t){if(t=t||{},0===t.width&&"nowrap"!==t.mode)return[];e=e||"";var r="number"==typeof t.width?t.width:Number.MAX_VALUE,n=Math.max(0,t.start||0),i="number"==typeof t.end?t.end:e.length,c=t.mode,l=t.measure||a;return"pre"===c?o(l,e,n,i,r):s(l,e,n,i,r,c)}},{}],48:[function(e,t,r){"use strict";function n(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function i(e,t,r){var n=e;return u(t)?(r=t,"string"==typeof e&&(n={uri:e})):n=d(t,{uri:e}),n.callback=r,n}function o(e,t,r){return t=i(e,t,r),s(t)}function s(e){function t(){4===u.readyState&&setTimeout(s,0)}function r(){var e=void 0;if(e=u.response?u.response:u.responseText||a(u),M)try{e=JSON.parse(e)}catch(e){}return e}function i(e){return clearTimeout(m),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,l(e,A)}function s(){if(!p){var t;clearTimeout(m),t=e.useXDR&&void 0===u.status?200:1223===u.status?204:u.status;var n=A,i=null;return 0!==t?(n={body:r(),statusCode:t,method:v,headers:{},url:f,rawRequest:u},u.getAllResponseHeaders&&(n.headers=h(u.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),l(i,n,n.body)}}if(void 0===e.callback)throw new Error("callback argument missing");var c=!1,l=function(t,r,n){c||(c=!0,e.callback(t,r,n))},u=e.xhr||null;u||(u=e.cors||e.useXDR?new o.XDomainRequest:new o.XMLHttpRequest);var d,p,m,f=u.url=e.uri||e.url,v=u.method=e.method||"GET",y=e.body||e.data,g=u.headers=e.headers||{},x=!!e.sync,M=!1,A={body:void 0,headers:{},statusCode:0,method:v,url:f,rawRequest:u};if("json"in e&&!1!==e.json&&(M=!0,g.accept||g.Accept||(g.Accept="application/json"),"GET"!==v&&"HEAD"!==v&&(g["content-type"]||g["Content-Type"]||(g["Content-Type"]="application/json"),y=JSON.stringify(!0===e.json?y:e.json))),u.onreadystatechange=t,u.onload=s,u.onerror=i,u.onprogress=function(){},u.onabort=function(){p=!0},u.ontimeout=i,u.open(v,f,!x,e.username,e.password),x||(u.withCredentials=!!e.withCredentials),!x&&e.timeout>0&&(m=setTimeout(function(){if(!p){p=!0,u.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",i(e)}},e.timeout)),u.setRequestHeader)for(d in g)g.hasOwnProperty(d)&&u.setRequestHeader(d,g[d]);else if(e.headers&&!n(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(u.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(u),u.send(y||null),u}function a(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}function c(){}var l=e("global/window"),u=e("is-function"),h=e("parse-headers"),d=e("xtend");t.exports=o,o.XMLHttpRequest=l.XMLHttpRequest||c,o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:l.XDomainRequest,function(e,t){for(var r=0;r<e.length;r++)t(e[r])}(["get","put","post","patch","head","delete"],function(e){o["delete"===e?"del":e]=function(t,r,n){return r=i(t,r,n),r.method=e.toUpperCase(),s(r)}})},{"global/window":15,"is-function":19,"parse-headers":30,xtend:50}],49:[function(e,t,r){t.exports=function(){return void 0!==self.DOMParser?function(e){return(new self.DOMParser).parseFromString(e,"application/xml")}:void 0!==self.ActiveXObject&&new self.ActiveXObject("Microsoft.XMLDOM")?function(e){var t=new self.ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t}:function(e){var t=document.createElement("div");return t.innerHTML=e,t}}()},{}],50:[function(e,t,r){function n(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)i.call(r,n)&&(e[n]=r[n])}return e}t.exports=n;var i=Object.prototype.hasOwnProperty},{}],51:[function(e,t,r){t.exports={name:"aframe",version:"0.8.2",description:"A web framework for building virtual reality experiences.",homepage:"https://aframe.io/",main:"dist/aframe-master.js",scripts:{browserify:"browserify src/index.js -s 'AFRAME' -p browserify-derequire",build:"shx mkdir -p build/ && npm run browserify -- --debug -t [envify --INSPECTOR_VERSION dev] -o build/aframe.js",codecov:"codecov",dev:"npm run build && cross-env INSPECTOR_VERSION=dev node ./scripts/budo -t envify",dist:"node scripts/updateVersionLog.js && npm run dist:min && npm run dist:max","dist:max":"npm run browserify -s -- --debug | exorcist dist/aframe-master.js.map > dist/aframe-master.js","dist:min":"npm run browserify -s -- --debug -p [minifyify --map aframe-master.min.js.map --output dist/aframe-master.min.js.map] -o dist/aframe-master.min.js",docs:"markserv --dir docs --port 9001",preghpages:"node ./scripts/preghpages.js",ghpages:"ghpages -p gh-pages/",lint:"semistandard -v | snazzy","lint:fix":"semistandard --fix",precommit:"npm run lint",prepush:"node scripts/testOnlyCheck.js",prerelease:"node scripts/release.js 0.7.1 0.8.0",start:"npm run dev",test:"karma start ./tests/karma.conf.js","test:docs":"node scripts/docsLint.js","test:firefox":"npm test -- --browsers Firefox","test:chrome":"npm test -- --browsers Chrome","test:node":"mocha --ui tdd tests/node"},repository:"aframevr/aframe",license:"MIT",dependencies:{"@tweenjs/tween.js":"^16.8.0","browserify-css":"^0.8.2",debug:"ngokevin/debug#noTimestamp","deep-assign":"^2.0.0","document-register-element":"dmarcos/document-register-element#8ccc532b7",envify:"^3.4.1","load-bmfont":"^1.2.3","object-assign":"^4.0.1",present:"0.0.6","promise-polyfill":"^3.1.0","style-attr":"^1.0.2",three:"github:supermedium/three.js#r90fixMTLLoader","three-bmfont-text":"^2.1.0","webvr-polyfill":"^0.10.5"},devDependencies:{browserify:"^13.1.0","browserify-derequire":"^0.9.4","browserify-istanbul":"^2.0.0",budo:"^9.2.0",chai:"^3.5.0","chai-shallow-deep-equal":"^1.4.0",chalk:"^1.1.3",codecov:"^1.0.1","cross-env":"^5.0.1",exorcist:"^0.4.0",ghpages:"0.0.8","git-rev":"^0.2.1",glob:"^7.1.1",husky:"^0.11.7",istanbul:"^0.4.5",jsdom:"^9.11.0",karma:"1.4.1","karma-browserify":"^5.1.0","karma-chai-shallow-deep-equal":"0.0.4","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.1.1","karma-env-preprocessor":"^0.1.1","karma-firefox-launcher":"^1.0.0","karma-mocha":"^1.1.1","karma-mocha-reporter":"^2.1.0","karma-sinon-chai":"1.2.4",lolex:"^1.5.1",markserv:"github:sukima/markserv#feature/fix-broken-websoketio-link",minifyify:"^7.3.3",mocha:"^3.0.2","mozilla-download":"^1.1.1","replace-in-file":"^2.5.3",semistandard:"^9.0.0",shelljs:"^0.7.7",shx:"^0.2.2",sinon:"^1.17.5","sinon-chai":"2.8.0",snazzy:"^5.0.0","too-wordy":"ngokevin/too-wordy",uglifyjs:"^2.4.10","write-good":"^0.9.1"},link:!0,browserify:{transform:["browserify-css","envify"]},semistandard:{ignore:["build/**","dist/**","examples/**/shaders/*.js","**/vendor/**"]},keywords:["3d","aframe","cardboard","components","oculus","three","three.js","rift","vive","vr","web-components","webvr"],"browserify-css":{minify:!0},engines:{node:">= 4.6.0",npm:"^2.15.9"}}},{}],52:[function(e,t,r){var n=e("../core/component").registerComponent,i=e("../lib/three");t.exports.Component=n("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},spectator:{default:!1},zoom:{default:1,min:0}},init:function(){var e,t=this.el;e=this.camera=new i.PerspectiveCamera,t.setObject3D("camera",e)},update:function(e){var t=this.data,r=this.camera;r.aspect=t.aspect||window.innerWidth/window.innerHeight,r.far=t.far,r.fov=t.fov,r.near=t.near,r.zoom=t.zoom,r.updateProjectionMatrix(),this.updateActiveCamera(e),this.updateSpectatorCamera(e)},updateActiveCamera:function(e){var t=this.data,r=this.el,n=this.system;e&&e.active===t.active||t.spectator||(t.active&&n.activeCameraEl!==r?n.setActiveCamera(r):t.active||n.activeCameraEl!==r||n.disableActiveCamera())},updateSpectatorCamera:function(e){var t=this.data,r=this.el,n=this.system;e&&e.spectator===t.spectator||(t.spectator&&n.spectatorCameraEl!==r?n.setSpectatorCamera(r):t.spectator||n.spectatorCameraEl!==r||n.disableSpectatorCamera())},remove:function(){this.el.removeObject3D("camera")}})},{"../core/component":102,"../lib/three":150}],53:[function(e,t,r){var n=e("../core/component").registerComponent,i=e("../lib/three");t.exports.Component=n("collada-model",{schema:{type:"asset"},init:function(){this.model=null,this.loader=new i.ColladaLoader,this.loader.options.convertUpAxis=!0},update:function(){var e=this,t=this.el,r=this.data;r&&(this.remove(),this.loader.load(r,function(r){e.model=r.scene,t.setObject3D("mesh",e.model),t.emit("model-loaded",{format:"collada",model:e.model})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{"../core/component":102,"../lib/three":150}],54:[function(e,t,r){var n=e("../core/component").registerComponent,i=e("../utils/"),o=i.bind,s={CLICK:"click",FUSING:"fusing",MOUSEENTER:"mouseenter",MOUSEDOWN:"mousedown",MOUSELEAVE:"mouseleave",MOUSEUP:"mouseup"},a={FUSING:"cursor-fusing",HOVERING:"cursor-hovering",HOVERED:"cursor-hovered"},c={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]};t.exports.Component=n("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:i.device.isMobile()},fuseTimeout:{default:1500,min:0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity"]}},init:function(){var e=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.updateCanvasBounds=i.debounce(function(){e.canvasBounds=e.el.sceneEl.canvas.getBoundingClientRect()},1e3),this.eventDetail={},this.intersectedEventDetail={cursorEl:this.el},this.onCursorDown=o(this.onCursorDown,this),this.onCursorUp=o(this.onCursorUp,this),this.onIntersection=o(this.onIntersection,this),this.onIntersectionCleared=o(this.onIntersectionCleared,this),this.onMouseMove=o(this.onMouseMove,this)},update:function(e){this.data.rayOrigin!==e.rayOrigin&&this.updateMouseEventListeners()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var e=this.el;e.removeState(a.HOVERING),e.removeState(a.FUSING),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState(a.HOVERED),this.removeEventListeners()},addEventListeners:function(){function e(){t=n.sceneEl.canvas,r.downEvents.length||r.upEvents.length||(c.DOWN.forEach(function(e){t.addEventListener(e,i.onCursorDown)}),c.UP.forEach(function(e){t.addEventListener(e,i.onCursorUp)}))}var t,r=this.data,n=this.el,i=this;t=n.sceneEl.canvas,t?e():n.sceneEl.addEventListener("render-target-loaded",e),r.downEvents.forEach(function(e){n.addEventListener(e,i.onCursorDown)}),r.upEvents.forEach(function(e){n.addEventListener(e,i.onCursorUp)}),n.addEventListener("raycaster-intersection",this.onIntersection),n.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),window.addEventListener("resize",this.updateCanvasBounds)},removeEventListeners:function(){var e,t=this.data,r=this.el,n=this;e=r.sceneEl.canvas,!e||t.downEvents.length||t.upEvents.length||(c.DOWN.forEach(function(t){e.removeEventListener(t,n.onCursorDown)}),c.UP.forEach(function(t){e.removeEventListener(t,n.onCursorUp)})),t.downEvents.forEach(function(e){r.removeEventListener(e,n.onCursorDown)}),t.upEvents.forEach(function(e){r.removeEventListener(e,n.onCursorUp)}),r.removeEventListener("raycaster-intersection",this.onIntersection),r.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("touchstart",this.onMouseMove),e.removeEventListener("touchmove",this.onMouseMove),e.removeEventListener("resize",this.updateCanvasBounds)},updateMouseEventListeners:function(){var e,t=this.el;e=t.sceneEl.canvas,e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("touchmove",this.onMouseMove),t.setAttribute("raycaster","useWorldCoordinates",!1),"mouse"===this.data.rayOrigin&&(e.addEventListener("mousemove",this.onMouseMove,!1),e.addEventListener("touchmove",this.onMouseMove,!1),t.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},onMouseMove:function(){var e=new THREE.Vector3,t=new THREE.Vector2,r=new THREE.Vector3,n={origin:r,direction:e};return function(i){var o,s,a,c=this.canvasBounds,l=this.el.sceneEl.camera;l.parent.updateMatrixWorld(),s="touchmove"===i.type||"touchstart"===i.type?i.touches.item(0):i,o=s.clientX-c.left,a=s.clientY-c.top,t.x=o/c.width*2-1,t.y=-a/c.height*2+1,r.setFromMatrixPosition(l.matrixWorld),e.set(t.x,t.y,.5).unproject(l).sub(r).normalize(),this.el.setAttribute("raycaster",n),"touchmove"===i.type&&i.preventDefault()}}(),onCursorDown:function(e){"mouse"===this.data.rayOrigin&&"touchstart"===e.type&&(this.onMouseMove(e),this.el.components.raycaster.checkIntersections(),e.preventDefault()),this.twoWayEmit(s.MOUSEDOWN),this.cursorDownEl=this.intersectedEl},onCursorUp:function(e){this.twoWayEmit(s.MOUSEUP),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&(this.intersectedEventDetail.intersection=null,this.cursorDownEl.emit(s.MOUSEUP,this.intersectedEventDetail)),!this.data.fuse&&this.intersectedEl&&this.cursorDownEl===this.intersectedEl&&this.twoWayEmit(s.CLICK),this.cursorDownEl=null,"touchend"===e.type&&e.preventDefault()},onIntersection:function(e){var t,r,n,i,o=this.el;r=e.detail.els[0]===o?1:0,i=e.detail.intersections[r],(n=e.detail.els[r])&&this.intersectedEl!==n&&(this.intersectedEl&&(t=this.el.components.raycaster.getIntersection(this.intersectedEl),t.distance<=i.distance)||(this.clearCurrentIntersection(!0),this.setIntersection(n,i)))},onIntersectionCleared:function(e){-1!==e.detail.clearedEls.indexOf(this.intersectedEl)&&this.clearCurrentIntersection()},setIntersection:function(e,t){var r=this.el,n=this.data,i=this;this.intersectedEl!==e&&(this.intersectedEl=e,r.addState(a.HOVERING),e.addState(a.HOVERED),this.twoWayEmit(s.MOUSEENTER),0!==n.fuseTimeout&&n.fuse&&(r.addState(a.FUSING),this.twoWayEmit(s.FUSING),this.fuseTimeout=setTimeout(function(){r.removeState(a.FUSING),i.twoWayEmit(s.CLICK)},n.fuseTimeout)))},clearCurrentIntersection:function(e){var t,r,n,i=this.el;this.intersectedEl&&(this.intersectedEl.removeState(a.HOVERED),i.removeState(a.HOVERING),i.removeState(a.FUSING),this.twoWayEmit(s.MOUSELEAVE),this.intersectedEl=null,clearTimeout(this.fuseTimeout),!0!==e&&(n=this.el.components.raycaster.intersections,0!==n.length&&(t=n[0].object.el===i?1:0,(r=n[t])&&this.setIntersection(r.object.el,r))))},twoWayEmit:function(e){var t,r=this.el,n=this.intersectedEl;t=this.el.components.raycaster.getIntersection(n),this.eventDetail.intersectedEl=n,this.eventDetail.intersection=t,r.emit(e,this.eventDetail),n&&(this.intersectedEventDetail.intersection=t,n.emit(e,this.intersectedEventDetail))}})},{"../core/component":102,"../utils/":172}],55:[function(e,t,r){var n=e("../core/component").registerComponent,i=e("../utils/bind"),o=e("../utils/tracked-controls").checkControllerPresentAndSetup,s=e("../utils/tracked-controls"),a=s.emitIfAxesChanged,c=s.onButtonEvent;t.exports.Component=n("daydream-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","menu","system"]},bindMethods:function(){this.onModelLoaded=i(this.onModelLoaded,this),this.onControllersUpdate=i(this.onControllersUpdate,this),this.checkIfControllerPresent=i(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=i(this.removeControllersUpdateListener,this),this.onAxisMoved=i(this.onAxisMoved,this)},init:function(){var e=this;this.animationActive="pointing",this.onButtonChanged=i(this.onButtonChanged,this),this.onButtonDown=function(t){c(t.detail.id,"down",e)},this.onButtonUp=function(t){c(t.detail.id,"up",e)},this.onButtonTouchStart=function(t){c(t.detail.id,"touchstart",e)},this.onButtonTouchEnd=function(t){c(t.detail.id,"touchend",e)},this.onAxisMoved=i(this.onAxisMoved,this),this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods(),this.checkControllerPresentAndSetup=o,this.emitIfAxesChanged=a},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,"Daydream Controller",{hand:this.data.hand})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{armModel:t.armModel,hand:t.hand,idPrefix:"Daydream Controller",orientationOffset:t.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:"https://cdn.aframe.io/controllers/google/vr_controller_daydream.obj",mtl:"https://cdn.aframe.io/controllers/google/vr_controller_daydream.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(e){var t,r=e.detail.model;this.data.model&&(t=this.buttonMeshes={},t.menu=r.getObjectByName("AppButton_AppButton_Cylinder.004"),t.system=r.getObjectByName("HomeButton_HomeButton_Cylinder.005"),t.trackpad=r.getObjectByName("TouchPad_TouchPad_Cylinder.003"),r.position.set(0,0,-.04))},onAxisMoved:function(e){this.emitIfAxesChanged(this,this.mapping.axes,e)},onButtonChanged:function(e){var t=this.mapping.buttons[e.detail.id];t&&this.el.emit(t+"changed",e.detail.state)},updateModel:function(e,t){this.data.model&&this.updateButtonModel(e,t)},updateButtonModel:function(e,t){var r=this.buttonMeshes;if(r&&r[e]){var n;switch(t){case"down":n=this.data.buttonHighlightColor;break;case"touchstart":n=this.data.buttonTouchedColor;break;default:n=this.data.buttonColor}r[e].material.color.set(n)}}})},{"../core/component":102,"../utils/bind":166,"../utils/tracked-controls":178}],56:[function(e,t,r){var n=e("../core/component").registerComponent,i=e("../utils/bind"),o=e("../utils/tracked-controls"),s=o.checkControllerPresentAndSetup,a=o.emitIfAxesChanged,c=o.onButtonEvent;t.exports.Component=n("gearvr-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},bindMethods:function(){this.onModelLoaded=i(this.onModelLoaded,this),this.onControllersUpdate=i(this.onControllersUpdate,this),this.checkIfControllerPresent=i(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=i(this.removeControllersUpdateListener,this),this.onAxisMoved=i(this.onAxisMoved,this)},init:function(){var e=this;this.animationActive="pointing",this.onButtonChanged=i(this.onButtonChanged,this),this.onButtonDown=function(t){c(t.detail.id,"down",e)},this.onButtonUp=function(t){c(t.detail.id,"up",e)},this.onButtonTouchStart=function(t){c(t.detail.id,"touchstart",e)},this.onButtonTouchEnd=function(t){c(t.detail.id,"touchend",e)},this.onAxisMoved=i(this.onAxisMoved,this),this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods(),this.checkControllerPresentAndSetup=s,this.emitIfAxesChanged=a},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,"Gear VR|GearVR|Oculus Go",this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{armModel:t.armModel,idPrefix:"Gear VR|GearVR|Oculus Go",orientationOffset:t.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:"https://cdn.aframe.io/controllers/samsung/gear_vr_controller.obj",mtl:"https://cdn.aframe.io/controllers/samsung/gear_vr_controller.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(e){var t,r=e.detail.model;this.data.model&&(t=this.buttonMeshes={},t.trigger=r.children[2],t.trackpad=r.children[1])},onButtonChanged:function(e){var t=this.mapping.buttons[e.detail.id];t&&this.el.emit(t+"changed",e.detail.state)},onAxisMoved:function(e){this.emitIfAxesChanged(this,this.mapping.axes,e)},updateModel:function(e,t){this.data.model&&this.updateButtonModel(e,t)},updateButtonModel:function(e,t){var r=this.buttonMeshes;if(r&&r[e]){var n;switch(t){case"down":n=this.data.buttonHighlightColor;break;case"touchstart":n=this.data.buttonTouchedColor;break;default:n=this.data.buttonColor}r[e].material.color.set(n)}}})},{"../core/component":102,"../utils/bind":166,"../utils/tracked-controls":178}],57:[function(e,t,r){var n=e("../core/geometry").geometries,i=e("../core/geometry").geometryNames,o=e("../core/component").registerComponent,s=e("../lib/three"),a=new s.Geometry;t.exports.Component=o("geometry",{schema:{buffer:{default:!0},primitive:{default:"box",oneOf:i},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(e){var t,r=this.data,n=this.el,i=this.system;this.geometry&&(i.unuseGeometry(e),this.geometry=null),this.geometry=i.getOrCreateGeometry(r),t=n.getObject3D("mesh"),t?t.geometry=this.geometry:(t=new s.Mesh,t.geometry=this.geometry,n.setObject3D("mesh",t))},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=a,this.geometry=null},updateSchema:function(e){var t=e.primitive,r=this.data&&this.data.primitive,i=n[t]&&n[t].schema;if(!i)throw new Error("Unknown geometry schema `"+t+"`");r&&r===t||this.extendSchema(i)}})},{"../core/component":102,"../core/geometry":103,"../lib/three":150}],58:[function(e,t,r){var n=e("../core/component").registerComponent,i=e("../lib/three"),o=e("../utils/"),s=o.debug("components:gltf-model:warn");t.exports.Component=n("gltf-model",{schema:{type:"model"},init:function(){this.model=null,this.loader=new i.GLTFLoader},update:function(){var e=this,t=this.el,r=this.data;r&&(this.remove(),this.loader.load(r,function(r){e.model=r.scene||r.scenes[0],e.model.animations=r.animations,t.setObject3D("mesh",e.model),t.emit("model-loaded",{format:"gltf",model:e.model})},void 0,function(e){var n=e&&e.message?e.message:"Failed to load glTF model";s(n),t.emit("model-error",{format:"gltf",src:r})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{"../core/component":102,"../lib/three":150,"../utils/":172}],59:[function(e,t,r){function n(e,t){var r;if(e)return r=c[e],"grip"===r?r+(t?"close":"open"):"point"===r||"thumb"===r?r+(t?"up":"down"):"pointing"===r||"pistol"===r?r+(t?"start":"end"):void 0}function i(e){var t=e&&e.controller&&e.controller.id;return t&&0===t.indexOf("OpenVR ")}var o=e("../core/component").registerComponent,s={left:"https://cdn.aframe.io/controllers/oculus-hands/v2/leftHand.json",right:"https://cdn.aframe.io/controllers/oculus-hands/v2/rightHand.json"},a={open:"Open",point:"Point",pointThumb:"Point + Thumb",fist:"Fist",hold:"Hold",thumbUp:"Thumb Up"},c={};c[a.fist]="grip",c[a.thumbUp]="pistol",c[a.point]="pointing",c[a.thumb]="thumb",t.exports.Component=o("hand-controls",{schema:{default:"left"},init:function(){var e=this,t=this.el;this.gesture=a.open,this.pressedButtons={},this.touchedButtons={},this.loader=new THREE.ObjectLoader,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){e.handleButton("grip","down")},this.onGripUp=function(){e.handleButton("grip","up")},this.onTrackpadDown=function(){e.handleButton("trackpad","down")},this.onTrackpadUp=function(){e.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){e.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){e.handleButton("trackpad","touchend")},this.onTriggerDown=function(){e.handleButton("trigger","down")},this.onTriggerUp=function(){e.handleButton("trigger","up")},this.onTriggerTouchStart=function(){e.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){e.handleButton("trigger","touchend")},this.onGripTouchStart=function(){e.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){e.handleButton("grip","touchend")},this.onThumbstickDown=function(){e.handleButton("thumbstick","down")},this.onThumbstickUp=function(){e.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){e.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){e.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){e.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){e.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){e.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){e.handleButton("surface","touchend")},this.onControllerConnected=function(){e.setModelVisibility(!0)},this.onControllerDisconnected=function(){e.setModelVisibility(!1)},t.addEventListener("controllerconnected",this.onControllerConnected),t.addEventListener("controllerdisconnected",this.onControllerDisconnected)},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(e,t){var r=this.el.getObject3D("mesh");r&&r.mixer&&r.mixer.update(t/1e3)},addEventListeners:function(){var e=this.el;e.addEventListener("gripdown",this.onGripDown),e.addEventListener("gripup",this.onGripUp),e.addEventListener("trackpaddown",this.onTrackpadDown),e.addEventListener("trackpadup",this.onTrackpadUp),e.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),e.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),e.addEventListener("triggerdown",this.onTriggerDown),e.addEventListener("triggerup",this.onTriggerUp),e.addEventListener("triggertouchstart",this.onTriggerTouchStart),e.addEventListener("triggertouchend",this.onTriggerTouchEnd),e.addEventListener("griptouchstart",this.onGripTouchStart),e.addEventListener("griptouchend",this.onGripTouchEnd),e.addEventListener("thumbstickdown",this.onThumbstickDown),e.addEventListener("thumbstickup",this.onThumbstickUp),e.addEventListener("abuttontouchstart",this.onAorXTouchStart),e.addEventListener("abuttontouchend",this.onAorXTouchEnd),e.addEventListener("bbuttontouchstart",this.onBorYTouchStart),e.addEventListener("bbuttontouchend",this.onBorYTouchEnd),e.addEventListener("xbuttontouchstart",this.onAorXTouchStart),e.addEventListener("xbuttontouchend",this.onAorXTouchEnd),e.addEventListener("ybuttontouchstart",this.onBorYTouchStart),e.addEventListener("ybuttontouchend",this.onBorYTouchEnd),e.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),e.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var e=this.el;e.removeEventListener("gripdown",this.onGripDown),e.removeEventListener("gripup",this.onGripUp),e.removeEventListener("trackpaddown",this.onTrackpadDown),e.removeEventListener("trackpadup",this.onTrackpadUp),e.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),e.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),e.removeEventListener("triggerdown",this.onTriggerDown),e.removeEventListener("triggerup",this.onTriggerUp),e.removeEventListener("triggertouchstart",this.onTriggerTouchStart),e.removeEventListener("triggertouchend",this.onTriggerTouchEnd),e.removeEventListener("griptouchstart",this.onGripTouchStart),e.removeEventListener("griptouchend",this.onGripTouchEnd),e.removeEventListener("thumbstickdown",this.onThumbstickDown),e.removeEventListener("thumbstickup",this.onThumbstickUp),e.removeEventListener("abuttontouchstart",this.onAorXTouchStart),e.removeEventListener("abuttontouchend",this.onAorXTouchEnd),e.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),e.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),e.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),e.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),e.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),e.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),e.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),e.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(e){var t,r=this.el,n=this.data;t={hand:n,model:!1,orientationOffset:{x:0,y:0,z:"left"===n?90:-90}},n!==e&&this.loader.load(s[n],function(e){var n=e.getObjectByName("Hand");n.material.skinning=!0,n.mixer=new THREE.AnimationMixer(n),r.setObject3D("mesh",n),n.position.set(0,0,0),n.rotation.set(0,0,0),n.visible=!1,r.setAttribute("vive-controls",t),r.setAttribute("oculus-touch-controls",t),r.setAttribute("windows-motion-controls",t)})},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(e,t){var r,n="down"===t,i="touchstart"===t;if(0===t.indexOf("touch")){if(i===this.touchedButtons[e])return;this.touchedButtons[e]=i}else{if(n===this.pressedButtons[e])return;this.pressedButtons[e]=n}r=this.gesture,this.gesture=this.determineGesture(),this.gesture!==r&&(this.animateGesture(this.gesture,r),this.emitGestureEvents(this.gesture,r))},determineGesture:function(){var e,t=this.pressedButtons.grip,r=this.pressedButtons.surface||this.touchedButtons.surface,n=this.pressedButtons.trackpad||this.touchedButtons.trackpad,o=this.pressedButtons.trigger||this.touchedButtons.trigger,s=this.touchedButtons.AorX||this.touchedButtons.BorY,c=i(this.el.components["tracked-controls"]);return t?e=c?a.fist:r||s||n?o?a.fist:a.point:o?a.thumbUp:a.pointThumb:o?e=c?a.fist:a.hold:c&&n&&(e=a.point),e},animateGesture:function(e,t){if(e)return void this.playAnimation(e||a.open,t,!1);this.playAnimation(t,t,!0)},emitGestureEvents:function(e,t){var r,i=this.el;t!==e&&(r=n(t,!1),r&&i.emit(r),(r=n(e,!0))&&i.emit(r))},playAnimation:function(e,t,r){var n,i,o=this.el.getObject3D("mesh");if(o){if(i=o.mixer.clipAction(e),i.clampWhenFinished=!0,i.loop=THREE.LoopRepeat,i.repetitions=0,i.timeScale=r?-1:1,i.weight=1,!t||e===t)return o.mixer.stopAllAction(),void i.play();n=o.mixer.clipAction(t),o.mixer.stopAllAction(),n.weight=.15,n.play(),i.play(),n.crossFadeTo(i,.15,!0)}},setModelVisibility:function(e){var t=this.el.getObject3D("mesh");t&&(t.visible=e)}})},{"../core/component":102}],60:[function(e,t,r){e("./camera"),e("./collada-model"),e("./cursor"),e("./daydream-controls"),e("./gearvr-controls"),e("./geometry"),e("./gltf-model"),e("./hand-controls"),e("./laser-controls"),e("./light"),e("./line"),e("./link"),e("./look-controls"),e("./material"),e("./obj-model"),e("./oculus-touch-controls"),e("./position"),e("./raycaster"),e("./rotation"),e("./scale"),e("./shadow"),e("./sound"),e("./text"),e("./tracked-controls"),e("./visible"),e("./vive-controls"),e("./wasd-controls"),e("./windows-motion-controls"),e("./scene/background"),e("./scene/debug"),e("./scene/embedded"),e("./scene/inspector"),e("./scene/fog"),e("./scene/keyboard-shortcuts"),e("./scene/pool"),e("./scene/renderer"),e("./scene/screenshot"),e("./scene/stats"),e("./scene/vr-mode-ui")},{"./camera":52,"./collada-model":53,"./cursor":54,"./daydream-controls":55,"./gearvr-controls":56,"./geometry":57,"./gltf-model":58,"./hand-controls":59,"./laser-controls":61,"./light":62,"./line":63,"./link":64,"./look-controls":65,"./material":66,"./obj-model":67,"./oculus-touch-controls":68,"./position":69,"./raycaster":70,"./rotation":71,"./scale":72,"./scene/background":73,"./scene/debug":74,"./scene/embedded":75,"./scene/fog":76,"./scene/inspector":77,"./scene/keyboard-shortcuts":78,"./scene/pool":79,"./scene/renderer":80,"./scene/screenshot":81,"./scene/stats":82,"./scene/vr-mode-ui":83,"./shadow":84,"./sound":85,"./text":86,"./tracked-controls":87,"./visible":88,"./vive-controls":89,"./wasd-controls":90,"./windows-motion-controls":91}],61:[function(e,t,r){var n=e("../core/component").registerComponent,i=e("../utils/");n("laser-controls",{schema:{hand:{default:"right"}},init:function(){function e(e){var t=r[e.detail.name];if(t){var n=i.extend({showLine:!0},t.raycaster||{});e.detail.rayOrigin&&(n.origin=e.detail.rayOrigin.origin,n.direction=e.detail.rayOrigin.direction,n.showLine=!0),e.detail.rayOrigin||!s.modelReady?o.setAttribute("raycaster",n):o.setAttribute("raycaster","showLine",!0),o.setAttribute("cursor",i.extend({fuse:!1},t.cursor))}}function t(){o.setAttribute("raycaster","showLine",!1)}var r=this.config,n=this.data,o=this.el,s=this;o.setAttribute("daydream-controls",{hand:n.hand}),o.setAttribute("gearvr-controls",{hand:n.hand}),o.setAttribute("oculus-touch-controls",{hand:n.hand}),o.setAttribute("vive-controls",{hand:n.hand}),o.setAttribute("windows-motion-controls",{hand:n.hand}),o.addEventListener("controllerconnected",e),o.addEventListener("controllerdisconnected",t),o.addEventListener("controllermodelready",function(t){e(t),s.modelReady=!0})},config:{"daydream-controls":{cursor:{downEvents:["trackpaddown"],upEvents:["trackpadup"]}},"gearvr-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"oculus-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}}})},{"../core/component":102,"../utils/":172}],62:[function(e,t,r){var n=e("../utils/bind"),i=e("../utils").diff,o=e("../utils/debug"),s=e("../core/component").registerComponent,a=e("../lib/three"),c=a.Math.degToRad,l=o("components:light:warn");t.exports.Component=s("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color"},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:1,min:0,if:{type:["ambient","directional","hemisphere","point","spot"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot"]},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}}},init:function(){var e=this.el;this.light=null,this.defaultTarget=null,this.system.registerLight(e)},update:function(e){var t=this.data,r=i(t,e),o=this.light,s=this;if(o&&!("type"in r)){var a=!1;return void Object.keys(r).forEach(function(e){var r=t[e];switch(e){case"color":o.color.set(r);break;case"groundColor":o.groundColor.set(r);break;case"angle":o.angle=c(r);break;case"target":null===r?"spot"!==t.type&&"directional"!==t.type||(o.target=s.defaultTarget):r.hasLoaded?s.onSetTarget(r,o):r.addEventListener("loaded",n(s.onSetTarget,s,r,o));break;case"castShadow":case"shadowBias":case"shadowCameraFar":case"shadowCameraFov":case"shadowCameraNear":case"shadowCameraTop":case"shadowCameraRight":case"shadowCameraBottom":case"shadowCameraLeft":case"shadowCameraVisible":case"shadowMapHeight":case"shadowMapWidth":a||(s.updateShadow(),a=!0);break;default:o[e]=r}})}this.setLight(this.data),this.updateShadow()},setLight:function(e){var t=this.el,r=this.getLight(e);r&&(this.light&&t.removeObject3D("light"),this.light=r,this.light.el=t,t.setObject3D("light",this.light),"spot"!==e.type&&"directional"!==e.type&&"hemisphere"!==e.type||t.getObject3D("light").translateY(-1),"spot"===e.type&&(t.setObject3D("light-target",this.defaultTarget),t.getObject3D("light-target").position.set(0,0,-1)))},updateShadow:function(){var e=this.el,t=this.data,r=this.light;r.castShadow=t.castShadow;var n=e.getObject3D("cameraHelper");if(t.shadowCameraVisible&&!n?e.setObject3D("cameraHelper",new a.CameraHelper(r.shadow.camera)):!t.shadowCameraVisible&&n&&e.removeObject3D("cameraHelper"),!t.castShadow)return r;r.shadow.bias=t.shadowBias,r.shadow.mapSize.height=t.shadowMapHeight,r.shadow.mapSize.width=t.shadowMapWidth,r.shadow.camera.near=t.shadowCameraNear,r.shadow.camera.far=t.shadowCameraFar,r.shadow.camera instanceof a.OrthographicCamera?(r.shadow.camera.top=t.shadowCameraTop,r.shadow.camera.right=t.shadowCameraRight,r.shadow.camera.bottom=t.shadowCameraBottom,r.shadow.camera.left=t.shadowCameraLeft):r.shadow.camera.fov=t.shadowCameraFov,r.shadow.camera.updateProjectionMatrix(),n&&n.update()},getLight:function(e){var t=e.angle,r=new a.Color(e.color).getHex(),i=e.decay,o=e.distance,s=new a.Color(e.groundColor).getHex(),u=e.intensity,h=e.type,d=e.target,p=null;switch(h.toLowerCase()){case"ambient":return new a.AmbientLight(r,u);case"directional":return p=new a.DirectionalLight(r,u),this.defaultTarget=p.target,d&&(d.hasLoaded?this.onSetTarget(d,p):d.addEventListener("loaded",n(this.onSetTarget,this,d,p))),p;case"hemisphere":return new a.HemisphereLight(r,s,u);case"point":return new a.PointLight(r,u,o,i);case"spot":return p=new a.SpotLight(r,u,o,c(t),e.penumbra,i),this.defaultTarget=p.target,d&&(d.hasLoaded?this.onSetTarget(d,p):d.addEventListener("loaded",n(this.onSetTarget,this,d,p))),p;default:l("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",h)}},onSetTarget:function(e,t){t.target=e.object3D},remove:function(){var e=this.el;e.removeObject3D("light"),e.getObject3D("cameraHelper")&&e.removeObject3D("cameraHelper")}})},{"../core/component":102,"../lib/three":150,"../utils":172,"../utils/bind":166,"../utils/debug":168}],63:[function(e,t,r){function n(e,t){return!(!e||!t)&&(e.x===t.x&&e.y===t.y&&e.z===t.z)}var i=e("../core/component").registerComponent;t.exports.Component=i("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var e,t,r=this.data;t=this.material=new THREE.LineBasicMaterial({color:r.color,opacity:r.opacity,transparent:r.opacity<1,visible:r.visible}),e=this.geometry=new THREE.BufferGeometry,e.addAttribute("position",new THREE.BufferAttribute(new Float32Array(6),3)),this.line=new THREE.Line(e,t),this.el.setObject3D(this.attrName,this.line)},update:function(e){var t=this.data,r=this.geometry,i=!1,o=this.material,s=r.attributes.position.array;n(t.start,e.start)||(s[0]=t.start.x,s[1]=t.start.y,s[2]=t.start.z,i=!0),n(t.end,e.end)||(s[3]=t.end.x,s[4]=t.end.y,s[5]=t.end.z,i=!0),i&&(r.attributes.position.needsUpdate=!0,r.computeBoundingSphere()),o.color.setStyle(t.color),o.opacity=t.opacity,o.transparent=t.opacity<1,o.visible=t.visible},remove:function(){this.el.removeObject3D("line",this.line)}})},{"../core/component":102}],64:[function(e,t,r){var n=e("../core/component").registerComponent,i=e("../core/shader").registerShader,o=e("../lib/three");t.exports.Component=n("link",{schema:{backgroundColor:{default:"red",type:"color"},borderColor:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},titleColor:{default:"white",type:"color"},visualAspectEnabled:{default:!0}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.quaternionClone=new o.Quaternion,this.hiddenEls=[],this.initVisualAspect()},update:function(e){var t,r,n=this.data,i=this.el;t=n.highlighted?n.highlightedColor:n.backgroundColor,r=n.highlighted?n.highlightedColor:n.borderColor,i.setAttribute("material","backgroundColor",t),i.setAttribute("material","strokeColor",r),n.on!==e.on&&this.updateEventListener(),n.visualAspectEnabled&&void 0!==e.peekMode&&n.peekMode!==e.peekMode&&this.updatePeekMode(),n.image&&e.image!==n.image&&i.setAttribute("material","pano","string"==typeof n.image?n.image:n.image.src)},updatePeekMode:function(){var e=this.el,t=this.sphereEl;this.data.peekMode?(this.hideAll(),e.getObject3D("mesh").visible=!1,t.setAttribute("visible",!0)):(this.showAll(),e.getObject3D("mesh").visible=!0,t.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var e=this.el;e.isPlaying&&(this.removeEventListener(),e.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var e=this.data.on;e&&this.el.removeEventListener(e,this.navigate)},initVisualAspect:function(){var e,t,r,n=this.el;this.data.visualAspectEnabled&&(r=this.textEl=this.textEl||document.createElement("a-entity"),t=this.sphereEl=this.sphereEl||document.createElement("a-entity"),e=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),n.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),n.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double"}),r.setAttribute("text",{color:this.data.titleColor,align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),r.setAttribute("position","0 1.5 0"),n.appendChild(r),e.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),e.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),e.setAttribute("rotation","0 180 0"),e.setAttribute("position","0 0 0"),e.setAttribute("visible",!1),n.appendChild(e),t.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),t.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),t.setAttribute("visible",!1),n.appendChild(t))},navigate:function(){window.location=this.data.href},tick:function(){var e=new o.Vector3,t=new o.Vector3,r=new o.Quaternion,n=new o.Vector3;return function(){var i,o,s=this.el,a=s.object3D,c=s.sceneEl.camera,l=this.textEl;if(this.data.visualAspectEnabled)if(a.updateMatrixWorld(),c.parent.updateMatrixWorld(),c.updateMatrixWorld(),a.matrix.decompose(t,r,n),t.setFromMatrixPosition(a.matrixWorld),e.setFromMatrixPosition(c.matrixWorld),(o=t.distanceTo(e))>20)this.previousQuaternion||(this.quaternionClone.copy(r),this.previousQuaternion=this.quaternionClone),a.lookAt(e);else{if(i=this.calculateCameraPortalOrientation(),o<.5){if(!0===this.semiSphereEl.getAttribute("visible"))return;l.setAttribute("text","width",1.5),i<=0?(l.setAttribute("position","0 0 0.75"),l.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(l.setAttribute("position","0 0 -0.75"),l.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),s.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=i}else i<=0?l.setAttribute("rotation","0 180 0"):l.setAttribute("rotation","0 0 0"),l.setAttribute("text","width",5),l.setAttribute("position","0 1.5 0"),s.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(a.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}}(),hideAll:function(){var e=this.el,t=this.hiddenEls,r=this;t.length>0||e.sceneEl.object3D.traverse(function(n){n&&n.el&&n.el.hasAttribute("link-controls")||n.el&&n!==e.sceneEl.object3D&&n.el!==e&&n.el!==r.sphereEl&&n.el!==e.sceneEl.cameraEl&&!1!==n.el.getAttribute("visible")&&n.el!==r.textEl&&n.el!==r.semiSphereEl&&(n.el.setAttribute("visible",!1),t.push(n.el))})},showAll:function(){this.hiddenEls.forEach(function(e){e.setAttribute("visible",!0)}),this.hiddenEls=[]},calculateCameraPortalOrientation:function(){var e=new o.Matrix4,t=new o.Vector3,r=new o.Vector3(0,0,1),n=new o.Vector3(0,0,0);return function(){var i=this.el,o=i.sceneEl.camera;return t.set(0,0,0),r.set(0,0,1),n.set(0,0,0),i.object3D.matrixWorld.extractRotation(e),r.applyMatrix4(e),i.object3D.updateMatrixWorld(),i.object3D.localToWorld(n),o.parent.parent.updateMatrixWorld(),o.parent.updateMatrixWorld(),o.updateMatrixWorld(),o.localToWorld(t),t.sub(n).normalize(),r.normalize(),Math.sign(r.dot(t))}}(),remove:function(){this.removeEventListener()}}),i("portal",{schema:{borderEnabled:{default:1,type:"int",is:"uniform"},backgroundColor:{default:"red",type:"color",is:"uniform"},pano:{type:"map",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"}},vertexShader:["vec3 portalPosition;","varying vec3 vWorldPosition;","varying float vDistanceToCenter;","varying float vDistance;","void main() {","vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);","portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;","vDistance = length(portalPosition - cameraPosition);","vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI2 0.15915494","uniform sampler2D pano;","uniform vec3 strokeColor;","uniform vec3 backgroundColor;","uniform float borderEnabled;","varying float vDistanceToCenter;","varying float vDistance;","varying vec3 vWorldPosition;","void main() {","vec3 direction = normalize(vWorldPosition - cameraPosition);","vec2 sampleUV;","float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);","sampleUV.y = saturate(direction.y * 0.5  + 0.5);","sampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;","if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {","gl_FragColor = vec4(strokeColor, 1.0);","} else {","gl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / 15.0), 2.0), 0.0, 1.0));","}","}"].join("\n")})},{"../core/component":102,"../core/shader":111,"../lib/three":150}],65:[function(e,t,r){var n=e("../core/component").registerComponent,i=e("../lib/three"),o=e("../utils/"),s=o.bind,a=e("../utils").device.PolyfillControls,c=Math.PI/2,l=o.device.checkHasPositionalTracking;t.exports.Component=n("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},hmdEnabled:{default:!0},pointerLockEnabled:{default:!1},reverseMouseDrag:{default:!1},touchEnabled:{default:!0}},init:function(){this.previousHMDPosition=new i.Vector3,this.hmdQuaternion=new i.Quaternion,this.hmdEuler=new i.Euler,this.position=new i.Vector3,this.savedRotation=new i.Vector3,this.savedPosition=new i.Vector3,this.polyfillObject=new i.Object3D,this.polyfillControls=new a(this.polyfillObject),this.rotation={},this.deltaRotation={},this.savedPose=null,this.pointerLocked=!1,this.setupMouseControls(),this.bindMethods(),this.savedPose={position:new i.Vector3,rotation:new i.Euler},this.el.sceneEl.is("vr-mode")&&this.onEnterVR()},update:function(e){var t=this.data;t.enabled!==e.enabled&&this.updateGrabCursor(t.enabled),!e||t.hmdEnabled||e.hmdEnabled||(this.pitchObject.rotation.set(0,0,0),this.yawObject.rotation.set(0,0,0)),e&&!t.pointerLockEnabled!==e.pointerLockEnabled&&(this.removeEventListeners(),this.addEventListeners(),this.pointerLocked&&document.exitPointerLock())},tick:function(e){this.data.enabled&&this.updateOrientation()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.removeEventListeners()},bindMethods:function(){this.onMouseDown=s(this.onMouseDown,this),this.onMouseMove=s(this.onMouseMove,this),this.onMouseUp=s(this.onMouseUp,this),this.onTouchStart=s(this.onTouchStart,this),this.onTouchMove=s(this.onTouchMove,this),this.onTouchEnd=s(this.onTouchEnd,this),this.onEnterVR=s(this.onEnterVR,this),this.onExitVR=s(this.onExitVR,this),this.onPointerLockChange=s(this.onPointerLockChange,this),this.onPointerLockError=s(this.onPointerLockError,this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new i.Object3D,this.yawObject=new i.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},addEventListeners:function(){var e=this.el.sceneEl,t=e.canvas;if(!t)return void e.addEventListener("render-target-loaded",s(this.addEventListeners,this));t.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),t.addEventListener("touchstart",this.onTouchStart),window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd),e.addEventListener("enter-vr",this.onEnterVR),e.addEventListener("exit-vr",this.onExitVR),this.data.pointerLockEnabled&&(document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("pointerlockerror",this.onPointerLockError,!1))},removeEventListeners:function(){var e=this.el.sceneEl,t=e&&e.canvas;t&&(t.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),e.removeEventListener("enter-vr",this.onEnterVR),e.removeEventListener("exit-vr",this.onExitVR),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("pointerlockerror",this.onPointerLockError,!1))},updateOrientation:function(){var e=this.el,t=this.hmdEuler,r=this.pitchObject,n=this.yawObject,i=this.el.sceneEl;i.is("vr-mode")&&i.checkHeadsetConnected()||(this.polyfillControls.update(),t.setFromQuaternion(this.polyfillObject.quaternion,"YXZ"),e.object3D.rotation.x=t.x+r.rotation.x,e.object3D.rotation.y=t.y+n.rotation.y,e.object3D.rotation.z=0)},onMouseMove:function(e){var t,r,n,i=this.pitchObject,o=this.previousMouseEvent,s=this.yawObject;this.data.enabled&&(this.mouseDown||this.pointerLocked)&&(this.pointerLocked?(r=e.movementX||e.mozMovementX||0,n=e.movementY||e.mozMovementY||0):(r=e.screenX-o.screenX,n=e.screenY-o.screenY),this.previousMouseEvent=e,t=this.data.reverseMouseDrag?1:-1,s.rotation.y+=.002*r*t,i.rotation.x+=.002*n*t,i.rotation.x=Math.max(-c,Math.min(c,i.rotation.x)))},onMouseDown:function(e){if(this.data.enabled&&0===e.button){var t=this.el.sceneEl,r=t&&t.canvas;this.mouseDown=!0,this.previousMouseEvent=e,document.body.classList.add("a-grabbing"),this.data.pointerLockEnabled&&!this.pointerLocked&&(r.requestPointerLock?r.requestPointerLock():r.mozRequestPointerLock&&r.mozRequestPointerLock())}},onMouseUp:function(){this.mouseDown=!1,document.body.classList.remove("a-grabbing")},onTouchStart:function(e){1===e.touches.length&&this.data.touchEnabled&&(this.touchStart={x:e.touches[0].pageX,y:e.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(e){var t,r=this.el.sceneEl.canvas,n=this.yawObject;this.touchStarted&&this.data.touchEnabled&&(t=2*Math.PI*(e.touches[0].pageX-this.touchStart.x)/r.clientWidth,n.rotation.y-=.5*t,this.touchStart={x:e.touches[0].pageX,y:e.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onEnterVR:function(){this.saveCameraPose()},onExitVR:function(){this.restoreCameraPose(),this.previousHMDPosition.set(0,0,0)},onPointerLockChange:function(){this.pointerLocked=!(!document.pointerLockElement&&!document.mozPointerLockElement)},onPointerLockError:function(){this.pointerLocked=!1},updateGrabCursor:function(e){function t(){n.canvas.classList.add("a-grab-cursor")}function r(){n.canvas.classList.remove("a-grab-cursor")}var n=this.el.sceneEl;return n.canvas?e?void t():void r():void(e?n.addEventListener("render-target-loaded",t):n.addEventListener("render-target-loaded",r))},saveCameraPose:function(){var e=this.el,t=void 0!==this.hasPositionalTracking?this.hasPositionalTracking:l();!this.hasSavedPose&&t&&(this.savedPose.position.copy(e.object3D.position),this.savedPose.rotation.copy(e.object3D.rotation),this.hasSavedPose=!0)},restoreCameraPose:function(){var e=this.el,t=this.savedPose,r=void 0!==this.hasPositionalTracking?this.hasPositionalTracking:l();this.hasSavedPose&&r&&(e.object3D.position.copy(t.position),e.object3D.rotation.copy(t.rotation),this.hasSavedPose=!1)}})},{"../core/component":102,"../lib/three":150,"../utils":172,"../utils/":172}],66:[function(e,t,r){function n(e){switch(e){case"back":return c.BackSide;case"double":return c.DoubleSide;default:return c.FrontSide}}function i(e){switch(e){case"face":return c.FaceColors;case"vertex":return c.VertexColors;default:return c.NoColors}}function o(e,t){e.dispose(),t.unregisterMaterial(e)}var s=e("../utils/"),a=e("../core/component"),c=e("../lib/three"),l=e("../core/shader"),u=s.debug("components:material:error"),h=a.registerComponent,d=l.shaders,p=l.shaderNames;t.exports.Component=h("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:p},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColors:{type:"string",default:"none",oneOf:["face","vertex"]},visible:{default:!0}},init:function(){this.material=null},update:function(e){var t=this.data;this.shader&&t.shader===e.shader||this.updateShader(t.shader),this.shader.update(this.data),this.updateMaterial(e)},updateSchema:function(e){var t=e.shader,r=this.data&&this.data.shader,n=t||r,i=d[n]&&d[n].schema;i||u("Unknown shader schema "+n),r&&t===r||(this.extendSchema(i),this.updateBehavior())},updateBehavior:function(){var e=this.schema,t=this,r=this.el.sceneEl,n={},i=function(e,r){Object.keys(n).forEach(function(t){n[t]=e}),t.shader.update(n)};this.tick=void 0,Object.keys(e).forEach(function(r){"time"===e[r].type&&(t.tick=i,n[r]=!0)}),r&&(this.tick?r.addBehavior(this):r.removeBehavior(this))},updateShader:function(e){var t,r=this.data,n=d[e]&&d[e].Shader;if(!n)throw new Error("Unknown shader "+e);t=this.shader=new n,t.el=this.el,t.init(r),this.setMaterial(t.material),this.updateSchema(r)},updateMaterial:function(e){var t=this.data,r=this.material;r.alphaTest=t.alphaTest,r.depthTest=!1!==t.depthTest,r.depthWrite=!1!==t.depthWrite,r.opacity=t.opacity,r.flatShading=t.flatShading,r.side=n(t.side),r.transparent=!1!==t.transparent||t.opacity<1,r.vertexColors=i(t.vertexColors),r.visible=t.visible,!Object.keys(e).length||e.alphaTest===t.alphaTest&&e.side===t.side&&e.vertexColors===t.vertexColors||(r.needsUpdate=!0)},remove:function(){var e=new c.MeshBasicMaterial,t=this.material,r=this.el.getObject3D("mesh");r&&(r.material=e),o(t,this.system)},setMaterial:function(e){var t,r=this.el,n=this.system;this.material&&o(this.material,n),this.material=e,n.registerMaterial(e),t=r.getObject3D("mesh"),t?t.material=e:r.addEventListener("object3dset",function t(n){"mesh"===n.detail.type&&n.target===r&&(r.getObject3D("mesh").material=e,r.removeEventListener("object3dset",t))})}})},{"../core/component":102,"../core/shader":111,"../lib/three":150,"../utils/":172}],67:[function(e,t,r){var n=e("../utils/debug"),i=e("../core/component").registerComponent,o=e("../lib/three"),s=n("components:obj-model:warn");t.exports.Component=i("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){this.model=null,this.objLoader=new o.OBJLoader,this.mtlLoader=new o.MTLLoader(this.objLoader.manager),this.mtlLoader.crossOrigin=""},update:function(){var e=this.data;e.obj&&(this.remove(),this.loadObj(e.obj,e.mtl))},remove:function(){this.model&&this.el.removeObject3D("mesh")},loadObj:function(e,t){var r=this,n=this.el,i=this.mtlLoader,a=this.objLoader;if(t)return n.hasAttribute("material")&&s("Material component properties are ignored when a .MTL is provided"),i.setTexturePath(t.substr(0,t.lastIndexOf("/")+1)),void i.load(t,function(t){t.preload(),a.setMaterials(t),a.load(e,function(e){r.model=e,n.setObject3D("mesh",e),n.emit("model-loaded",{format:"obj",model:e})})});a.load(e,function(e){var t=n.components.material;t&&e.traverse(function(e){e instanceof o.Mesh&&(e.material=t.material)}),r.model=e,n.setObject3D("mesh",e),n.emit("model-loaded",{format:"obj",model:e})})}})},{"../core/component":102,"../lib/three":150,"../utils/debug":168}],68:[function(e,t,r){var n=e("../utils/bind"),i=e("../core/component").registerComponent,o=e("../utils/tracked-controls"),s=e("../lib/three"),a=o.onButtonEvent,c=new s.Vector3(0,0,-.053),l={left:{origin:{x:.008,y:-.008,z:0},direction:{x:0,y:-.8,z:-1}},right:{origin:{x:-.008,y:-.008,z:0},direction:{x:0,y:-.8,z:-1}}};t.exports.Component=i("oculus-touch-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},orientationOffset:{type:"vec3",default:{x:43,y:0,z:0}}},mapping:{left:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","abutton","bbutton","surface"]}},bindMethods:function(){this.onModelLoaded=n(this.onModelLoaded,this),this.onControllersUpdate=n(this.onControllersUpdate,this),this.checkIfControllerPresent=n(this.checkIfControllerPresent,this),this.onAxisMoved=n(this.onAxisMoved,this)},init:function(){var e=this;this.onButtonChanged=n(this.onButtonChanged,this),this.onButtonDown=function(t){a(t.detail.id,"down",e,e.data.hand)},this.onButtonUp=function(t){a(t.detail.id,"up",e,e.data.hand)},this.onButtonTouchStart=function(t){a(t.detail.id,"touchstart",e,e.data.hand)},this.onButtonTouchEnd=function(t){a(t.detail.id,"touchend",e,e.data.hand)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.emitIfAxesChanged=o.emitIfAxesChanged,this.checkControllerPresentAndSetup=o.checkControllerPresentAndSetup},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,"Oculus Touch",{hand:this.data.hand})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){var e,t;this.data.model&&("right"===this.data.hand?(e="url(https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-right.obj)",t="url(https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-right.mtl)"):(e="url(https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-left.obj)",t="url(https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-left.mtl)"),this.el.setAttribute("obj-model",{obj:e,mtl:t}))},injectTrackedControls:function(){var e=this.data;this.el.setAttribute("tracked-controls",{id:"right"===e.hand?"Oculus Touch (Right)":"Oculus Touch (Left)",controller:0,orientationOffset:e.orientationOffset}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,r=this.mapping[this.data.hand].buttons[e.detail.id],n=this.buttonMeshes;r&&("trigger"!==r&&"grip"!==r||(t=e.detail.state.value),n&&("trigger"===r&&n.trigger&&(n.trigger.rotation.x=-t*(Math.PI/24)),"grip"===r&&n.grip&&(n.grip.rotation.y=("left"===this.data.hand?-1:1)*t*(Math.PI/60))),this.el.emit(r+"changed",e.detail.state))},onModelLoaded:function(e){var t,r=e.detail.model;if(this.data.model){var n="left"===this.data.hand;t=this.buttonMeshes={},t.grip=r.getObjectByName(n?"buttonHand_oculus-touch-controller-left.004":"buttonHand_oculus-touch-controller-right.005"),t.thumbstick=r.getObjectByName(n?"stick_oculus-touch-controller-left.007":"stick_oculus-touch-controller-right.004"),t.trigger=r.getObjectByName(n?"buttonTrigger_oculus-touch-controller-left.005":"buttonTrigger_oculus-touch-controller-right.006"),t.xbutton=r.getObjectByName("buttonX_oculus-touch-controller-left.002"),t.abutton=r.getObjectByName("buttonA_oculus-touch-controller-right.002"),t.ybutton=r.getObjectByName("buttonY_oculus-touch-controller-left.001"),t.bbutton=r.getObjectByName("buttonB_oculus-touch-controller-right.003"),r.position.copy(c),this.el.emit("controllermodelready",{name:"oculus-touch-controls",model:this.data.model,rayOrigin:l[this.data.hand]})}},onAxisMoved:function(e){this.emitIfAxesChanged(this,this.mapping[this.data.hand].axes,e)},updateModel:function(e,t){this.data.model&&this.updateButtonModel(e,t)},updateButtonModel:function(e,t){var r="up"===t||"touchend"===t?this.data.buttonColor:"touchstart"===t?this.data.buttonTouchColor:this.data.buttonHighlightColor,n=this.buttonMeshes;this.data.model&&n&&n[e]&&n[e].material.color.set(r)}})},{"../core/component":102,"../lib/three":150,"../utils/bind":166,"../utils/tracked-controls":178}],69:[function(e,t,r){var n=e("../core/component").registerComponent;t.exports.Component=n("position",{schema:{type:"vec3"},update:function(){var e=this.el.object3D,t=this.data;e.position.set(t.x,t.y,t.z)},remove:function(){this.el.object3D.position.set(0,0,0)}})},{"../core/component":102}],70:[function(e,t,r){function n(e,t){var r;for(e.length=t.length,r=0;r<t.length;r++)e[r]=t[r]}var i=e("../core/component").registerComponent,o=e("../lib/three"),s=e("../utils/"),a=s.debug("components:raycaster:warn"),c=/^[\w\s-.,[\]#]*$/,l={childList:!0,attributes:!0,subtree:!0};t.exports.Component=i("raycaster",{schema:{autoRefresh:{default:!0},direction:{type:"vec3",default:{x:0,y:0,z:-1}},enabled:{default:!0},far:{default:1e3},interval:{default:0},near:{default:0},objects:{default:""},origin:{type:"vec3"},recursive:{default:!0},showLine:{default:!1},useWorldCoordinates:{default:!1}},init:function(){this.clearedIntersectedEls=[],this.unitLineEndVec3=new o.Vector3,this.intersectedEls=[],this.intersections=[],this.newIntersectedEls=[],this.newIntersections=[],this.objects=[],this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.rawIntersections=[],this.raycaster=new o.Raycaster,this.updateOriginDirection(),this.setDirty=this.setDirty.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.lineEndVec3=new o.Vector3,this.otherLineEndVec3=new o.Vector3,this.lineData={end:this.lineEndVec3},this.intersectedClearedDetail={el:this.el},this.intersectionClearedDetail={clearedEls:this.clearedIntersectedEls},this.intersectionDetail={}},update:function(e){var t=this.data,r=this.el,n=this.raycaster;n.far=t.far,n.near=t.near,!t.showLine||t.far===e.far&&t.origin===e.origin&&t.direction===e.direction&&e.showLine||(this.unitLineEndVec3.copy(t.origin).add(t.direction).normalize(),this.drawLine()),!t.showLine&&e.showLine&&r.removeAttribute("line"),t.objects===e.objects||c.test(t.objects)||a('Selector "'+t.objects+'" may not update automatically with DOM changes.'),t.autoRefresh!==e.autoRefresh&&r.isPlaying&&(t.autoRefresh?this.addEventListeners():this.removeEventListeners()),this.setDirty()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.data.showLine&&this.el.removeAttribute("line")},addEventListeners:function(){this.data.autoRefresh&&(this.observer.observe(this.el.sceneEl,l),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty))},removeEventListeners:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},setDirty:function(){this.dirty=!0},refreshObjects:function(){var e,t=this.data;e=t.objects?this.el.sceneEl.querySelectorAll(t.objects):this.el.sceneEl.children,this.objects=this.flattenChildrenShallow(e),this.dirty=!1},tick:function(e){var t=this.data,r=this.prevCheckTime;r&&e-r<t.interval||(this.prevCheckTime=e,this.checkIntersections())},checkIntersections:function(){var e,t,r,i=this.clearedIntersectedEls,o=this.el,s=this.data,a=this.intersectedEls,c=this.intersections,l=this.newIntersectedEls,u=this.newIntersections,h=this.prevIntersectedEls,d=this.rawIntersections,p=this;if(this.data.enabled){for(this.dirty&&this.refreshObjects(),n(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),d.length=0,this.raycaster.intersectObjects(this.objects,s.recursive,d),c.length=0,a.length=0,e=0;e<d.length;e++)t=d[e],s.showLine&&t.object===o.getObject3D("line")||t.object.el&&(c.push(t),a.push(t.object.el));for(u.length=0,l.length=0,e=0;e<c.length;e++)-1===h.indexOf(c[e].object.el)&&(u.push(c[e]),l.push(c[e].object.el));for(i.length=0,e=0;e<h.length;e++)-1===a.indexOf(h[e])&&(h[e].emit("raycaster-intersected-cleared",this.intersectedClearedDetail),i.push(h[e]));for(i.length&&o.emit("raycaster-intersection-cleared",this.intersectionClearedDetail),e=0;e<l.length;e++)l[e].emit("raycaster-intersected",{el:o,intersection:u[e]});u.length&&(this.intersectionDetail.els=l,this.intersectionDetail.intersections=u,o.emit("raycaster-intersection",this.intersectionDetail)),setTimeout(function(){p.data.showLine&&(c.length&&(r=c[0].object.el===o&&c[1]?c[1].distance:c[0].distance),p.drawLine(r))})}},getIntersection:function(e){var t,r;for(t=0;t<this.intersections.length;t++)if(r=this.intersections[t],r.object.el===e)return r;return null},updateOriginDirection:function(){var e=new o.Vector3,t=new o.Vector3;return function(){var r=this.el,n=this.data;if(n.useWorldCoordinates)return void this.raycaster.set(n.origin,n.direction);r.object3D.updateMatrixWorld(),r.object3D.getWorldPosition(t),0===n.origin.x&&0===n.origin.y&&0===n.origin.z||(t=r.object3D.localToWorld(t.copy(n.origin))),e.copy(n.direction).transformDirection(r.object3D.matrixWorld).normalize(),this.raycaster.set(t,e)}}(),drawLine:function(e){var t,r=this.data,n=this.el;t=this.lineData.end===this.lineEndVec3?this.otherLineEndVec3:this.lineEndVec3,void 0===e&&(e=r.far===1/0?1e3:r.far),this.lineData.start=r.origin,this.lineData.end=t.copy(this.unitLineEndVec3).multiplyScalar(e),n.setAttribute("line",this.lineData)},flattenChildrenShallow:function(){var e=[];return function(t){var r,n,i=this.objects;for(e.length=0,n=0;n<t.length;n++)t[n].object3D&&e.push(t[n].object3D);for(i.length=0,n=0;n<e.length;n++)(r=e[n].children)&&r.length&&i.push.apply(i,r);return i}}()})},{"../core/component":102,"../lib/three":150,"../utils/":172}],71:[function(e,t,r){var n=e("../lib/three").Math.degToRad,i=e("../core/component").registerComponent;t.exports.Component=i("rotation",{schema:{type:"vec3"},update:function(){var e=this.data,t=this.el.object3D;t.rotation.set(n(e.x),n(e.y),n(e.z)),t.rotation.order="YXZ"},remove:function(){this.el.object3D.rotation.set(0,0,0)}})},{"../core/component":102,"../lib/three":150}],72:[function(e,t,r){var n=e("../core/component").registerComponent;t.exports.Component=n("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var e=this.data,t=this.el.object3D,r=0===e.x?1e-5:e.x,n=0===e.y?1e-5:e.y,i=0===e.z?1e-5:e.z;t.scale.set(r,n,i)},remove:function(){this.el.object3D.scale.set(1,1,1)}})},{"../core/component":102}],73:[function(e,t,r){var n=e("../../core/component").registerComponent;t.exports.Component=n("background",{schema:{color:{type:"color",default:"black"},transparent:{default:!1}},update:function(){var e=this.data,t=this.el.object3D;if(e.transparent)return void(t.background=null);t.background=new THREE.Color(e.color)}})},{"../../core/component":102}],74:[function(e,t,r){var n=e("../../core/component").registerComponent;t.exports.Component=n("debug",{schema:{default:!0}})},{"../../core/component":102}],75:[function(e,t,r){var n=e("../../core/component").registerComponent;t.exports.Component=n("embedded",{dependencies:["vr-mode-ui"],schema:{default:!0},update:function(){var e=this.el,t=e.querySelector(".a-enter-vr");!0===this.data?(t&&t.classList.add("embedded"),e.removeFullScreenStyles()):(t&&t.classList.remove("embedded"),e.addFullScreenStyles())}})},{"../../core/component":102}],76:[function(e,t,r){function n(e){var t;return t="exponential"===e.type?new o.FogExp2(e.color,e.density):new o.Fog(e.color,e.near,e.far),t.name=e.type,t}var i=e("../../core/component").registerComponent,o=e("../../lib/three"),s=e("../../utils/debug"),a=s("components:fog:warn");t.exports.Component=i("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},update:function(){var e=this.data,t=this.el,r=this.el.object3D.fog;return t.isScene?r&&e.type===r.name?void Object.keys(this.schema).forEach(function(t){var n=e[t];"color"===t&&(n=new o.Color(n)),r[t]=n}):(t.object3D.fog=n(e),void t.systems.material.updateMaterials()):void a("Fog component can only be applied to <a-scene>")},remove:function(){var e=this.el.object3D.fog;e&&(e.far=0,e.near=.1)}})},{"../../core/component":102,"../../lib/three":150,"../../utils/debug":168}],77:[function(e,t,r){(function(r){var n=e("../../constants").AFRAME_INJECTED,i=e("../../utils/bind"),o=e("../../../package"),s=e("../../core/component").registerComponent,a="https://unpkg.com/aframe-inspector@"+function(e){var t=e.split(".");return t[2]="x",t.join(".")}(o.version)+"/dist/aframe-inspector.min.js",c="dev"===r.env.INSPECTOR_VERSION?"https://aframe.io/aframe-inspector/dist/aframe-inspector.js":a;t.exports.Component=s("inspector",{schema:{url:{default:c}},init:function(){this.onKeydown=i(this.onKeydown,this),this.onMessage=i(this.onMessage,this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},initOverlay:function(){this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML='Loading Inspector<span class="dots"><span>.</span><span>.</span><span>.</span></span>'},remove:function(){this.removeEventListeners()},onKeydown:function(e){var t=73===e.keyCode&&e.ctrlKey&&e.altKey;this.data&&t&&this.injectInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(e){"INJECT_AFRAME_INSPECTOR"===e.data&&this.injectInspector()},injectInspector:function(){var e,t=this;AFRAME.INSPECTOR||AFRAME.inspectorInjected||(this.showLoader(),e=document.createElement("script"),e.src=this.data.url,e.setAttribute("data-name","aframe-inspector"),e.setAttribute(n,""),e.onload=function(){AFRAME.INSPECTOR.open(),t.hideLoader(),t.removeEventListeners()},e.onerror=function(){t.loadingMessageEl.innerHTML="Error loading Inspector"},document.head.appendChild(e),AFRAME.inspectorInjected=!0)},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}})}).call(this,e("_process"))},{"../../../package":51,"../../constants":93,"../../core/component":102,"../../utils/bind":166,_process:32}],78:[function(e,t,r){var n=e("../../core/component").registerComponent,i=e("../../utils/").shouldCaptureKeyEvent;t.exports.Component=n("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},init:function(){this.onKeyup=this.onKeyup.bind(this)},update:function(e){var t=this.data;this.enterVREnabled=t.enterVR},play:function(){window.addEventListener("keyup",this.onKeyup,!1)},pause:function(){window.removeEventListener("keyup",this.onKeyup)},onKeyup:function(e){var t=this.el;i(e)&&(this.enterVREnabled&&70===e.keyCode&&t.enterVR(),this.enterVREnabled&&27===e.keyCode&&t.exitVR())}})},{"../../core/component":102,"../../utils/":172}],79:[function(e,t,r){var n=e("../../utils/debug"),i=e("../../core/component").registerComponent,o=n("components:pool:warn");t.exports.Component=i("pool",{schema:{container:{default:""},mixin:{default:""},size:{default:0},dynamic:{default:!1}},multiple:!0,initPool:function(){var e;for(this.availableEls=[],this.usedEls=[],this.data.mixin||o("No mixin provided for pool component."),this.data.container&&(this.container=document.querySelector(this.data.container),this.container||o("Container "+this.data.container+" not found.")),this.container=this.container||this.el,e=0;e<this.data.size;++e)this.createEntity()},update:function(e){var t=this.data;e.mixin===t.mixin&&e.size===t.size||this.initPool()},createEntity:function(){var e;e=document.createElement("a-entity"),e.play=this.wrapPlay(e.play),e.setAttribute("mixin",this.data.mixin),e.object3D.visible=!1,e.pause(),this.container.appendChild(e),this.availableEls.push(e)},wrapPlay:function(e){var t=this.usedEls;return function(){-1!==t.indexOf(this)&&e.call(this)}},requestEntity:function(){var e;if(0===this.availableEls.length){if(!1===this.data.dynamic)return void o("Requested entity from empty pool: "+this.name);o("Requested entity from empty pool. This pool is dynamic and will resize automatically. You might want to increase its initial size: "+this.name),this.createEntity()}return e=this.availableEls.shift(),this.usedEls.push(e),e.object3D.visible=!0,e},returnEntity:function(e){var t=this.usedEls.indexOf(e);return-1===t?void o("The returned entity was not previously pooled from "+this.name):(this.usedEls.splice(t,1),this.availableEls.push(e),e.object3D.visible=!1,e.pause(),e)}})},{"../../core/component":102,"../../utils/debug":168}],80:[function(e,t,r){var n=e("../../core/component").registerComponent,i=e("../../utils/debug"),o=i("components:renderer:warn");t.exports.Component=n("renderer",{schema:{antialias:{default:"auto",oneOf:["true","false","auto"]},gammaOutput:{default:!1},physicallyCorrectLights:{default:!1},sortObjects:{default:!1}},init:function(){this.el.isScene||o("Renderer component can only be applied to <a-scene>")},update:function(e){var t=this.data,r=this.el,n=r.renderer,i=!1;r.time>0&&t.antialias!==e.antialias&&o('Property "antialias" cannot be changed after scene initialization'),t.sortObjects!==e.sortObjects&&(n.sortObjects=t.sortObjects),t.gammaOutput!==e.gammaOutput&&(n.gammaOutput=t.gammaOutput,i=!0),t.physicallyCorrectLights!==e.physicallyCorrectLights&&(n.physicallyCorrectLights=t.physicallyCorrectLights,i=!0),i&&0!==r.time&&(o("Modifying renderer properties at runtime requires shader update and may drop frames."),r.object3D.traverse(function(e){e.isMesh&&(Array.isArray(e.material)?e.material.forEach(function(e){e.needsUpdate=!0}):e.material.needsUpdate=!0)}))}})},{"../../core/component":102,"../../utils/debug":168}],81:[function(e,t,r){var n=e("../../core/component").registerComponent,i=e("../../lib/three"),o=["attribute vec3 position;","attribute vec2 uv;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main()  {","  vUv = vec2( 1.- uv.x, uv.y );","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),s=["precision mediump float;","uniform samplerCube map;","varying vec2 vUv;","#define M_PI 3.141592653589793238462643383279","void main() {","  vec2 uv = vUv;","  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;","  float latitude = uv.y * M_PI;","  vec3 dir = vec3(","    - sin( longitude ) * sin( latitude ),","    cos( latitude ),","    - cos( longitude ) * sin( latitude )","  );","  normalize( dir );","  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );","}"].join("\n");t.exports.Component=n("screenshot",{schema:{width:{default:4096},height:{default:2048},camera:{type:"selector"}},init:function(){function e(){var e=t.renderer.getContext();e&&(r.cubeMapSize=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),r.material=new i.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:o,fragmentShader:s,side:i.DoubleSide}),r.quad=new i.Mesh(new i.PlaneBufferGeometry(1,1),r.material),r.quad.visible=!1,r.camera=new i.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),r.canvas=document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),t.camera&&t.camera.add(r.quad),r.onKeyDown=r.onKeyDown.bind(r),r.onCameraActive=r.onCameraActive.bind(r),t.addEventListener("camera-set-active",r.onCameraActive))}var t=this.el,r=this;t.renderer?e():t.addEventListener("render-target-loaded",e)},getRenderTarget:function(e,t){return new i.WebGLRenderTarget(e,t,{minFilter:i.LinearFilter,magFilter:i.LinearFilter,wrapS:i.ClampToEdgeWrapping,wrapT:i.ClampToEdgeWrapping,format:i.RGBAFormat,type:i.UnsignedByteType})},resize:function(e,t){this.quad.scale.set(e,t,1),this.camera.left=-1*e/2,this.camera.right=e/2,this.camera.top=t/2,this.camera.bottom=-1*t/2,this.camera.updateProjectionMatrix(),this.canvas.width=e,this.canvas.height=t},play:function(){window.addEventListener("keydown",this.onKeyDown)},onCameraActive:function(e){var t=this.quad.parent;t&&t.remove(this.quad),e.detail.cameraEl.getObject3D("camera").add(this.quad)},onKeyDown:function(e){var t=83===e.keyCode&&e.ctrlKey&&e.altKey;if(this.data&&t){var r=e.shiftKey?"equirectangular":"perspective";this.capture(r)}},setCapture:function(e){var t,r,n,o=this.el;return"perspective"===e?(this.quad.visible=!1,r=this.data.camera&&this.data.camera.components.camera.camera||o.camera,t={width:this.data.width,height:this.data.height}):(r=this.camera,r.position.copy(o.camera.getWorldPosition()),r.rotation.copy(o.camera.getWorldRotation()),n=new i.CubeCamera(o.camera.near,o.camera.far,Math.min(this.cubeMapSize,2048)),n.position.copy(o.camera.getWorldPosition()),n.rotation.copy(o.camera.getWorldRotation()),n.updateCubeMap(o.renderer,o.object3D),this.quad.material.uniforms.map.value=n.renderTarget.texture,t={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:r,size:t,projection:e}},capture:function(e){var t=this.setCapture(e);this.renderCapture(t.camera,t.size,t.projection),this.saveCapture()},getCanvas:function(e){var t=this.setCapture(e);return this.renderCapture(t.camera,t.size,t.projection),this.canvas},renderCapture:function(e,t,r){var n,i,o,s=this.el.renderer.autoClear,a=this.el,c=this.el.renderer;i=this.getRenderTarget(t.width,t.height),o=new Uint8Array(4*t.width*t.height),this.resize(t.width,t.height),c.autoClear=!0,c.render(a.object3D,e,i,!0),c.autoClear=s,c.readRenderTargetPixels(i,0,0,t.width,t.height,o),"perspective"===r&&(o=this.flipPixelsVertically(o,t.width,t.height)),n=new ImageData(new Uint8ClampedArray(o),t.width,t.height),this.quad.visible=!1,this.ctx.putImageData(n,0,0)},flipPixelsVertically:function(e,t,r){for(var n=e.slice(0),i=0;i<t;++i)for(var o=0;o<r;++o)n[4*i+o*t*4]=e[4*i+(r-o)*t*4],n[4*i+1+o*t*4]=e[4*i+1+(r-o)*t*4],n[4*i+2+o*t*4]=e[4*i+2+(r-o)*t*4],n[4*i+3+o*t*4]=e[4*i+3+(r-o)*t*4];return n},saveCapture:function(){this.canvas.toBlob(function(e){var t="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",r=document.createElement("a"),n=URL.createObjectURL(e);r.href=n,r.setAttribute("download",t),r.innerHTML="downloading...",r.style.display="none",document.body.appendChild(r),setTimeout(function(){r.click(),document.body.removeChild(r)},1)},"image/png")}})},{"../../core/component":102,"../../lib/three":150}],82:[function(e,t,r){function n(e){var t=new l(e.renderer),r=new a(e),n=e.isMobile?[]:[t,r];return new o({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:n})}var i=e("../../core/component").registerComponent,o=e("../../../vendor/rStats"),s=e("../../utils");e("../../../vendor/rStats.extras"),e("../../lib/rStatsAframe");var a=window.aframeStats,c=s.bind,l=window.threeStats;t.exports.Component=i("stats",{schema:{default:!0},init:function(){var e=this.el;"false"!==s.getUrlParameter("stats")&&(this.stats=n(e),this.statsEl=document.querySelector(".rs-base"),this.hideBound=c(this.hide,this),this.showBound=c(this.show,this),e.addEventListener("enter-vr",this.hideBound),e.addEventListener("exit-vr",this.showBound))},update:function(){if(this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var e=this.stats;e&&(e("rAF").tick(),e("FPS").frame(),e().update())},hide:function(){this.statsEl.classList.add("a-hidden")},show:function(){this.statsEl.classList.remove("a-hidden")}})},{"../../../vendor/rStats":180,"../../../vendor/rStats.extras":179,"../../core/component":102,"../../lib/rStatsAframe":149,"../../utils":172}],83:[function(e,t,r){function n(e){var t,r;return r=document.createElement("div"),r.classList.add(l),r.setAttribute(s.AFRAME_INJECTED,""),t=document.createElement("button"),t.className=u,t.setAttribute("title","Enter VR mode with a headset or fullscreen mode on a desktop. Visit https://webvr.rocks or https://webvr.info for more information."),t.setAttribute(s.AFRAME_INJECTED,""),r.appendChild(t),t.addEventListener("click",function(t){e(),t.stopPropagation()}),r}function i(e){var t=document.createElement("div");t.className=d,t.classList.add(h),t.setAttribute(s.AFRAME_INJECTED,"");var r=document.createElement("button");return r.setAttribute(s.AFRAME_INJECTED,""),r.innerHTML="Exit VR",r.addEventListener("click",e),t.appendChild(r),t}var o=e("../../core/component").registerComponent,s=e("../../constants/"),a=e("../../utils/"),c=a.bind,l="a-enter-vr",u="a-enter-vr-button",h="a-hidden",d="a-orientation-modal";t.exports.Component=o("vr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0}},init:function(){var e=this,t=this.el;"false"!==a.getUrlParameter("ui")&&(this.insideLoader=!1,this.enterVREl=null,this.orientationModalEl=null,this.bindMethods(),t.addEventListener("enter-vr",this.updateEnterVRInterface),t.addEventListener("exit-vr",this.updateEnterVRInterface),window.addEventListener("message",function(t){"loaderReady"===t.data.type&&(e.insideLoader=!0,e.remove())}),window.addEventListener("orientationchange",this.toggleOrientationModalIfNeeded))},bindMethods:function(){this.onEnterVRButtonClick=c(this.onEnterVRButtonClick,this),this.onModalClick=c(this.onModalClick,this),this.toggleOrientationModalIfNeeded=c(this.toggleOrientationModalIfNeeded,this),this.updateEnterVRInterface=c(this.updateEnterVRInterface,this)},onModalClick:function(){this.el.exitVR()},onEnterVRButtonClick:function(){this.el.enterVR()},update:function(){var e=this.el;if(!this.data.enabled||this.insideLoader||"false"===a.getUrlParameter("ui"))return this.remove();this.enterVREl||this.orientationModalEl||(this.enterVREl=n(this.onEnterVRButtonClick),e.appendChild(this.enterVREl),this.orientationModalEl=i(this.onModalClick),e.appendChild(this.orientationModalEl),this.updateEnterVRInterface())},remove:function(){[this.enterVREl,this.orientationModalEl].forEach(function(e){e&&e.parentNode&&e.parentNode.removeChild(e)})},updateEnterVRInterface:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){var e=this.el;this.enterVREl&&(e.is("vr-mode")?this.enterVREl.classList.add(h):this.enterVREl.classList.remove(h))},toggleOrientationModalIfNeeded:function(){var e=this.el,t=this.orientationModalEl;t&&e.isMobile&&(!a.device.isLandscape()&&e.is("vr-mode")?t.classList.remove(h):t.classList.add(h))}})},{"../../constants/":93,"../../core/component":102,"../../utils/":172}],84:[function(e,t,r){var n=e("../core/component"),i=e("../lib/three"),o=e("../utils/bind"),s=n.registerComponent;t.exports.Component=s("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=o(this.update,this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var e=this.data;this.updateDescendants(e.cast,e.receive)},remove:function(){this.el.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(e,t){var r=this.el.sceneEl;this.el.object3D.traverse(function(n){if(n instanceof i.Mesh&&(n.castShadow=e,n.receiveShadow=t,r.hasLoaded&&n.material))for(var o=Array.isArray(n.material)?n.material:[n.material],s=0;s<o.length;s++)o[s].needsUpdate=!0})}})},{"../core/component":102,"../lib/three":150,"../utils/bind":166}],85:[function(e,t,r){var n=e("../core/component").registerComponent,i=e("../utils/debug"),o=e("../utils/bind"),s=e("../lib/three"),a=i("components:sound:warn");t.exports.Component=n("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){this.listener=null,this.audioLoader=new s.AudioLoader,this.pool=new s.Group,this.loaded=!1,this.mustPlay=!1,this.playSound=o(this.playSound,this)},update:function(e){var t=this.data,r=t.src!==e.src;if(r){if(!t.src)return void a("Audio source was not specified with `src`");this.setupSound()}if(this.pool.children.forEach(function(e){t.positional&&(e.setDistanceModel(t.distanceModel),e.setMaxDistance(t.maxDistance),e.setRefDistance(t.refDistance),e.setRolloffFactor(t.rolloffFactor)),e.setLoop(t.loop),e.setVolume(t.volume),e.isPaused=!1}),t.on!==e.on&&this.updateEventListener(e.on),r){var n=this;this.loaded=!1,this.audioLoader.load(t.src,function(e){n.pool.children.forEach(function(t){t.setBuffer(e)}),n.loaded=!0,s.Cache.remove(t.src),(n.data.autoplay||n.mustPlay)&&n.playSound(),n.el.emit("sound-loaded",n.evtDetail)})}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){this.removeEventListener(),this.el.removeObject3D(this.attrName);try{this.pool.children.forEach(function(e){e.disconnect()})}catch(e){a("Audio source not properly disconnected")}},updateEventListener:function(e){var t=this.el;e&&t.removeEventListener(e,this.playSound),t.addEventListener(this.data.on,this.playSound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSound)},setupSound:function(){var e=this,t=this.el,r=t.sceneEl;this.pool.children.length>0&&(this.stopSound(),t.removeObject3D("sound"));var n=this.listener=r.audioListener||new s.AudioListener;r.audioListener=n,r.camera&&r.camera.add(n),r.addEventListener("camera-set-active",function(e){e.detail.cameraEl.getObject3D("camera").add(n)}),this.pool=new s.Group;for(var i=0;i<this.data.poolSize;i++){var o=this.data.positional?new s.PositionalAudio(n):new s.Audio(n);this.pool.add(o)}t.setObject3D(this.attrName,this.pool),this.pool.children.forEach(function(r){r.onEnded=function(){r.isPlaying=!1,t.emit("sound-ended",e.evtDetail)}})},pauseSound:function(){this.isPlaying=!1,this.pool.children.forEach(function(e){e.source&&e.source.buffer&&e.isPlaying&&!e.isPaused&&(e.isPaused=!0,e.pause())})},playSound:function(){if(!this.loaded)return a("Sound not loaded yet. It will be played once it finished loading"),void(this.mustPlay=!0);var e=!1;if(this.isPlaying=!0,this.pool.children.forEach(function(t){if(!t.isPlaying&&t.buffer&&!e)return t.play(),t.isPaused=!1,void(e=!0)}),!e)return void a("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el);this.mustPlay=!1},stopSound:function(){this.isPlaying=!1,this.pool.children.forEach(function(e){e.source&&e.source.buffer&&e.stop()})}})},{"../core/component":102,"../lib/three":150,"../utils/bind":166,"../utils/debug":168}],86:[function(e,t,r){function n(e){switch(e){case"back":return f.FrontSide;case"double":return f.DoubleSide;default:return f.BackSide}}function i(e){return e=v.clone(e),void 0!==e.lineHeight&&(e.lineHeight=parseFloat(e.lineHeight),isFinite(e.lineHeight)||(e.lineHeight=void 0)),void 0!==e.width&&(e.width=parseFloat(e.width),isFinite(e.width)||(e.width=void 0)),e}function o(e,t){return new Promise(function(r,n){d(e,function(i,o){if(i)return y("Error loading font",e),void n(i);e.indexOf("/Roboto-msdf.json")>=0&&(t=30),t&&o.chars.map(function(e){e.yoffset+=t}),r(o)})})}function s(e){return new Promise(function(t,r){(new f.ImageLoader).load(e,function(e){t(e)},void 0,function(){y("Error loading font image",e),r(null)})})}function a(e,t,r){var n,i;return i=new g[t].Shader,i.el=e,i.init(r),i.update(r),n=i.material,n.transparent=r.transparent,{material:n,shader:i}}function c(e,t,r){return e||(.5+t)*r}function l(e){var t=0,r=0,n=0;return e.chars.map(function(e){t+=e.xadvance,e.id>=48&&e.id<=57&&(n++,r+=e.xadvance)}),n?r/n:t/e.chars.length}function u(){var e=this.cache={};this.get=function(t,r){return t in e?e[t]:(e[t]=r(),e[t])}}var h=e("three-bmfont-text"),d=e("load-bmfont"),p=e("../core/component").registerComponent,m=e("../core/shader"),f=e("../lib/three"),v=e("../utils/"),y=v.debug("components:text:error"),g=m.shaders,x=v.debug("components:text:warn"),M="https://cdn.aframe.io/fonts/",A={aileronsemibold:M+"Aileron-Semibold.fnt",dejavu:M+"DejaVu-sdf.fnt",exo2bold:M+"Exo2Bold.fnt",exo2semibold:M+"Exo2SemiBold.fnt",kelsonsans:M+"KelsonSans.fnt",monoid:M+"Monoid.fnt",mozillavr:M+"mozillavr.fnt",roboto:M+"Roboto-msdf.json",sourcecodepro:M+"SourceCodePro.fnt"},w=["roboto"];t.exports.FONTS=A;var E=new u,b={},T={};t.exports.Component=p("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:"roboto"},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},negate:{type:"boolean",default:!0},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:g},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},xOffset:{type:"number",default:0},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.shaderData={},this.geometry=h(),this.createOrUpdateMaterial(),this.mesh=new f.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh)},update:function(e){var t=i(this.data),r=this.currentFont,n=this.getFontImageSrc();if(T[n]?this.texture=T[n]:(this.texture=T[n]=new f.Texture,this.texture.anisotropy=16),this.createOrUpdateMaterial(),e.font!==t.font)return void this.updateFont();r&&(this.updateGeometry(this.geometry,t,r),this.updateLayout(t))},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var e,t,r,i=this.data,o=this.material,s=this.shaderData;if(r=i.shader,-1!==w.indexOf(i.font)||i.font.indexOf("-msdf.")>=0?r="msdf":i.font in A&&-1===w.indexOf(i.font)&&(r="sdf"),e=(this.shaderObject&&this.shaderObject.name)!==r,s.alphaTest=i.alphaTest,s.color=i.color,s.map=this.texture,s.opacity=i.opacity,s.side=n(i.side),s.transparent=i.transparent,s.negate=i.negate,!e)return this.shaderObject.update(s),o.transparent=s.transparent,void(o.side=s.side);t=a(this.el,r,s),this.material=t.material,this.shaderObject=t.shader,this.material.side=s.side,this.mesh&&(this.mesh.material=this.material)},updateFont:function(){var e,t=this.data,r=this.el,n=this.geometry,a=this;t.font||x("No font specified. Using the default font."),this.mesh.visible=!1,e=this.lookupFont(t.font||"roboto")||t.font,E.get(e,function(){return o(e,t.yOffset)}).then(function(o){var c,u;if(1!==o.pages.length)throw new Error("Currently only single-page bitmap fonts are supported.");b[e]||(o.widthFactor=b[o]=l(o)),c=i(t),a.updateGeometry(n,a.data,o),a.currentFont=o,a.updateLayout(c),u=a.getFontImageSrc(),E.get(u,function(){return s(u)}).then(function(e){var n=a.texture;n.image=e,n.needsUpdate=!0,T[u]=n,a.texture=n,a.mesh.visible=!0,r.emit("textfontset",{font:t.font,fontObj:o})}).catch(function(e){throw y(e),e})}).catch(function(e){throw y(e),e})},getFontImageSrc:function(){var e=this.lookupFont(this.data.font||"roboto")||this.data.font;return this.data.fontImage||e.replace(/(\.fnt)|(\.json)/,".png")},updateLayout:function(e){var t,r,n,i,o,s,a,l,u=this.el,h=this.geometry,d=u.getAttribute("geometry"),p=h.layout,m=this.mesh;if(d=u.getAttribute("geometry"),s=e.width||d&&d.width||1,i=c(e.wrapPixels,e.wrapCount,this.currentFont.widthFactor),o=s/i,n=o*(p.height+p.descender),d&&(d.width||u.setAttribute("geometry","width",s),d.height||u.setAttribute("geometry","height",n)),"left"===(t="align"===e.anchor?e.align:e.anchor))a=0;else if("right"===t)a=-1*p.width;else{if("center"!==t)throw new TypeError("Invalid text.anchor property value",t);a=-1*p.width/2}if("bottom"===(r=e.baseline))l=0;else if("top"===r)l=-1*p.height+p.ascender;else{if("center"!==r)throw new TypeError("Invalid text.baseline property value",r);l=-1*p.height/2}m.position.x=a*o+e.xOffset,m.position.y=l*o,m.position.z=e.zOffset,m.scale.set(o,-1*o,o),this.geometry.computeBoundingSphere()},lookupFont:function(e){return A[e]},updateGeometry:function(e,t,r){e.update(v.extend({},t,{font:r,width:c(t.wrapPixels,t.wrapCount,r.widthFactor),text:t.value.toString().replace(/\\n/g,"\n").replace(/\\t/g,"\t"),lineHeight:t.lineHeight||r.common.lineHeight}))}})},{"../core/component":102,"../core/shader":111,"../lib/three":150,"../utils/":172,"load-bmfont":23,"three-bmfont-text":36}],87:[function(e,t,r){var n=e("../core/component").registerComponent,i=e("../utils/tracked-controls"),o=e("../constants").DEFAULT_CAMERA_HEIGHT,s=e("../lib/three"),a=e("../constants").DEFAULT_HANDEDNESS,c={x:.175,y:-.3,z:-.03},l={x:0,y:0,z:-.175};t.exports.Component=n("tracked-controls",{schema:{controller:{default:0},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},orientationOffset:{type:"vec3"},armModel:{default:!0},headElement:{type:"selector"}},init:function(){this.axis=[0,0,0],this.buttonStates={},this.changedAxes=[],this.targetControllerNumber=this.data.controller,this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes},this.deltaControllerPosition=new s.Vector3,this.controllerQuaternion=new s.Quaternion,this.controllerEuler=new s.Euler,this.updateGamepad(),this.el.object3D.matrixAutoUpdate=!1},tick:function(e,t){var r=this.el.getObject3D("mesh");r&&r.update&&r.update(t/1e3),this.updateGamepad(),this.updatePose(),this.updateButtons()},defaultUserHeight:function(){return o},getHeadElement:function(){return this.data.headElement||this.el.sceneEl.camera.el},updateGamepad:function(){var e=this.data,t=i.findMatchingController(this.system.controllers,e.id,e.idPrefix,e.hand,e.controller);this.controller=t},applyArmModel:function(e){var t,r,n,i,o,s=this.controller,u=this.controllerEuler,h=this.controllerQuaternion,d=this.deltaControllerPosition;r=this.getHeadElement(),n=r.object3D,o=this.defaultUserHeight(),i=s.pose,t=(s?s.hand:void 0)||a,e.copy(n.position),d.set(c.x*("left"===t?-1:"right"===t?1:0),c.y,c.z),d.multiplyScalar(o),d.applyAxisAngle(n.up,n.rotation.y),e.add(d),d.set(l.x,l.y,l.z),d.multiplyScalar(o),i.orientation?h.fromArray(i.orientation):h.copy(n.quaternion),u.setFromQuaternion(h),u.set(u.x,u.y,0),d.applyEuler(u),e.add(d)},updatePose:function(){var e,t,r=this.controller,n=this.data,i=this.el.object3D,o=this.system.vrDisplay;r&&(e=r.pose,e.position?i.position.fromArray(e.position):n.armModel&&this.applyArmModel(i.position),e.orientation&&i.quaternion.fromArray(e.orientation),o&&e.position&&(t=this.el.sceneEl.renderer.vr.getStandingMatrix(),i.matrixAutoUpdate=!1,i.matrix.compose(i.position,i.quaternion,i.scale),i.matrix.multiplyMatrices(t,i.matrix),i.matrix.decompose(i.position,i.quaternion,i.scale)),i.rotateX(this.data.orientationOffset.x*s.Math.DEG2RAD),i.rotateY(this.data.orientationOffset.y*s.Math.DEG2RAD),i.rotateZ(this.data.orientationOffset.z*s.Math.DEG2RAD),i.updateMatrix(),i.matrixWorldNeedsUpdate=!0)},updateButtons:function(){var e,t,r=this.controller;if(r){for(t=0;t<r.buttons.length;++t)this.buttonStates[t]||(this.buttonStates[t]={pressed:!1,touched:!1,value:0}),e=r.buttons[t],this.handleButton(t,e);this.handleAxes()}},handleButton:function(e,t){return!!(this.handlePress(e,t)|this.handleTouch(e,t)|this.handleValue(e,t))&&(this.el.emit("buttonchanged",{id:e,state:t}),!0)},handleAxes:function(){var e,t=!1,r=this.controller.axes,n=this.axis,i=this.changedAxes;for(this.changedAxes.length=0,e=0;e<r.length;++e)i.push(n[e]!==r[e]),i[e]&&(t=!0);if(!t)return!1;for(this.axis.length=0,e=0;e<r.length;e++)this.axis.push(r[e]);return this.el.emit("axismove",this.axisMoveEventDetail),!0},handlePress:function(e,t){var r,n=this.buttonStates[e];return t.pressed!==n.pressed&&(r=t.pressed?"down":"up",this.el.emit("button"+r,{id:e,state:t}),n.pressed=t.pressed,!0)},handleTouch:function(e,t){var r,n=this.buttonStates[e];return t.touched!==n.touched&&(r=t.touched?"start":"end",this.el.emit("touch"+r,{id:e,state:t},!0,{touches:[]}),n.touched=t.touched,!0)},handleValue:function(e,t){var r=this.buttonStates[e];return t.value!==r.value&&(r.value=t.value,!0)}})},{"../constants":93,"../core/component":102,"../lib/three":150,"../utils/tracked-controls":178}],88:[function(e,t,r){var n=e("../core/component").registerComponent;t.exports.Component=n("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}})},{"../core/component":102}],89:[function(e,t,r){var n=e("../core/component").registerComponent,i=e("../utils/"),o=i.bind,s=e("../utils/tracked-controls"),a=s.checkControllerPresentAndSetup,c=s.emitIfAxesChanged,l=s.onButtonEvent;t.exports.Component=n("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger","grip","menu","system"]},init:function(){var e=this;this.animationActive="pointing",this.checkControllerPresentAndSetup=a,this.controllerPresent=!1,this.emitIfAxesChanged=c,this.lastControllerCheck=0,this.onButtonChanged=o(this.onButtonChanged,this),this.onButtonDown=function(t){l(t.detail.id,"down",e)},this.onButtonUp=function(t){l(t.detail.id,"up",e)},this.onButtonTouchEnd=function(t){l(t.detail.id,"touchend",e)},this.onButtonTouchStart=function(t){l(t.detail.id,"touchstart",e)},this.onAxisMoved=o(this.onAxisMoved,this),this.previousButtonValues={},this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=o(this.onModelLoaded,this),this.onControllersUpdate=o(this.onControllersUpdate,this),this.checkIfControllerPresent=o(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=o(this.removeControllersUpdateListener,this),this.onAxisMoved=o(this.onAxisMoved,this)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("model-loaded",this.onModelLoaded),e.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("model-loaded",this.onModelLoaded),e.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var e=this.data,t="right"===e.hand?0:"left"===e.hand?1:2;this.checkControllerPresentAndSetup(this,"OpenVR ",{index:t})},injectTrackedControls:function(){var e=this.el,t=this.data;e.setAttribute("tracked-controls",{idPrefix:"OpenVR ",controller:"right"===t.hand?0:"left"===t.hand?1:2,orientationOffset:t.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:"https://cdn.aframe.io/controllers/vive/vr_controller_vive.obj",mtl:"https://cdn.aframe.io/controllers/vive/vr_controller_vive.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(e){var t,r=this.mapping.buttons[e.detail.id],n=this.buttonMeshes;r&&("trigger"===r&&(t=e.detail.state.value,n&&n.trigger&&(n.trigger.rotation.x=-t*(Math.PI/12))),this.el.emit(r+"changed",e.detail.state))},onModelLoaded:function(e){var t,r=e.detail.model,n=this;this.data.model&&(t=this.buttonMeshes={},t.grip={left:r.getObjectByName("leftgrip"),right:r.getObjectByName("rightgrip")},t.menu=r.getObjectByName("menubutton"),t.system=r.getObjectByName("systembutton"),t.trackpad=r.getObjectByName("touchpad"),t.trigger=r.getObjectByName("trigger"),Object.keys(t).forEach(function(e){n.setButtonColor(e,n.data.buttonColor)}),r.position.set(0,-.015,.04))},onAxisMoved:function(e){this.emitIfAxesChanged(this,this.mapping.axes,e)},updateModel:function(e,t){var r;this.data.model&&(-1!==t.indexOf("touch")||(r="up"===t?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(e,r)))},setButtonColor:function(e,t){var r=this.buttonMeshes;if(r)return"grip"===e?(r.grip.left.material.color.set(t),void r.grip.right.material.color.set(t)):void r[e].material.color.set(t)}})},{"../core/component":102,"../utils/":172,"../utils/tracked-controls":178}],90:[function(e,t,r){function n(e){var t;for(t in e)return!1;return!0}var i=e("../constants").keyboardevent.KEYCODE_TO_CODE,o=e("../core/component").registerComponent,s=e("../lib/three"),a=e("../utils/"),c=a.bind,l=a.shouldCaptureKeyEvent,u=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];t.exports.Component=o("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},easing:{default:20},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},init:function(){this.keys={},this.position={},this.velocity=new s.Vector3,this.onBlur=c(this.onBlur,this),this.onFocus=c(this.onFocus,this),this.onKeyDown=c(this.onKeyDown,this),this.onKeyUp=c(this.onKeyUp,this),this.onVisibilityChange=c(this.onVisibilityChange,this),this.attachVisibilityEventListeners()},tick:function(e,t){var r,i,o=this.data,s=this.el,a=this.position,c=this.velocity;(c[o.adAxis]||c[o.wsAxis]||!n(this.keys))&&(t/=1e3,this.updateVelocity(t),(c[o.adAxis]||c[o.wsAxis])&&(r=s.getAttribute("position"),i=this.getMovementVector(t),a.x=r.x+i.x,a.y=r.y+i.y,a.z=r.z+i.z,s.setAttribute("position",a)))},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(e){var t,r,n,i,o,s=this.data,a=this.keys,c=this.velocity;if(r=s.adAxis,i=s.wsAxis,e>.2)return c[r]=0,void(c[i]=0);0!==c[r]&&(c[r]-=c[r]*s.easing*e),0!==c[i]&&(c[i]-=c[i]*s.easing*e),Math.abs(c[r])<1e-5&&(c[r]=0),Math.abs(c[i])<1e-5&&(c[i]=0),s.enabled&&(t=s.acceleration,s.adEnabled&&(n=s.adInverted?-1:1,(a.KeyA||a.ArrowLeft)&&(c[r]-=n*t*e),(a.KeyD||a.ArrowRight)&&(c[r]+=n*t*e)),s.wsEnabled&&(o=s.wsInverted?-1:1,(a.KeyW||a.ArrowUp)&&(c[i]-=o*t*e),(a.KeyS||a.ArrowDown)&&(c[i]+=o*t*e)))},getMovementVector:function(){var e=new s.Vector3(0,0,0),t=new s.Euler(0,0,0,"YXZ");return function(r){var n,i=this.el.getAttribute("rotation"),o=this.velocity;return e.copy(o),e.multiplyScalar(r),i?(n=this.data.fly?i.x:0,t.set(s.Math.degToRad(n),s.Math.degToRad(i.y),0),e.applyEuler(t),e):e}}(),attachVisibilityEventListeners:function(){window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(e){var t;l(e)&&(t=e.code||i[e.keyCode],-1!==u.indexOf(t)&&(this.keys[t]=!0))},onKeyUp:function(e){var t;t=e.code||i[e.keyCode],delete this.keys[t]}})},{"../constants":93,"../core/component":102,"../lib/three":150,"../utils/":172}],91:[function(e,t,r){var n=e("../utils/bind"),i=e("../core/component").registerComponent,o=e("../utils/tracked-controls"),s=o.onButtonEvent,a=e("../utils/"),c=a.debug("components:windows-motion-controls:debug"),l=a.debug("components:windows-motion-controls:warn"),u=e("../constants").DEFAULT_HANDEDNESS,h={left:"left.glb",right:"right.glb",default:"universal.glb"},d=/([0-9a-zA-Z]+-[0-9a-zA-Z]+)$/;t.exports.Component=i("windows-motion-controls",{schema:{hand:{default:u},pair:{default:0},model:{default:!0},hideDisconnected:{default:!0}},mapping:{axes:{thumbstick:[0,1],trackpad:[2,3]},buttons:["thumbstick","trigger","grip","menu","trackpad"],axisMeshNames:["THUMBSTICK_X","THUMBSTICK_Y","TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",grip:"GRASP",thumbstick:"THUMBSTICK_PRESS",trackpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},bindMethods:function(){this.onModelError=n(this.onModelError,this),this.onModelLoaded=n(this.onModelLoaded,this),this.onControllersUpdate=n(this.onControllersUpdate,this),this.checkIfControllerPresent=n(this.checkIfControllerPresent,this),this.onAxisMoved=n(this.onAxisMoved,this)},init:function(){var e=this,t=this.el;this.onButtonChanged=n(this.onButtonChanged,this),this.onButtonDown=function(t){s(t.detail.id,"down",e)},this.onButtonUp=function(t){s(t.detail.id,"up",e)},this.onButtonTouchStart=function(t){s(t.detail.id,"touchstart",e)},this.onButtonTouchEnd=function(t){s(t.detail.id,"touchend",e)},this.onControllerConnected=function(){e.setModelVisibility(!0)},this.onControllerDisconnected=function(){e.setModelVisibility(!1)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new THREE.Vector3,direction:new THREE.Vector3(0,0,-1),createdFromMesh:!1},this.emitIfAxesChanged=o.emitIfAxesChanged,this.checkControllerPresentAndSetup=o.checkControllerPresentAndSetup,t.addEventListener("controllerconnected",this.onControllerConnected),t.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var e=this.el;e.addEventListener("buttonchanged",this.onButtonChanged),e.addEventListener("buttondown",this.onButtonDown),e.addEventListener("buttonup",this.onButtonUp),e.addEventListener("touchstart",this.onButtonTouchStart),e.addEventListener("touchend",this.onButtonTouchEnd),e.addEventListener("axismove",this.onAxisMoved),e.addEventListener("model-error",this.onModelError),e.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var e=this.el;e.removeEventListener("buttonchanged",this.onButtonChanged),e.removeEventListener("buttondown",this.onButtonDown),e.removeEventListener("buttonup",this.onButtonUp),e.removeEventListener("touchstart",this.onButtonTouchStart),e.removeEventListener("touchend",this.onButtonTouchEnd),e.removeEventListener("axismove",this.onAxisMoved),e.removeEventListener("model-error",this.onModelError),e.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,"Spatial Controller (Spatial Interaction Source) ",{hand:this.data.hand,index:this.data.pair})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(!this.data.model||this.rayOrigin.createdFromMesh)return void this.modelReady();var e=this.createControllerModelUrl();this.loadModel(e)},createControllerModelUrl:function(e){var t,r=this.el.components["tracked-controls"],n=r?r.controller:null,i="default",o=this.data.hand;if(n&&(o=n.hand,!e)){var s=n.id.match(d);i=s&&s[0]||i}return t=h[o]||h.default,"https://cdn.aframe.io/controllers/microsoft/"+i+"/"+t},injectTrackedControls:function(){var e=this.data;this.el.setAttribute("tracked-controls",{idPrefix:"Spatial Controller (Spatial Interaction Source) ",controller:e.pair,hand:e.hand,armModel:!1}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(e){var t=this.createControllerModelUrl(!0);e.detail.src!==t?(l("Failed to load controller model for device, attempting to load default."),this.loadModel(t)):l("Failed to load default controller model.")},loadModel:function(e){this.el.setAttribute("gltf-model","url("+e+")")},onModelLoaded:function(e){function t(e,t){for(var r=0,n=e.children.length;r<n;r++){var i=e.children[r];if(i&&i.name===t)return i}}var r,n,i,o,s=this.controllerModel=e.detail.model,a=this.loadedMeshInfo;if(c("Processing model"),a.buttonMeshes={},a.axisMeshes={},s){for(r=0;r<this.mapping.buttons.length;r++)n=this.mapping.buttonMeshNames[this.mapping.buttons[r]],n?(i=s.getObjectByName(n),i?(o={index:r,value:t(i,"VALUE"),pressed:t(i,"PRESSED"),unpressed:t(i,"UNPRESSED")},o.value&&o.pressed&&o.unpressed?a.buttonMeshes[this.mapping.buttons[r]]=o:l("Missing button submesh under mesh with name: "+n+"(VALUE: "+!!o.value+", PRESSED: "+!!o.pressed+", UNPRESSED:"+!!o.unpressed+")")):l("Missing button mesh with name: "+n)):c("Skipping unknown button at index: "+r+" with mapped name: "+this.mapping.buttons[r]);for(r=0;r<this.mapping.axisMeshNames.length;r++)n=this.mapping.axisMeshNames[r],n?(i=s.getObjectByName(n),i?(o={index:r,value:t(i,"VALUE"),min:t(i,"MIN"),max:t(i,"MAX")},o.value&&o.min&&o.max?a.axisMeshes[r]=o:l("Missing axis submesh under mesh with name: "+n+"(VALUE: "+!!o.value+", MIN: "+!!o.min+", MAX:"+!!o.max+")")):l("Missing axis mesh with name: "+n)):c("Skipping unknown axis at index: "+r);this.calculateRayOriginFromMesh(s),this.setModelVisibility()}c("Model load complete.")},calculateRayOriginFromMesh:function(){var e=new THREE.Quaternion;return function(t){var r;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,r=t.getObjectByName(this.mapping.pointingPoseMeshName)){var n=t.parent;n&&(t.parent=null,t.updateMatrixWorld(!0),t.parent=n),r.getWorldPosition(this.rayOrigin.origin),r.getWorldQuaternion(e),this.rayOrigin.direction.applyQuaternion(e),n&&t.updateMatrixWorld(!0)}else c("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}}(),lerpAxisTransform:function(){var e=new THREE.Quaternion;return function(t,r){var n=this.loadedMeshInfo.axisMeshes[t];if(n){var i=n.min,o=n.max,s=n.value,a=.5*r+.5;s.setRotationFromQuaternion(e.copy(i.quaternion).slerp(o.quaternion,a)),s.position.lerpVectors(i.position,o.position,a)}}}(),lerpButtonTransform:function(){var e=new THREE.Quaternion;return function(t,r){var n=this.loadedMeshInfo.buttonMeshes[t];if(n){var i=n.unpressed,o=n.pressed,s=n.value;s.setRotationFromQuaternion(e.copy(i.quaternion).slerp(o.quaternion,r)),s.position.lerpVectors(i.position,o.position,r)}}}(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(e){var t=this.mapping.buttons[e.detail.id];t&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(t,e.detail.state.value),this.el.emit(t+"changed",e.detail.state))},onAxisMoved:function(e){var t=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var r=0;r<t;r++)this.lerpAxisTransform(r,e.detail.axis[r]||0);this.emitIfAxesChanged(this,this.mapping.axes,e)},setModelVisibility:function(e){var t=this.el.getObject3D("mesh");e=void 0!==e?e:this.modelVisible,this.modelVisible=e,t&&(t.visible=e)}})},{"../constants":93,"../core/component":102,"../utils/":172,"../utils/bind":166,"../utils/tracked-controls":178}],92:[function(e,t,r){var n=e("@tweenjs/tween.js"),i={alternate:"alternate",alternateReverse:"alternate-reverse",normal:"normal",reverse:"reverse"},o={linear:n.Easing.Linear.None,ease:n.Easing.Cubic.InOut,"ease-in":n.Easing.Cubic.In,"ease-out":n.Easing.Cubic.Out,"ease-in-out":n.Easing.Cubic.InOut,"ease-cubic":n.Easing.Cubic.In,"ease-in-cubic":n.Easing.Cubic.In,"ease-out-cubic":n.Easing.Cubic.Out,"ease-in-out-cubic":n.Easing.Cubic.InOut,"ease-quad":n.Easing.Quadratic.InOut,"ease-in-quad":n.Easing.Quadratic.In,"ease-out-quad":n.Easing.Quadratic.Out,"ease-in-out-quad":n.Easing.Quadratic.InOut,"ease-quart":n.Easing.Quartic.InOut,"ease-in-quart":n.Easing.Quartic.In,"ease-out-quart":n.Easing.Quartic.Out,"ease-in-out-quart":n.Easing.Quartic.InOut,"ease-quint":n.Easing.Quintic.InOut,"ease-in-quint":n.Easing.Quintic.In,"ease-out-quint":n.Easing.Quintic.Out,"ease-in-out-quint":n.Easing.Quintic.InOut,"ease-sine":n.Easing.Sinusoidal.InOut,"ease-in-sine":n.Easing.Sinusoidal.In,"ease-out-sine":n.Easing.Sinusoidal.Out,"ease-in-out-sine":n.Easing.Sinusoidal.InOut,"ease-expo":n.Easing.Exponential.InOut,"ease-in-expo":n.Easing.Exponential.In,"ease-out-expo":n.Easing.Exponential.Out,"ease-in-out-expo":n.Easing.Exponential.InOut,"ease-circ":n.Easing.Circular.InOut,"ease-in-circ":n.Easing.Circular.In,"ease-out-circ":n.Easing.Circular.Out,"ease-in-out-circ":n.Easing.Circular.InOut,"ease-elastic":n.Easing.Elastic.InOut,"ease-in-elastic":n.Easing.Elastic.In,"ease-out-elastic":n.Easing.Elastic.Out,"ease-in-out-elastic":n.Easing.Elastic.InOut,"ease-back":n.Easing.Back.InOut,"ease-in-back":n.Easing.Back.In,"ease-out-back":n.Easing.Back.Out,"ease-in-out-back":n.Easing.Back.InOut,"ease-bounce":n.Easing.Bounce.InOut,"ease-in-bounce":n.Easing.Bounce.In,"ease-out-bounce":n.Easing.Bounce.Out,"ease-in-out-bounce":n.Easing.Bounce.InOut},s={backwards:"backwards",both:"both",forwards:"forwards",none:"none"},a={indefinite:"indefinite"},c={attribute:"rotation",begin:"",end:"",delay:0,dur:1e3,easing:"ease",direction:i.normal,fill:s.forwards,from:void 0,repeat:0,to:void 0};t.exports.defaults=c,t.exports.directions=i,t.exports.easingFunctions=o,t.exports.fills=s,t.exports.repeats=a},{"@tweenjs/tween.js":1}],93:[function(e,t,r){t.exports={AFRAME_INJECTED:"aframe-injected",DEFAULT_CAMERA_HEIGHT:1.6,DEFAULT_HANDEDNESS:"right",animation:e("./animation"),keyboardevent:e("./keyboardevent")}},{"./animation":92,"./keyboardevent":94}],94:[function(e,t,r){t.exports={KEYCODE_TO_CODE:{38:"ArrowUp",37:"ArrowLeft",40:"ArrowDown",39:"ArrowRight",87:"KeyW",65:"KeyA",83:"KeyS",68:"KeyD"}}},{}],95:[function(e,t,r){function n(e){return y.extend({},e)}function i(e,t,r,n,i){function a(){g=new v.Color(r||e.getAttribute(t)),M=new v.Color(n),f=function(r){y.length>1&&e.setAttribute(y[0],y[1],l(r)),e.setAttribute(t,l(r))}}var c,u,h,m,f,y=t.split("."),g={},M={};return 2===y.length?function(){var t=y[0],r=y[1],n=e.components[t],i=n&&n.schema;return i&&i[r]&&"color"===i[r].type}()?a():function(){m=y[0],h=y[1],u=e.components[m],u||(e.setAttribute(m,""),u=e.components[m]),c=u.schema,g[t]=void 0===r?x(e,t):r,g[t]=p(g[t],c[h]),M[t]=p(n,c[h]),f=function(r){t in r&&e.setAttribute(m,h,r[t])}}():n&&T(n)?function(){g=r?d.parse(r):i,M=d.parse(n),f=function(r){e.setAttribute(t,r)}}():-1!==["true","false"].indexOf(n)?function(){g[t]=void 0!==r&&o(r),g[t]=s(g[t]),M[t]=s(o(n)),f=function(r){e.setAttribute(t,!!r[t])}}():isNaN(n)?a():function(){g[t]=void 0===r?parseFloat(e.getAttribute(t)):parseFloat(r),M[t]=parseFloat(n),f=function(r){e.setAttribute(t,r[t])}}(),{from:g,partialSetAttribute:f,to:M}}function o(e){return"true"===e}function s(e){return e?1:0}function a(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function c(e){return Math.floor(255*Math.min(Math.abs(e),1))}function l(e){return"#"+["r","g","b"].map(function(t){return a(c(e[t]))}).join("")}var u=e("./a-node"),h=e("../constants/animation"),d=e("../utils/").coordinates,p=e("./schema").parseProperty,m=e("./a-register-element").registerElement,f=e("@tweenjs/tween.js"),v=e("../lib/three"),y=e("../utils/"),g=y.bind,x=y.entity.getComponentProperty,M=h.defaults,A=h.directions,w=h.easingFunctions,E=h.fills,b=h.repeats,T=d.isCoordinates,L=y.debug("core:a-animation:warn"),N=!1;t.exports.AAnimation=m("a-animation",{prototype:Object.create(u.prototype,{createdCallback:{value:function(){this.bindMethods(),this.isRunning=!1,this.partialSetAttribute=function(){},this.tween=null,N||(L("<a-animation> has been deprecated and will be replaced by the animation component: https://www.npmjs.com/package/aframe-animation-component"),N=!0)}},attachedCallback:{value:function(){this.el=this.parentNode,this.handleMixinUpdate(),this.update(),this.load()}},attributeChangedCallback:{value:function(e,t,r){this.hasLoaded&&this.isRunning&&(this.stop(),this.handleMixinUpdate(),this.update())}},detachedCallback:{value:function(){this.isRunning&&this.stop()}},getTween:{value:function(){var e,t,r,o,s=this,a=s.data,c=s.el,l=a.attribute,u=parseInt(a.delay,10),h=x(c,l),d=s.getDirection(a.direction),p=w[a.easing],m=a.fill,v=a.repeat===b.indefinite?1/0:0,y=!1;return e=i(c,l,a.from||s.initialValue,a.to,h),t=e.from,r=e.to,s.partialSetAttribute=e.partialSetAttribute,void 0===s.count&&(s.count=v===1/0?0:parseInt(a.repeat,10)),isNaN(u)&&(u=0),s.initialValue=s.initialValue||n(h),v===1/0&&m===E.forwards&&-1!==[A.alternate,A.alternateReverse].indexOf(a.direction)&&(y=!0),d===A.reverse&&(o=r,r=n(t),t=n(o)),-1!==[E.backwards,E.both].indexOf(m)&&s.partialSetAttribute(t),new f.Tween(n(t)).to(r,a.dur).delay(u).easing(p).repeat(v).yoyo(y).onUpdate(function(){s.partialSetAttribute(this)}).onComplete(g(s.onCompleted,s))}},update:{value:function(){var e=this.data;"infinite"===e.repeat&&console.warn("Using 'infinite' as 'repeat' value is invalid.  Use 'indefinite' instead."),""===e.begin||isNaN(e.begin)||(console.warn("Using 'begin' to specify a delay is deprecated. Use 'delay' instead."),e.delay=e.begin,e.begin="");var t=e.begin,r=e.end;this.evt&&this.removeEventListeners(this.evt),this.evt={begin:t,end:r},this.addEventListeners(this.evt),""===t&&(this.stop(),this.start())},writable:window.debug},onCompleted:{value:function(){var e=this.data;if(this.isRunning=!1,-1!==[E.backwards,E.none].indexOf(e.fill)&&this.partialSetAttribute(this.initialValue),0===this.count)return this.count=void 0,void this.emit("animationend");this.isRunning=!1,this.count--,this.start()}},start:{value:function(){var e=this;if(!this.el.hasLoaded)return void this.el.addEventListener("loaded",function(){e.start()});!this.isRunning&&this.el.isPlaying&&(this.tween=this.getTween(),this.isRunning=!0,this.tween.start(),this.emit("animationstart"))},writable:!0},stop:{value:function(){var e=this.tween;e&&(e.stop(),this.isRunning=!1,-1!==[E.backwards,E.none].indexOf(this.data.fill)&&this.partialSetAttribute(this.initialValue),this.emit("animationstop"))},writable:!0},getDirection:{value:function(e){return e===A.alternate?(this.prevDirection=this.prevDirection===A.normal?A.reverse:A.normal,this.prevDirection):e===A.alternateReverse?(this.prevDirection=this.prevDirection===A.reverse?A.normal:A.reverse,this.prevDirection):e}},bindMethods:{value:function(){this.start=g(this.start,this),this.stop=g(this.stop,this),this.onStateAdded=g(this.onStateAdded,this),this.onStateRemoved=g(this.onStateRemoved,this)}},addEventListeners:{value:function(e){var t=this.el,r=this;y.splitString(e.begin).forEach(function(e){t.addEventListener(e,r.start)}),y.splitString(e.end).forEach(function(e){t.addEventListener(e,r.stop)}),""===e.begin&&t.addEventListener("play",this.start),t.addEventListener("pause",this.stop),t.addEventListener("stateadded",this.onStateAdded),t.addEventListener("stateremoved",this.onStateRemoved)}},removeEventListeners:{value:function(e){var t=this.el,r=this.start,n=this.stop;y.splitString(e.begin).forEach(function(e){t.removeEventListener(e,r)}),y.splitString(e.end).forEach(function(e){t.removeEventListener(e,n)}),t.removeEventListener("stateadded",this.onStateAdded),t.removeEventListener("stateremoved",this.onStateRemoved)}},onStateAdded:{value:function(e){e.detail===this.data.begin&&this.start()},writable:!0},onStateRemoved:{value:function(e){e.detail===this.data.begin&&this.stop()},writable:!0},handleMixinUpdate:{value:function(){var e,t,r,n={};r=document.querySelector("#"+this.getAttribute("mixin")),t=r?y.getElData(r,M):{},e=y.getElData(this,M),y.extend(n,M,t,e),this.data=n}}})}),t.exports.getAnimationValues=i},{"../constants/animation":92,"../lib/three":150,"../utils/":172,"./a-node":100,"./a-register-element":101,"./schema":110,"@tweenjs/tween.js":1}],96:[function(e,t,r){function n(e){if(e.hasAttribute("autoplay")||"auto"===e.getAttribute("preload"))return new Promise(function(t,r){function n(){for(var r=0,n=0;n<e.buffered.length;n++)r+=e.buffered.end(n)-e.buffered.start(n);r>=e.duration&&(d.Cache.files[e.getAttribute("src")]=e,t())}return 4===e.readyState?t():e.error?r():(e.addEventListener("loadeddata",n,!1),e.addEventListener("progress",n,!1),void e.addEventListener("error",r,!1))})}function i(e){var t=o(e);return t.tagName&&"video"===t.tagName.toLowerCase()&&(t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline","")),t!==e&&(e.parentNode.appendChild(t),e.parentNode.removeChild(e)),t}function o(e){var t;if(e.hasAttribute("crossorigin"))return e;if(null!==(t=e.getAttribute("src"))){if(-1===t.indexOf("://"))return e;if(s(t)===window.location.host)return e}return m('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin="anonymous">)',t),e.crossOrigin="anonymous",e.cloneNode(!0)}function s(e){var t=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0];return t.substring(0,t.indexOf(":"))}function a(e){var t=e.lastIndexOf(".");if(t>=0){var r=e.slice(t,e.length);if(".gltf"===r||".glb"===r)return"arraybuffer"}return"text"}var c=e("./a-node"),l=e("../utils/bind"),u=e("../utils/debug"),h=e("./a-register-element").registerElement,d=e("../lib/three"),p=new d.FileLoader,m=u("core:a-assets:warn");t.exports=h("a-assets",{prototype:Object.create(c.prototype,{createdCallback:{value:function(){this.isAssets=!0,this.fileLoader=p,this.timeout=null}},attachedCallback:{value:function(){var e,t,r,o,s,a,c=this,u=[];if(!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(s=this.querySelectorAll("img"),e=0;e<s.length;e++)o=i(s[e]),u.push(new Promise(function(t,r){d.Cache.files[s[e].getAttribute("src")]=o,o.onload=t,o.onerror=r}));for(r=this.querySelectorAll("audio, video"),e=0;e<r.length;e++)t=i(r[e]),t.src||t.srcObject||m("Audio/video asset has neither `src` nor `srcObject` attributes."),u.push(n(t));Promise.all(u).then(l(this.load,this)),a=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout(function(){c.hasLoaded||(m("Asset loading timed out in ",a,"ms"),c.emit("timeout"),c.load())},a)}},detachedCallback:{value:function(){this.timeout&&clearTimeout(this.timeout)}},load:{value:function(){c.prototype.load.call(this,null,function(e){return e.isAssetItem&&e.hasAttribute("src")})}}})}),h("a-asset-item",{prototype:Object.create(c.prototype,{createdCallback:{value:function(){this.data=null,this.isAssetItem=!0}},attachedCallback:{value:function(){var e=this,t=this.getAttribute("src");p.setResponseType(this.getAttribute("response-type")||a(t)),p.load(t,function(t){e.data=t,setTimeout(function(){c.prototype.load.call(e)})},function(t){e.emit("progress",{loadedBytes:t.loaded,totalBytes:t.total,xhr:t})},function(t){e.emit("error",{xhr:t})})}}})}),t.exports.inferResponseType=a},{"../lib/three":150,"../utils/bind":166,"../utils/debug":168,"./a-node":100,"./a-register-element":101}],97:[function(e,t,r){var n=e("../utils/debug"),i=e("./a-register-element").registerElement,o=n("core:cubemap:warn");t.exports=i("a-cubemap",{prototype:Object.create(window.HTMLElement.prototype,{attachedCallback:{value:function(){this.srcs=this.validate()},writable:window.debug},validate:{value:function(){var e,t=this.querySelectorAll("[src]"),r=[];if(6===t.length){for(e=0;e<t.length;e++)r.push(t[e].getAttribute("src"));return r}o("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")},writable:window.debug}})})},{"../utils/debug":168,"./a-register-element":101}],98:[function(e,t,r){function n(e,t){return!(!e.components[t]||!e.components[t].attrValue)||i(t,e.mixinEls)}function i(e,t){var r,n=!1;for(r=0;r<t.length&&!(n=t[r].hasAttribute(e));++r);return n}function o(e,t){return t?t.constructor===Object?p.extend(t,p.styleParser.parse(e||{})):e||t:e}function s(e){return-1!==e.indexOf(v)&&(e=p.split(e,v)[0]),!!u[e]}function a(e){var t=d.Math.radToDeg,r=e.object3D.rotation,n=e.rotationObj;return n.x=t(r.x),n.y=t(r.y),n.z=t(r.z),n}var c,l=e("./a-node"),u=e("./component").components,h=e("./a-register-element").registerElement,d=e("../lib/three"),p=e("../utils/"),m=p.debug("core:a-entity:debug"),f=p.debug("core:a-entity:warn"),v="__",y=["position","rotation","scale","visible"],g=Object.create(l.prototype,{createdCallback:{value:function(){this.components={},this.initializingComponents={},this.componentsToUpdate={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new d.Group,this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.rotationObj={},this.states=[]}},attributeChangedCallback:{value:function(e,t,r){var n=this.components[e];if(n&&n.justInitialized&&""===r)return void delete n.justInitialized;(n||null!==r)&&this.setEntityAttribute(e,t,r)}},attachedCallback:{value:function(){var e,t=this.sceneEl,r=this;if(this.addToParent(),!this.isScene){if(!t)return void this.load();if((e=t.querySelector("a-assets"))&&!e.hasLoaded)return void e.addEventListener("loaded",function(){r.load()});this.load()}}},detachedCallback:{value:function(){var e;if(this.parentEl){for(e in this.components)this.removeComponent(e);this.isScene||(this.removeFromParent(),l.prototype.detachedCallback.call(this),this.object3D.el=null)}}},handleMixinUpdate:{value:function(e){if(!e)return void this.updateComponents();this.updateComponent(e,this.getDOMAttribute(e))}},getObject3D:{value:function(e){return this.object3DMap[e]}},setObject3D:{value:function(e,t){var r,n=this;if(!(t instanceof d.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");r=this.getObject3D(e),r&&this.object3D.remove(r),t.el=this,t.children.length&&t.traverse(function(e){e.el=n}),this.object3D.add(t),this.object3DMap[e]=t,this.emit("object3dset",{object:t,type:e})}},removeObject3D:{value:function(e){var t=this.getObject3D(e);if(!t)return void f("Tried to remove `Object3D` of type:",e,"which was not defined.");this.object3D.remove(t),delete this.object3DMap[e],this.emit("object3dremove",{type:e})}},getOrCreateObject3D:{value:function(e,t){var r=this.getObject3D(e);return!r&&t&&(r=new t,this.setObject3D(e,r)),f("`getOrCreateObject3D` has been deprecated. Use `setObject3D()` and `object3dset` event instead."),r}},add:{value:function(e){if(!e.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(e.object3D),this.emit("child-attached",{el:e})}},addToParent:{value:function(){var e=this.parentEl=this.parentNode;e&&e.add&&!this.attachedToParent&&(e.add(this),this.attachedToParent=!0)}},removeFromParent:{value:function(){var e=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=this.parentNode=null,e.emit("child-detached",{el:this})}},load:{value:function(){var e=this;!this.hasLoaded&&this.parentEl&&l.prototype.load.call(this,function(){e.parentEl&&(e.updateComponents(),(e.isScene||e.parentEl.isPlaying)&&e.play())})},writable:window.debug},remove:{value:function(e){this.object3D.remove(e.object3D)}},getChildEntities:{value:function(){for(var e=this.children,t=[],r=0;r<e.length;r++){var n=e[r];n instanceof c&&t.push(n)}return t}},initComponent:{value:function(e,t,r){var i,o,s,a;if(s=p.split(e,v),o=s[1],a=s[0],u[a]&&(n(this,e)||void 0!==t||r)&&!(e in this.components)){if(this.initComponentDependencies(a),o&&!u[a].multiple)throw new Error("Trying to initialize multiple components of type `"+a+"`. There can only be one component of this type per entity.");i=new u[a].Component(this,t,o),this.isPlaying&&i.play(),this.hasAttribute(e)||(i.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,e,"")),m("Component initialized: %s",e)}},writable:window.debug},initComponentDependencies:{value:function(e){var t,r,n=this,i=u[e];if(i&&(t=u[e].dependencies))for(r=0;r<t.length;r++)n.initComponent(t[r],window.HTMLElement.prototype.getAttribute.call(n,t[r])||void 0,!0)}},removeComponent:{value:function(e){var t;if(t=this.components[e]){if(!t.initialized)return void this.addEventListener("componentinitialized",function t(r){r.detail.name===e&&(this.removeComponent(e),this.removeEventListener("componentinitialized",t))});t.pause(),t.remove(),delete this.components[e],this.emit("componentremoved",t.evtDetail)}},writable:window.debug},updateComponents:{value:function(){var e,t,r,n,i=this.componentsToUpdate;if(this.hasLoaded){for(r=0;r<this.mixinEls.length;r++)for(n in this.mixinEls[r].componentCache)s(n)&&(i[n]=!0);if(this.getExtraComponents){t=this.getExtraComponents();for(n in t)s(n)&&(i[n]=!0)}for(r=0;r<this.attributes.length;++r)n=this.attributes[r].name,-1===y.indexOf(n)&&s(n)&&(i[n]=!0);for(r=0;r<y.length;r++)n=y[r],this.hasAttribute(n)&&this.updateComponent(n,this.getDOMAttribute(n));for(n in i)e=o(this.getDOMAttribute(n),t&&t[n]),this.updateComponent(n,e),delete i[n]}},writable:window.debug},updateComponent:{value:function(e,t,r){var i=this.components[e];if(i)return null!==t||n(this,e)?void i.updateProperties(t,r):void this.removeComponent(e);this.initComponent(e,t,!1)}},removeAttribute:{value:function(e,t){var r=this.components[e];if(r&&void 0===t&&this.removeComponent(e),r&&void 0!==t)return void r.resetProperty(t);"mixin"===e&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,e)}},play:{value:function(){var e,t,r;if(!this.isPlaying&&this.hasLoaded){this.isPlaying=!0;for(r in this.components)this.components[r].play();for(e=this.getChildEntities(),t=0;t<e.length;t++)e[t].play();this.emit("play")}},writable:!0},pause:{value:function(){var e,t,r;if(this.isPlaying){this.isPlaying=!1;for(r in this.components)this.components[r].pause();for(e=this.getChildEntities(),t=0;t<e.length;t++)e[t].pause();this.emit("pause")}},writable:!0},setEntityAttribute:{value:function(e,t,r){if(u[e]||this.components[e])return void this.updateComponent(e,r);if("mixin"===e){if(r===this.computedMixinStr)return;this.mixinUpdate(r,t)}}},mixinUpdate:{value:function(e,t){t=t||this.getAttribute("mixin"),this.updateMixins(e,t),this.updateComponents()}},setAttribute:{value:function(e,t,r){var n,i,o,s,a;if(s=e.indexOf(v),o=s>0?e.substring(0,s):e,!u[o])return"mixin"===e&&this.mixinUpdate(t),void l.prototype.setAttribute.call(this,e,t);!this.components[e]&&this.hasAttribute(e)&&this.updateComponent(e,window.HTMLElement.prototype.getAttribute.call(this,e)),void 0!==r&&"string"==typeof t&&t.length>0&&"string"==typeof p.styleParser.parse(t)?(n={},n[t]=r,i=!1):(n=t,i=!0===r),this.updateComponent(e,n,i),(a=this.sceneEl&&this.sceneEl.getAttribute("debug"))&&this.components[e].flushToDOM()},writable:window.debug},flushToDOM:{value:function(e){var t,r,n,i=this.components,o=this.children;for(n in i)i[n].flushToDOM();if(e)for(r=0;r<o.length;++r)t=o[r],t.flushToDOM&&t.flushToDOM(e)}},getAttribute:{value:function(e){var t;return"position"===e?this.object3D.position:"rotation"===e?a(this):"scale"===e?this.object3D.scale:"visible"===e?this.object3D.visible:(t=this.components[e],t?t.data:window.HTMLElement.prototype.getAttribute.call(this,e))},writable:window.debug},getDOMAttribute:{value:function(e){var t=this.components[e];return t?t.attrValue:window.HTMLElement.prototype.getAttribute.call(this,e)},writable:window.debug},addState:{value:function(e){this.is(e)||(this.states.push(e),this.emit("stateadded",e))}},removeState:{value:function(e){var t=this.states.indexOf(e);-1!==t&&(this.states.splice(t,1),this.emit("stateremoved",e))}},is:{value:function(e){return-1!==this.states.indexOf(e)}}});c=h("a-entity",{prototype:g}),t.exports=c},{"../lib/three":150,"../utils/":172,"./a-node":100,"./a-register-element":101,"./component":102}],99:[function(e,t,r){var n=e("./a-node"),i=e("./a-register-element").registerElement,o=e("./component").components,s=e("../utils");t.exports=i("a-mixin",{prototype:Object.create(n.prototype,{createdCallback:{value:function(){this.componentCache={},this.id=this.getAttribute("id"),this.isMixin=!0}},attributeChangedCallback:{value:function(e,t,r){this.cacheAttribute(e,r)}},attachedCallback:{value:function(){this.sceneEl=this.closestScene(),this.cacheAttributes(),this.updateEntities(),this.load()}},setAttribute:{value:function(e,t){window.HTMLElement.prototype.setAttribute.call(this,e,t),this.cacheAttribute(e,t)}},cacheAttribute:{value:function(e,t){var r,n;n=s.split(e,"__")[0],(r=o[n])&&(void 0===t&&(t=window.HTMLElement.prototype.getAttribute.call(this,e)),this.componentCache[e]=r.parseAttrValueForCache(t))}},getAttribute:{value:function(e){return this.componentCache[e]||window.HTMLElement.prototype.getAttribute.call(this,e)}},cacheAttributes:{value:function(){var e,t,r=this.attributes;for(t=0;t<r.length;t++)e=r[t].name,this.cacheAttribute(e)}},updateEntities:{value:function(){var e,t,r;if(this.sceneEl)for(t=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),r=0;r<t.length;r++)e=t[r],e.hasLoaded&&!e.isMixin&&e.mixinUpdate(this.id)}}})})},{"../utils":172,"./a-node":100,"./a-register-element":101,"./component":102}],100:[function(e,t,r){var n=e("./a-register-element").registerElement,i=e("./a-register-element").isNode,o=e("../utils/"),s=o.debug("core:a-node:warn"),a={attributes:!0};t.exports=n("a-node",{prototype:Object.create(window.HTMLElement.prototype,{createdCallback:{value:function(){this.computedMixinStr="",this.hasLoaded=!1,this.isNode=!0,this.mixinEls=[],this.mixinObservers={}},writable:window.debug},attachedCallback:{value:function(){var e;this.sceneEl=this.closestScene(),this.sceneEl||s("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",void 0,!1),this.isMixin||(e=this.getAttribute("mixin"))&&this.updateMixins(e)},writable:window.debug},attributeChangedCallback:{value:function(e,t,r){r!==this.computedMixinStr&&("mixin"!==e||this.isMixin||this.updateMixins(r,t))}},closestScene:{value:function(){for(var e=this;e&&!e.isScene;)e=e.parentElement;return e}},closest:{value:function(e){for(var t=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,r=this;r&&!t.call(r,e);)r=r.parentElement;return r}},detachedCallback:{value:function(){this.hasLoaded=!1}},load:{value:function(e,t){var r,n,o=this;this.hasLoaded||(t=t||i,r=this.getChildren(),n=r.filter(t).map(function(e){return new Promise(function(t){if(e.hasLoaded)return t();e.addEventListener("loaded",t)})}),Promise.all(n).then(function(){o.hasLoaded=!0,e&&e(),o.emit("loaded",void 0,!1)}))},writable:!0},getChildren:{value:function(){return Array.prototype.slice.call(this.children,0)}},updateMixins:{value:function(){var e=[],t=[];return function(r,n){var i,s,a;for(e.length=0,t.length=0,s=r?o.split(r.trim(),/\s+/):e,a=n?o.split(n.trim(),/\s+/):t,i=0;i<a.length;i++)-1===s.indexOf(a[i])&&this.unregisterMixin(a[i]);for(this.computedMixinStr="",this.mixinEls.length=0,i=0;i<s.length;i++)this.registerMixin(document.getElementById(s[i]));this.computedMixinStr&&(this.computedMixinStr=this.computedMixinStr.trim(),window.HTMLElement.prototype.setAttribute.call(this,"mixin",this.computedMixinStr))}}()},registerMixin:{value:function(e){var t,r,n;if(e){if(n=e.getAttribute("mixin"))for(t=o.split(n.trim(),/\s+/),r=0;r<t.length;r++)this.registerMixin(document.getElementById(t[r]));this.computedMixinStr=this.computedMixinStr+" "+e.id,this.mixinEls.push(e),this.attachMixinListener(e)}}},setAttribute:{value:function(e,t){"mixin"===e&&this.updateMixins(t),window.HTMLElement.prototype.setAttribute.call(this,e,t)}},unregisterMixin:{value:function(e){var t,r,n=this.mixinEls;for(t=0;t<n.length;++t)if(r=n[t],e===r.id){n.splice(t,1);break}this.removeMixinListener(e)}},removeMixinListener:{value:function(e){var t=this.mixinObservers[e];t&&(t.disconnect(),this.mixinObservers[e]=null)}},attachMixinListener:{value:function(e){var t,r,n=this;e&&(t=e.id,this.mixinObservers[t]||(r=new MutationObserver(function(e){n.handleMixinUpdate(e[0].attributeName)}),r.observe(e,a),this.mixinObservers[t]=r))}},handleMixinUpdate:{value:function(){}},emit:{value:function(){var e={};return function(t,r,n,i){void 0===n&&(n=!0),e.bubbles=!!n,e.detail=r,i&&(e=o.extend({},i,e)),this.dispatchEvent(new CustomEvent(t,e))}}(),writable:window.debug}})})},{"../utils/":172,"./a-register-element":101}],101:[function(e,t,r){function n(e){h[e.toLowerCase()]=!0}function i(e){var t={};return s(t,["attachedCallback","attributeChangedCallback","createdCallback"],e,l.prototype),c(e,t),t}function o(e){var t={},r=["attachedCallback","attributeChangedCallback","createdCallback"],n=["attachedCallback","attributeChangedCallback","createdCallback","detachedCallback"];return s(t,r,e,l.prototype),s(t,n,e,u.prototype),c(e,t),t}function s(e,t,r,n){t.forEach(function(t){a(e,t,r,n)})}function a(e,t,r,n){var i=r[t],o=n[t];i&&o&&i!==o&&(e[t]={value:function(){return o.apply(this,arguments),i.apply(this,arguments)},writable:window.debug})}function c(e,t){Object.getOwnPropertyNames(e).forEach(function(r){var n;t[r]||(n=Object.getOwnPropertyDescriptor(e,r),t[r]={value:e[r],writable:n.writable})})}e("document-register-element");var l,u,h=t.exports.knownTags={};t.exports.isNode=function(e){return e.tagName.toLowerCase()in h||e.isNode},t.exports.registerElement=function(e,t){var r=Object.getPrototypeOf(t.prototype),s=t,a=l&&r===l.prototype,c=u&&r===u.prototype;return(a||c)&&n(e),a&&(s=i(t.prototype),s={prototype:Object.create(r,s)}),c&&(s=o(t.prototype),s={prototype:Object.create(r,s)}),Object.getOwnPropertyNames(s.prototype).forEach(function(e){var t=s.prototype[e];"function"==typeof t&&(t.displayName=e)}),document.registerElement(e,s)},t.exports.wrapMethods=s,l=e("./a-node"),u=e("./a-entity")},{"./a-entity":98,"./a-node":100,"document-register-element":11}],102:[function(e,t,r){function n(e){var t,r,n={};for(r in e)t=e[r],n[r]=c(t)?d.clone(t):t;return n}function i(e,t,r){if(r&&(null===t||"object"!=typeof t))return t;var n,i=d.extend(e,t);for(n in i)i[n]&&i[n].constructor===Object&&(i[n]=d.clone(i[n]));return i}function o(e){return e.tick||e.tock}function s(e){return function(){var t=this.el.sceneEl;this.isPlaying&&(e.call(this),this.isPlaying=!1,o(this)&&t.removeBehavior(this))}}function a(e){return function(){var t=this.el.sceneEl,r=this.el.isPlaying&&!this.isPlaying;this.initialized&&r&&(e.call(this),this.isPlaying=!0,o(this)&&t.addBehavior(this))}}function c(e){return e&&(e.constructor===Object||e.constructor===Array)}var l=e("./schema"),u=e("./scene/scenes"),h=e("./system"),d=e("../utils/"),p=t.exports.components={},m=l.parseProperties,f=l.parseProperty,v=l.process,y=l.isSingleProperty,g=l.stringifyProperties,x=l.stringifyProperty,M=d.styleParser,A=d.debug("core:component:warn"),w=document.currentScript,E=new RegExp("[A-Z]+"),b=t.exports.Component=function(e,t,r){var n=this;this.el=e,this.id=r,this.attrName=this.name+(r?"__"+r:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.el.components[this.attrName]=this,this.oldData=void 0,this.previousAttrValue=void 0,this.throttledEmitComponentChanged=d.throttle(function(){e.emit("componentchanged",n.evtDetail,!1)},200),this.updateProperties(t)};if(b.prototype={schema:{},init:function(){},update:function(e){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},parse:function(e,t){var r=this.schema;return y(r)?f(e,r):m(M.parse(e),r,!0,this.name,t)},stringify:function(e){var t=this.schema;return"string"==typeof e?e:y(t)?x(e,t):(e=g(e,t),M.stringify(e))},updateCachedAttrValue:function(e,t){var r,i=this.parseAttrValueForCache(e),o=y(this.schema);if(void 0!==e)if(o||t)this.attrValue=i;else{this.attrValue=this.attrValue?n(this.attrValue):{};for(r in i)this.attrValue[r]=i[r]}},parseAttrValueForCache:function(e){var t;return"string"!=typeof e?e:(y(this.schema)?"string"==typeof(t=this.schema.parse(e))&&(t=e):t=M.parse(e),t)},flushToDOM:function(e){var t=e?this.data:this.attrValue;t&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(t))},updateProperties:function(e,t){var r,n,o,s=this.el,a=this.oldData;if(!s.hasLoaded)return void this.updateCachedAttrValue(e);if(r=y(this.schema),o=null!==e&&"object"==typeof this.previousAttrValue&&e===this.previousAttrValue){for(n in this.attrValue)if(!(n in e)){o=!1;break}for(n in e)if(!(n in this.attrValue)){o=!1;break}}if(this.previousAttrValue=e,e=this.parseAttrValueForCache(e),this.updateCachedAttrValue(e,t),this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!1,!0)),this.data=this.buildData(this.attrValue,t,!1,o),this.initialized){if(d.deepEqual(this.oldData,this.data))return;this.oldData=i({},this.data,r),this.update(a),this.throttledEmitComponentChanged()}else{if(s.initializingComponents[this.name])return;s.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete s.initializingComponents[this.name],a=r&&"object"!=typeof f(void 0,this.schema)?void 0:{},this.oldData=i({},this.data,r),this.update(a),s.isPlaying&&this.play(),s.emit("componentinitialized",this.evtDetail,!1)}},resetProperty:function(e){if(y(this.schema))this.attrValue=void 0;else{if(!(e in this.attrValue))return;delete this.attrValue[e]}this.updateProperties(this.attrValue)},extendSchema:function(e){var t=d.extend({},p[this.name].schema);d.extend(t,e),this.schema=v(t),this.el.emit("schemachanged",{component:this.name})},buildData:function(e,t,r,o){var s,a,l,u,h,p,v,g,x=this.schema,M=y(x),A=this.el.mixinEls;if(s=e&&e.constructor===Array?e.length:void 0!==e&&null!==e,M)a=c(x.default)?d.clone(x.default):x.default;else for(g=!t&&this.attrValue,a="object"==typeof g?n(g):{},v=0,u=Object.keys(x),h=u.length;v<h;v++)l=x[u[v]].default,void 0===a[u[v]]&&(a[u[v]]=c(l)?d.clone(l):l);for(v=0;v<A.length;v++)(p=A[v].getAttribute(this.attrName))&&(a=i(a,p,M));if(s){if(M)return!0===o?e:f(e,x);a=i(a,e,M)}else{if(!0===o)return a;if(M)return f(a,x)}return!0===o?a:m(a,x,void 0,this.name,r)}},window.debug)var T=t.exports.registrationOrderWarnings={};t.exports.registerComponent=function(e,t){var r,n={};if(document.currentScript&&document.currentScript!==w&&u.forEach(function(t){t.hasLoaded||document.currentScript.compareDocumentPosition(t)!==Node.DOCUMENT_POSITION_FOLLOWING&&(A("The component `"+e+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(T[e]=!0))}),!0===E.test(e)&&A("The component name `"+e+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+e.toLowerCase()+"`"),-1!==e.indexOf("__"))throw new Error("The component name `"+e+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(t).forEach(function(e){n[e]={value:t[e],writable:!0}}),p[e])throw new Error("The component `"+e+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");return r=function(e,t,r){b.call(this,e,t,r)},r.prototype=Object.create(b.prototype,n),r.prototype.name=e,r.prototype.constructor=r,r.prototype.system=h&&h.systems[e],r.prototype.play=a(r.prototype.play),r.prototype.pause=s(r.prototype.pause),p[e]={Component:r,dependencies:r.prototype.dependencies,isSingleProp:y(r.prototype.schema),multiple:r.prototype.multiple,parse:r.prototype.parse,parseAttrValueForCache:r.prototype.parseAttrValueForCache,schema:d.extend(v(r.prototype.schema,r.prototype.name)),stringify:r.prototype.stringify,type:r.prototype.type},r}},{"../utils/":172,"./scene/scenes":108,"./schema":110,"./system":112}],103:[function(e,t,r){var n=e("./schema"),i=n.process,o=t.exports.geometries={},s=t.exports.geometryNames=[],a=e("../lib/three"),c=t.exports.Geometry=function(){};c.prototype={schema:{},init:function(e){return this.geometry=new a.Geometry,this.geometry},update:function(e){}},t.exports.registerGeometry=function(e,t){var r,n={};if(Object.keys(t).forEach(function(e){n[e]={value:t[e],writable:!0}}),o[e])throw new Error("The geometry `"+e+"` has been already registered");return r=function(){c.call(this)},r.prototype=Object.create(c.prototype,n),r.prototype.name=e,r.prototype.constructor=r,o[e]={Geometry:r,schema:i(r.prototype.schema)},s.push(e),r}},{"../lib/three":150,"./schema":110}],104:[function(e,t,r){function n(e,t,r,n){if("type"in b)return void w("Property type "+e+" is already registered.");b[e]={default:t,parse:r||a,stringify:n||c}}function i(e){function t(e){return e.trim()}return Array.isArray(e)?e:e&&"string"==typeof e?e.split(",").map(t):[]}function o(e){return e.join(", ")}function s(e){var t,r;return"string"!=typeof e?e:(r=e.match(/\url\((.+)\)/),r?r[1]:"#"===e.charAt(0)?(t=document.getElementById(e.substring(1)))?"CANVAS"===t.tagName||"VIDEO"===t.tagName||"IMG"===t.tagName?t:t.getAttribute("src"):void E('"'+e+'" asset not found.'):e)}function a(e){return e}function c(e){return null===e?"null":e.toString()}function l(e){return"false"!==e&&!1!==e}function u(e){return parseInt(e,10)}function h(e){return parseFloat(e,10)}function d(e){return e?"string"!=typeof e?e:"#"!==e[0]||T.test(e)?document.querySelector(e):document.getElementById(e.substring(1)):null}function p(e){return e?"string"!=typeof e?e:Array.prototype.slice.call(document.querySelectorAll(e),0):null}function m(e){return e.getAttribute?"#"+e.getAttribute("id"):c(e)}function f(e){return e instanceof Array?e.map(function(e){return"#"+e.getAttribute("id")}).join(", "):c(e)}function v(e){return E("`src` property type is deprecated. Use `asset` instead."),s(e)}function y(e){return M.parse(e,this.default)}function g(e,t){return("audio"!==e||"string"==typeof t)&&(!("array"===e&&!Array.isArray(t))&&(("asset"!==e||"string"==typeof t)&&(("boolean"!==e||"boolean"==typeof t)&&(("color"!==e||"string"==typeof t)&&(("int"!==e||"number"==typeof t)&&(("number"!==e||"number"==typeof t)&&(("map"!==e||"string"==typeof t)&&(("model"!==e||"string"==typeof t)&&(("selector"!==e||"string"==typeof t||null===t)&&(("selectorAll"!==e||"string"==typeof t||null===t)&&(("src"!==e||"string"==typeof t)&&(("string"!==e||"string"==typeof t)&&(("time"!==e||"number"==typeof t)&&("vec2"===e?x(t,2):"vec3"===e?x(t,3):"vec4"!==e||x(t,4)))))))))))))))}function x(e,t){if(null===e)return!0;if("object"!=typeof e)return!1;if(Object.keys(e).length!==t)return!1;var r=e.x,n=e.y,i=e.z,o=e.w;return"number"==typeof r&&"number"==typeof n&&(!(t>2&&"number"!=typeof i)&&!(t>3&&"number"!=typeof o))}var M=e("../utils/coordinates"),A=e("debug"),w=A("core:propertyTypes:warn"),E=A("core:propertyTypes:warn"),b=t.exports.propertyTypes={},T=/[,> .[\]:]/;n("audio","",s),n("array",[],i,o),n("asset","",s),n("boolean",!1,l),n("color","#FFF",a,c),n("int",0,u),n("number",0,h),n("map","",s),n("model","",s),n("selector",null,d,m),n("selectorAll",null,p,f),n("src","",v),n("string","",a,c),n("time",0,u),n("vec2",{x:0,y:0},y,M.stringify),n("vec3",{x:0,y:0,z:0},y,M.stringify),n("vec4",{x:0,y:0,z:0,w:1},y,M.stringify),t.exports.registerPropertyType=n,t.exports.isValidDefaultValue=g,t.exports.isValidDefaultCoordinate=x},{"../utils/coordinates":167,debug:8}],105:[function(e,t,r){function n(e,t){return t?{height:e.parentElement.offsetHeight,width:e.parentElement.offsetWidth}:{height:window.innerHeight,width:window.innerWidth}}function i(e){(e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen).apply(e)}function o(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}function s(e){function t(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||e.exitVR(),document.activeElement.blur(),document.body.focus()}var r;r=document.createElement("canvas"),r.classList.add("a-canvas"),r.dataset.aframeCanvas=!0,e.appendChild(r),document.addEventListener("fullscreenchange",t),document.addEventListener("mozfullscreenchange",t),document.addEventListener("webkitfullscreenchange",t),r.addEventListener("touchmove",function(e){e.preventDefault()}),e.canvas=r,e.emit("render-target-loaded",{target:r}),setTimeout(g(e.resize,e),0)}var a=e("./metaTags").inject,c=e("./wakelock"),l=e("../a-register-element"),u=e("./scenes"),h=e("../system").systems,d=e("../../lib/three"),p=e("@tweenjs/tween.js"),m=e("../../utils/"),f=e("../a-entity"),v=e("../a-node"),y=e("./postMessage"),g=m.bind,x=m.device.isIOS(),M=m.device.isMobile(),A=l.registerElement,w=m.debug("core:a-scene:warn");t.exports.AScene=A("a-scene",{prototype:Object.create(f.prototype,{createdCallback:{value:function(){this.isIOS=x,this.isMobile=M,this.isScene=!0,this.object3D=new d.Scene;var e=this;this.object3D.onAfterRender=function(t,r,n){e.isPlaying&&e.tock(e.time,e.delta,n)},this.render=g(this.render,this),this.systems={},this.systemNames=[],this.time=this.delta=0,this.init()}},init:{value:function(){this.behaviors={tick:[],tock:[]},this.hasLoaded=!1,this.isPlaying=!1,this.originalHTML=this.innerHTML,this.renderTarget=null,s(this),this.setupRenderer(),this.resize(),this.addFullScreenStyles(),y(this),this.setAttribute("inspector",""),this.setAttribute("keyboard-shortcuts",""),this.setAttribute("screenshot",""),this.setAttribute("vr-mode-ui","")},writable:!0},addFullScreenStyles:{value:function(){document.documentElement.classList.add("a-html"),document.body.classList.add("a-body"),this.classList.add("fullscreen")}},removeFullScreenStyles:{value:function(){document.documentElement.classList.remove("a-html"),document.body.classList.remove("a-body"),this.classList.remove("fullscreen")}},attachedCallback:{value:function(){var e,t=this;a(this),c(this),this.initSystems(),e=g(this.resize,this),window.addEventListener("load",e),window.addEventListener("resize",function(){this.isIOS?setTimeout(e,100):e()}),this.play(),u.push(this),this.onVRPresentChangeBound=g(this.onVRPresentChange,this),window.addEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),this.enterVRBound=function(){t.enterVR()},this.exitVRBound=function(){t.exitVR()},this.exitVRTrueBound=function(){t.exitVR(!0)},this.pointerRestrictedBound=function(){t.pointerRestricted()},this.pointerUnrestrictedBound=function(){t.pointerUnrestricted()},window.addEventListener("vrdisplayactivate",this.enterVRBound),window.addEventListener("vrdisplaydeactivate",this.exitVRBound),window.addEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.addEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.addEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)},writable:window.debug},initSystems:{value:function(){Object.keys(h).forEach(g(this.initSystem,this))}},initSystem:{value:function(e){this.systems[e]||(this.systems[e]=new h[e](this),this.systemNames.push(e))}},detachedCallback:{value:function(){var e=u.indexOf(this);u.splice(e,1),window.removeEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),window.removeEventListener("vrdisplayactivate",this.enterVRBound),window.removeEventListener("vrdisplaydeactivate",this.exitVRBound),window.removeEventListener("vrdisplayconnect",this.enterVRBound),window.removeEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.removeEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.removeEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)}},addBehavior:{value:function(e){var t,r,n=this.behaviors;for(r in n)e[r]&&(t=this.behaviors[r],-1===t.indexOf(e)&&t.push(e))}},getPointerLockElement:{value:function(){return document.pointerLockElement},writable:window.debug},checkHeadsetConnected:{value:m.device.checkHeadsetConnected,writable:window.debug},enterVR:{value:function(e){function t(){o.addState("vr-mode"),o.emit("enter-vr",{target:o}),o.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),o.addFullScreenStyles(),o.isMobile||o.checkHeadsetConnected()||i(o.canvas),o.resize()}function r(e){throw e&&e.message?new Error("Failed to enter VR mode (`requestPresent`): "+e.message):new Error("Failed to enter VR mode (`requestPresent`).")}var n,o=this,s=o.renderer.vr;return this.is("vr-mode")?Promise.resolve("Already in VR."):e||!this.checkHeadsetConnected()&&!this.isMobile?(t(),Promise.resolve()):(n=m.device.getVRDisplay(),s.setDevice(n),s.enabled=!0,n.requestPresent([{source:this.canvas}]).then(t,r))},writable:!0},exitVR:{value:function(e){function t(){i.removeState("vr-mode"),i.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),i.hasAttribute("embedded")&&i.removeFullScreenStyles(),i.resize(),i.isIOS&&m.forceCanvasResizeSafariMobile(this.canvas),i.emit("exit-vr",{target:i})}function r(e){throw e&&e.message?new Error("Failed to exit VR mode (`exitPresent`): "+e.message):new Error("Failed to exit VR mode (`exitPresent`).")}var n,i=this;return this.is("vr-mode")?(o(),e||!this.checkHeadsetConnected()&&!this.isMobile?(t(),Promise.resolve()):(this.renderer.vr.enabled=!1,n=m.device.getVRDisplay(),n.exitPresent().then(t,r))):Promise.resolve("Not in VR.")},writable:!0},pointerRestricted:{value:function(){if(this.canvas){var e=this.getPointerLockElement();e&&e!==this.canvas&&document.exitPointerLock&&document.exitPointerLock(),this.canvas.requestPointerLock&&this.canvas.requestPointerLock()}}},pointerUnrestricted:{value:function(){var e=this.getPointerLockElement();e&&e===this.canvas&&document.exitPointerLock&&document.exitPointerLock()}},onVRPresentChange:{value:function(e){if((e.display||e.detail.display).isPresenting)return void this.enterVR(!0);this.exitVR(!0)}},getAttribute:{value:function(e){var t=this.systems[e];return t?t.data:f.prototype.getAttribute.call(this,e)}},getComputedAttribute:{value:function(e){w("`getComputedAttribute` is deprecated. Use `getAttribute` instead."),this.getAttribute(e)}},getDOMAttribute:{value:function(e){var t=this.systems[e];return t?t.data:f.prototype.getDOMAttribute.call(this,e)}},setAttribute:{value:function(e,t,r){var n=this.systems[e];if(n)return v.prototype.setAttribute.call(this,e,t),void n.updateProperties(t);f.prototype.setAttribute.call(this,e,t,r)}},removeBehavior:{value:function(e){var t,r,n,i=this.behaviors;for(r in i)e[r]&&(t=this.behaviors[r],-1!==(n=t.indexOf(e))&&t.splice(n,1))}},resize:{value:function(){var e,t,r,i=this.camera,o=this.canvas,s=this.getAttribute("embedded")&&!this.is("vr-mode");t=this.renderer.vr.getDevice(),r=this.renderer.vr.enabled&&t&&t.isPresenting,!i||!o||this.is("vr-mode")&&(this.isMobile||r)||(e=n(o,s),i.aspect=e.width/e.height,i.updateProjectionMatrix(),this.renderer.setSize(e.width,e.height,!1))},writable:!0},setupRenderer:{value:function(){var e,t,r,n=this,i={canvas:this.canvas,antialias:!M,alpha:!0};this.hasAttribute("antialias")&&(i.antialias="true"===this.getAttribute("antialias")),this.hasAttribute("renderer")&&(r=this.getAttribute("renderer"),t=m.styleParser.parse(r),t.antialias&&"auto"!==t.antialias&&(i.antialias="true"===t.antialias)),e=this.renderer=new d.WebGLRenderer(i),e.setPixelRatio(window.devicePixelRatio),e.sortObjects=!1,this.addEventListener("camera-set-active",function(){e.vr.setPoseTarget(n.camera.el.object3D)})},writable:window.debug},play:{value:function(){var e=this;if(this.renderStarted)return void f.prototype.play.call(this);this.addEventListener("loaded",function(){function e(e){e.renderStarted||(e.resize(),e.renderer&&(window.performance&&window.performance.mark("render-started"),e.clock=new d.Clock,e.render(),e.renderStarted=!0,e.emit("renderstart")))}if(f.prototype.play.call(this),this.camera)return void e(this);this.addEventListener("camera-set-active",function(){e(this)})}),setTimeout(function(){f.prototype.load.call(e)})}},updateComponent:{value:function(e){e in h||f.prototype.updateComponent.apply(this,arguments)}},tick:{value:function(e,t){var r,n=this.systems;for(p.update(),r=0;r<this.behaviors.tick.length;r++)this.behaviors.tick[r].el.isPlaying&&this.behaviors.tick[r].tick(e,t);for(r=0;r<this.systemNames.length;r++)n[this.systemNames[r]].tick&&n[this.systemNames[r]].tick(e,t)}},tock:{value:function(e,t,r){var n,i=this.systems;for(n=0;n<this.behaviors.tock.length;n++)this.behaviors.tock[n].el.isPlaying&&this.behaviors.tock[n].tock(e,t,r);for(n=0;n<this.systemNames.length;n++)i[this.systemNames[n]].tock&&i[this.systemNames[n]].tock(e,t,r)}},render:{value:function(){this.delta=1e3*this.clock.getDelta();var e=this.renderer;this.time=1e3*this.clock.elapsedTime,this.isPlaying&&this.tick(this.time,this.delta),e.animate(this.render),e.render(this.object3D,this.camera,this.renderTarget)},writable:!0}})}),t.exports.setupCanvas=s},{"../../lib/three":150,"../../utils/":172,"../a-entity":98,"../a-node":100,"../a-register-element":101,"../system":112,"./metaTags":106,"./postMessage":107,"./scenes":108,"./wakelock":109,"@tweenjs/tween.js":1}],106:[function(e,t,r){function n(e){return{tagName:"meta",attributes:e,exists:function(){return document.querySelector('meta[name="'+e.name+'"]')}}}function i(e){if(e&&e.tagName){var t=document.createElement(e.tagName);return t.setAttribute(o.AFRAME_INJECTED,""),s(t,e.attributes)}}var o=e("../../constants/"),s=e("../../utils").extend,a=t.exports.MOBILE_HEAD_TAGS=[n({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui"}),n({name:"mobile-web-app-capable",content:"yes"}),n({name:"theme-color",content:"black"})],c=[n({name:"apple-mobile-web-app-capable",content:"yes"}),n({name:"apple-mobile-web-app-status-bar-style",content:"black"}),function(e){return{tagName:"link",attributes:e,exists:function(){return document.querySelector('link[rel="'+e.rel+'"]')}}}({rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"})];t.exports.inject=function(e){function t(e){e&&!e.exists()&&(r=i(e))&&(o?o.parentNode.insertBefore(r,o):n.appendChild(r),s.push(r))}var r,n=document.head,o=n.querySelector("script"),s=[];return a.forEach(t),e.isIOS&&c.forEach(t),s}},{"../../constants/":93,"../../utils":172}],107:[function(e,t,r){function n(e){var t=this;if(e.data)switch(e.data.type){case"vr":switch(e.data.data){case"enter":t.enterVR();break;case"exit":t.exitVR()}}}var i=e("../../utils/bind"),o=e("../../utils/").isIframed;t.exports=function(e){o()&&window.addEventListener("message",i(n,e))}},{"../../utils/":172,"../../utils/bind":166}],108:[function(e,t,r){t.exports=[]},{}],109:[function(e,t,r){var n=e("../../../vendor/wakelock/wakelock");t.exports=function(e){if(e.isMobile){var t=e.wakelock=new n;e.addEventListener("enter-vr",function(){t.request()}),e.addEventListener("exit-vr",function(){t.release()})}}},{"../../../vendor/wakelock/wakelock":182}],110:[function(e,t,r){function n(e){return"type"in e?"string"==typeof e.type:"default"in e}function i(e,t){var r,n,i=e.default,o=e.type;return e.type?"bool"===e.type?o="boolean":"float"===e.type&&(o="number"):o=void 0===i||"boolean"!=typeof i&&"number"!=typeof i?Array.isArray(i)?"array":"string":typeof i,n=h[o],n||d("Unknown property type for component `"+t+"`: "+o),r=!!e.parse,e.parse=e.parse||n.parse,e.stringify=e.stringify||n.stringify,e.type=o,"default"in e?r||u(o,i)||d("Default value `"+i+"` does not match type `"+o+"` in component `"+t+"`"):e.default=n.default,e}function o(e,t){return void 0!==e&&null!==e&&""!==e||(e=t.default,Array.isArray(e)&&(e=e.slice())),t.parse(e,t.default)}function s(e,t){return"object"!=typeof e?e:t&&null!==e?t.stringify(e):JSON.stringify(e)}var a=e("../utils/"),c=e("./propertyTypes"),l=a.debug,u=c.isValidDefaultValue,h=c.propertyTypes,d=l("core:schema:warn");t.exports.isSingleProperty=n,t.exports.process=function(e,t){var r;if(n(e))return i(e,t);for(r in e)e[r]=i(e[r],t);return e},t.exports.processPropertyDefinition=i,t.exports.parseProperties=function(){var e=[];return function(t,r,n,i,s){var a,c,l,u;e.length=0;for(c in n?t:r)e.push(c);if(null===t||"object"!=typeof t)return t;for(c in t)r[c]||s||d("Unknown property `"+c+"` for component/system `"+i+"`.");for(a=0;a<e.length;a++){if(c=e[a],l=r[c],u=t[c],!r[c])return;t[c]=o(u,l)}return t}}(),t.exports.parseProperty=o,t.exports.stringifyProperties=function(e,t){var r,n,i,o,a={};for(r in e)n=t[r],i=e[r],o=i,"object"==typeof o&&(o=s(i,n),n||d("Unknown component property: "+r)),a[r]=o;return a},t.exports.stringifyProperty=s},{"../utils/":172,"./propertyTypes":104}],111:[function(e,t,r){var n=e("./schema"),i=n.process,o=t.exports.shaders={},s=t.exports.shaderNames=[],a=e("../lib/three"),c=e("../utils"),l={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},u=t.exports.Shader=function(){};u.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(e){return this.attributes=this.initVariables(e,"attribute"),this.uniforms=this.initVariables(e,"uniform"),this.material=new(this.raw?a.RawShaderMaterial:a.ShaderMaterial)({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initVariables:function(e,t){var r,n,i=this.schema,o={};for(r in i)i[r].is===t&&(n=l[i[r].type],o[r]={type:n,value:void 0});return o},update:function(e){this.updateVariables(e,"attribute"),this.updateVariables(e,"uniform")},updateVariables:function(e,t){var r,n,i,o=this.schema;i="uniform"===t?this.uniforms:this.attributes;for(r in e)if(o[r]&&o[r].is===t)if("map"!==o[r].type)i[r].value=this.parseValue(o[r].type,e[r]),i[r].needsUpdate=!0;else{if(!i[r]||i[r].value===e[r])continue;n="_texture_"+r,this.setMapOnTextureLoad(i,r,n),c.material.updateMapMaterialFromData(n,r,this,e)}},parseValue:function(e,t){var r;switch(e){case"vec2":return new a.Vector2(t.x,t.y);case"vec3":return new a.Vector3(t.x,t.y,t.z);case"vec4":return new a.Vector4(t.x,t.y,t.z,t.w);case"color":return r=new a.Color(t),new a.Vector3(r.r,r.g,r.b);case"map":return a.ImageUtils.loadTexture(t);default:return t}},setMapOnTextureLoad:function(e,t,r){var n=this;this.el.addEventListener("materialtextureloaded",function(){e[t].value=n.material[r],e[t].needsUpdate=!0})}},t.exports.registerShader=function(e,t){var r,n={};if(Object.keys(t).forEach(function(e){n[e]={value:t[e],writable:!0}}),o[e])throw new Error("The shader "+e+" has been already registered");return r=function(){u.call(this)},r.prototype=Object.create(u.prototype,n),r.prototype.name=e,r.prototype.constructor=r,o[e]={Shader:r,schema:i(r.prototype.schema)},s.push(e),r}},{"../lib/three":150,"../utils":172,"./schema":110}],112:[function(e,t,r){var n=e("./component"),i=e("./schema"),o=e("../utils/"),s=i.parseProperties,a=i.parseProperty,c=i.process,l=i.isSingleProperty,u=o.styleParser,h=t.exports.systems={},d=t.exports.System=function(e){var t=n&&n.components[this.name];this.el=e,this.sceneEl=e,t&&(t.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};d.prototype={schema:{},init:function(){},update:function(e){},updateProperties:function(e){var t=this.data;Object.keys(i).length&&(this.buildData(e),this.update(t))},buildData:function(e){var t=this.schema;Object.keys(t).length&&(e=e||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),l(t)?this.data=a(e,t):this.data=s(u.parse(e)||{},t))},tick:void 0,tock:void 0,play:function(){},pause:function(){}},t.exports.registerSystem=function(e,t){var r,n,i={},s=o.findAllScenes(document);if(Object.keys(t).forEach(function(e){i[e]={value:t[e],writable:!0}}),h[e])throw new Error("The system `"+e+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");for(n=function(e){d.call(this,e)},n.prototype=Object.create(d.prototype,i),n.prototype.name=e,n.prototype.constructor=n,n.prototype.schema=o.extend(c(n.prototype.schema)),h[e]=n,r=0;r<s.length;r++)s[r].initSystem(e)}},{"../utils/":172,"./component":102,"./schema":110}],113:[function(e,t,r){e("./pivot")},{"./pivot":114}],114:[function(e,t,r){var n=e("../../core/component").registerComponent,i=e("../../lib/three"),o=new i.Vector3,s=new i.Vector3;n("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var e=this.data,t=this.el,r=t.object3D.parent,n=t.object3D,a=new i.Group;o.copy(n.position),s.copy(n.rotation),r.remove(n),a.add(n),r.add(a),t.object3D=a,n.position.set(-1*e.x,-1*e.y,-1*e.z),a.position.set(e.x+o.x,e.y+o.y,e.z+o.z),a.rotation.copy(n.rotation),n.rotation.set(0,0,0)}})},{"../../core/component":102,"../../lib/three":150}],115:[function(e,t,r){function n(e){var t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();"fog"===e&&(t="material-fog"),"visible"===e&&(t="material-visible"),a[t]="material."+e}var i=e("../../core/component").components,o=e("../../core/shader").shaders,s=e("../../utils/"),a={};Object.keys(i.material.schema).forEach(n),Object.keys(o.standard.schema).forEach(n),t.exports=function(){return{defaultComponents:{material:{}},mappings:s.extend({},a)}}},{"../../core/component":102,"../../core/shader":111,"../../utils/":172}],116:[function(e,t,r){e("./primitives/a-camera"),e("./primitives/a-collada-model"),e("./primitives/a-cursor"),e("./primitives/a-curvedimage"),e("./primitives/a-gltf-model"),e("./primitives/a-image"),e("./primitives/a-light"),e("./primitives/a-link"),e("./primitives/a-obj-model"),e("./primitives/a-sky"),e("./primitives/a-sound"),e("./primitives/a-text"),e("./primitives/a-video"),e("./primitives/a-videosphere"),e("./primitives/meshPrimitives")},{"./primitives/a-camera":118,"./primitives/a-collada-model":119,"./primitives/a-cursor":120,"./primitives/a-curvedimage":121,"./primitives/a-gltf-model":122,"./primitives/a-image":123,"./primitives/a-light":124,"./primitives/a-link":125,"./primitives/a-obj-model":126,"./primitives/a-sky":127,"./primitives/a-sound":128,"./primitives/a-text":129,"./primitives/a-video":130,"./primitives/a-videosphere":131,"./primitives/meshPrimitives":132}],117:[function(e,t,r){function n(e,t){var r=s[e].schema;Object.keys(r).map(function(r){var n=r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();void 0!==t[n]&&(n=e+"-"+r),t[n]=e+"."+r})}function i(e,r,i){i=i||{},Object.keys(r).map(function(e){n(e,i)}),t.exports.registerPrimitive(e,c.extendDeep({},null,{defaultComponents:r,mappings:i}))}var o=e("../../core/a-entity"),s=e("../../core/component").components,a=e("../../core/a-register-element").registerElement,c=e("../../utils/"),l=c.debug,u=c.entity.setComponentProperty,h=l("extras:primitives:debug"),d=l("extras:primitives:warn"),p=t.exports.primitives={};t.exports.registerPrimitive=function(e,t){e=e.toLowerCase(),h("Registering <%s>",e),t.defaultAttributes&&d("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var r=a(e,{prototype:Object.create(o.prototype,{defaultComponentsFromPrimitive:{value:t.defaultComponents||t.defaultAttributes||{}},deprecated:{value:t.deprecated||null},deprecatedMappings:{value:t.deprecatedMappings||{}},mappings:{value:t.mappings||{}},createdCallback:{value:function(){t.deprecated&&console.warn(t.deprecated),this.resolveMappingCollisions()}},resolveMappingCollisions:{value:function(){var e=this.mappings,t=this;Object.keys(e).forEach(function(r){var n;r!==r.toLowerCase()&&d("Mapping keys should be specified in lower case. The mapping key "+r+" may not be recognized"),s[r]&&(n=e[r].replace(".","-"),e[n]=e[r],delete e[r],console.warn("The primitive "+t.tagName.toLowerCase()+" has a mapping collision. The attribute "+r+" has the same name as a registered component and has been renamed to "+n))})}},getExtraComponents:{value:function(){function e(e,i){return t(e)?r(i):t(i)?r(e):n(e)&&n(i)?c.extendDeep(e,i):r(i)}function t(e){return void 0===e}function r(e){return n(e)?c.extendDeep({},e):e}function n(e){return null!==e&&e.constructor===Object}var i,o,s,a,l,u,h=this;for(o=c.clone(this.defaultComponentsFromPrimitive),l=this.getAttribute("mixin"),l&&(l=l.trim().split(" "),l.forEach(function(t){var r=h.sceneEl.querySelector("#"+t).componentCache;Object.keys(r).forEach(function(t){o[t]=e(o[t],r[t])})})),s=0;s<this.attributes.length;s++)i=this.attributes[s],(a=this.mappings[i.name])&&(u=c.entity.getComponentPropertyPath(a),u.constructor===Array?(o[u[0]]=o[u[0]]||{},o[u[0]][u[1]]=i.value.trim()):o[u]=i.value.trim());return o}},attributeChangedCallback:{value:function(e,t,r){var n=this.mappings[e];e in this.deprecatedMappings&&console.warn(this.deprecatedMappings[e]),e&&n&&u(this,n,r)}}})});return p[e]=r,r},t.exports.definePrimitive=i},{"../../core/a-entity":98,"../../core/a-register-element":101,"../../core/component":102,"../../utils/":172}],118:[function(e,t,r){(0,e("../primitives").registerPrimitive)("a-camera",{defaultComponents:{camera:{},"look-controls":{},"wasd-controls":{},position:{y:1.6}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","pointer-lock-enabled":"look-controls.pointerLockEnabled","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag",zoom:"camera.zoom"}})},{"../primitives":117}],119:[function(e,t,r){(0,e("../primitives").registerPrimitive)("a-collada-model",{mappings:{src:"collada-model"}})},{"../primitives":117}],120:[function(e,t,r){var n=e("../getMeshMixin");(0,e("../primitives").registerPrimitive)("a-cursor",e("../../../utils/").extendDeep({},n(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}}))},{"../../../utils/":172,"../getMeshMixin":115,"../primitives":117}],121:[function(e,t,r){var n=e("../getMeshMixin");(0,e("../primitives").registerPrimitive)("a-curvedimage",e("../../../utils/").extendDeep({},n(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}}))},{"../../../utils/":172,"../getMeshMixin":115,"../primitives":117}],122:[function(e,t,r){(0,e("../primitives").registerPrimitive)("a-gltf-model",{mappings:{src:"gltf-model"}})},{"../primitives":117}],123:[function(e,t,r){var n=e("../getMeshMixin");(0,e("../primitives").registerPrimitive)("a-image",e("../../../utils/").extendDeep({},n(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},{"../../../utils/":172,"../getMeshMixin":115,"../primitives":117}],124:[function(e,t,r){(0,e("../primitives").registerPrimitive)("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target"}})},{"../primitives":117}],125:[function(e,t,r){(0,e("../primitives").registerPrimitive)("a-link",{defaultComponents:{},mappings:{href:"link.href",image:"link.image",title:"link.title"}})},{"../primitives":117}],126:[function(e,t,r){var n=e("../getMeshMixin")();(0,e("../primitives").registerPrimitive)("a-obj-model",e("../../../utils/").extendDeep({},n,{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}))},{"../../../utils/":172,"../getMeshMixin":115,"../primitives":117}],127:[function(e,t,r){var n=e("../getMeshMixin"),i=e("../primitives").registerPrimitive,o=e("../../../utils/"),s=e("./meshPrimitives");i("a-sky",o.extendDeep({},n(),{defaultComponents:{geometry:{primitive:"sphere",radius:5e3,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",side:"back",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:o.extendDeep({},s["a-sphere"].prototype.mappings)}))},{"../../../utils/":172,"../getMeshMixin":115,"../primitives":117,"./meshPrimitives":132}],128:[function(e,t,r){(0,e("../primitives").registerPrimitive)("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}})},{"../primitives":117}],129:[function(e,t,r){(0,e("../primitives").definePrimitive)("a-text",{text:{anchor:"align",width:5}})},{"../primitives":117}],130:[function(e,t,r){var n=e("../getMeshMixin");(0,e("../primitives").registerPrimitive)("a-video",e("../../../utils/").extendDeep({},n(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},{"../../../utils/":172,"../getMeshMixin":115,"../primitives":117}],131:[function(e,t,r){var n=e("../getMeshMixin");(0,e("../primitives").registerPrimitive)("a-videosphere",e("../../../utils/").extendDeep({},n(),{defaultComponents:{geometry:{primitive:"sphere",radius:5e3,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",side:"back",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}))},{"../../../utils/":172,"../getMeshMixin":115,"../primitives":117}],132:[function(e,t,r){function n(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var i=e("../getMeshMixin"),o=e("../../../core/geometry").geometries,s=e("../../../core/geometry").geometryNames,a=e("../primitives").registerPrimitive,c=e("../../../utils/"),l=t.exports={};s.forEach(function(e){var t=o[e],r=n(e),s={};Object.keys(t.schema).forEach(function(e){s[n(e)]="geometry."+e});var u="a-"+r,h=a(u,c.extendDeep({},i(),{defaultComponents:{geometry:{primitive:e}},mappings:s}));l[u]=h})},{"../../../core/geometry":103,"../../../utils/":172,"../getMeshMixin":115,"../primitives":117}],133:[function(e,t,r){var n=e("../core/geometry").registerGeometry,i=e("../lib/three");n("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(e){this.geometry=new i.BoxGeometry(e.width,e.height,e.depth,e.segmentsWidth,e.segmentsHeight,e.segmentsDepth)}})},{"../core/geometry":103,"../lib/three":150}],134:[function(e,t,r){var n=e("../core/geometry").registerGeometry,i=e("../lib/three"),o=i.Math.degToRad;n("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new i.CircleGeometry(e.radius,e.segments,o(e.thetaStart),o(e.thetaLength))}})},{"../core/geometry":103,"../lib/three":150}],135:[function(e,t,r){var n=e("../core/geometry").registerGeometry,i=e("../lib/three"),o=i.Math.degToRad;n("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new i.CylinderGeometry(e.radiusTop,e.radiusBottom,e.height,e.segmentsRadial,e.segmentsHeight,e.openEnded,o(e.thetaStart),o(e.thetaLength))}})},{"../core/geometry":103,"../lib/three":150}],136:[function(e,t,r){var n=e("../core/geometry").registerGeometry,i=e("../lib/three"),o=i.Math.degToRad;n("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new i.CylinderGeometry(e.radius,e.radius,e.height,e.segmentsRadial,e.segmentsHeight,e.openEnded,o(e.thetaStart),o(e.thetaLength))}})},{"../core/geometry":103,"../lib/three":150}],137:[function(e,t,r){var n=e("../core/geometry").registerGeometry,i=e("../lib/three");n("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new i.DodecahedronGeometry(e.radius,e.detail)}})},{"../core/geometry":103,"../lib/three":150}],138:[function(e,t,r){var n=e("../core/geometry").registerGeometry,i=e("../lib/three");n("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new i.IcosahedronGeometry(e.radius,e.detail)}})},{"../core/geometry":103,"../lib/three":150}],139:[function(e,t,r){e("./box.js"),e("./circle.js"),e("./cone.js"),e("./cylinder.js"),e("./dodecahedron.js"),e("./icosahedron.js"),e("./octahedron.js"),e("./plane.js"),e("./ring.js"),e("./sphere.js"),e("./tetrahedron.js"),e("./torus.js"),e("./torusKnot.js"),e("./triangle.js")},{"./box.js":133,"./circle.js":134,"./cone.js":135,"./cylinder.js":136,"./dodecahedron.js":137,"./icosahedron.js":138,"./octahedron.js":140,"./plane.js":141,"./ring.js":142,"./sphere.js":143,"./tetrahedron.js":144,"./torus.js":145,"./torusKnot.js":146,"./triangle.js":147}],140:[function(e,t,r){var n=e("../core/geometry").registerGeometry,i=e("../lib/three");n("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new i.OctahedronGeometry(e.radius,e.detail)}})},{"../core/geometry":103,"../lib/three":150}],141:[function(e,t,r){var n=e("../core/geometry").registerGeometry,i=e("../lib/three");n("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(e){this.geometry=new i.PlaneGeometry(e.width,e.height,e.segmentsWidth,e.segmentsHeight)}})},{"../core/geometry":103,"../lib/three":150}],142:[function(e,t,r){var n=e("../core/geometry").registerGeometry,i=e("../lib/three"),o=i.Math.degToRad;n("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(e){this.geometry=new i.RingGeometry(e.radiusInner,e.radiusOuter,e.segmentsTheta,e.segmentsPhi,o(e.thetaStart),o(e.thetaLength))}})},{"../core/geometry":103,"../lib/three":150}],143:[function(e,t,r){var n=e("../core/geometry").registerGeometry,i=e("../lib/three"),o=i.Math.degToRad;n("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(e){this.geometry=new i.SphereGeometry(e.radius,e.segmentsWidth,e.segmentsHeight,o(e.phiStart),o(e.phiLength),o(e.thetaStart),o(e.thetaLength))}})},{"../core/geometry":103,"../lib/three":150}],144:[function(e,t,r){var n=e("../core/geometry").registerGeometry,i=e("../lib/three");n("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(e){this.geometry=new i.TetrahedronGeometry(e.radius,e.detail)}})},{"../core/geometry":103,"../lib/three":150}],145:[function(e,t,r){var n=e("../core/geometry").registerGeometry,i=e("../lib/three"),o=i.Math.degToRad;n("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(e){this.geometry=new i.TorusGeometry(e.radius,2*e.radiusTubular,e.segmentsRadial,e.segmentsTubular,o(e.arc))}})},{"../core/geometry":103,"../lib/three":150}],146:[function(e,t,r){var n=e("../core/geometry").registerGeometry,i=e("../lib/three");n("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(e){this.geometry=new i.TorusKnotGeometry(e.radius,2*e.radiusTubular,e.segmentsTubular,e.segmentsRadial,e.p,e.q)}})},{"../core/geometry":103,"../lib/three":150}],147:[function(e,t,r){var n=e("../core/geometry").registerGeometry,i=e("../lib/three"),o=new i.Quaternion,s=new i.Vector3(0,0,1),a=new i.Vector2,c=new i.Vector2,l=new i.Vector2;n("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(e){var t,r,n,u,h,d;n=new i.Triangle,n.a.set(e.vertexA.x,e.vertexA.y,e.vertexA.z),n.b.set(e.vertexB.x,e.vertexB.y,e.vertexB.z),n.c.set(e.vertexC.x,e.vertexC.y,e.vertexC.z),r=n.normal(),o.setFromUnitVectors(r,s),u=n.a.clone().applyQuaternion(o),h=n.b.clone().applyQuaternion(o),d=n.c.clone().applyQuaternion(o),a.set(Math.min(u.x,h.x,d.x),Math.min(u.y,h.y,d.y)),c.set(Math.max(u.x,h.x,d.x),Math.max(u.y,h.y,d.y)),l.set(0,0).subVectors(c,a),u=(new i.Vector2).subVectors(u,a).divide(l),h=(new i.Vector2).subVectors(h,a).divide(l),d=(new i.Vector2).subVectors(d,a).divide(l),t=this.geometry=new i.Geometry,t.vertices.push(n.a),t.vertices.push(n.b),t.vertices.push(n.c),t.faces.push(new i.Face3(0,1,2,r)),t.faceVertexUvs[0]=[[u,h,d]]}})},{"../core/geometry":103,"../lib/three":150}],148:[function(e,t,r){window.hasNativeWebVRImplementation=!!window.navigator.getVRDisplays||!!window.navigator.getVRDevices;var n=e("webvr-polyfill");window.webvrpolyfill=new n({BUFFER_SCALE:1,CARDBOARD_UI_DISABLED:!0,ROTATE_INSTRUCTIONS_DISABLED:!0});var i=e("./utils/"),o=i.debug,s=o("A-Frame:error"),a=o("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&a("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),"file:"===window.location.protocol&&s("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/0.5.0/introduction/getting-started.html#using-a-local-server."),window.Promise=window.Promise||e("promise-polyfill"),i.device.isIOSOlderThan10(window.navigator.userAgent)&&(window.WebVRConfig.BUFFER_SCALE=1/window.devicePixelRatio),e("present"),i.device.isBrowserEnvironment&&(e("./style/aframe.css"),e("./style/rStats.css"));var c=e("./core/scene/a-scene").AScene,l=e("./core/component").components,u=e("./core/component").registerComponent,h=e("./core/geometry").registerGeometry,d=e("./extras/primitives/primitives").registerPrimitive,p=e("./core/shader").registerShader,m=e("./core/system").registerSystem,f=e("./core/shader").shaders,v=e("./core/system").systems,y=window.THREE=e("./lib/three"),g=window.TWEEN=e("@tweenjs/tween.js"),x=e("../package");e("./components/index"),e("./geometries/index"),e("./shaders/index"),e("./systems/index");var M=e("./core/a-node"),A=e("./core/a-entity");e("./core/a-animation"),e("./core/a-assets"),e("./core/a-cubemap"),e("./core/a-mixin"),e("./extras/components/"),e("./extras/primitives/"),console.log("A-Frame Version: 0.8.2 (Date 2018-04-15, Commit #b20527f)"),console.log("three Version:",x.dependencies.three),console.log("WebVR Polyfill Version:",x.dependencies["webvr-polyfill"]),t.exports=window.AFRAME={AComponent:e("./core/component").Component,AEntity:A,ANode:M,AScene:c,components:l,geometries:e("./core/geometry").geometries,registerComponent:u,registerElement:e("./core/a-register-element").registerElement,registerGeometry:h,registerPrimitive:d,registerShader:p,registerSystem:m,primitives:{getMeshMixin:e("./extras/primitives/getMeshMixin"),primitives:e("./extras/primitives/primitives").primitives},scenes:e("./core/scene/scenes"),schema:e("./core/schema"),shaders:f,systems:v,THREE:y,TWEEN:g,utils:i,version:x.version}},{"../package":51,"./components/index":60,"./core/a-animation":95,"./core/a-assets":96,"./core/a-cubemap":97,"./core/a-entity":98,"./core/a-mixin":99,"./core/a-node":100,"./core/a-register-element":101,"./core/component":102,"./core/geometry":103,"./core/scene/a-scene":105,"./core/scene/scenes":108,"./core/schema":110,"./core/shader":111,"./core/system":112,"./extras/components/":113,"./extras/primitives/":116,"./extras/primitives/getMeshMixin":115,"./extras/primitives/primitives":117,"./geometries/index":139,"./lib/three":150,"./shaders/index":152,"./style/aframe.css":157,"./style/rStats.css":158,"./systems/index":161,"./utils/":172,"@tweenjs/tween.js":1,present:31,"promise-polyfill":33,"webvr-polyfill":46}],149:[function(e,t,r){window.aframeStats=function(e){function t(){s("te").set(r()),window.performance.getEntriesByName&&s("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))}function r(){var e=a.querySelectorAll("*");return Array.prototype.slice.call(e).filter(function(e){return e.isEntity}),e.length}function n(){}function i(){}function o(e){s=e}var s=null,a=e;return{update:t,start:n,end:i,attach:o,values:{te:{caption:"Entities"},lt:{caption:"Load Time"}},groups:[{caption:"A-Frame",values:["te","lt"]}],fractions:[]}},"object"==typeof t&&(t.exports={aframeStats:window.aframeStats})},{}],150:[function(e,t,n){(function(r){var n=r.THREE=e("three");n.TextureLoader&&(n.TextureLoader.prototype.crossOrigin="anonymous"),n.ImageLoader&&(n.ImageLoader.prototype.crossOrigin="anonymous"),n.Cache&&(n.Cache.enabled=!0),e("three/examples/js/loaders/GLTFLoader"),e("three/examples/js/loaders/OBJLoader"),e("three/examples/js/loaders/MTLLoader"),e("three/examples/js/loaders/ColladaLoader"),n.ColladaLoader.prototype.crossOrigin="anonymous",n.GLTFLoader.prototype.crossOrigin="anonymous",n.MTLLoader.prototype.crossOrigin="anonymous",n.OBJLoader.prototype.crossOrigin="anonymous",t.exports=n}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{three:40,"three/examples/js/loaders/ColladaLoader":41,"three/examples/js/loaders/GLTFLoader":42,"three/examples/js/loaders/MTLLoader":43,"three/examples/js/loaders/OBJLoader":44}],151:[function(e,t,r){function n(e){return{fog:e.fog,color:new o.Color(e.color),wireframe:e.wireframe,wireframeLinewidth:e.wireframeLinewidth}}var i=e("../core/shader").registerShader,o=e("../lib/three"),s=e("../utils/");t.exports.Shader=i("flat",{schema:{color:{type:"color"},fog:{default:!0},height:{default:256},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(e){this.textureSrc=null,this.material=new o.MeshBasicMaterial(n(e)),s.material.updateMap(this,e)},update:function(e){this.updateMaterial(e),s.material.updateMap(this,e)},updateMaterial:function(e){var t=this.material;e=n(e),Object.keys(e).forEach(function(r){t[r]=e[r]})}})},{"../core/shader":111,"../lib/three":150,"../utils/":172}],152:[function(e,t,r){e("./flat"),e("./standard"),e("./sdf"),e("./msdf"),e("./ios10hls")},{"./flat":151,"./ios10hls":153,"./msdf":154,"./sdf":155,"./standard":156}],153:[function(e,t,r){var n=e("../core/shader").registerShader;t.exports.Shader=n("ios10hls",{schema:{src:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:["varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join("\n"),fragmentShader:["uniform sampler2D src;","uniform float opacity;","varying vec2 vUV;","void main() {","  vec2 offset = vec2(0, 0);","  vec2 repeat = vec2(1, 1);","  vec4 color = texture2D(src, vec2(vUV.x / repeat.x + offset.x, (1.0 - vUV.y) / repeat.y + offset.y)).bgra;","  gl_FragColor = vec4(color.rgb, opacity);","}"].join("\n")})},{"../core/shader":111}],154:[function(e,t,r){var n=e("../core/shader").registerShader;t.exports.Shader=n("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},negate:{type:"boolean",is:"uniform",default:!0},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:["attribute vec2 uv;","attribute vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join("\n"),fragmentShader:["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives: enable","#endif","precision highp float;","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","#define ALL_SMOOTH 0.4","#define ALL_ROUGH 0.02","#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))","uniform sampler2D map;","uniform vec3 color;","uniform float opacity;","uniform float alphaTest;","uniform bool negate;","varying vec2 vUV;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","void main() {","  vec3 sample = texture2D(map, vUV).rgb;","  if (negate) {","    sample = 1.0 - sample;","  }","  float sigDist = median(sample.r, sample.g, sample.b) - 0.5;","  float alpha = clamp(sigDist/fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  if (isBigEnough <= BIG_ENOUGH && alpha < alphaTest) { discard; return; }","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color.xyz, alpha * opacity);","}"].join("\n")})},{"../core/shader":111}],155:[function(e,t,r){var n=e("../core/shader").registerShader;t.exports.Shader=n("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:["attribute vec2 uv;","attribute vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join("\n"),fragmentShader:["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives: enable","#endif","precision highp float;","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","#define ALL_SMOOTH 0.4","#define ALL_ROUGH 0.02","#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))","uniform sampler2D map;","uniform vec3 color;","uniform float opacity;","uniform float alphaTest;","varying vec2 vUV;","#ifdef GL_OES_standard_derivatives","float contour(float width, float value) {","  return smoothstep(0.5 - value, 0.5 + value, width);","}","#else","float aastep(float value, float afwidth) {","  return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);","}","#endif","void main() {","#ifdef GL_OES_standard_derivatives","  vec2 uv = vUV;","  vec4 texColor = texture2D(map, uv);","  float dist = texColor.a;","  float width = fwidth(dist);","  float alpha = contour(dist, width);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * dist;","  }","  else if (isBigEnough <= BIG_ENOUGH) {","    vec4 box = vec4 (uv - duv, uv + duv);","    alpha = (alpha + 0.5 * (","      contour(texture2D(map, box.xy).a, width)","      + contour(texture2D(map, box.zw).a, width)","      + contour(texture2D(map, box.xw).a, width)","      + contour(texture2D(map, box.zy).a, width)","    )) / 3.0;","  }","  if (isBigEnough <= BIG_ENOUGH && alpha < alphaTest) { discard; return; }","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","#else","  vec4 texColor = texture2D(map, vUV);","  float value = texColor.a;","  float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));","  float alpha = aastep(value, afwidth);","  float ratio = (gl_FragCoord.w >= ALL_SMOOTH) ? 1.0 : (gl_FragCoord.w < ALL_ROUGH) ? 0.0 : (gl_FragCoord.w - ALL_ROUGH) / (ALL_SMOOTH - ALL_ROUGH);","  if (alpha < alphaTest) { if (ratio >= 1.0) { discard; return; } alpha = 0.0; }","  alpha = alpha * ratio + (1.0 - ratio) * value;","  if (ratio < 1.0)","    if (alpha <= DISCARD_ALPHA) { discard; return; }","#endif","  gl_FragColor = vec4(color, opacity * alpha);","}"].join("\n")})},{"../core/shader":111}],156:[function(e,t,r){function n(e){var t={color:new o.Color(e.color),emissive:new o.Color(e.emissive),emissiveIntensity:e.emissiveIntensity,fog:e.fog,metalness:e.metalness,roughness:e.roughness,wireframe:e.wireframe,wireframeLinewidth:e.wireframeLinewidth};return e.normalMap&&(t.normalScale=e.normalScale),e.ambientOcclusionMap&&(t.aoMapIntensity=e.ambientOcclusionMapIntensity),e.displacementMap&&(t.displacementScale=e.displacementScale,t.displacementBias=e.displacementBias),t}var i=e("../core/shader").registerShader,o=e("../lib/three"),s=e("../utils/"),a=new o.CubeTextureLoader,c={};t.exports.Shader=i("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},height:{default:256},metalness:{default:0,min:0,max:1},metalnessMap:{type:"map"},metalnessTextureOffset:{type:"vec2"},metalnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},roughnessMap:{type:"map"},roughnessTextureOffset:{type:"vec2"},roughnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},sphericalEnvMap:{type:"map"},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(e){this.material=new o.MeshStandardMaterial(n(e)),s.material.updateMap(this,e),e.normalMap&&s.material.updateDistortionMap("normal",this,e),e.displacementMap&&s.material.updateDistortionMap("displacement",this,e),e.ambientOcclusionMap&&s.material.updateDistortionMap("ambientOcclusion",this,e),e.metalnessMap&&s.material.updateDistortionMap("metalness",this,e),e.roughnessMap&&s.material.updateDistortionMap("roughness",this,e),this.updateEnvMap(e)},update:function(e){this.updateMaterial(e),s.material.updateMap(this,e),e.normalMap&&s.material.updateDistortionMap("normal",this,e),e.displacementMap&&s.material.updateDistortionMap("displacement",this,e),e.ambientOcclusionMap&&s.material.updateDistortionMap("ambientOcclusion",this,e),e.metalnessMap&&s.material.updateDistortionMap("metalness",this,e),e.roughnessMap&&s.material.updateDistortionMap("roughness",this,e),this.updateEnvMap(e)},updateMaterial:function(e){var t=this.material;e=n(e),Object.keys(e).forEach(function(r){t[r]=e[r]})},updateEnvMap:function(e){var t=this,r=this.material,n=e.envMap,i=e.sphericalEnvMap;return!n&&!i||this.isLoadingEnvMap?(r.envMap=null,void(r.needsUpdate=!0)):(this.isLoadingEnvMap=!0,i?void this.el.sceneEl.systems.material.loadTexture(i,{src:i},function(e){t.isLoadingEnvMap=!1,e.mapping=o.SphericalReflectionMapping,r.envMap=e,s.material.handleTextureEvents(t.el,e),r.needsUpdate=!0}):c[n]?void c[n].then(function(e){t.isLoadingEnvMap=!1,r.envMap=e,s.material.handleTextureEvents(t.el,e),r.needsUpdate=!0}):void(c[n]=new Promise(function(e){s.srcLoader.validateCubemapSrc(n,function(n){a.load(n,function(n){t.isLoadingEnvMap=!1,r.envMap=n,s.material.handleTextureEvents(t.el,n),e(n)})})})))}})},{"../core/shader":111,"../lib/three":150,"../utils/":172}],157:[function(e,t,r){var n=".a-html{bottom:0;left:0;position:fixed;right:0;top:0}.a-body{height:100%;margin:0;overflow:hidden;padding:0;width:100%}:-webkit-full-screen{background-color:transparent}.a-hidden{display:none!important}.a-canvas{height:100%;left:0;position:absolute;top:0;width:100%}.a-canvas.a-grab-cursor:hover{cursor:grab;cursor:-moz-grab;cursor:-webkit-grab}.a-canvas.a-grab-cursor:active,.a-grabbing{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing}a-scene.fullscreen .a-canvas{width:100%!important;height:100%!important;top:0!important;left:0!important;right:0!important;bottom:0!important;position:fixed!important}.a-inspector-loader{background-color:#ed3160;position:fixed;left:3px;top:3px;padding:6px 10px;color:#fff;text-decoration:none;font-size:12px;font-family:Roboto,sans-serif;text-align:center;z-index:99999;width:204px}@keyframes dots-1{from{opacity:0}25%{opacity:1}}@keyframes dots-2{from{opacity:0}50%{opacity:1}}@keyframes dots-3{from{opacity:0}75%{opacity:1}}@-webkit-keyframes dots-1{from{opacity:0}25%{opacity:1}}@-webkit-keyframes dots-2{from{opacity:0}50%{opacity:1}}@-webkit-keyframes dots-3{from{opacity:0}75%{opacity:1}}.a-inspector-loader .dots span{animation:dots-1 2s infinite steps(1);-webkit-animation:dots-1 2s infinite steps(1)}.a-inspector-loader .dots span:first-child+span{animation-name:dots-2;-webkit-animation-name:dots-2}.a-inspector-loader .dots span:first-child+span+span{animation-name:dots-3;-webkit-animation-name:dots-3}a-scene{display:block;position:relative;height:100%;width:100%}a-assets,a-scene audio,a-scene img,a-scene video{display:none}.a-enter-vr-modal,.a-orientation-modal{font-family:Consolas,Andale Mono,Courier New,monospace}.a-enter-vr-modal a{border-bottom:1px solid #fff;padding:2px 0;text-decoration:none;transition:.1s color ease-in}.a-enter-vr-modal a:hover{background-color:#fff;color:#111;padding:2px 4px;position:relative;left:-4px}.a-enter-vr{font-family:sans-serif,monospace;font-size:13px;width:100%;font-weight:200;line-height:16px;position:absolute;right:20px;bottom:20px}.a-enter-vr.embedded{right:5px;bottom:5px}.a-enter-vr-button,.a-enter-vr-modal,.a-enter-vr-modal a{color:#fff}.a-enter-vr-button{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20245.82%20141.73%22%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill%3A%23fff%3Bfill-rule%3Aevenodd%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Emask%3C%2Ftitle%3E%3Cpath%20class%3D%22a%22%20d%3D%22M175.56%2C111.37c-22.52%2C0-40.77-18.84-40.77-42.07S153%2C27.24%2C175.56%2C27.24s40.77%2C18.84%2C40.77%2C42.07S198.08%2C111.37%2C175.56%2C111.37ZM26.84%2C69.31c0-23.23%2C18.25-42.07%2C40.77-42.07s40.77%2C18.84%2C40.77%2C42.07-18.26%2C42.07-40.77%2C42.07S26.84%2C92.54%2C26.84%2C69.31ZM27.27%2C0C11.54%2C0%2C0%2C12.34%2C0%2C28.58V110.9c0%2C16.24%2C11.54%2C30.83%2C27.27%2C30.83H99.57c2.17%2C0%2C4.19-1.83%2C5.4-3.7L116.47%2C118a8%2C8%2C0%2C0%2C1%2C12.52-.18l11.51%2C20.34c1.2%2C1.86%2C3.22%2C3.61%2C5.39%2C3.61h72.29c15.74%2C0%2C27.63-14.6%2C27.63-30.83V28.58C245.82%2C12.34%2C233.93%2C0%2C218.19%2C0H27.27Z%22%2F%3E%3C%2Fsvg%3E) 50% 50%/70% 70% no-repeat rgba(0,0,0,.35);border:0;bottom:0;cursor:pointer;min-width:50px;min-height:30px;padding-right:5%;padding-top:4%;position:absolute;right:0;transition:background-color .05s ease;-webkit-transition:background-color .05s ease;z-index:9999}.a-enter-vr-button:active,.a-enter-vr-button:hover{background-color:#666}[data-a-enter-vr-no-webvr] .a-enter-vr-button{border-color:#666;opacity:.65}[data-a-enter-vr-no-webvr] .a-enter-vr-button:active,[data-a-enter-vr-no-webvr] .a-enter-vr-button:hover{background-color:rgba(0,0,0,.35);cursor:not-allowed}.a-enter-vr-modal{background-color:#666;border-radius:0;display:none;min-height:32px;margin-right:70px;padding:9px;width:280px;right:2%;position:absolute}.a-enter-vr-modal:after{border-bottom:10px solid transparent;border-left:10px solid #666;border-top:10px solid transparent;display:inline-block;content:'';position:absolute;right:-5px;top:5px;width:0;height:0}.a-enter-vr-modal a,.a-enter-vr-modal p{display:inline}.a-enter-vr-modal p{margin:0}.a-enter-vr-modal p:after{content:' '}[data-a-enter-vr-no-headset].a-enter-vr:hover .a-enter-vr-modal,[data-a-enter-vr-no-webvr].a-enter-vr:hover .a-enter-vr-modal{display:block}.a-orientation-modal{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center/50% 50% no-repeat rgba(244,244,244,1);bottom:0;font-size:14px;font-weight:600;left:0;line-height:20px;right:0;position:fixed;top:0;z-index:9999999}.a-orientation-modal:after{color:#666;content:\"Insert phone into Cardboard holder.\";display:block;position:absolute;text-align:center;top:70%;transform:translateY(-70%);width:100%}.a-orientation-modal button{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;border:none;height:50px;text-indent:-9999px;width:50px}";e("browserify-css").createStyle(n,{href:"src/style/aframe.css"}),t.exports=n},{"browserify-css":5}],158:[function(e,t,r){var n=".rs-base{background-color:#333;color:#fafafa;border-radius:0;font:10px monospace;left:5px;line-height:1em;opacity:.85;overflow:hidden;padding:10px;position:fixed;top:5px;width:300px;z-index:10000}.rs-base div.hidden{display:none}.rs-base h1{color:#fff;cursor:pointer;font-size:1.4em;font-weight:300;margin:0 0 5px;padding:0}.rs-group{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-direction:column-reverse;flex-direction:column-reverse;margin-bottom:5px}.rs-group:last-child{margin-bottom:0}.rs-counter-base{align-items:center;display:-webkit-box;display:-webkit-flex;display:flex;height:10px;-webkit-justify-content:space-between;justify-content:space-between;margin:2px 0}.rs-counter-base.alarm{color:#b70000;text-shadow:0 0 0 #b70000,0 0 1px #fff,0 0 1px #fff,0 0 2px #fff,0 0 2px #fff,0 0 3px #fff,0 0 3px #fff,0 0 4px #fff,0 0 4px #fff}.rs-counter-id{font-weight:300;-webkit-box-ordinal-group:0;-webkit-order:0;order:0;width:54px}.rs-counter-value{font-weight:300;-webkit-box-ordinal-group:1;-webkit-order:1;order:1;text-align:right;width:35px}.rs-canvas{-webkit-box-ordinal-group:2;-webkit-order:2;order:2}@media (min-width:480px){.rs-base{left:20px;top:20px}}";e("browserify-css").createStyle(n,{href:"src/style/rStats.css"}),t.exports=n},{"browserify-css":5}],159:[function(e,t,r){function n(e){var t;e.camera&&(t=e.querySelector("["+a+"]"))&&e.removeChild(t)}var i=e("../utils/bind"),o=e("../constants/"),s=e("../core/system").registerSystem,a="data-aframe-default-camera";t.exports.System=s("camera",{init:function(){this.activeCameraEl=null,this.sceneEl.addEventListener("loaded",i(this.setupDefaultCamera,this))},setupDefaultCamera:function(){var e,t=this.sceneEl;if(t.camera&&!t.camera.el.getAttribute("camera").spectator)return void t.emit("camera-ready",{cameraEl:t.camera.el});e=document.createElement("a-entity"),e.setAttribute("camera",{active:!0}),e.setAttribute("wasd-controls",""),e.setAttribute("look-controls",""),e.setAttribute(o.AFRAME_INJECTED,""),e.setAttribute("position",{x:0,y:o.DEFAULT_CAMERA_HEIGHT,z:0}),t.appendChild(e),t.addEventListener("enter-vr",this.removeDefaultOffset),t.addEventListener("exit-vr",this.addDefaultOffset),t.emit("camera-ready",{cameraEl:e})},disableActiveCamera:function(){var e=this.sceneEl.querySelectorAll("[camera]");e[e.length-1].setAttribute("camera","active",!0)},setActiveCamera:function(e){var t,r,i,o,s=this.activeCameraEl,c=this.sceneEl;if((o=e.getObject3D("camera"))&&e!==this.activeCameraEl){var l=c.querySelector("["+a+"]"),u=l&&l.querySelector("[camera]");for(e!==u&&n(c),this.activeCameraEl=e,this.activeCameraEl.play(),c.camera=o,s&&s.setAttribute("camera","active",!1),r=c.querySelectorAll("[camera]"),i=0;i<r.length;i++)t=r[i],t.isEntity&&e!==t&&(t.setAttribute("camera","active",!1),t.pause());c.emit("camera-set-active",{cameraEl:e})}},setSpectatorCamera:function(e){var t,r,n=this.spectatorCameraEl,i=this.sceneEl;(t=e.getObject3D("camera"))&&e!==this.spectatorCameraEl&&(n&&n.setAttribute("camera","spectator",!1),r=this.spectatorCameraEl=e,r.setAttribute("camera","active",!1),r.play(),i.emit("camera-set-spectator",{cameraEl:e}))},disableSpectatorCamera:function(){this.spectatorCameraEl=void 0},tock:function(){var e,t=this.sceneEl,r=t.renderer.vr.enabled;this.spectatorCameraEl&&!t.isMobile&&(e=this.spectatorCameraEl.components.camera.camera,t.renderer.vr.enabled=!1,t.renderer.render(t.object3D,e),t.renderer.vr.enabled=r)}})},{"../constants/":93,"../core/system":112,"../utils/bind":166}],160:[function(e,t,r){function n(e){var t=e.primitive,r=a[t]&&a[t].Geometry,n=new r;if(!r)throw new Error("Unknown geometry `"+t+"`");return n.init(e),s(n.geometry,e.buffer)}function i(e,t){e[t]--}function o(e,t){e[t]=void 0===e[t]?1:e[t]+1}function s(e,t){var r;return t?(r=(new l.BufferGeometry).fromGeometry(e),r.metadata={type:e.type,parameters:e.parameters||{}},e.dispose(),r):e}var a=e("../core/geometry").geometries,c=e("../core/system").registerSystem,l=e("../lib/three");t.exports.System=c("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(e){var t,r,i=this.cache;return e.skipCache?n(e):(r=this.hash(e),t=i[r],o(this.cacheCount,r),t||(t=n(e),i[r]=t,t))},unuseGeometry:function(e){var t,r,n=this.cache,o=this.cacheCount;e.skipCache||(r=this.hash(e),n[r]&&(i(o,r),o[r]>0||(t=n[r],t.dispose(),delete n[r],delete o[r])))},hash:function(e){return JSON.stringify(e)}})},{"../core/geometry":103,"../core/system":112,"../lib/three":150}],161:[function(e,t,r){e("./camera"),e("./geometry"),e("./light"),e("./material"),e("./shadow"),e("./tracked-controls")},{"./camera":159,"./geometry":160,"./light":162,"./material":163,"./shadow":164,"./tracked-controls":165}],162:[function(e,t,r){var n=e("../core/system").registerSystem,i=e("../utils/bind"),o=e("../constants/");t.exports.System=n("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",i(this.setupDefaultLights,this))},registerLight:function(e){e.hasAttribute("data-aframe-default-light")||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var e,t=this.sceneEl;if(this.defaultLights){e=document.querySelectorAll("[data-aframe-default-light]");for(var r=0;r<e.length;r++)t.removeChild(e[r]);this.defaultLights=!1}},setupDefaultLights:function(){var e,t,r=this.sceneEl;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||(e=document.createElement("a-entity"),e.setAttribute("light",{color:"#BBB",type:"ambient"}),e.setAttribute("data-aframe-default-light",""),e.setAttribute(o.AFRAME_INJECTED,""),r.appendChild(e),t=document.createElement("a-entity"),t.setAttribute("light",{color:"#FFF",intensity:.6,castShadow:!0}),t.setAttribute("position",{x:-.5,y:1,z:1}),t.setAttribute("data-aframe-default-light",""),t.setAttribute(o.AFRAME_INJECTED,""),r.appendChild(t),this.defaultLights=!0)}})},{"../constants/":93,"../core/system":112,"../utils/bind":166}],163:[function(e,t,r){function n(e,t){var r,n,i,o=t.getAttribute("id");if(o)return o;for(n="",i=e||{},r=0;r<t.attributes.length;r++)i[t.attributes[r].name]=t.attributes[r].value;return Object.keys(i).sort().forEach(function(e){n+=e+":"+i[e]+";"}),n}function i(e,t){function r(r,n){function i(e){o(e,t),e.needsUpdate=!0,r(e)}if("string"!=typeof e)return void i(new l.Texture(e));f.load(e,i,function(){},function(e){m("`$s` could not be fetched (Error code: %s; Response: %s)",e.status,e.statusText)})}return new Promise(r)}function o(e,t){var r=t.offset||{x:0,y:0},n=t.repeat||{x:1,y:1};(t.npot||!1)&&(e.wrapS=l.ClampToEdgeWrapping,e.wrapT=l.ClampToEdgeWrapping,e.magFilter=l.LinearFilter,e.minFilter=l.LinearFilter),1===n.x&&1===n.y||(e.wrapS=l.RepeatWrapping,e.wrapT=l.RepeatWrapping,e.repeat.set(n.x,n.y)),0===r.x&&0===r.y||e.offset.set(r.x,r.y)}function s(e,t,r){var n=document.createElement("video");return n.width=t,n.height=r,n.setAttribute("playsinline",""),n.setAttribute("webkit-playsinline",""),n.autoplay=!0,n.loop=!0,n.crossOrigin="anonymous",n.addEventListener("error",function(){v("`$s` is not a valid video",e)},!0),n.src=e,n}function a(e){return e.autoplay=e.hasAttribute("autoplay")&&"false"!==e.getAttribute("autoplay"),e.controls=e.hasAttribute("controls")&&"false"!==e.getAttribute("controls"),"false"===e.getAttribute("loop")&&e.removeAttribute("loop"),"false"===e.getAttribute("preload")&&(e.preload="none"),e.crossOrigin=e.crossOrigin||"anonymous",e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline",""),e}var c=e("../core/system").registerSystem,l=e("../lib/three"),u=e("../utils/"),h=e("../utils/material").isHLS,d=u.bind,p=u.debug,m=p("components:texture:error"),f=new l.TextureLoader,v=p("components:texture:warn");f.setCrossOrigin("anonymous"),t.exports.System=c("material",{init:function(){this.materials={},this.textureCounts={},this.textureCache={},this.sceneEl.addEventListener("materialtextureloaded",d(this.onMaterialTextureLoaded,this))},clearTextureCache:function(){this.textureCache={}},loadTexture:function(e,t,r){function n(e){o.loadImage(e,t,r)}function i(e){o.loadVideo(e,t,r)}var o=this;return"CANVAS"===e.tagName?void this.loadCanvas(e,t,r):"VIDEO"===e.tagName?(e.src||e.srcObject||e.childElementCount||v("Video element was defined with neither `source` elements nor `src` / `srcObject` attributes."),void this.loadVideo(e,t,r)):void u.srcLoader.validateSrc(e,n,i)},loadImage:function(e,t,r){var n=this.hash(t),o=this.textureCache;if(o[n])return void o[n].then(r);o[n]=i(e,t),o[n].then(r)},loadCanvas:function(e,t,r){e.readyState=2,e.HAVE_CURRENT_DATA=2,this.loadVideo(e,t,r)},loadVideo:function(e,t,r){function n(e){e.texture.needsUpdate=!0,r(e.texture,e.videoEl)}var i,c,u,d,p=this.textureCache;if("string"!=typeof e){if(u=e,i=this.hashVideo(t,u),p[i])return void p[i].then(n);a(u)}if(u=u||s(e,t.width,t.height),i=this.hashVideo(t,u),p[i])return void p[i].then(n);c=new l.VideoTexture(u),c.minFilter=l.LinearFilter,o(c,t),this.sceneEl.isIOS&&h(u.src||u.getAttribute("src"),u.type||u.getAttribute("type"))&&(c.format=l.RGBAFormat,c.needsCorrectionBGRA=!0,c.flipY=!1,c.needsCorrectionFlipY=!0),d={texture:c,videoEl:u},p[i]=Promise.resolve(d),n(d)},hash:function(e){return e.src.tagName&&(e=u.extendDeep({},e),e.src=e.src.src),JSON.stringify(e)},hashVideo:function(e,t){return n(e,t)},registerMaterial:function(e){this.materials[e.uuid]=e},unregisterMaterial:function(e){delete this.materials[e.uuid];var t=this.textureCounts;Object.keys(e).filter(function(t){return e[t]&&e[t].isTexture}).forEach(function(r){--t[e[r].uuid]<=0&&e[r].dispose()})},updateMaterials:function(e){var t=this.materials;Object.keys(t).forEach(function(e){t[e].needsUpdate=!0})},onMaterialTextureLoaded:function(e){this.textureCounts[e.detail.texture.uuid]||(this.textureCounts[e.detail.texture.uuid]=0),this.textureCounts[e.detail.texture.uuid]++}})},{"../core/system":112,"../lib/three":150,"../utils/":172,"../utils/material":173}],164:[function(e,t,r){var n=e("../core/system").registerSystem,i=e("../lib/three"),o={basic:i.BasicShadowMap,pcf:i.PCFShadowMap,pcfsoft:i.PCFSoftShadowMap};t.exports.System=n("shadow",{schema:{autoUpdate:{default:!0},type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]}},init:function(){var e=this.sceneEl,t=this.data;this.shadowMapEnabled=!1,e.renderer&&(e.renderer.shadowMap.type=o[t.type],e.renderer.shadowMap.autoUpdate=t.autoUpdate,this.setShadowMapEnabled(this.shadowMapEnabled))},setShadowMapEnabled:function(e){var t=this.sceneEl.renderer;this.shadowMapEnabled=e,t&&(t.shadowMap.enabled=e)}})},{"../core/system":112,"../lib/three":150}],165:[function(e,t,r){var n=e("../core/system").registerSystem,i=e("../utils");t.exports.System=n("tracked-controls",{init:function(){var e=this;this.controllers=[],this.updateControllerList(navigator.getGamepads&&navigator.getGamepads()),this.throttledUpdateControllerList=i.throttle(this.updateControllerList,500,this),navigator.getVRDisplays&&this.sceneEl.addEventListener("enter-vr",function(){navigator.getVRDisplays().then(function(t){t.length&&(e.vrDisplay=t[0])})})},tick:function(){var e;e=navigator.getGamepads&&navigator.getGamepads(),this.throttledUpdateControllerList(e)},updateControllerList:function(e){var t,r,n,i=this.controllers;if(e){for(n=i.length,i.length=0,r=0;r<e.length;++r)(t=e[r])&&t.pose&&i.push(t);i.length!==n&&this.el.emit("controllersupdated",void 0,!1)}}})},{"../core/system":112,"../utils":172}],166:[function(e,t,r){t.exports=function(e,t){return function(r){return function(){var n=r.concat(Array.prototype.slice.call(arguments,0));return e.apply(t,n)}}(Array.prototype.slice.call(arguments,2))}},{}],167:[function(e,t,r){function n(e,t){var r,n;return e&&e instanceof Object?(t&&(e.x=void 0===e.x?t.x:e.x,e.y=void 0===e.y?t.y:e.y,e.z=void 0===e.z?t.z:e.z,e.w=void 0===e.w?t.w:e.w),s(e)):null===e||void 0===e?"object"==typeof t?c({},t):t:(r=e.trim().replace(/\s+/g," ").split(" "),n={},n.x=r[0]||t&&t.x,n.y=r[1]||t&&t.y,n.z=r[2]||t&&t.z,n.w=r[3]||t&&t.w,s(n))}function i(e){return"object"!=typeof e?e:[e.x,e.y,e.z,e.w].join(" ").trim()}function o(e){return u.test(e)}function s(e){var t;for(t in e)void 0!==e[t]?e[t].constructor===String&&(e[t]=parseFloat(e[t],10)):delete e[t];return e}var a=e("./debug"),c=e("object-assign"),l=a("utils:coordinates:warn"),u=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/;t.exports.regex=u,t.exports.parse=n,t.exports.stringify=i,t.exports.isCoordinates=o,t.exports.isCoordinate=function(e){return l("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),o(e)},t.exports.toVector3=function(e){return new THREE.Vector3(e.x,e.y,e.z)}},{"./debug":168,"object-assign":25}],168:[function(e,t,r){(function(r){function n(e){var t=e.split(":");return t[t.length-1]}function i(e){var t=n(e);return a.colors&&a.colors[t]||null}var o=e("debug"),s=e("object-assign"),a={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}},c=function(e){var t=o(e);return t.color=i(e),t};s(c,o);var l=function(){try{return window.localStorage}catch(e){}}();c.enable(l&&(parseInt(l.logs,10)||"true"===l.logs)?"*":"*:error,*:info,*:warn"),r.browser&&(window.logs=c),t.exports=c}).call(this,e("_process"))},{_process:32,debug:8,"object-assign":25}],169:[function(e,t,r){(function(e){function r(){return l}function n(){return!!r()}function i(){var e=r();return!h()&&!a()&&(e&&e.capabilities.hasPosition)}function o(e){return/ipad|Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(e||window.navigator.userAgent)}function s(){return/iPad|iPhone|iPod/.test(window.navigator.platform)}function a(){return/SamsungBrowser.+Mobile VR/i.test(window.navigator.userAgent)}function c(){return/R7 Build/.test(window.navigator.userAgent)}var l,u;navigator.getVRDisplays&&navigator.getVRDisplays().then(function(e){l=e.length&&e[0],u="Cardboard VRDisplay"===l.displayName}),t.exports.getVRDisplay=r,t.exports.checkHeadsetConnected=n,t.exports.checkHasPositionalTracking=i;var h=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),(s()||o()||c())&&(e=!0)}(window.navigator.userAgent||window.navigator.vendor||window.opera),function(){return e}}();t.exports.isMobile=h,t.exports.isTablet=o,t.exports.isIOS=s,t.exports.isGearVR=a,t.exports.isR7=c,t.exports.isLandscape=function(){var e=window.orientation;return c()&&(e+=90),90===e||-90===e},t.exports.isIOSOlderThan10=function(e){return/(iphone|ipod|ipad).*os.(7|8|9)/i.test(e)},t.exports.isBrowserEnvironment=!(e&&!e.browser),t.exports.isNodeEnvironment=!t.exports.isBrowserEnvironment,t.exports.PolyfillControls=function(e){var t;window.VRFrameData&&(t=new window.VRFrameData),this.update=function(){var r;l&&u&&(l.getFrameData(t),r=t.pose,null!==r.orientation&&e.quaternion.fromArray(r.orientation),null!==r.position?e.position.fromArray(r.position):e.position.set(0,0,0))}}}).call(this,e("_process"))},{_process:32}],170:[function(e,t,r){function n(e,t){return t=t||".",i[t]||(i[t]={}),-1!==e.indexOf(t)?i[t][e]=e.split(t):i[t][e]=e,i[t][e]}var i={};t.exports.getComponentPropertyPath=n,t.exports.propertyPathCache=i,t.exports.getComponentProperty=function(e,t,r){var i;return r=r||".",-1!==t.indexOf(r)?(i=n(t,r),i.constructor===String?e.getAttribute(i):e.getAttribute(i[0])[i[1]]):e.getAttribute(t)},t.exports.setComponentProperty=function(e,t,r,i){var o;if(i=i||".",-1!==t.indexOf(i))return o=n(t,i),void(o.constructor===String?e.setAttribute(o,r):e.setAttribute(o[0],o[1],r));e.setAttribute(t,r)}},{}],171:[function(e,t,r){t.exports=function(e){var t=e.style.width,r=e.style.height;e.style.width=parseInt(t,10)+1+"px",e.style.height=parseInt(r,10)+1+"px",setTimeout(function(){e.style.width=t,e.style.height=r},200)}},{}],172:[function(e,t,r){var n=e("./debug"),i=e("deep-assign"),o=e("./device"),s=e("object-assign"),a=e("./object-pool"),c=n("utils:warn");t.exports.bind=e("./bind"),t.exports.coordinates=e("./coordinates"),t.exports.debug=n,t.exports.device=o,t.exports.entity=e("./entity"),t.exports.forceCanvasResizeSafariMobile=e("./forceCanvasResizeSafariMobile"),t.exports.material=e("./material"),t.exports.objectPool=a,t.exports.split=e("./split").split,t.exports.styleParser=e("./styleParser"),t.exports.trackedControls=e("./tracked-controls"),t.exports.checkHeadsetConnected=function(){return c("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),o.checkHeadsetConnected(arguments)},t.exports.isGearVR=function(){return c("`utils.isGearVR` has moved to `utils.device.isGearVR`"),o.isGearVR(arguments)},t.exports.isIOS=function(){return c("`utils.isIOS` has moved to `utils.device.isIOS`"),o.isIOS(arguments)},t.exports.isMobile=function(){return c("`utils.isMobile has moved to `utils.device.isMobile`"),o.isMobile(arguments)},t.exports.throttle=function(e,r,n){var i;return n&&(e=t.exports.bind(e,n)),function(){var t=Date.now(),n=void 0===i?r:t-i;(void 0===i||n>=r)&&(i=t,e.apply(null,arguments))}},t.exports.throttleTick=function(e,r,n){var i;return n&&(e=t.exports.bind(e,n)),function(t,n){var o=void 0===i?n:t-i;(void 0===i||o>=r)&&(i=t,e(t,o))}},t.exports.debounce=function(e,t,r){var n;return function(){var i=this,o=arguments,s=function(){n=null,r||e.apply(i,o)},a=r&&!n;clearTimeout(n),n=setTimeout(s,t),a&&e.apply(i,o)}},t.exports.extend=s,t.exports.extendDeep=i,t.exports.clone=function(e){return JSON.parse(JSON.stringify(e))};var l=function(){var e=a.createPool(function(){return[]});return function(t,r){var n,i,o,s,a,c;if(void 0===t||void 0===r||null===t||null===r||!(t&&r&&t.constructor===Object&&r.constructor===Object||t.constructor===Array&&r.constructor===Array))return t===r;i=e.use(),o=e.use(),i.length=0,o.length=0;for(n in t)i.push(n);for(n in r)o.push(n);if(i.length!==o.length)return e.recycle(i),e.recycle(o),!1;for(s=0;s<i.length;++s)if(a=t[i[s]],c=r[i[s]],"object"==typeof a||"object"==typeof c||Array.isArray(a)&&Array.isArray(c)){if(a===c)continue;if(!l(a,c))return e.recycle(i),e.recycle(o),!1}else if(a!==c)return e.recycle(i),e.recycle(o),!1;return e.recycle(i),e.recycle(o),!0}}();t.exports.deepEqual=l,t.exports.diff=function(){var e=[];return function(t,r,n){var i,o,s,a,c,u,h;a=n||{},e.length=0;for(c in t)e.push(c);if(!r)return a;for(s in r)-1===e.indexOf(s)&&e.push(s);for(u=0;u<e.length;u++)c=e[u],i=t[c],o=r[c],((h=i&&o&&i.constructor===Object&&o.constructor===Object)&&!l(i,o)||!h&&i!==o)&&(a[c]=o);return a}}(),t.exports.shouldCaptureKeyEvent=function(e){return!e.metaKey&&document.activeElement===document.body},t.exports.splitString=function(e,t){void 0===t&&(t=" ");var r=new RegExp(t,"g");return e=(e||"").replace(r,t),e.split(t)},t.exports.getElData=function(e,t){function r(t){e.hasAttribute(t)&&(n[t]=e.getAttribute(t))}t=t||{};var n={};return Object.keys(t).forEach(r),n},t.exports.getUrlParameter=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=t.exec(location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},t.exports.isIframed=function(){return window.top!==window.self},t.exports.findAllScenes=function(e){for(var t=[],r=e.getElementsByTagName("*"),n=0,i=r.length;n<i;n++)r[n].isScene&&t.push(r[n]);return t},t.exports.srcLoader=e("./src-loader")},{"./bind":166,"./coordinates":167,"./debug":168,"./device":169,"./entity":170,"./forceCanvasResizeSafariMobile":171,"./material":173,"./object-pool":174,"./split":175,"./src-loader":176,"./styleParser":177,"./tracked-controls":178,"deep-assign":10,"object-assign":25}],173:[function(e,t,r){function n(e,t){t&&(e.emit("materialtextureloaded",{src:t.image,texture:t}),t.image&&"VIDEO"===t.image.tagName&&(t.image.addEventListener("loadeddata",function(){e.components&&e.components.material&&(t.needsCorrectionBGRA&&t.needsCorrectionFlipY&&-1!==["standard","flat"].indexOf(e.components.material.data.shader)&&e.setAttribute("material","shader","ios10hls"),e.emit("materialvideoloadeddata",{src:t.image,texture:t}))}),t.image.addEventListener("ended",function(){e.emit("materialvideoended",{src:t.image,texture:t})})))}var i=e("../lib/three"),o=["application/x-mpegurl","application/vnd.apple.mpegurl"];t.exports.updateMapMaterialFromData=function(e,t,r,o){function s(t){r.materialSrcs[e]===u&&a(t)}function a(t){l[e]=t,l.needsUpdate=!0,n(c,t)}var c=r.el,l=r.material,u=o[t];if(r.materialSrcs||(r.materialSrcs={}),!u)return delete r.materialSrcs[e],void a(null);u!==r.materialSrcs[e]&&(r.materialSrcs[e]=u,u instanceof i.Texture?a(u):c.sceneEl.systems.material.loadTexture(u,{src:u,repeat:o.repeat,offset:o.offset,npot:o.npot},s))},t.exports.updateMap=function(e,r){return t.exports.updateMapMaterialFromData("map","src",e,r)},t.exports.updateDistortionMap=function(e,t,r){function i(e){a[o+"Map"]=e,a.needsUpdate=!0,n(s,e)}var o=e;"ambientOcclusion"===e&&(o="ao");var s=t.el,a=t.material,c=r[e+"Map"],l={};if(l.src=c,l.offset=r[e+"TextureOffset"],l.repeat=r[e+"TextureRepeat"],l.wrap=r[e+"TextureWrap"],c){if(c===t[e+"TextureSrc"])return;return t[e+"TextureSrc"]=c,void s.sceneEl.systems.material.loadTexture(c,l,i)}a.map&&i(null)},t.exports.handleTextureEvents=n,t.exports.isHLS=function(e,t){return!(!t||!o.includes(t.toLowerCase()))||!!(e&&e.toLowerCase().indexOf(".m3u8")>0)}},{"../lib/three":150}],174:[function(e,t,r){function n(){return{}}function i(e){var t;if(e.constructor===Object)for(t in e)e[t]=void 0}var o=Object.freeze(Object.create(null));t.exports.createPool=function(e){function t(){var e;return null!==l&&l!==c.length||s(c.length||5),e=c[l],c[l++]=o,i(e),e}function r(e){if(e instanceof Object)return null===l||-1===l?void(c[c.length]=e):void(c[--l]=e)}function s(t){var r,n;if(t=void 0===t?c.length:t,t>0&&null==l&&(l=0),t>0)for(r=c.length,c.length+=Number(t),n=r;n<c.length;n++)c[n]=e();return c.length}function a(){return c.length}var c=[],l=null;return e=e||n,{grow:s,pool:c,recycle:r,size:a,use:t}},t.exports.clearObject=i},{}],175:[function(e,t,r){t.exports.split=function(){var e={};return function(t,r){return r in e||(e[r]={}),t in e[r]?e[r][t]:(e[r][t]=t.split(r),e[r][t])}}()},{}],176:[function(e,t,r){function n(e,t,r){s(e,function(n){if(n)return void t(e);r(e)})}function i(e,t){function r(e){h.push(e),6===h.length&&t(h)}var i,s,a,l="",h=[];for(s=0;s<5;s++)l+="(url\\((?:[^\\)]+)\\),\\s*)";if(l+="(url\\((?:[^\\)]+)\\)\\s*)",a=e.match(new RegExp(l)))for(s=1;s<7;s++)n(o(a[s]),r);else if(i=c(e))return"A-CUBEMAP"===i.tagName&&i.srcs?t(i.srcs):void u('Selector "%s" does not point to <a-cubemap>',e)}function o(e){var t=e.match(/\url\((.+)\)/);if(t)return t[1]}function s(e,t){var r;if(e.tagName)return void t("IMG"===e.tagName);r=new XMLHttpRequest,r.open("HEAD",e),r.addEventListener("load",function(n){var i;r.status>=200&&r.status<300?(i=r.getResponseHeader("Content-Type"),null==i?a(e,t):t(i.startsWith("image")?!0:!1)):a(e,t),r.abort()}),r.send()}function a(e,t){function r(){t(!0)}function n(){t(!1)}var i=new Image;i.addEventListener("load",r),i.addEventListener("error",n),i.src=e}function c(e){try{var t=document.querySelector(e);return t||u('No element was found matching the selector: "%s"',e),t}catch(t){return void u('"%s" is not a valid selector',e)}}var l=e("./debug"),u=l("utils:src-loader:warn");t.exports={parseUrl:o,validateSrc:n,validateCubemapSrc:i}},{"./debug":168}],177:[function(e,t,r){function n(e){function t(e){return e[1].toUpperCase()}return e.replace(/-([a-z])/g,t)}function i(e){var t=Object.keys(e),r={};return t.forEach(function(t){var i=n(t);r[i]=e[t]}),r}var o=e("style-attr");t.exports.parse=function(e){var t;return"string"!=typeof e?e:(t=o.parse(e),t[""]?e:i(t))},t.exports.stringify=function(e){return"string"==typeof e?e:o.stringify(e)},t.exports.toCamelCase=n,t.exports.transformKeysToCamelCase=i},{"style-attr":35}],178:[function(e,t,r){function n(e,t,r){var n,o,s=e.el.sceneEl,a=r.index||0;return!!t&&(!!(o=s&&s.systems["tracked-controls"])&&(n=o.controllers,!!n.length&&!!i(n,null,t,r.hand,a)))}function i(e,t,r,n,i){var a,l,u,h,d,p,m=0,f=i||0;for(r&&r.indexOf("|")>=0&&(l=o(r,"|")),u=0;u<e.length;u++){if(a=e[u],l){for(d=!1,h=0;h<l.length;h++)if((p=l[h])&&a.id.startsWith(p)){d=!0;break}if(!d)continue}else if(r&&a.id.indexOf(r))continue;if((r||a.id===t)&&(!n||!a.hand||n===a.hand)){if(n&&!a.hand&&(f=c*i+(n===s?0:1)),m===f)return a;++m}}}var o=e("./split").split,s=e("../constants").DEFAULT_HANDEDNESS,a=["x","y","z","w"],c=2;t.exports.checkControllerPresentAndSetup=function(e,t,r){var i=e.el,o=n(e,t,r);if(e.controllerPresent&&!e.controllerEventsActive&&e.addEventListeners(),o===e.controllerPresent)return o;e.controllerPresent=o,o?(e.injectTrackedControls(),e.addEventListeners(),i.emit("controllerconnected",{name:e.name,component:e})):(e.removeEventListeners(),i.emit("controllerdisconnected",{name:e.name,component:e}))},t.exports.isControllerPresent=n,t.exports.findMatchingController=i,t.exports.emitIfAxesChanged=function(e,t,r){var n,i,o,s,c;for(i in t){for(n=t[i],o=!1,c=0;c<n.length;c++)r.detail.changed[n[c]]&&(o=!0);if(o){for(s={},c=0;c<n.length;c++)s[a[c]]=r.detail.axis[n[c]];e.el.emit(i+"moved",s)}}},t.exports.onButtonEvent=function(e,t,r,n){var i=n?r.mapping[n]:r.mapping,o=i.buttons[e];r.el.emit(o+t),r.updateModel&&r.updateModel(o,t)}},{"../constants":93,"./split":175}],179:[function(e,t,r){window.glStats=function(){function e(e,t){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function t(){o("allcalls").set(s+a),o("drawElements").set(a),o("drawArrays").set(s),o("bindTexture").set(d),o("useProgram").set(c),o("glfaces").set(l),o("glvertices").set(u),o("glpoints").set(h)}function r(){s=0,a=0,c=0,l=0,u=0,h=0,d=0}function n(){}function i(e){o=e}var o=null,s=0,a=0,c=0,l=0,u=0,h=0,d=0;return WebGLRenderingContext.prototype.drawArrays=e(WebGLRenderingContext.prototype.drawArrays,function(){s++,arguments[0]==this.POINTS?h+=arguments[2]:u+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=e(WebGLRenderingContext.prototype.drawElements,function(){a++,l+=arguments[1]/3,u+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=e(WebGLRenderingContext.prototype.useProgram,function(){c++}),WebGLRenderingContext.prototype.bindTexture=e(WebGLRenderingContext.prototype.bindTexture,function(){d++}),{update:t,start:r,end:n,attach:i,values:{allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},groups:[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],fractions:[{base:"allcalls",steps:["drawelements","drawarrays"]}]}},window.threeStats=function(e){function t(){o("renderer.info.memory.geometries").set(e.info.memory.geometries),o("renderer.info.programs").set(e.info.programs.length),o("renderer.info.memory.textures").set(e.info.memory.textures),o("renderer.info.render.calls").set(e.info.render.calls),o("renderer.info.render.faces").set(e.info.render.faces),o("renderer.info.render.points").set(e.info.render.points),o("renderer.info.render.vertices").set(e.info.render.vertices)}function r(){}function n(){}function i(e){o=e}var o=null;return{update:t,start:r,end:n,attach:i,values:{"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.faces":{caption:"Faces",over:1e3},"renderer.info.render.points":{caption:"Points"},"renderer.info.render.vertices":{caption:"Vertices"}},groups:[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.faces","renderer.info.render.points","renderer.info.render.vertices"]}],fractions:[]}},window.BrowserStats=function(){function e(e){var t=Math.floor(Math.log(e)/h);return Math.round(100*e/Math.pow(1024,t))/100}function t(){s=e(performance.memory.usedJSHeapSize),a=e(performance.memory.totalJSHeapSize),o("memory").set(s),o("total").set(a)}function r(){s=0}function n(){}function i(e){o=e}var o=null,s=0,a=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),0===performance.memory.totalJSHeapSize&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var c={memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},l=[{caption:"Browser",values:["memory","total"]}],u=[{base:"total",steps:["memory"]}],h=Math.log(1024);return{update:t,start:r,end:n,attach:i,values:c,groups:l,fractions:u}},"object"==typeof t&&(t.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats})},{}],180:[function(e,t,r){"use strict";!function(){"performance"in window==0&&(window.performance={});var e=window.performance;if("now"in e==0){var t=Date.now();e.timing&&e.timing.navigationStart&&(t=e.timing.navigationStart),e.now=function(){return Date.now()-t}}e.mark||(e.mark=function(){}),e.measure||(e.measure=function(){})}(),window.rStats=function(e){function t(e,t){for(var r=Object.keys(e),n=0,i=r.length;n<i;n++)t(r[n])}function r(e){var t=document.createElement("link");t.href=e,t.rel="stylesheet",t.type="text/css",document.getElementsByTagName("head")[0].appendChild(t)}function n(e,t,r){function n(e,t){c+=.1*(e-c),a*=.99,c>a&&(a=c),s.drawImage(o,1,0,o.width-1,o.height,0,0,o.width-1,o.height),t?s.drawImage(d,o.width-1,o.height-c*o.height/a-p):s.drawImage(u,o.width-1,o.height-c*o.height/a-p)}var i=r||{},o=document.createElement("canvas"),s=o.getContext("2d"),a=0,c=0,l=i.color?i.color:"#666666",u=document.createElement("canvas"),h=u.getContext("2d");u.width=1,u.height=2*p,h.fillStyle="#444444",h.fillRect(0,0,1,2*p),h.fillStyle=l,h.fillRect(0,p,1,p),h.fillStyle="#ffffff",h.globalAlpha=.5,h.fillRect(0,p,1,1),h.globalAlpha=1;var d=document.createElement("canvas"),f=d.getContext("2d");return d.width=1,d.height=2*p,f.fillStyle="#444444",f.fillRect(0,0,1,2*p),f.fillStyle="#b70000",f.fillRect(0,p,1,p),f.globalAlpha=.5,f.fillStyle="#ffffff",f.fillRect(0,p,1,1),f.globalAlpha=1,function(){o.width=m,o.height=p,o.style.width=o.width+"px",o.style.height=o.height+"px",o.className="rs-canvas",e.appendChild(o),s.fillStyle="#444444",s.fillRect(0,0,o.width,o.height)}(),{draw:n}}function i(e,r){function n(e){o.drawImage(i,1,0,i.width-1,i.height,0,0,i.width-1,i.height);var r=0;t(e,function(t){var n=e[t]*i.height;o.fillStyle=l[t],o.fillRect(i.width-1,r,1,n),r+=n})}var i=document.createElement("canvas"),o=i.getContext("2d");return function(){i.width=m,i.height=p*r,i.style.width=i.width+"px",i.style.height=i.height+"px",i.className="rs-canvas",e.appendChild(i),o.fillStyle="#444444",o.fillRect(0,0,i.width,i.height)}(),{draw:n}}function o(e,t){function r(e){if(b&&b.average){y+=e,x++;var t=performance.now();t-g>=(b.avgMs||1e3)&&(v=y/x,y=0,g=t,x=0)}}function i(){h=performance.now(),c.userTimingAPI&&performance.mark(p+"-start"),L=!0}function o(){m=performance.now()-h,c.userTimingAPI&&(performance.mark(p+"-end"),L&&performance.measure(p,p+"-start",p+"-end")),r(m)}function s(){o(),i()}function a(){var e=b&&b.average?v:m;E.nodeValue=Math.round(100*e)/100;var t=b&&(b.below&&m<b.below||b.over&&m>b.over);T.draw(m,t),M.className=t?"rs-counter-base alarm":"rs-counter-base"}function l(){var e=performance.now(),t=e-h;f++,t>1e3&&(m=b&&!1===b.interpolate?f:1e3*f/t,f=0,h=e,r(m))}function u(e){m=e,r(m)}var h,p=e,m=0,f=0,v=0,y=0,g=performance.now(),x=0,M=document.createElement("div"),A=document.createElement("span"),w=document.createElement("div"),E=document.createTextNode(""),b=c?c.values[p.toLowerCase()]:null,T=new n(M,p,b),L=!1;return A.className="rs-counter-id",A.textContent=b&&b.caption?b.caption:p,w.className="rs-counter-value",w.appendChild(E),M.appendChild(A),M.appendChild(w),t?t.div.appendChild(M):d.appendChild(M),h=performance.now(),{set:u,start:i,tick:s,end:o,frame:l,value:function(){return m},draw:a}}function s(e){var r=e.toLowerCase();if(void 0===r&&(r="default"),f[r])return f[r];var n=null;c&&c.groups&&t(c.groups,function(e){var t=c.groups[parseInt(e,10)];n||-1===t.values.indexOf(r.toLowerCase())||(n=t)});var i=new o(r,n);return f[r]=i,i}function a(){t(c.plugins,function(e){c.plugins[e].update()}),t(f,function(e){f[e].draw()}),c&&c.fractions&&t(c.fractions,function(e){var r=c.fractions[parseInt(e,10)],n=[],i=f[r.base.toLowerCase()];i&&(i=i.value(),t(c.fractions[e].steps,function(t){var r=c.fractions[e].steps[parseInt(t,10)].toLowerCase(),o=f[r];o&&n.push(o.value()/i)})),r.graph.draw(n)})}var c=e||{},l=c.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],u=(c.CSSPath?c.CSSPath:"")+"rStats.css";(c.css||["https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",u]).forEach(function(e){r(e)}),c.values||(c.values={});var h,d,p=10,m=200,f={};return function(){if(c.plugins){c.values||(c.values={}),c.groups||(c.groups=[]),c.fractions||(c.fractions=[]);for(var e=0;e<c.plugins.length;e++)c.plugins[e].attach(s),t(c.plugins[e].values,function(t){c.values[t]=c.plugins[e].values[t]}),c.groups=c.groups.concat(c.plugins[e].groups),c.fractions=c.fractions.concat(c.plugins[e].fractions)}else c.plugins={};h=document.createElement("div"),h.className="rs-base",d=document.createElement("div"),d.className="rs-container",d.style.height="auto",h.appendChild(d),document.body.appendChild(h),c&&(c.groups&&t(c.groups,function(e){var t=c.groups[parseInt(e,10)],r=document.createElement("div");r.className="rs-group",t.div=r;var n=document.createElement("h1");n.textContent=t.caption,n.addEventListener("click",function(e){this.classList.toggle("hidden"),e.preventDefault()}.bind(r)),d.appendChild(n),d.appendChild(r)}),c.fractions&&t(c.fractions,function(e){var r=c.fractions[parseInt(e,10)],n=document.createElement("div");n.className="rs-fraction";var o=document.createElement("div");o.className="rs-legend";var s=0;t(c.fractions[e].steps,function(t){var r=document.createElement("p");r.textContent=c.fractions[e].steps[t],r.style.color=l[s],o.appendChild(r),s++}),n.appendChild(o),n.style.height=s*p+"px",r.div=n;var a=new i(n,s);r.graph=a,d.appendChild(n)}))}(),function(e){return e?s(e):{element:h,update:a}}},"object"==typeof t&&(t.exports=window.rStats)},{}],181:[function(e,t,r){var n={};n.base64=function(e,t){return"data:"+e+";base64,"+t},n.isMobile=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},n.isIOS=function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},n.isIFrame=function(){try{return window.self!==window.top}catch(e){return!0}},n.appendQueryParameter=function(e,t,r){return e+=(e.indexOf("?")<0?"?":"&")+t+"="+r},n.getQueryParameter=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=t.exec(location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},n.isLandscapeMode=function(){return 90==window.orientation||-90==window.orientation},t.exports=n},{}],182:[function(e,t,r){function n(){var e=document.createElement("video");e.addEventListener("ended",function(){e.play()}),this.request=function(){e.paused&&(e.src=o.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),e.play())},this.release=function(){e.pause(),e.src=""}}function i(){var e=null;this.request=function(){e||(e=setInterval(function(){window.location.href="/",setTimeout(window.stop,0)},15e3))},this.release=function(){e&&(clearInterval(e),e=null)}}var o=e("./util.js");t.exports=function(){var e=navigator.userAgent||navigator.vendor||window.opera;return e.match(/iPhone/i)||e.match(/iPod/i)?i:n}()},{"./util.js":181}]},{},[148])(148)})}).call(r,n(1),n(9).setImmediate)},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(0),i=function(){function e(e){this.quad=e,this.body=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null}return e.prototype.insert=function(t){if(null==this.body)return void(this.body=t);this.isExternal()?(this.NW=new e(this.quad.NW()),this.NE=new e(this.quad.NE()),this.SE=new e(this.quad.SE()),this.SW=new e(this.quad.SW()),this.putBody(this.body),this.putBody(t),this.body=this.body.plus(t)):(this.body=this.body.plus(t),this.putBody(t))},e.prototype.putBody=function(e){e.in(this.quad.NW())?this.NW.insert(e):e.in(this.quad.NE())?this.NE.insert(e):e.in(this.quad.SE())?this.SE.insert(e):e.in(this.quad.SW())&&this.SW.insert(e)},e.prototype.isExternal=function(){return null==this.NW&&null==this.NE&&null==this.SW&&null==this.SE},e.prototype.updateForce=function(e){if(null!=this.body&&e!==this.body)if(this.isExternal())e.addForce(this.body);else{var t=this.quad.getLength(),r=this.body.distanceTo(e);t/r<n.f?e.addForce(this.body):(this.NW.updateForce(e),this.NE.updateForce(e),this.SW.updateForce(e),this.SE.updateForce(e))}},e}()},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(0),i=function(){function e(e,t,r,n,i,o,s){this.rx=e,this.ry=t,this.vx=r,this.vy=n,this.mass=i,this.color=o,this.element=s}return e.prototype.update=function(e){this.vx+=e*this.fx/this.mass,this.vy+=e*this.fy/this.mass,this.rx+=e*this.vx,this.ry+=e*this.vy},e.prototype.distanceTo=function(e){var t=this.rx-e.rx,r=this.ry-e.ry;return Math.sqrt(t*t+r*r)},e.prototype.resetForce=function(){this.fx=0,this.fy=0},e.prototype.addForce=function(e){var t=e.rx-this.rx,r=e.ry-this.ry,i=Math.sqrt(t*t+r*r),o=n.g*this.mass*e.mass/(i*i+n.h*n.h);this.fx+=o*t/i,this.fy+=o*r/i},e.prototype.render=function(){this.element.setAttribute("position",this.rx+" "+this.ry+" "+n.c)},e.prototype.in=function(e){return e.contains(this.rx,this.ry)},e.prototype.plus=function(t){var r=this.mass+t.mass;return new e((this.rx*this.mass+t.rx*t.mass)/r,(this.ry*this.mass+t.ry*t.mass)/r,this.vx,t.vx,r,this.color,this.element)},e}()},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(){function e(e,t,r){this.xmid=e,this.ymid=t,this.length=r}return e.prototype.getLength=function(){return this.length},e.prototype.contains=function(e,t){var r=this.length/2;return e<=this.xmid+r&&e>=this.xmid-r&&t<=this.ymid+r&&t>=this.ymid-r},e.prototype.NW=function(){return new e(this.xmid-this.length/4,this.ymid+this.length/4,this.length/2)},e.prototype.NE=function(){return new e(this.xmid+this.length/4,this.ymid+this.length/4,this.length/2)},e.prototype.SW=function(){return new e(this.xmid-this.length/4,this.ymid-this.length/4,this.length/2)},e.prototype.SE=function(){return new e(this.xmid+this.length/4,this.ymid-this.length/4,this.length/2)},e}()},function(e,t,r){"use strict";const n="yellow",i="blue",o=[{rx:0,ry:0,vx:0,vy:0,mass:6e26,color:i},{rx:-1453.78,ry:103035,vx:623133,vy:8792.13,mass:6e10,color:i},{rx:1015.65,ry:221.697,vx:1323190,vy:-6061860,mass:6e10,color:i},{rx:-54144.6,ry:24214.2,vx:335344,vy:749851,mass:6e10,color:i},{rx:1195.04,ry:99.7211,vx:480387,vy:-5756880,mass:6e10,color:i},{rx:332785,ry:-34174.7,vx:-35333,vy:-344064,mass:6e10,color:i},{rx:-133920,ry:-86783,vx:-272335,vy:420257,mass:6e10,color:i},{rx:82205,ry:58453.1,vx:365018,vy:-513339,mass:6e10,color:i},{rx:-320724,ry:-204267,vx:-174275,vy:273633,mass:6e10,color:i},{rx:363253,ry:107700,vx:92384.5,vy:-311595,mass:6e10,color:i},{rx:62531.6,ry:-119701,vx:-482496,vy:-252055,mass:6e10,color:i},{rx:61019.3,ry:55809.7,vx:469513,vy:-513340,mass:6e10,color:i},{rx:15730,ry:-37597.5,vx:-914154,vy:-382463,mass:6e10,color:i},{rx:426318,ry:-32924.1,vx:-23556.7,vy:-305025,mass:6e10,color:i},{rx:440711,ry:-116873,vx:-75942.6,vy:-286368,mass:6e10,color:i},{rx:57476.8,ry:36520.3,vx:411124,vy:-647040,mass:6e10,color:i},{rx:389516,ry:60728.2,vx:49081.6,vy:-314814,mass:6e10,color:i},{rx:359528,ry:112580,vx:97394.5,vy:-311032,mass:6e10,color:i},{rx:-67638.4,ry:55894.4,vx:430205,vy:520596,mass:6e10,color:i},{rx:-82339.9,ry:-78057.9,vx:-408600,vy:431014,mass:6e10,color:i},{rx:295640,ry:48062.8,vx:58655.1,vy:-360795,mass:6e10,color:i},{rx:223978,ry:201222,vx:243649,vy:-271204,mass:6e10,color:i},{rx:275152,ry:-120489,vx:-146415,vy:-334358,mass:6e10,color:i},{rx:-16585.1,ry:-227572,vx:-417690,vy:30440.6,mass:6e10,color:i},{rx:28433.9,ry:171697,vx:473090,vy:-78345.8,mass:6e10,color:i},{rx:142373,ry:-189005,vx:-328482,vy:-247438,mass:6e10,color:i},{rx:360188,ry:-251443,vx:-172775,vy:-247496,mass:6e10,color:i},{rx:2655.78,ry:-94892.4,vx:-649034,vy:-18164.7,mass:6e10,color:i},{rx:239047,ry:-68500.6,vx:-110510,vy:-385649,mass:6e10,color:i},{rx:164767,ry:121644,vx:262551,vy:-355628,mass:6e10,color:i},{rx:2299.08,ry:43083.7,vx:961736,vy:-51321.3,mass:6e10,color:i},{rx:6743.24,ry:-13877.5,vx:-1448570,vy:-703878,mass:6e10,color:i},{rx:-106654,ry:358464,vx:313536,vy:93286.2,mass:6e10,color:i},{rx:108901,ry:-19775.6,vx:-107437,vy:-591637,mass:6e10,color:i},{rx:62568.7,ry:92773.3,vx:495808,vy:-334386,mass:6e10,color:i},{rx:-131958,ry:-386156,vx:-296335,vy:101264,mass:6e10,color:i},{rx:346794,ry:-176348,vx:-145375,vy:-285885,mass:6e10,color:i},{rx:41827.6,ry:207364,vx:426365,vy:-86002.6,mass:6e10,color:i},{rx:201812,ry:-110848,vx:-200708,vy:-365414,mass:6e10,color:i},{rx:-135766,ry:35304.6,vx:134421,vy:516928,mass:6e10,color:i},{rx:120522,ry:-137104,vx:-351666,vy:-309134,mass:6e10,color:i},{rx:40883.7,ry:-126388,vx:-522241,vy:-168933,mass:6e10,color:i},{rx:73849.8,ry:-181514,vx:-418592,vy:-170306,mass:6e10,color:i},{rx:95409.1,ry:225957,vx:372123,vy:-157127,mass:6e10,color:i},{rx:64239.3,ry:93440.4,vx:489551,vy:-336562,mass:6e10,color:i},{rx:-12562.1,ry:-202118,vx:-443690,vy:27576.4,mass:6e10,color:i},{rx:-157895,ry:202583,vx:311335,vy:242658,mass:6e10,color:i},{rx:176477,ry:-241055,vx:-295320,vy:-216204,mass:6e10,color:i},{rx:38973.7,ry:-207364,vx:-428020,vy:-80445.6,mass:6e10,color:i},{rx:-2590.62,ry:-5398.03,vx:-2330810,vy:1118600,mass:6e10,color:i},{rx:-157919,ry:287335,vx:306176,vy:168274,mass:6e10,color:i},{rx:352829,ry:-167687,vx:-137391,vy:-289082,mass:6e10,color:i},{rx:-4115.34,ry:2091.8,vx:1334120,vy:2624710,mass:6e10,color:i},{rx:-6478.76,ry:-61118.6,vx:-802439,vy:85061,mass:6e10,color:i},{rx:19328.2,ry:95069.4,vx:629399,vy:-127961,mass:6e10,color:i},{rx:-459763,ry:31666.9,vx:20248.9,vy:293988,mass:6e10,color:i},{rx:2362.1,ry:-2827.72,vx:-2529340,vy:-2112850,mass:6e10,color:i},{rx:-315854,ry:-112266,vx:-115719,vy:325570,mass:6e10,color:i},{rx:147863,ry:45693.2,vx:150138,vy:-485848,mass:6e10,color:i},{rx:-8245.09,ry:-237534,vx:-410094,vy:14234.8,mass:6e10,color:i},{rx:286508,ry:61365,vx:77400.6,vy:-361377,mass:6e10,color:i},{rx:-88753.4,ry:-301306,vx:-342399,vy:100858,mass:6e10,color:i},{rx:55830.2,ry:-132044,vx:-486639,vy:-205758,mass:6e10,color:i},{rx:-174117,ry:242366,vx:297410,vy:213661,mass:6e10,color:i},{rx:144651,ry:306756,vx:310701,vy:-146511,mass:6e10,color:i},{rx:-25364.8,ry:-266313,vx:-385036,vy:36672.6,mass:6e10,color:i},{rx:392451,ry:-212329,vx:-142509,vy:-263401,mass:6e10,color:i},{rx:139169,ry:-77645.8,vx:-244159,vy:-437619,mass:6e10,color:i},{rx:-433890,ry:-63451.1,vx:-43713.5,vy:298921,mass:6e10,color:i},{rx:-114577,ry:-77468.8,vx:-301294,vy:445617,mass:6e10,color:i},{rx:-185685,ry:283625,vx:287462,vy:188197,mass:6e10,color:i},{rx:-288408,ry:-82079.7,vx:-99999,vy:351372,mass:6e10,color:i},{rx:-108067,ry:107955,vx:361750,vy:362123,mass:6e10,color:i},{rx:4479.95,ry:188567,vx:460492,vy:-10940.3,mass:6e10,color:i},{rx:-275316,ry:132522,vx:156965,vy:326096,mass:6e10,color:i},{rx:-1999.37,ry:7360.28,vx:2210560,vy:600483,mass:6e10,color:i},{rx:-20297.2,ry:-71966.7,vx:-704113,vy:198585,mass:6e10,color:i},{rx:-55830.3,ry:-52427.2,vx:-494834,vy:526954,mass:6e10,color:i},{rx:-233831,ry:-107482,vx:-164697,vy:358305,mass:6e10,color:i},{rx:75482.4,ry:-20546.1,vx:-187853,vy:-690136,mass:6e10,color:i},{rx:-142251,ry:-1638.39,vx:-6108.45,vy:530357,mass:6e10,color:i},{rx:-54146.1,ry:247415,vx:388318,vy:84982.1,mass:6e10,color:i},{rx:118561,ry:131850,vx:353260,vy:-317655,mass:6e10,color:i},{rx:-118245,ry:-47229.1,vx:-207952,vy:520637,mass:6e10,color:i},{rx:-130122,ry:24816.3,vx:102971,vy:539916,mass:6e10,color:i},{rx:-220595,ry:55136,vx:101728,vy:407008,mass:6e10,color:i},{rx:-299076,ry:211485,vx:190840,vy:269882,mass:6e10,color:i},{rx:-149291,ry:210838,vx:321214,vy:227447,mass:6e10,color:i},{rx:42687,ry:-23957.3,vx:-442532,vy:-788498,mass:6e10,color:i},{rx:-18301.7,ry:187717,vx:458464,vy:44698.5,mass:6e10,color:i},{rx:-6847.3,ry:4587.99,vx:1226560,vy:1830570,mass:6e10,color:i},{rx:-132973,ry:368183,vx:300727,vy:108610,mass:6e10,color:i},{rx:81164,ry:-90043.8,vx:-426780,vy:-384693,mass:6e10,color:i},{rx:-91323.6,ry:286408,vx:347622,vy:110842,mass:6e10,color:i},{rx:346067,ry:-297233,vx:-192982,vy:-224688,mass:6e10,color:i},{rx:-122966,ry:63090.6,vx:245646,vy:478774,mass:6e10,color:i},{rx:-67186.3,ry:-247680,vx:-381124,vy:103385,mass:6e10,color:i},{rx:132330,ry:-21356.2,vx:-87056.3,vy:-539429,mass:6e10,color:i},{rx:128525,ry:-343102,vx:-309497,vy:-115936,mass:6e10,color:i},{rx:14336.4,ry:331691,vx:346868,vy:-14992.3,mass:6e10,color:i},{rx:320291,ry:-19705.8,vx:-21686.2,vy:-352481,mass:6e10,color:i},{rx:107519,ry:338368,vx:319972,vy:-101674,mass:6e10,color:i},{rx:157827,ry:119920,vx:271843,vy:-357772,mass:6e10,color:i},{rx:-278005,ry:209978,vx:204272,vy:270450,mass:6e10,color:i},{rx:254634,ry:278237,vx:240300,vy:-219915,mass:6e10,color:i},{rx:-143986,ry:361577,vx:297916,vy:118635,mass:6e10,color:i},{rx:-90801.9,ry:-96961,vx:-400630,vy:375181,mass:6e10,color:i},{rx:40206.7,ry:123548,vx:527753,vy:-171748,mass:6e10,color:i},{rx:85908.9,ry:99532.6,vx:417650,vy:-360484,mass:6e10,color:i},{rx:-52545.7,ry:71667.5,vx:541193,vy:396796,mass:6e10,color:i},{rx:-175708,ry:25730.3,vx:68783.9,vy:469713,mass:6e10,color:i},{rx:-339786,ry:4439.53,vx:4483.44,vy:343147,mass:6e10,color:i},{rx:-185235,ry:-185250,vx:-276384,vy:276362,mass:6e10,color:i},{rx:211132,ry:221951,vx:261883,vy:-249118,mass:6e10,color:i},{rx:364293,ry:285036,vx:181258,vy:-231658,mass:6e10,color:i},{rx:-115022,ry:315570,vx:324310,vy:118208,mass:6e10,color:i},{rx:2950.96,ry:-386277,vx:-321862,vy:-2458.86,mass:6e10,color:i},{rx:-159411,ry:-167426,vx:-301329,vy:286904,mass:6e10,color:i},{rx:327062,ry:-298.986,vx:-319.774,vy:-349803,mass:6e10,color:i},{rx:392194,ry:-57735.2,vx:-46274.7,vy:-314344,mass:6e10,color:i},{rx:151671,ry:-331966,vx:-301190,vy:-137610,mass:6e10,color:i},{rx:-138232,ry:-319253,vx:-311245,vy:134765,mass:6e10,color:i},{rx:9448.23,ry:-114338,vx:-588608,vy:-48639,mass:6e10,color:i},{rx:72699.2,ry:-44049.1,vx:-355570,vy:-586837,mass:6e10,color:i},{rx:-218451,ry:-340837,vx:-264709,vy:169659,mass:6e10,color:i},{rx:117695,ry:30698,vx:144769,vy:-555038,mass:6e10,color:i},{rx:165166,ry:-193504,vx:-301669,vy:-257491,mass:6e10,color:i},{rx:335618,ry:151655,vx:135740,vy:-300397,mass:6e10,color:i},{rx:219669,ry:164675,vx:229012,vy:-305491,mass:6e10,color:i},{rx:217937,ry:394277,vx:260854,vy:-144187,mass:6e10,color:i},{rx:-349163,ry:100492,vx:91792.1,vy:318936,mass:6e10,color:i},{rx:-11836.6,ry:-191069,vx:-456348,vy:28270.4,mass:6e10,color:i},{rx:370692,ry:213831,vx:152802,vy:-264893,mass:6e10,color:i},{rx:-228474,ry:14650.9,vx:26755.3,vy:417238,mass:6e10,color:i},{rx:280836,ry:-11762.8,vx:-15790.6,vy:-377e3,mass:6e10,color:i},{rx:-82644.8,ry:39615.5,vx:285635,vy:595884,mass:6e10,color:i},{rx:61459.4,ry:375911,vx:319892,vy:-52300.6,mass:6e10,color:i},{rx:77619.8,ry:-110480,vx:-445472,vy:-312976,mass:6e10,color:i},{rx:-319733,ry:-86485.4,vx:-90761.3,vy:335540,mass:6e10,color:i},{rx:-813.542,ry:-6909.51,vx:-2381940,vy:280455,mass:6e10,color:i},{rx:198762,ry:-72537.1,vx:-149099,vy:-408551,mass:6e10,color:i},{rx:-314237,ry:221847,vx:186029,vy:263503,mass:6e10,color:i},{rx:117568,ry:8169.74,vx:40396.6,vy:-581333,mass:6e10,color:i},{rx:-293894,ry:-108492,vx:-123776,vy:335298,mass:6e10,color:i},{rx:-255595,ry:144317,vx:181548,vy:321533,mass:6e10,color:i},{rx:-31420.8,ry:122205,vx:545435,vy:140240,mass:6e10,color:i},{rx:-1304.05,ry:-12233.8,vx:-1793400,vy:191166,mass:6e10,color:i},{rx:63788.6,ry:83791.2,vx:490501,vy:-373409,mass:6e10,color:i},{rx:156597,ry:-51739.7,vx:-154539,vy:-467735,mass:6e10,color:i},{rx:-39713.1,ry:-110802,vx:-548908,vy:196737,mass:6e10,color:i},{rx:123576,ry:73388.9,vx:269445,vy:-453704,mass:6e10,color:i},{rx:-48822,ry:-85966.2,vx:-553248,vy:314201,mass:6e10,color:i},{rx:-352483,ry:-175958,vx:-142353,vy:285165,mass:6e10,color:i},{rx:11112,ry:40701.5,vx:939545,vy:-256508,mass:6e10,color:i},{rx:283010,ry:187289,vx:189514,vy:-286372,mass:6e10,color:i},{rx:-101424,ry:110051,vx:380256,vy:350445,mass:6e10,color:i},{rx:64288.7,ry:-15392.1,vx:-181168,vy:-756686,mass:6e10,color:i},{rx:-312651,ry:-216405,vx:-184638,vy:266755,mass:6e10,color:i},{rx:82887.9,ry:310884,vx:340778,vy:-90858.1,mass:6e10,color:i},{rx:-390414,ry:-159421,vx:-116457,vy:285197,mass:6e10,color:i},{rx:127988,ry:-53420.7,vx:-206911,vy:-495728,mass:6e10,color:i},{rx:-311392,ry:299326,vx:210944,vy:219448,mass:6e10,color:i},{rx:-17056.6,ry:-58554.3,vx:-777734,vy:226550,mass:6e10,color:i},{rx:203088,ry:-86503.2,vx:-166855,vy:-391735,mass:6e10,color:i},{rx:165563,ry:276469,vx:302337,vy:-181054,mass:6e10,color:i},{rx:99992.8,ry:-260757,vx:-353455,vy:-135540,mass:6e10,color:i},{rx:-214913,ry:208043,vx:254410,vy:262812,mass:6e10,color:i},{rx:426802,ry:-147014,vx:-96969.6,vy:-281517,mass:6e10,color:i},{rx:258513,ry:-360242,vx:-244084,vy:-175157,mass:6e10,color:i},{rx:186697,ry:364044,vx:278296,vy:-142722,mass:6e10,color:i},{rx:-69947.9,ry:2453.29,vx:26504.8,vy:755702,mass:6e10,color:i},{rx:-48071.9,ry:159042,vx:469793,vy:141999,mass:6e10,color:i},{rx:-333640,ry:19083.6,vx:19761.3,vy:345490,mass:6e10,color:i},{rx:-398635,ry:-56160.2,vx:-43984.8,vy:312212,mass:6e10,color:i},{rx:179475,ry:418311,vx:272491,vy:-116911,mass:6e10,color:i},{rx:-332.874,ry:-22911.8,vx:-1321420,vy:19198.3,mass:6e10,color:i},{rx:449616,ry:48954.2,vx:32198,vy:-295719,mass:6e10,color:i},{rx:40038.6,ry:99368.8,vx:566905,vy:-228423,mass:6e10,color:i},{rx:-62636.6,ry:-277082,vx:-366101,vy:82760.1,mass:6e10,color:i},{rx:10091.1,ry:-44134.8,vx:-916538,vy:-209560,mass:6e10,color:i},{rx:232521,ry:-263434,vx:-253021,vy:-223330,mass:6e10,color:i},{rx:37138.3,ry:-200966,vx:-435150,vy:-80415.4,mass:6e10,color:i},{rx:-155854,ry:313151,vx:302816,vy:150710,mass:6e10,color:i},{rx:6047.24,ry:-5926.43,vx:-1521700,vy:-1552720,mass:6e10,color:i},{rx:125455,ry:-251132,vx:-337770,vy:-168735,mass:6e10,color:i},{rx:-143773,ry:41612.9,vx:143762,vy:496702,mass:6e10,color:i},{rx:-163657,ry:-104144,vx:-243852,vy:383201,mass:6e10,color:i},{rx:-6513.28,ry:12888.7,vx:1485780,vy:750835,mass:6e10,color:i},{rx:-116279,ry:-415641,vx:-293248,vy:82038.8,mass:6e10,color:i},{rx:-41110.2,ry:-83794.2,vx:-587871,vy:288415,mass:6e10,color:i},{rx:-11395.9,ry:489.663,vx:80410.3,vy:1871380,mass:6e10,color:i},{rx:354655,ry:-31154.8,vx:-29339.4,vy:-333989,mass:6e10,color:i},{rx:17328.9,ry:30546.4,vx:928490,vy:-526730,mass:6e10,color:i},{rx:29947.9,ry:-264486,vx:-385290,vy:-43626.7,mass:6e10,color:i},{rx:-3456.16,ry:-3342.81,vx:-2005710,vy:2073720,mass:6e10,color:i},{rx:-199721,ry:301521,vx:277327,vy:183695,mass:6e10,color:i},{rx:6319.91,ry:52473,vx:863932,vy:-104053,mass:6e10,color:i},{rx:378655,ry:-177868,vx:-131500,vy:-279945,mass:6e10,color:i},{rx:5962.9,ry:44294.1,vx:937811,vy:-126249,mass:6e10,color:i},{rx:-109198,ry:-265967,vx:-345131,vy:141700,mass:6e10,color:i},{rx:-42428.5,ry:63014,vx:602061,vy:405379,mass:6e10,color:i},{rx:-101430,ry:-74923.6,vx:-334717,vy:453132,mass:6e10,color:i},{rx:228283,ry:79911.6,vx:134396,vy:-383929,mass:6e10,color:i},{rx:-31817.6,ry:15969.4,vx:475605,vy:947601,mass:6e10,color:i},{rx:32263.8,ry:6644.01,vx:222315,vy:-1079580,mass:6e10,color:i},{rx:-48225.4,ry:423816,vx:304340,vy:34630.4,mass:6e10,color:i},{rx:220528,ry:233068,vx:256531,vy:-242730,mass:6e10,color:i},{rx:-4937.5,ry:-420533,vx:-308456,vy:3621.6,mass:6e10,color:i},{rx:-381095,ry:107906,vx:86599.2,vy:305846,mass:6e10,color:i},{rx:188900,ry:184195,vx:271900,vy:-278845,mass:6e10,color:i},{rx:57623.4,ry:-2599.82,vx:-37542.3,vy:-832103,mass:6e10,color:i},{rx:23349.1,ry:48813.6,vx:775812,vy:-371097,mass:6e10,color:i},{rx:-354479,ry:110592,vx:97773.7,vy:313393,mass:6e10,color:i},{rx:96335.4,ry:250271,vx:360520,vy:-138773,mass:6e10,color:i},{rx:325365,ry:4572.36,vx:4927.86,vy:-350662,mass:6e10,color:i},{rx:6566.4,ry:-428047,vx:-305715,vy:-4689.78,mass:6e10,color:i},{rx:192875,ry:-224799,vx:-278967,vy:-239350,mass:6e10,color:i},{rx:6980.54,ry:-18331.2,vx:-1334860,vy:-508318,mass:6e10,color:i},{rx:-46696.9,ry:-145257,vx:-487569,vy:156743,mass:6e10,color:i},{rx:87083.1,ry:-184530,vx:-400510,vy:-189008,mass:6e10,color:i},{rx:47808.7,ry:395824,vx:314536,vy:-37990.5,mass:6e10,color:i},{rx:-122918,ry:-57414.2,vx:-229853,vy:492094,mass:6e10,color:i},{rx:-389949,ry:231749,vx:151748,vy:255337,mass:6e10,color:i},{rx:-919.997,ry:-40350.1,vx:-995514,vy:22698.1,mass:6e10,color:i},{rx:6986.54,ry:11710.8,vx:1471190,vy:-877701,mass:6e10,color:i},{rx:179802,ry:241338,vx:292426,vy:-217864,mass:6e10,color:i},{rx:-136188,ry:-29504.8,vx:-113471,vy:523757,mass:6e10,color:i},{rx:147487,ry:-6887.43,vx:-24286.1,vy:-520059,mass:6e10,color:i},{rx:49132.7,ry:-16183.3,vx:-275170,vy:-835418,mass:6e10,color:i},{rx:-72408.6,ry:-43772.5,vx:-355795,vy:588556,mass:6e10,color:i},{rx:128272,ry:195227,vx:345923,vy:-227285,mass:6e10,color:i},{rx:-179716,ry:258518,vx:292737,vy:203504,mass:6e10,color:i},{rx:54667.9,ry:277984,vx:368781,vy:-72523.9,mass:6e10,color:i},{rx:47692.2,ry:-11892.6,vx:-218322,vy:-875520,mass:6e10,color:i},{rx:45868.3,ry:15850.1,vx:296592,vy:-858303,mass:6e10,color:i},{rx:-136531,ry:420510,vx:286158,vy:92909.2,mass:6e10,color:i},{rx:-215.013,ry:-144595,vx:-526091,vy:782.296,mass:6e10,color:i},{rx:-291909,ry:-68782.2,vx:-83780.4,vy:355561,mass:6e10,color:i},{rx:247034,ry:226169,vx:233421,vy:-254955,mass:6e10,color:i},{rx:95379.6,ry:-184450,vx:-389956,vy:-201647,mass:6e10,color:i},{rx:-21847,ry:-64209,vx:-727210,vy:247432,mass:6e10,color:i},{rx:103348,ry:-349351,vx:-317820,vy:-94020.4,mass:6e10,color:i},{rx:13588.4,ry:-60279,vx:-785073,vy:-176976,mass:6e10,color:i},{rx:364945,ry:158475,vx:126325,vy:-290909,mass:6e10,color:i},{rx:257284,ry:-374917,vx:-244612,vy:-167863,mass:6e10,color:i},{rx:148443,ry:-31434.8,vx:-106395,vy:-502424,mass:6e10,color:i},{rx:79174.6,ry:33168.9,vx:263829,vy:-629763,mass:6e10,color:i},{rx:-16769.7,ry:-30385.9,vx:-940153,vy:518862,mass:6e10,color:i},{rx:-121919,ry:-230769,vx:-346232,vy:182919,mass:6e10,color:i},{rx:407651,ry:-174450,vx:-118196,vy:-276197,mass:6e10,color:i},{rx:74028.6,ry:105515,vx:456146,vy:-320029,mass:6e10,color:i},{rx:40089.3,ry:-99093.4,vx:-567210,vy:-229471,mass:6e10,color:i},{rx:-46834.1,ry:106287,vx:537157,vy:236693,mass:6e10,color:i},{rx:-31625,ry:-53159.6,vx:-691281,vy:411247,mass:6e10,color:i},{rx:97204.4,ry:-169205,vx:-392679,vy:-225584,mass:6e10,color:i},{rx:184002,ry:145307,vx:256051,vy:-324236,mass:6e10,color:i},{rx:-19957.4,ry:-356784,vx:-334132,vy:18690.3,mass:6e10,color:i},{rx:-230846,ry:-93.8911,vx:-169.348,vy:416368,mass:6e10,color:i},{rx:166687,ry:61768.4,vx:164870,vy:-444914,mass:6e10,color:i},{rx:249516,ry:-56580,vx:-87462.6,vy:-385707,mass:6e10,color:i},{rx:-34030.3,ry:-77187.7,vx:-630246,vy:277861,mass:6e10,color:i},{rx:267592,ry:-3960.68,vx:-5723.05,vy:-386661,mass:6e10,color:i},{rx:-34303.7,ry:12542.8,vx:359460,vy:983098,mass:6e10,color:i},{rx:307793,ry:253009,vx:201252,vy:-244828,mass:6e10,color:i},{rx:58984.8,ry:136892,vx:475860,vy:-205042,mass:6e10,color:i},{rx:53025.1,ry:66591.2,vx:536388,vy:-427114,mass:6e10,color:i},{rx:-147837,ry:-146542,vx:-308679,vy:311407,mass:6e10,color:i},{rx:-85922,ry:424642,vx:297891,vy:60275.2,mass:6e10,color:i},{rx:65991.5,ry:-334059,vx:-336324,vy:-66439.1,mass:6e10,color:i},{rx:25607.9,ry:18047.2,vx:651092,vy:-923861,mass:6e10,color:i},{rx:-109475,ry:-83607.8,vx:-327150,vy:428368,mass:6e10,color:i},{rx:-157339,ry:161152,vx:301616,vy:294479,mass:6e10,color:i},{rx:-32694.3,ry:-56134.9,vx:-678240,vy:395024,mass:6e10,color:i},{rx:36796.8,ry:-51116.6,vx:-646936,vy:-465704,mass:6e10,color:i},{rx:-24227.7,ry:-21573.3,vx:-738622,vy:829505,mass:6e10,color:i},{rx:-424323,ry:3937.28,vx:2849.45,vy:307088,mass:6e10,color:i},{rx:-90388.6,ry:68093.6,vx:357819,vy:474975,mass:6e10,color:i},{rx:-289817,ry:228933,vx:204045,vy:258310,mass:6e10,color:i},{rx:119490,ry:132086,vx:351520,vy:-317996,mass:6e10,color:i},{rx:15804.6,ry:-268906,vx:-384782,vy:-22615.2,mass:6e10,color:i},{rx:371112,ry:-112897,vx:-93483.3,vy:-307296,mass:6e10,color:i},{rx:-1719.27,ry:3172.04,vx:2928030,vy:1587020,mass:6e10,color:i},{rx:318208,ry:-21397.5,vx:-23766.5,vy:-353438,mass:6e10,color:i},{rx:-48.7241,ry:-152.791,vx:-15050300,vy:4799460,mass:6e10,color:i},{rx:88964.7,ry:397737,vx:305801,vy:-68400.7,mass:6e10,color:i},{rx:131255,ry:-6927.48,vx:-29082.8,vy:-551030,mass:6e10,color:i},{rx:94261.9,ry:-283556,vx:-347278,vy:-115445,mass:6e10,color:i},{rx:-68931.8,ry:-349953,vx:-328651,vy:64736,mass:6e10,color:i},{rx:22623.3,ry:55748.8,vx:755729,vy:-306680,mass:6e10,color:i},{rx:-176073,ry:-9987.16,vx:-26977,vy:475604,mass:6e10,color:i},{rx:307172,ry:321090,vx:216854,vy:-207454,mass:6e10,color:i},{rx:240960,ry:-132948,vx:-184221,vy:-333890,mass:6e10,color:i},{rx:-90686.1,ry:-16772.2,vx:-119801,vy:647758,mass:6e10,color:i},{rx:-271367,ry:187981,vx:198268,vy:286217,mass:6e10,color:i},{rx:259421,ry:121912,vx:158922,vy:-338174,mass:6e10,color:i},{rx:63573.2,ry:146195,vx:459472,vy:-199802,mass:6e10,color:i},{rx:16306.9,ry:40123.1,vx:890527,vy:-361930,mass:6e10,color:i},{rx:-261554,ry:-252476,vx:-230434,vy:238719,mass:6e10,color:i},{rx:1828.92,ry:13833.9,vx:1678890,vy:-221959,mass:6e10,color:i},{rx:-235105,ry:79845.5,vx:129104,vy:380148,mass:6e10,color:i},{rx:-5057.02,ry:442184,vx:300811,vy:3440.21,mass:6e10,color:i},{rx:287767,ry:279199,vx:219996,vy:-226748,mass:6e10,color:i},{rx:2298.98,ry:178508,vx:473430,vy:-6097.24,mass:6e10,color:i},{rx:-254181,ry:107472,vx:148302,vy:350747,mass:6e10,color:i},{rx:-19229,ry:115441,vx:576825,vy:96081.4,mass:6e10,color:i},{rx:-357301,ry:277953,vx:182566,vy:234683,mass:6e10,color:i},{rx:-16144.2,ry:23576,vx:976464,vy:668656,mass:6e10,color:i},{rx:-83566.1,ry:79145.4,vx:405479,vy:428128,mass:6e10,color:i},{rx:-117624,ry:-384054,vx:-301814,vy:92436.2,mass:6e10,color:i},{rx:-333258,ry:-99903.3,vx:-97390.6,vy:324876,mass:6e10,color:i},{rx:-149120,ry:-53502.1,vx:-169732,vy:473074,mass:6e10,color:i},{rx:-248395,ry:98785.4,vx:142985,vy:359534,mass:6e10,color:i},{rx:132578,ry:190933,vx:340823,vy:-236657,mass:6e10,color:i},{rx:199563,ry:-358097,vx:-272925,vy:-152098,mass:6e10,color:i},{rx:-123347,ry:-87898.1,vx:-298309,vy:418614,mass:6e10,color:i},{rx:163899,ry:-170907,vx:-296714,vy:-284548,mass:6e10,color:i},{rx:-122175,ry:-277269,vx:-332576,vy:146545,mass:6e10,color:i},{rx:-257.827,ry:-22885.5,vx:-1322260,vy:14896.5,mass:6e10,color:i},{rx:-375566,ry:-258773,vx:-168069,vy:243925,mass:6e10,color:i},{rx:19731.8,ry:30156,vx:881807,vy:-576987,mass:6e10,color:i},{rx:-11651.4,ry:32355.5,vx:1014960,vy:365492,mass:6e10,color:i},{rx:284422,ry:193370,vx:191789,vy:-282096,mass:6e10,color:i},{rx:340038,ry:91378.4,vx:87494.4,vy:-325584,mass:6e10,color:i},{rx:-175684,ry:-189520,vx:-288600,vy:267530,mass:6e10,color:i},{rx:-48245.8,ry:75231.7,vx:563291,vy:361236,mass:6e10,color:i},{rx:-27220.5,ry:-18707.5,vx:-623457,vy:907169,mass:6e10,color:i},{rx:-967.605,ry:-65080.7,vx:-784044,vy:11657,mass:6e10,color:i},{rx:-27221.8,ry:46777,vx:743223,vy:432517,mass:6e10,color:i},{rx:-93118.2,ry:36855.2,vx:232640,vy:587787,mass:6e10,color:i},{rx:423033,ry:-21757.1,vx:-15787.6,vy:-306966,mass:6e10,color:i},{rx:-25422.9,ry:-63790.2,vx:-709163,vy:282629,mass:6e10,color:i},{rx:23660.6,ry:22082.8,vx:758727,vy:-812936,mass:6e10,color:i},{rx:-111191,ry:297810,vx:332401,vy:124106,mass:6e10,color:i},{rx:-51671.7,ry:-250072,vx:-387693,vy:80108,mass:6e10,color:i},{rx:183877,ry:-58046.4,vx:-137145,vy:-434443,mass:6e10,color:i},{rx:1844.96,ry:203241,vx:443717,vy:-4027.94,mass:6e10,color:i},{rx:-392522,ry:82982.1,vx:65325.9,vy:309005,mass:6e10,color:i},{rx:-398037,ry:-112832,vx:-84822.3,vy:299228,mass:6e10,color:i},{rx:92520,ry:315280,vx:334876,vy:-98270.5,mass:6e10,color:i},{rx:217600,ry:-19918.9,vx:-39012.1,vy:-426178,mass:6e10,color:i},{rx:-20432,ry:-23254,vx:-854159,vy:750502,mass:6e10,color:i},{rx:183306,ry:-413325,vx:-271962,vy:-120613,mass:6e10,color:i},{rx:-333043,ry:184532,vx:157128,vy:283583,mass:6e10,color:i},{rx:286228,ry:-96209.3,vx:-115990,vy:-345077,mass:6e10,color:i},{rx:-8404.08,ry:-219.693,vx:-57016.1,vy:2181080,mass:6e10,color:i},{rx:5153.79,ry:9022.64,vx:1704100,vy:-973396,mass:6e10,color:i},{rx:-2491.7,ry:-76565.2,vx:-722401,vy:23509.5,mass:6e10,color:i},{rx:90807.4,ry:422929,vx:297389,vy:-63852.6,mass:6e10,color:i},{rx:245467,ry:21645.2,vx:35398.6,vy:-401438,mass:6e10,color:i},{rx:189495,ry:-335885,vx:-280567,vy:-158286,mass:6e10,color:i},{rx:661.655,ry:-302536,vx:-363704,vy:-795.431,mass:6e10,color:i},{rx:-181041,ry:61674.8,vx:147509,vy:432998,mass:6e10,color:i},{rx:-151633,ry:75057.8,vx:215755,vy:435872,mass:6e10,color:i},{rx:200103,ry:-72962.5,vx:-148491,vy:-407243,mass:6e10,color:i},{rx:-188281,ry:33123.5,vx:79274.7,vy:450616,mass:6e10,color:i},{rx:-380538,ry:-33943.9,vx:-28755.5,vy:322372,mass:6e10,color:i},{rx:6360.67,ry:-58578.5,vx:-819316,vy:-88964.4,mass:6e10,color:i},{rx:-134169,ry:45032.7,vx:169207,vy:504130,mass:6e10,color:i},{rx:365458,ry:-109604,vx:-93036.8,vy:-310217,mass:6e10,color:i},{rx:-72228.5,ry:50372,vx:385630,vy:552956,mass:6e10,color:i},{rx:-107914,ry:37284.5,vx:193340,vy:559589,mass:6e10,color:i},{rx:-293048,ry:11193.4,vx:14100,vy:369143,mass:6e10,color:i},{rx:53321.1,ry:284188,vx:365651,vy:-68605.7,mass:6e10,color:i},{rx:-347443,ry:273861,vx:186186,vy:236212,mass:6e10,color:i},{rx:158989,ry:195460,vx:309178,vy:-251487,mass:6e10,color:i},{rx:-407073,ry:120761,vx:87313.5,vy:294326,mass:6e10,color:i},{rx:34018.5,ry:-29644.1,vx:-618712,vy:-710011,mass:6e10,color:i},{rx:1513.15,ry:-24094.4,vx:-1284990,vy:-80698.2,mass:6e10,color:i},{rx:2422.58,ry:19630.4,vx:1411730,vy:-174220,mass:6e10,color:i},{rx:53883.7,ry:-21171.2,vx:-304045,vy:-773838,mass:6e10,color:i},{rx:168025,ry:-341720,vx:-290919,vy:-143045,mass:6e10,color:i},{rx:-17786.3,ry:-401.419,vx:-33841,vy:1499440,mass:6e10,color:i},{rx:-332998,ry:327639,vx:205277,vy:208635,mass:6e10,color:i},{rx:-211359,ry:78482.1,vx:146658,vy:394963,mass:6e10,color:i},{rx:-1094.2,ry:-758.932,vx:-3124390,vy:4504610,mass:6e10,color:i},{rx:18090.4,ry:-18593.4,vx:-890219,vy:-866136,mass:6e10,color:i},{rx:10841.2,ry:3345.95,vx:553867,vy:-1794580,mass:6e10,color:i},{rx:-72518.5,ry:9499.87,vx:96081.7,vy:733452,mass:6e10,color:i},{rx:-34972.5,ry:-25562.6,vx:-567189,vy:775978,mass:6e10,color:i},{rx:-35049.3,ry:-62998.8,vx:-651085,vy:362230,mass:6e10,color:i},{rx:92759.3,ry:38188.7,vx:240458,vy:-584065,mass:6e10,color:i},{rx:-92922.3,ry:98180.5,vx:395175,vy:374011,mass:6e10,color:i},{rx:225582,ry:130122,vx:195874,vy:-339570,mass:6e10,color:i},{rx:-267072,ry:-186556,vx:-200710,vy:287334,mass:6e10,color:i},{rx:-167912,ry:42351.8,vx:117571,vy:466132,mass:6e10,color:i},{rx:85109.8,ry:22231.1,vx:170464,vy:-652606,mass:6e10,color:i},{rx:-79269.5,ry:-5812.62,vx:-51892.5,vy:707683,mass:6e10,color:i},{rx:71963.3,ry:112413,vx:461167,vy:-295225,mass:6e10,color:i},{rx:-61705.5,ry:316651,vx:345707,vy:67367.6,mass:6e10,color:i},{rx:-183341,ry:60376.9,vx:142424,vy:432486,mass:6e10,color:i},{rx:277099,ry:-73635.4,vx:-95950.4,vy:-361074,mass:6e10,color:i},{rx:256909,ry:-334764,vx:-244307,vy:-187489,mass:6e10,color:i},{rx:367974,ry:106405,vx:89787.9,vy:-310508,mass:6e10,color:i},{rx:-141720,ry:-46823.5,vx:-162446,vy:491673,mass:6e10,color:i},{rx:-266962,ry:69437.4,vx:95881.3,vy:368630,mass:6e10,color:i},{rx:-188585,ry:-369892,vx:-276592,vy:141017,mass:6e10,color:i},{rx:361194,ry:73357.7,vx:65585.3,vy:-322925,mass:6e10,color:i},{rx:57762.5,ry:-41800.5,vx:-439217,vy:-606938,mass:6e10,color:i},{rx:-97027.5,ry:-15979,vx:-103665,vy:629470,mass:6e10,color:i},{rx:30283.9,ry:54627.4,vx:700076,vy:-388102,mass:6e10,color:i},{rx:-127036,ry:-164424,vx:-347289,vy:268321,mass:6e10,color:i},{rx:-98386.3,ry:375859,vx:310484,vy:81273.4,mass:6e10,color:i},{rx:-8356.86,ry:118795,vx:578270,vy:40679.4,mass:6e10,color:i},{rx:-280597,ry:-111724,vx:-134657,vy:338193,mass:6e10,color:i},{rx:-143743,ry:50191.5,vx:169012,vy:484031,mass:6e10,color:i},{rx:397584,ry:119088,vx:89100.4,vy:-297467,mass:6e10,color:i},{rx:18322.4,ry:-185343,vx:-461300,vy:-45602.8,mass:6e10,color:i},{rx:-9581.94,ry:-21050.1,vx:-1197230,vy:544974,mass:6e10,color:i},{rx:-20408.9,ry:-36879.2,vx:-852567,vy:471808,mass:6e10,color:i},{rx:114502,ry:-151219,vx:-366200,vy:-277284,mass:6e10,color:i},{rx:57223.9,ry:-337121,vx:-337282,vy:-57251.3,mass:6e10,color:i},{rx:-4822.35,ry:-60667.2,vx:-808369,vy:64256.1,mass:6e10,color:i},{rx:-94004.3,ry:451467,vx:288404,vy:60051.4,mass:6e10,color:i},{rx:-12720,ry:369743,vx:328703,vy:11308.1,mass:6e10,color:i},{rx:-1833.45,ry:-16082.9,vx:-1562250,vy:178097,mass:6e10,color:i},{rx:55339.5,ry:57480.4,vx:510193,vy:-491191,mass:6e10,color:i},{rx:357700,ry:-214084,vx:-159118,vy:-265862,mass:6e10,color:i},{rx:94430.4,ry:269246,vx:353409,vy:-123948,mass:6e10,color:i},{rx:-105954,ry:-314858,vx:-328957,vy:110699,mass:6e10,color:i},{rx:218215,ry:-255463,vx:-262426,vy:-224163,mass:6e10,color:i},{rx:4752.5,ry:17674.1,vx:1428010,vy:-383985,mass:6e10,color:i},{rx:5703.75,ry:48923.2,vx:895331,vy:-104383,mass:6e10,color:i},{rx:50651.4,ry:-61817.4,vx:-547368,vy:-448497,mass:6e10,color:i},{rx:-24526.6,ry:82332.3,vx:654123,vy:194862,mass:6e10,color:i},{rx:-166066,ry:81572.3,vx:205048,vy:417441,mass:6e10,color:i},{rx:-128795,ry:431267,vx:285719,vy:85327.6,mass:6e10,color:i},{rx:-155371,ry:732.628,vx:2393.09,vy:507512,mass:6e10,color:i},{rx:37896.1,ry:133148,vx:517130,vy:-147184,mass:6e10,color:i},{rx:-37292.9,ry:40641,vx:627603,vy:575900,mass:6e10,color:i},{rx:77607.2,ry:109940,vx:445514,vy:-314490,mass:6e10,color:i},{rx:-70586.9,ry:-148401,vx:-445644,vy:211970,mass:6e10,color:i},{rx:-130536,ry:37401.5,vx:149531,vy:521884,mass:6e10,color:i},{rx:370487,ry:-247275,vx:-166400,vy:-249314,mass:6e10,color:i},{rx:97184.5,ry:-74545.4,vx:-347897,vy:-453552,mass:6e10,color:i},{rx:320001,ry:89716.3,vx:93677.6,vy:-334131,mass:6e10,color:i},{rx:4135.97,ry:-188137,vx:-461046,vy:-10135.5,mass:6e10,color:i},{rx:-6050.71,ry:-76404.3,vx:-720350,vy:57046.9,mass:6e10,color:i},{rx:150167,ry:220621,vx:320122,vy:-217894,mass:6e10,color:i},{rx:-212101,ry:71757.4,vx:135486,vy:400470,mass:6e10,color:i},{rx:-2377.28,ry:49624.7,vx:896485,vy:42946.2,mass:6e10,color:i},{rx:170643,ry:182093,vx:292204,vy:-273830,mass:6e10,color:i},{rx:180427,ry:-239443,vx:-291789,vy:-219871,mass:6e10,color:i},{rx:-50229.2,ry:64479.9,vx:552014,vy:430013,mass:6e10,color:i},{rx:19854.4,ry:4056.37,vx:281301,vy:-1376860,mass:6e10,color:i},{rx:9916.6,ry:-190693,vx:-457185,vy:-23775,mass:6e10,color:i},{rx:-118609,ry:-217279,vx:-352920,vy:192653,mass:6e10,color:i},{rx:126875,ry:281771,vx:328140,vy:-147753,mass:6e10,color:i},{rx:-240170,ry:-194867,vx:-226646,vy:279336,mass:6e10,color:i},{rx:368319,ry:-180846,vx:-137645,vy:-280334,mass:6e10,color:i},{rx:-277406,ry:-160735,vx:-177128,vy:305698,mass:6e10,color:i},{rx:393020,ry:124681,vx:94206.8,vy:-296960,mass:6e10,color:i},{rx:246420,ry:369031,vx:249750,vy:-166770,mass:6e10,color:i},{rx:25827.9,ry:-306470,vx:-359450,vy:-30292.8,mass:6e10,color:i},{rx:23195.3,ry:17817.3,vx:712563,vy:-927645,mass:6e10,color:i},{rx:-201140,ry:-164061,vx:-248187,vy:304278,mass:6e10,color:i},{rx:421014,ry:42392.3,vx:30810.2,vy:-305988,mass:6e10,color:i},{rx:17464.9,ry:36475.3,vx:897233,vy:-429610,mass:6e10,color:i},{rx:138810,ry:109987,vx:295217,vy:-372583,mass:6e10,color:i},{rx:3499.12,ry:-1976.13,vx:-1551840,vy:-2747830,mass:6e10,color:i},{rx:-193268,ry:-138454,vx:-238935,vy:333530,mass:6e10,color:i},{rx:-90450.1,ry:-204888,vx:-386709,vy:170717,mass:6e10,color:i},{rx:-100515,ry:114213,vx:385009,vy:338834,mass:6e10,color:i},{rx:-344117,ry:-40484.7,vx:-39709.4,vy:337527,mass:6e10,color:i},{rx:135385,ry:-88080.3,vx:-271453,vy:-417242,mass:6e10,color:i},{rx:-153025,ry:193491,vx:315919,vy:249848,mass:6e10,color:i},{rx:33147.2,ry:73064.3,vx:643168,vy:-291787,mass:6e10,color:i},{rx:75549.8,ry:180851,vx:416951,vy:-174180,mass:6e10,color:i},{rx:37384,ry:84264.6,vx:602272,vy:-267198,mass:6e10,color:i},{rx:-351857,ry:-95787.4,vx:-87018.2,vy:319645,mass:6e10,color:i},{rx:-1375.81,ry:-23786.1,vx:-1293870,vy:74838.1,mass:6e10,color:i},{rx:252478,ry:60486.5,vx:91471.2,vy:-381812,mass:6e10,color:i},{rx:-100803,ry:51220.3,vx:269502,vy:530387,mass:6e10,color:i},{rx:66562.7,ry:45582.5,vx:397954,vy:-581120,mass:6e10,color:i},{rx:334291,ry:109213,vx:104759,vy:-320660,mass:6e10,color:i},{rx:348248,ry:-193505,vx:-153941,vy:-277046,mass:6e10,color:i},{rx:96254.1,ry:-297462,vx:-340399,vy:-110148,mass:6e10,color:i},{rx:11401.5,ry:97139.2,vx:635308,vy:-74567.8,mass:6e10,color:i},{rx:-303883,ry:-302216,vx:-215482,vy:216670,mass:6e10,color:i},{rx:-148994,ry:437694,vx:278510,vy:94806.9,mass:6e10,color:i},{rx:155776,ry:347752,vx:295759,vy:-132486,mass:6e10,color:i},{rx:-39418.9,ry:111827,vx:547919,vy:193141,mass:6e10,color:i},{rx:-45957.2,ry:458154,vx:293340,vy:29424.9,mass:6e10,color:i},{rx:208477,ry:130837,vx:214347,vy:-341542,mass:6e10,color:i},{rx:-51108.8,ry:78792,vx:547657,vy:355240,mass:6e10,color:i},{rx:13382.1,ry:7055.04,vx:758524,vy:-1438780,mass:6e10,color:i},{rx:-83159.8,ry:-48769.9,vx:-325939,vy:555774,mass:6e10,color:i},{rx:679.729,ry:217.789,vx:2284760,vy:-7130820,mass:6e10,color:i},{rx:-20278.3,ry:-1349.07,vx:-93150.7,vy:1400180,mass:6e10,color:i},{rx:-64479.6,ry:178003,vx:432280,vy:156589,mass:6e10,color:i},{rx:187236,ry:206167,vx:280621,vy:-254854,mass:6e10,color:i},{rx:82381.2,ry:-201059,vx:-397125,vy:-162716,mass:6e10,color:i},{rx:-11905.7,ry:13075.4,vx:1112330,vy:1012830,mass:6e10,color:i},{rx:-140877,ry:-342744,vx:-303955,vy:124933,mass:6e10,color:i},{rx:-60340.4,ry:278896,vx:366030,vy:79192.1,mass:6e10,color:i},{rx:-352090,ry:-300984,vx:-190995,vy:223425,mass:6e10,color:i},{rx:-156259,ry:-244137,vx:-312958,vy:200308,mass:6e10,color:i},{rx:-1803.74,ry:-205.105,vx:-530481,vy:4665170,mass:6e10,color:i},{rx:833.496,ry:7804.21,vx:2245330,vy:-239803,mass:6e10,color:i},{rx:662.508,ry:6567.84,vx:2449790,vy:-247114,mass:6e10,color:i},{rx:440825,ry:-42859.4,vx:-29088.5,vy:-299186,mass:6e10,color:i},{rx:-145799,ry:-89578.5,vx:-253159,vy:412047,mass:6e10,color:i},{rx:-725.328,ry:-112588,vx:-596182,vy:3840.79,mass:6e10,color:i},{rx:120322,ry:-214669,vx:-351777,vy:-197171,mass:6e10,color:i},{rx:-131546,ry:12105,vx:50436.1,vy:548092,mass:6e10,color:i},{rx:33912.5,ry:60711.2,vx:662291,vy:-369948,mass:6e10,color:i},{rx:-406920,ry:-153186,vx:-106887,vy:283933,mass:6e10,color:i},{rx:-80720.4,ry:-47406.3,vx:-331116,vy:563802,mass:6e10,color:i},{rx:-270427,ry:81055,vx:108099,vy:360655,mass:6e10,color:i},{rx:307971,ry:351609,vx:220114,vy:-192795,mass:6e10,color:i},{rx:-369644,ry:40351.9,vx:35601.5,vy:326128,mass:6e10,color:i},{rx:-117287,ry:126417,vx:353156,vy:327650,mass:6e10,color:i},{rx:157020,ry:120195,vx:273447,vy:-357227,mass:6e10,color:i},{rx:-319484,ry:-87340.8,vx:-91665.2,vy:335303,mass:6e10,color:i},{rx:-56949.1,ry:-432902,vx:-300162,vy:39486.9,mass:6e10,color:i},{rx:90227,ry:-78809.9,vx:-380222,vy:-435304,mass:6e10,color:i},{rx:184349,ry:21635.1,vx:54122.7,vy:-461172,mass:6e10,color:i},{rx:32797.3,ry:253394,vx:392490,vy:-50800.9,mass:6e10,color:i},{rx:417463,ry:-203698,vx:-128717,vy:-263795,mass:6e10,color:i},{rx:338674,ry:-129550,vx:-118692,vy:-310290,mass:6e10,color:i},{rx:43180.5,ry:4735.8,vx:104642,vy:-954114,mass:6e10,color:i},{rx:-1388.35,ry:14780.9,vx:1634660,vy:153542,mass:6e10,color:i},{rx:8844.83,ry:-16099.4,vx:-1293650,vy:-710718,mass:6e10,color:i},{rx:207442,ry:-411025,vx:-263205,vy:-132839,mass:6e10,color:i},{rx:-417325,ry:114733,vx:80609,vy:293203,mass:6e10,color:i},{rx:-103528,ry:347309,vx:318459,vy:94928.1,mass:6e10,color:i},{rx:5497.92,ry:-32707.2,vx:-1083280,vy:-182094,mass:6e10,color:i},{rx:402389,ry:-111073,vx:-82387.4,vy:-298468,mass:6e10,color:i},{rx:19915.9,ry:88703,vx:647366,vy:-145349,mass:6e10,color:i},{rx:285889,ry:281006,vx:221487,vy:-225336,mass:6e10,color:i},{rx:-54743.4,ry:116872,vx:504282,vy:236209,mass:6e10,color:i},{rx:-27181.3,ry:129499,vx:538223,vy:112971,mass:6e10,color:i},{rx:244266,ry:-311950,vx:-250232,vy:-195939,mass:6e10,color:i},{rx:382144,ry:163935,vx:122306,vy:-285104,mass:6e10,color:i},{rx:-228328,ry:-239342,vx:-251675,vy:240094,mass:6e10,color:i},{rx:289186,ry:119657,vx:136721,vy:-330426,mass:6e10,color:i},{rx:-2027.44,ry:-69929.7,vx:-756021,vy:21919,mass:6e10,color:i},{rx:277341,ry:-148564,vx:-168407,vy:-314385,mass:6e10,color:i},{rx:-412660,ry:-152949,vx:-104802,vy:282758,mass:6e10,color:i},{rx:256634,ry:50547.8,vx:75591.6,vy:-383782,mass:6e10,color:i},{rx:222231,ry:171272,vx:230546,vy:-299142,mass:6e10,color:i},{rx:-9542.56,ry:-9695.26,vx:-1222410,vy:1203150,mass:6e10,color:i},{rx:-359206,ry:6558.81,vx:6093.11,vy:333701,mass:6e10,color:i},{rx:277895,ry:214161,vx:206163,vy:-267517,mass:6e10,color:i},{rx:-27486.8,ry:329750,vx:346570,vy:28888.8,mass:6e10,color:i},{rx:130645,ry:-143279,vx:-335705,vy:-306102,mass:6e10,color:i},{rx:-44481.1,ry:27088.6,vx:455948,vy:748692,mass:6e10,color:i},{rx:91130.1,ry:47742.4,vx:289437,vy:-552474,mass:6e10,color:i},{rx:-128900,ry:-118307,vx:-323396,vy:352350,mass:6e10,color:i},{rx:-13633.6,ry:71162.9,vx:729912,vy:139839,mass:6e10,color:i},{rx:-166965,ry:-263279,vx:-302572,vy:191884,mass:6e10,color:i},{rx:401167,ry:-4042.96,vx:-3182.86,vy:-315822,mass:6e10,color:i},{rx:109159,ry:32419.9,vx:168782,vy:-568296,mass:6e10,color:i},{rx:304908,ry:150.036,vx:178.271,vy:-362288,mass:6e10,color:i},{rx:-420018,ry:24372.1,vx:17866.3,vy:307900,mass:6e10,color:i},{rx:16285.6,ry:34231.6,vx:927829,vy:-441413,mass:6e10,color:i},{rx:74250.4,ry:-430334,vx:-298319,vy:-51472.3,mass:6e10,color:i},{rx:-176377,ry:-285215,vx:-293814,vy:181695,mass:6e10,color:i},{rx:-167340,ry:195381,vx:299566,vy:256573,mass:6e10,color:i},{rx:93148.8,ry:4034.83,vx:28352.3,vy:-654545,mass:6e10,color:i},{rx:106183,ry:-9940.34,vx:-57097,vy:-609913,mass:6e10,color:i},{rx:262448,ry:350986,vx:242010,vy:-180962,mass:6e10,color:i},{rx:-303062,ry:136204,vx:142268,vy:316555,mass:6e10,color:i},{rx:433122,ry:54036.7,vx:37487,vy:-300471,mass:6e10,color:i},{rx:-278437,ry:-182624,vx:-190134,vy:289888,mass:6e10,color:i},{rx:-199089,ry:-310824,vx:-277271,vy:177598,mass:6e10,color:i},{rx:299929,ry:-339425,vx:-222742,vy:-196823,mass:6e10,color:i},{rx:172199,ry:-81161.7,vx:-195479,vy:-414744,mass:6e10,color:i},{rx:63947.5,ry:20744.1,vx:238072,vy:-733900,mass:6e10,color:i},{rx:334516,ry:-170316,vx:-148146,vy:-290973,mass:6e10,color:i},{rx:95593.2,ry:-167574,vx:-395613,vy:-225679,mass:6e10,color:i},{rx:-392469,ry:-84599.8,vx:-66528.2,vy:308633,mass:6e10,color:i},{rx:317650,ry:208135,vx:177914,vy:-271528,mass:6e10,color:i},{rx:-24199.6,ry:-20746,vx:-729285,vy:850690,mass:6e10,color:i},{rx:-110844,ry:178346,vx:370783,vy:230446,mass:6e10,color:i},{rx:-51981.8,ry:-175428,vx:-448411,vy:132870,mass:6e10,color:i},{rx:-44334,ry:-258163,vx:-385234,vy:66155.7,mass:6e10,color:i},{rx:-30294.4,ry:414815,vx:309370,vy:22593.7,mass:6e10,color:i},{rx:13612.2,ry:259572,vx:391846,vy:-20548.7,mass:6e10,color:i},{rx:343833,ry:-237435,vx:-175856,vy:-254659,mass:6e10,color:i},{rx:91408.3,ry:-40865.5,vx:-258028,vy:-577159,mass:6e10,color:i},{rx:-37081.8,ry:113639,vx:550069,vy:179494,mass:6e10,color:i},{rx:216547,ry:175607,vx:238637,vy:-294271,mass:6e10,color:i},{rx:321709,ry:-195862,vx:-169511,vy:-278426,mass:6e10,color:i},{rx:280478,ry:-180280,vx:-187327,vy:-291441,mass:6e10,color:i},{rx:304538,ry:-61277.7,vx:-70802.8,vy:-351876,mass:6e10,color:i},{rx:22833.7,ry:-143729,vx:-517902,vy:-82277.3,mass:6e10,color:i},{rx:-37385.5,ry:-150536,vx:-492974,vy:122430,mass:6e10,color:i},{rx:-50876.2,ry:-422903,vx:-304325,vy:36611.1,mass:6e10,color:i},{rx:30717.8,ry:113051,vx:564026,vy:-153255,mass:6e10,color:i},{rx:-80.1126,ry:-3954.84,vx:-3180100,vy:64418.7,mass:6e10,color:i},{rx:-53880.4,ry:-190810,vx:-432364,vy:122089,mass:6e10,color:i},{rx:37545.2,ry:-83967.6,vx:-602164,vy:-269251,mass:6e10,color:i},{rx:77393.2,ry:-125279,vx:-443511,vy:-273986,mass:6e10,color:i},{rx:117749,ry:-279812,vx:-334657,vy:-140829,mass:6e10,color:i},{rx:-939.04,ry:-174089,vx:-479450,vy:2586.16,mass:6e10,color:i},{rx:-74123.4,ry:-67405.6,vx:-425212,vy:467590,mass:6e10,color:i},{rx:-331732,ry:-198168,vx:-165041,vy:276277,mass:6e10,color:i},{rx:-362849,ry:-23487.2,vx:-21429.9,vy:331065,mass:6e10,color:i},{rx:-35114.1,ry:-37576.8,vx:-644521,vy:602281,mass:6e10,color:i},{rx:-39117.9,ry:94124,vx:578618,vy:240473,mass:6e10,color:i},{rx:22040.5,ry:-112614,vx:-579560,vy:-113430,mass:6e10,color:i},{rx:-19465,ry:55818.8,vx:776906,vy:270922,mass:6e10,color:i},{rx:206057,ry:-6794.84,vx:-14520.5,vy:-440342,mass:6e10,color:i},{rx:-33099,ry:-3626.43,vx:-119401,vy:1089790,mass:6e10,color:i},{rx:9438.21,ry:-37761.6,vx:-983729,vy:-245875,mass:6e10,color:i},{rx:-250181,ry:-257951,vx:-239556,vy:232340,mass:6e10,color:i},{rx:228188,ry:-246122,vx:-253223,vy:-234771,mass:6e10,color:i},{rx:7710.72,ry:407200,vx:313414,vy:-5934.78,mass:6e10,color:i},{rx:-328522,ry:10302.8,vx:10937.7,vy:348767,mass:6e10,color:i},{rx:255371,ry:380840,vx:245371,vy:-164533,mass:6e10,color:i},{rx:18407.4,ry:390202,vx:319720,vy:-15082.5,mass:6e10,color:i},{rx:-142881,ry:-194510,vx:-328181,vy:241072,mass:6e10,color:i},{rx:-157424,ry:109280,vx:260594,vy:375399,mass:6e10,color:i},{rx:215882,ry:-97239.6,vx:-168845,vy:-374854,mass:6e10,color:i},{rx:-180471,ry:144068,vx:259720,vy:325346,mass:6e10,color:i},{rx:-12244.8,ry:471174,vx:291292,vy:7570.05,mass:6e10,color:i},{rx:3661.96,ry:7063.52,vx:1991090,vy:-1032240,mass:6e10,color:i},{rx:18108.2,ry:351272,vx:336862,vy:-17365.4,mass:6e10,color:i},{rx:24453.7,ry:-18507.4,vx:-689385,vy:-910881,mass:6e10,color:i},{rx:-93.5238,ry:-8287.16,vx:-2197320,vy:24797.6,mass:6e10,color:i},{rx:-38718.1,ry:-58402.1,vx:-629887,vy:417588,mass:6e10,color:i},{rx:-243999,ry:343556,vx:251255,vy:178446,mass:6e10,color:i},{rx:-266149,ry:-34445.7,vx:-49565.1,vy:382971,mass:6e10,color:i},{rx:-92694.6,ry:-14188.1,vx:-98841.5,vy:645756,mass:6e10,color:i},{rx:-566.945,ry:-23542.3,vx:-1303240,vy:31384.6,mass:6e10,color:i},{rx:-132232,ry:12897.4,vx:53278.2,vy:546243,mass:6e10,color:i},{rx:-226285,ry:114018,vx:178828,vy:354909,mass:6e10,color:i},{rx:-89576,ry:-7080.08,vx:-52584.8,vy:665295,mass:6e10,color:i},{rx:-288873,ry:-255596,vx:-213447,vy:241237,mass:6e10,color:i},{rx:-42332.8,ry:-185485,vx:-447142,vy:102050,mass:6e10,color:i},{rx:-314136,ry:261624,vx:200230,vy:240419,mass:6e10,color:i},{rx:117128,ry:36048.4,vx:168096,vy:-546174,mass:6e10,color:i},{rx:39409.2,ry:56318.1,vx:625170,vy:-437470,mass:6e10,color:i},{rx:-125060,ry:-42233.9,vx:-176174,vy:521676,mass:6e10,color:i},{rx:398860,ry:-67438.5,vx:-52436.6,vy:-310132,mass:6e10,color:i},{rx:13554.5,ry:-99752.8,vx:-624765,vy:-84893.6,mass:6e10,color:i},{rx:-17455.9,ry:-29378.7,vx:-930336,vy:552776,mass:6e10,color:i},{rx:-97601.1,ry:21551.4,vx:136435,vy:617881,mass:6e10,color:i},{rx:8053.05,ry:-13297.1,vx:-1372420,vy:-831171,mass:6e10,color:i},{rx:177570,ry:-312292,vx:-290143,vy:-164977,mass:6e10,color:i},{rx:80085.9,ry:123598,vx:437474,vy:-283463,mass:6e10,color:i},{rx:-26883.2,ry:-34210.8,vx:-754091,vy:592574,mass:6e10,color:i},{rx:-159077,ry:-178583,vx:-305455,vy:272090,mass:6e10,color:i},{rx:220018,ry:-215490,vx:-252237,vy:-257537,mass:6e10,color:i},{rx:11512.7,ry:-66520.3,vx:-758662,vy:-131302,mass:6e10,color:i},{rx:-203626,ry:-304493,vx:-274758,vy:183742,mass:6e10,color:i},{rx:159487,ry:399638,vx:283249,vy:-113039,mass:6e10,color:i},{rx:-80767,ry:-54336.4,vx:-357906,vy:532001,mass:6e10,color:i},{rx:149249,ry:442572,vx:277372,vy:-93538.7,mass:6e10,color:i},{rx:73185.4,ry:-68600.9,vx:-431966,vy:-460833,mass:6e10,color:i},{rx:78666.3,ry:-68195.1,vx:-406117,vy:-468475,mass:6e10,color:i},{rx:11053.7,ry:-25191,vx:-1104490,vy:-484642,mass:6e10,color:i},{rx:38090.6,ry:16077.8,vx:382589,vy:-906412,mass:6e10,color:i},{rx:81355.7,ry:-140560,vx:-429631,vy:-248669,mass:6e10,color:i},{rx:-446545,ry:92547.1,vx:60118.1,vy:290073,mass:6e10,color:i},{rx:-97002.9,ry:53729.8,vx:291085,vy:525519,mass:6e10,color:i},{rx:26398.1,ry:-447978,vx:-298113,vy:-17567,mass:6e10,color:i},{rx:89691.1,ry:-437642,vx:-293209,vy:-60090.8,mass:6e10,color:i},{rx:-116361,ry:-270373,vx:-338694,vy:145765,mass:6e10,color:i},{rx:-405824,ry:-130007,vx:-93492.6,vy:291842,mass:6e10,color:i},{rx:168040,ry:137550,vx:271916,vy:-332192,mass:6e10,color:i},{rx:-18794.9,ry:436020,vx:302539,vy:13041.1,mass:6e10,color:i},{rx:-119130,ry:5358.26,vx:26030.1,vy:578723,mass:6e10,color:i},{rx:146267,ry:-106741,vx:-277131,vy:-379754,mass:6e10,color:i},{rx:119141,ry:-378595,vx:-302896,vy:-95319.3,mass:6e10,color:i},{rx:-226376,ry:286871,vx:259785,vy:205002,mass:6e10,color:i},{rx:-58381.5,ry:-287201,vx:-362124,vy:73611.7,mass:6e10,color:i},{rx:129194,ry:60149.6,vx:223669,vy:-480412,mass:6e10,color:i},{rx:-325021,ry:-226767,vx:-181830,vy:260614,mass:6e10,color:i},{rx:77906.3,ry:-16780.6,vx:-149216,vy:-692756,mass:6e10,color:i},{rx:-151003,ry:92143.7,vx:247756,vy:406018,mass:6e10,color:i},{rx:27687.7,ry:437347,vx:301594,vy:-19093.4,mass:6e10,color:i},{rx:-136238,ry:-369678,vx:-299051,vy:110210,mass:6e10,color:i},{rx:-60793.6,ry:428467,vx:301084,vy:42719.7,mass:6e10,color:i},{rx:-9752.25,ry:21767.2,vx:1182100,vy:529611,mass:6e10,color:i},{rx:-18571.8,ry:-40396.6,vx:-862009,vy:396297,mass:6e10,color:i},{rx:-78417.1,ry:-343463,vx:-328585,vy:75020.1,mass:6e10,color:i},{rx:111209,ry:326148,vx:322556,vy:-109984,mass:6e10,color:i},{rx:301515,ry:324315,vx:220172,vy:-204693,mass:6e10,color:i},{rx:71356.7,ry:-113062,vx:-462673,vy:-292005,mass:6e10,color:i},{rx:49090,ry:435239,vx:300370,vy:-33878.3,mass:6e10,color:i},{rx:-171891,ry:-209844,vx:-297140,vy:243398,mass:6e10,color:i},{rx:-39426.6,ry:-8639.15,vx:-213133,vy:972678,mass:6e10,color:i},{rx:331035,ry:18826.6,vx:19726.5,vy:-346857,mass:6e10,color:i},{rx:116082,ry:-169861,vx:-364135,vy:-248849,mass:6e10,color:i},{rx:-149851,ry:-197211,vx:-320053,vy:243193,mass:6e10,color:i},{rx:4760,ry:6419.82,vx:1797550,vy:-1332800,mass:6e10,color:i},{rx:128087,ry:-187657,vx:-346642,vy:-236603,mass:6e10,color:i},{rx:113660,ry:123661,vx:359387,vy:-330322,mass:6e10,color:i},{rx:133698,ry:-115451,vx:-311084,vy:-360251,mass:6e10,color:i},{rx:297340,ry:-292711,vx:-217268,vy:-220704,mass:6e10,color:i},{rx:27876.2,ry:149774,vx:503881,vy:-93783.1,mass:6e10,color:i},{rx:30991.8,ry:9881.9,vx:336954,vy:-1056760,mass:6e10,color:i},{rx:196249,ry:105290,vx:200408,vy:-373540,mass:6e10,color:i},{rx:-26387,ry:58381.6,vx:720203,vy:325513,mass:6e10,color:i},{rx:41166.3,ry:83410.7,vx:588197,vy:-290297,mass:6e10,color:i},{rx:-247805,ry:-179347,vx:-212066,vy:293013,mass:6e10,color:i},{rx:40180.9,ry:230359,vx:407543,vy:-71086.5,mass:6e10,color:i},{rx:151644,ry:445421,vx:276078,vy:-93991,mass:6e10,color:i},{rx:441964,ry:-56821.1,vx:-38214.4,vy:-297238,mass:6e10,color:i},{rx:156453,ry:-325127,vx:-300103,vy:-144411,mass:6e10,color:i},{rx:16167.2,ry:-67873.2,vx:-736739,vy:-175489,mass:6e10,color:i},{rx:106826,ry:1454.59,vx:8333.02,vy:-611983,mass:6e10,color:i},{rx:-400973,ry:-67446.9,vx:-52040.2,vy:309381,mass:6e10,color:i},{rx:-334930,ry:170487,vx:148031,vy:290814,mass:6e10,color:i},{rx:93873.5,ry:460022,vx:286062,vy:-58374.7,mass:6e10,color:i},{rx:-789.528,ry:17172.6,vx:1524170,vy:70075.5,mass:6e10,color:i},{rx:-230593,ry:-206396,vx:-239833,vy:267951,mass:6e10,color:i},{rx:-5646.17,ry:-7114.81,vx:-1644230,vy:1304830,mass:6e10,color:i},{rx:-346631,ry:244826,vx:177163,vy:250832,mass:6e10,color:i},{rx:31475,ry:43856.1,vx:699516,vy:-502035,mass:6e10,color:i},{rx:71226.2,ry:-132219,vx:-454464,vy:-244819,mass:6e10,color:i},{rx:24469.3,ry:19329.6,vx:702239,vy:-888962,mass:6e10,color:i},{rx:377456,ry:-79170.8,vx:-66127.4,vy:-315270,mass:6e10,color:i},{rx:-41155.5,ry:18876.8,vx:391954,vy:854542,mass:6e10,color:i},{rx:374692,ry:54213.4,vx:46556.9,vy:-321775,mass:6e10,color:i},{rx:6278.1,ry:-14792.6,vx:-1452680,vy:-616532,mass:6e10,color:i},{rx:-401155,ry:-105191,vx:-78793.4,vy:300485,mass:6e10,color:i},{rx:87190.5,ry:-464601,vx:-285972,vy:-53667.7,mass:6e10,color:i},{rx:-75477.1,ry:-260951,vx:-368714,vy:106646,mass:6e10,color:i},{rx:-441226,ry:-42307.3,vx:-28680.2,vy:299107,mass:6e10,color:i},{rx:-1731.57,ry:2268.38,vx:2976670,vy:2272240,mass:6e10,color:i},{rx:162732,ry:104029,vx:245176,vy:-383528,mass:6e10,color:i},{rx:27912.4,ry:-200024,vx:-440875,vy:-61522,mass:6e10,color:i},{rx:165078,ry:76190.9,vx:196610,vy:-425983,mass:6e10,color:i},{rx:96662.1,ry:-238983,vx:-365261,vy:-147738,mass:6e10,color:i},{rx:-135695,ry:157279,vx:332334,vy:286726,mass:6e10,color:i},{rx:-31941.5,ry:29455.8,vx:650616,vy:705520,mass:6e10,color:i},{rx:-258275,ry:-173290,vx:-199859,vy:297874,mass:6e10,color:i},{rx:244095,ry:-145611,vx:-192237,vy:-322255,mass:6e10,color:i},{rx:248102,ry:273512,vx:243832,vy:-221180,mass:6e10,color:i},{rx:254094,ry:-71351.4,vx:-105276,vy:-374904,mass:6e10,color:i},{rx:-279917,ry:29581,vx:39626.8,vy:374978,mass:6e10,color:i},{rx:-23335.3,ry:-36996.4,vx:-809032,vy:510293,mass:6e10,color:i},{rx:-102020,ry:-123295,vx:-385282,vy:318801,mass:6e10,color:i},{rx:-66631.2,ry:-34130.8,vx:-333331,vy:650738,mass:6e10,color:i},{rx:-376582,ry:-239115,vx:-160554,vy:252857,mass:6e10,color:i},{rx:101671,ry:-323725,vx:-327649,vy:-102904,mass:6e10,color:i},{rx:53740,ry:115328,vx:508356,vy:-236881,mass:6e10,color:i},{rx:-4337.91,ry:370811,vx:328487,vy:3842.79,mass:6e10,color:i},{rx:20993.3,ry:33317.1,vx:852902,vy:-537419,mass:6e10,color:i},{rx:-133133,ry:-64712.4,vx:-227307,vy:467640,mass:6e10,color:i},{rx:-92191.1,ry:187693,vx:392661,vy:192867,mass:6e10,color:i},{rx:246856,ry:-300855,vx:-247908,vy:-203412,mass:6e10,color:i},{rx:-62704.7,ry:126200,vx:477244,vy:237127,mass:6e10,color:i},{rx:-72942,ry:139864,vx:446606,vy:232913,mass:6e10,color:i},{rx:265976,ry:-113487,vx:-145997,vy:-342167,mass:6e10,color:i},{rx:-91560.3,ry:-302353,vx:-340645,vy:103156,mass:6e10,color:i},{rx:127302,ry:446978,vx:282223,vy:-80378.8,mass:6e10,color:i},{rx:151784,ry:125376,vx:287136,vy:-347614,mass:6e10,color:i},{rx:66933.3,ry:388214,vx:314095,vy:-54154.2,mass:6e10,color:i},{rx:424025,ry:-13386.3,vx:-9691.45,vy:-306986,mass:6e10,color:i},{rx:219902,ry:-12168,vx:-23551.5,vy:-425626,mass:6e10,color:i},{rx:-74335.6,ry:-97362.3,vx:-454306,vy:346860,mass:6e10,color:i},{rx:146165,ry:407023,vx:286300,vy:-102812,mass:6e10,color:i},{rx:-24140.6,ry:-219362,vx:-423289,vy:46582.6,mass:6e10,color:i},{rx:-162994,ry:15303,vx:46216.7,vy:492259,mass:6e10,color:i},{rx:-49754.4,ry:123849,vx:508111,vy:204126,mass:6e10,color:i},{rx:-92272.5,ry:430566,vx:294776,vy:63172.1,mass:6e10,color:i},{rx:-15729.1,ry:-246539,vx:-401673,vy:25626.5,mass:6e10,color:i},{rx:240544,ry:9546,vx:16168,vy:-407407,mass:6e10,color:i},{rx:375691,ry:-34144.1,vx:-29480.1,vy:-324372,mass:6e10,color:i},{rx:43348.5,ry:7173.91,vx:155823,vy:-941565,mass:6e10,color:i},{rx:217187,ry:-230444,vx:-258708,vy:-243825,mass:6e10,color:i},{rx:-52715.9,ry:-94212,vx:-531330,vy:297303,mass:6e10,color:i},{rx:275798,ry:-142702,vx:-164974,vy:-318842,mass:6e10,color:i},{rx:233699,ry:34230.1,vx:59655,vy:-407283,mass:6e10,color:i},{rx:-264552,ry:-273571,vx:-233113,vy:225428,mass:6e10,color:i},{rx:-6105.72,ry:6390.04,vx:1538520,vy:1470060,mass:6e10,color:i},{rx:284059,ry:7341.64,vx:9696.2,vy:-375160,mass:6e10,color:i},{rx:-213052,ry:-161178,vx:-233513,vy:308667,mass:6e10,color:i},{rx:-103663,ry:-390084,vx:-304322,vy:80871.7,mass:6e10,color:i},{rx:63679,ry:25792.3,vx:286520,vy:-707393,mass:6e10,color:i},{rx:372533,ry:-3037.81,vx:-2672.57,vy:-327744,mass:6e10,color:i},{rx:54948.5,ry:-46506.7,vx:-481690,vy:-569125,mass:6e10,color:i},{rx:1219.52,ry:6509.97,vx:2416100,vy:-452610,mass:6e10,color:i},{rx:382783,ry:236491,vx:156752,vy:-253718,mass:6e10,color:i},{rx:-5289.79,ry:-100676,vx:-629185,vy:33059.2,mass:6e10,color:i},{rx:95527.7,ry:316251,vx:333182,vy:-100642,mass:6e10,color:i},{rx:-147356,ry:-78777.6,vx:-230732,vy:431592,mass:6e10,color:i},{rx:-43100.2,ry:-191526,vx:-440488,vy:99125.5,mass:6e10,color:i},{rx:-1007.36,ry:2172.1,vx:3708890,vy:1720090,mass:6e10,color:i},{rx:407670,ry:45839.7,vx:34900,vy:-310379,mass:6e10,color:i},{rx:-203364,ry:348038,vx:272051,vy:158963,mass:6e10,color:i},{rx:226274,ry:167631,vx:224408,vy:-302913,mass:6e10,color:i},{rx:-195410,ry:-328942,vx:-278054,vy:165180,mass:6e10,color:i},{rx:159031,ry:-184432,vx:-307009,vy:-264726,mass:6e10,color:i},{rx:-111789,ry:39192.2,vx:192299,vy:548502,mass:6e10,color:i},{rx:-197766,ry:363914,vx:273120,vy:148425,mass:6e10,color:i},{rx:134342,ry:322863,vx:312333,vy:-129961,mass:6e10,color:i},{rx:1065.97,ry:-611.23,vx:-2838780,vy:-4950780,mass:6e10,color:i},{rx:-12140.6,ry:-134529,vx:-542112,vy:48923.4,mass:6e10,color:i},{rx:-14618.1,ry:77816.4,vx:698726,vy:131258,mass:6e10,color:i},{rx:-108820,ry:272226,vx:343074,vy:137141,mass:6e10,color:i},{rx:23011.4,ry:63880.1,vx:722296,vy:-260191,mass:6e10,color:i},{rx:-80700.7,ry:-20523.6,vx:-170869,vy:671872,mass:6e10,color:i},{rx:-210405,ry:88591.8,vx:162475,vy:385877,mass:6e10,color:i},{rx:215792,ry:75069.9,vx:137512,vy:-395285,mass:6e10,color:i},{rx:-144553,ry:-38558.3,vx:-133300,vy:499732,mass:6e10,color:i},{rx:82337,ry:-193626,vx:-401344,vy:-170666,mass:6e10,color:i},{rx:227905,ry:-110992,vx:-173971,vy:-357221,mass:6e10,color:i},{rx:258059,ry:47456.4,vx:70635.2,vy:-384101,mass:6e10,color:i},{rx:163821,ry:-191154,vx:-302742,vy:-259452,mass:6e10,color:i},{rx:78165.6,ry:188601,vx:409011,vy:-169514,mass:6e10,color:i},{rx:-92864,ry:98106.3,vx:395288,vy:374166,mass:6e10,color:i},{rx:-91521.9,ry:3651.97,vx:26354.8,vy:660477,mass:6e10,color:i},{rx:-58507.5,ry:224852,vx:401654,vy:104512,mass:6e10,color:i},{rx:-7299.92,ry:-42538.3,vx:-949063,vy:162867,mass:6e10,color:i},{rx:-144885,ry:230148,vx:324638,vy:204369,mass:6e10,color:i},{rx:-105007,ry:217360,vx:366627,vy:177118,mass:6e10,color:i},{rx:80931,ry:423005,vx:299403,vy:-57283,mass:6e10,color:i},{rx:-336078,ry:280830,vx:193830,vy:231963,mass:6e10,color:i},{rx:-132662,ry:-18456.5,vx:-75322.2,vy:541403,mass:6e10,color:i},{rx:293482,ry:68959.9,vx:83341.2,vy:-354685,mass:6e10,color:i},{rx:-267326,ry:163766,vx:186640,vy:304665,mass:6e10,color:i},{rx:-70495.6,ry:1299.51,vx:13885.5,vy:753263,mass:6e10,color:i},{rx:222273,ry:-209745,vx:-248357,vy:-263191,mass:6e10,color:i},{rx:-75307.9,ry:406227,vx:306019,vy:56730.9,mass:6e10,color:i},{rx:-189140,ry:-147759,vx:-251384,vy:321786,mass:6e10,color:i},{rx:-160935,ry:-122913,vx:-269828,vy:353298,mass:6e10,color:i},{rx:-224152,ry:215524,vx:248646,vy:258601,mass:6e10,color:i},{rx:-42594.4,ry:70783.4,vx:596367,vy:358868,mass:6e10,color:i},{rx:-89594.4,ry:193703,vx:393028,vy:181789,mass:6e10,color:i},{rx:-242666,ry:-293071,vx:-249796,vy:206834,mass:6e10,color:i},{rx:263431,ry:208131,vx:214038,vy:-270907,mass:6e10,color:i},{rx:-252377,ry:-224834,vx:-228889,vy:256929,mass:6e10,color:i},{rx:3458.57,ry:-10257.6,vx:-1821980,vy:-614317,mass:6e10,color:i},{rx:-22617.6,ry:300623,vx:363320,vy:27334.7,mass:6e10,color:i},{rx:243363,ry:-341627,vx:-251581,vy:-179217,mass:6e10,color:i},{rx:81892.3,ry:215317,vx:389578,vy:-148170,mass:6e10,color:i},{rx:-170919,ry:439608,vx:271489,vy:105555,mass:6e10,color:i},{rx:-125482,ry:-291376,vx:-326209,vy:140483,mass:6e10,color:i},{rx:-238702,ry:120338,vx:174179,vy:345500,mass:6e10,color:i},{rx:26163.4,ry:-77532.9,vx:-662627,vy:-223602,mass:6e10,color:i},{rx:97504.5,ry:135592,vx:397429,vy:-285792,mass:6e10,color:i},{rx:-269052,ry:-1749.61,vx:-2507.91,vy:385662,mass:6e10,color:i},{rx:-79696.7,ry:79556.9,vx:421167,vy:421908,mass:6e10,color:i},{rx:308541,ry:-170547,vx:-162994,vy:-294877,mass:6e10,color:i},{rx:66928.2,ry:227756,vx:393936,vy:-115761,mass:6e10,color:i},{rx:29731.1,ry:244256,vx:400337,vy:-48729.5,mass:6e10,color:i},{rx:67023.1,ry:-333468,vx:-336289,vy:-67590.2,mass:6e10,color:i},{rx:67778.3,ry:-242918,vx:-383698,vy:-107058,mass:6e10,color:i},{rx:16330.1,ry:-28680.3,vx:-956934,vy:-544862,mass:6e10,color:i},{rx:-256589,ry:-249172,vx:-233036,vy:239972,mass:6e10,color:i},{rx:-30577.4,ry:57345.7,vx:692444,vy:369219,mass:6e10,color:i},{rx:-312179,ry:-135323,vx:-136401,vy:314667,mass:6e10,color:i},{rx:-287660,ry:223850,vx:203497,vy:261505,mass:6e10,color:i},{rx:36543.7,ry:-13388.1,vx:-348831,vy:-952160,mass:6e10,color:i},{rx:134120,ry:-122517,vx:-316566,vy:-346545,mass:6e10,color:i},{rx:148804,ry:-179354,vx:-318923,vy:-264600,mass:6e10,color:i},{rx:23028.8,ry:-68822.2,vx:-704216,vy:-235640,mass:6e10,color:i},{rx:52209.9,ry:-360578,vx:-328005,vy:-47493.6,mass:6e10,color:i},{rx:171208,ry:399999,vx:278814,vy:-119339,mass:6e10,color:i},{rx:-152873,ry:28793.9,vx:93882.9,vy:498445,mass:6e10,color:i},{rx:31905.4,ry:-119001,vx:-550495,vy:-147594,mass:6e10,color:i},{rx:186069,ry:50994.6,vx:120382,vy:-439250,mass:6e10,color:i},{rx:-47993.7,ry:12199.9,vx:221475,vy:871268,mass:6e10,color:i},{rx:57282.2,ry:4116.92,vx:59841.6,vy:-832627,mass:6e10,color:i},{rx:170801,ry:-149835,vx:-276768,vy:-315495,mass:6e10,color:i},{rx:-147482,ry:216929,vx:323015,vy:219605,mass:6e10,color:i},{rx:216802,ry:1815.52,vx:3597.68,vy:-429620,mass:6e10,color:i},{rx:-25860,ry:-59028.2,vx:-721808,vy:316221,mass:6e10,color:i},{rx:21070.4,ry:58732,vx:753817,vy:-270436,mass:6e10,color:i},{rx:-5163.18,ry:-142049,vx:-530260,vy:19273.8,mass:6e10,color:i},{rx:220085,ry:102924,vx:171928,vy:-367638,mass:6e10,color:i},{rx:-5734.27,ry:-640.755,vx:-292464,vy:2617330,mass:6e10,color:i},{rx:-257148,ry:-70433.8,vx:-102349,vy:373666,mass:6e10,color:i},{rx:-28617.6,ry:-22267.6,vx:-645154,vy:829132,mass:6e10,color:i},{rx:-45996.8,ry:-66589.3,vx:-578588,vy:399663,mass:6e10,color:i},{rx:-23184.8,ry:-130428,vx:-541154,vy:96195.5,mass:6e10,color:i},{rx:-345792,ry:-158460,vx:-135129,vy:294879,mass:6e10,color:i},{rx:52451.8,ry:138715,vx:485901,vy:-183732,mass:6e10,color:i},{rx:291655,ry:-172198,vx:-174764,vy:-296001,mass:6e10,color:i},{rx:56953,ry:11804.9,vx:168355,vy:-812229,mass:6e10,color:i},{rx:4222.55,ry:-22424.7,vx:-1301450,vy:-245061,mass:6e10,color:i},{rx:364429,ry:95176.6,vx:82367.9,vy:-315385,mass:6e10,color:i},{rx:-319416,ry:287187,vx:204080,vy:226983,mass:6e10,color:i},{rx:78083.2,ry:146306,vx:433383,vy:-231295,mass:6e10,color:i},{rx:-40506.2,ry:-240002,vx:-399837,vy:67482.2,mass:6e10,color:i},{rx:-232230,ry:307064,vx:257152,vy:194482,mass:6e10,color:i},{rx:71047.1,ry:373077,vx:318886,vy:-60727.3,mass:6e10,color:i},{rx:141501,ry:-356134,vx:-300322,vy:-119325,mass:6e10,color:i},{rx:-27084.1,ry:-215620,vx:-425789,vy:53483.4,mass:6e10,color:i},{rx:192702,ry:-90335.7,vx:-184061,vy:-392636,mass:6e10,color:i},{rx:77413.2,ry:67189.9,vx:409567,vy:-471884,mass:6e10,color:i},{rx:-195435,ry:-271031,vx:-280709,vy:202414,mass:6e10,color:i},{rx:156575,ry:-90112.3,vx:-234773,vy:-407933,mass:6e10,color:i},{rx:-215768,ry:193344,vx:248029,vy:276795,mass:6e10,color:i},{rx:-328164,ry:-336420,vx:-208890,vy:203764,mass:6e10,color:i},{rx:-259441,ry:-35866.4,vx:-53530.6,vy:387216,mass:6e10,color:i},{rx:-260688,ry:208628,vx:216322,vy:270303,mass:6e10,color:i},{rx:-199081,ry:-235252,vx:-275080,vy:232785,mass:6e10,color:i},{rx:214828,ry:81509.9,vx:148048,vy:-390198,mass:6e10,color:i},{rx:-274653,ry:-211210,vx:-207180,vy:269413,mass:6e10,color:i},{rx:138511,ry:-176042,vx:-332187,vy:-261366,mass:6e10,color:i},{rx:308959,ry:-46029.9,vx:-52744.4,vy:-354028,mass:6e10,color:i},{rx:284961,ry:320681,vx:228312,vy:-202881,mass:6e10,color:i},{rx:200894,ry:360858,vx:271979,vy:-151414,mass:6e10,color:i},{rx:388896,ry:71956.2,vx:57875,vy:-312793,mass:6e10,color:i},{rx:261619,ry:279802,vx:236098,vy:-220755,mass:6e10,color:i},{rx:171452,ry:140751,vx:269509,vy:-328295,mass:6e10,color:i},{rx:-247208,ry:63573.5,vx:98619.6,vy:383485,mass:6e10,color:i},{rx:-133711,ry:-117619,vx:-313105,vy:355941,mass:6e10,color:i},{rx:68996.6,ry:130478,vx:460317,vy:-243414,mass:6e10,color:i},{rx:198558,ry:90947,vx:178263,vy:-389189,mass:6e10,color:i},{rx:-365405,ry:-249585,vx:-169619,vy:248331,mass:6e10,color:i},{rx:-42311.2,ry:-256246,vx:-387301,vy:63950.9,mass:6e10,color:i},{rx:95064,ry:396512,vx:304653,vy:-73040.8,mass:6e10,color:i},{rx:-322126,ry:-42432.8,vx:-45835,vy:347954,mass:6e10,color:i},{rx:-206589,ry:-198348,vx:-258894,vy:269651,mass:6e10,color:i},{rx:353613,ry:-91692.4,vx:-83077.4,vy:-320390,mass:6e10,color:i},{rx:181576,ry:250799,vx:291207,vy:-210831,mass:6e10,color:i},{rx:-362217,ry:-228417,vx:-163065,vy:258584,mass:6e10,color:i},{rx:138927,ry:93738,vx:273318,vy:-405079,mass:6e10,color:i},{rx:-362950,ry:-271652,vx:-178033,vy:237866,mass:6e10,color:i},{rx:153027,ry:-7206.93,vx:-24044.5,vy:-510544,mass:6e10,color:i},{rx:-64618.4,ry:74278.7,vx:481021,vy:418461,mass:6e10,color:i},{rx:165915,ry:-369712,vx:-286710,vy:-128666,mass:6e10,color:i},{rx:-209235,ry:-125845,vx:-208665,vy:346936,mass:6e10,color:i},{rx:-190094,ry:18122.8,vx:43447.4,vy:455729,mass:6e10,color:i},{rx:20920.2,ry:222328,vx:421473,vy:-39658.9,mass:6e10,color:i},{rx:-237812,ry:-216599,vx:-237512,vy:260773,mass:6e10,color:i},{rx:13381.6,ry:50871.3,vx:843548,vy:-221893,mass:6e10,color:i},{rx:68004.2,ry:28776.2,vx:286891,vy:-677983,mass:6e10,color:i},{rx:-25207.9,ry:144035,vx:515321,vy:90187.5,mass:6e10,color:i},{rx:-80013.6,ry:317825,vx:338866,vy:85310.8,mass:6e10,color:i},{rx:33814.6,ry:-338687,vx:-341199,vy:-34065.4,mass:6e10,color:i},{rx:-301790,ry:276730,vx:211290,vy:230424,mass:6e10,color:i},{rx:80421.9,ry:-2135.83,vx:-18724.6,vy:-705053,mass:6e10,color:i},{rx:34390.7,ry:18143.2,vx:473381,vy:-897302,mass:6e10,color:i},{rx:-342872,ry:-107505,vx:-99844.7,vy:318441,mass:6e10,color:i},{rx:381687,ry:-234806,vx:-156583,vy:-254532,mass:6e10,color:i},{rx:242708,ry:-281.684,vx:-471.276,vy:-406066,mass:6e10,color:i},{rx:-111809,ry:181910,vx:368829,vy:226698,mass:6e10,color:i},{rx:130260,ry:-91863.3,vx:-288782,vy:-409487,mass:6e10,color:i},{rx:-163057,ry:148327,vx:286721,vy:315194,mass:6e10,color:i},{rx:-83856.6,ry:40401.5,vx:284603,vy:590716,mass:6e10,color:i},{rx:1269.99,ry:341734,vx:342208,vy:-1271.75,mass:6e10,color:i},{rx:-84755.1,ry:411295,vx:302354,vy:62305.8,mass:6e10,color:i},{rx:414135,ry:123540,vx:86989.5,vy:-291608,mass:6e10,color:i},{rx:94839.2,ry:220683,vx:375017,vy:-161164,mass:6e10,color:i},{rx:-103369,ry:-370974,vx:-310535,vy:86528.7,mass:6e10,color:i},{rx:-357780,ry:4074.63,vx:3808.56,vy:334417,mass:6e10,color:i},{rx:157372,ry:42466.6,vx:129092,vy:-478388,mass:6e10,color:i},{rx:-75902.4,ry:215982,vx:394456,vy:138623,mass:6e10,color:i},{rx:21537.3,ry:-149631,vx:-509270,vy:-73302.3,mass:6e10,color:i},{rx:-195500,ry:-125521,vx:-224237,vy:349249,mass:6e10,color:i},{rx:-58192.5,ry:82649.3,vx:514490,vy:362246,mass:6e10,color:i},{rx:208846,ry:10863.3,vx:22723.9,vy:-436863,mass:6e10,color:i},{rx:-133917,ry:279594,vx:324042,vy:155207,mass:6e10,color:i},{rx:414136,ry:86007,vx:62546.6,vy:-301171,mass:6e10,color:i},{rx:214099,ry:118094,vx:195400,vy:-354251,mass:6e10,color:i},{rx:-97697.2,ry:400388,vx:302733,vy:73868.9,mass:6e10,color:i},{rx:-4717.86,ry:-191688,vx:-456713,vy:11240.7,mass:6e10,color:i},{rx:19061.3,ry:48894.2,vx:813628,vy:-317191,mass:6e10,color:i},{rx:23051.1,ry:30792.2,vx:816565,vy:-611281,mass:6e10,color:i},{rx:45811.8,ry:14663.2,vx:278056,vy:-868724,mass:6e10,color:i},{rx:268189,ry:-287417,vx:-233283,vy:-217677,mass:6e10,color:i},{rx:2061.59,ry:138624,vx:537214,vy:-7989.35,mass:6e10,color:i},{rx:-48198.2,ry:-1773,vx:-33485.8,vy:910296,mass:6e10,color:i},{rx:101504,ry:164539,vx:387224,vy:-238878,mass:6e10,color:i},{rx:-323485,ry:169706,vx:153767,vy:293104,mass:6e10,color:i},{rx:292575,ry:29928.7,vx:37538.8,vy:-366969,mass:6e10,color:i},{rx:-128132,ry:-19180.6,vx:-82280,vy:549656,mass:6e10,color:i},{rx:215073,ry:-42171.9,vx:-82223.1,vy:-419331,mass:6e10,color:i},{rx:-17119.7,ry:-193004,vx:-452691,vy:40154.1,mass:6e10,color:i},{rx:-194571,ry:282227,vx:281307,vy:193937,mass:6e10,color:i},{rx:13019.5,ry:53498.9,vx:828371,vy:-201592,mass:6e10,color:i},{rx:122097,ry:60392.1,vx:240312,vy:-485847,mass:6e10,color:i},{rx:-289545,ry:-8983.76,vx:-11526.8,vy:371507,mass:6e10,color:i},{rx:342158,ry:129668,vx:117198,vy:-309253,mass:6e10,color:i},{rx:-66950.8,ry:144826,vx:454601,vy:210156,mass:6e10,color:i},{rx:-59467.7,ry:12719,vx:169668,vy:793284,mass:6e10,color:i},{rx:70809.5,ry:-392925,vx:-311583,vy:-56150.9,mass:6e10,color:i},{rx:-306431,ry:-218663,vx:-189389,vy:265407,mass:6e10,color:i},{rx:-152172,ry:-44632.1,vx:-141385,vy:482049,mass:6e10,color:i},{rx:-191260,ry:381886,vx:273699,vy:137077,mass:6e10,color:i},{rx:-393794,ry:-75858.4,vx:-59754.6,vy:310196,mass:6e10,color:i},{rx:303438,ry:-354916,vx:-222516,vy:-190242,mass:6e10,color:i},{rx:-66791.1,ry:58121,vx:441338,vy:507175,mass:6e10,color:i},{rx:63614.5,ry:8338.39,vx:102645,vy:-783090,mass:6e10,color:i},{rx:-266199,ry:76580.2,vx:105086,vy:365289,mass:6e10,color:i},{rx:17889.1,ry:-21146.5,vx:-917695,vy:-776332,mass:6e10,color:i},{rx:-196152,ry:277784,vx:280231,vy:197880,mass:6e10,color:i},{rx:85892.3,ry:240004,vx:373057,vy:-133509,mass:6e10,color:i},{rx:47049.1,ry:-54544.9,vx:-564410,vy:-486847,mass:6e10,color:i},{rx:143718,ry:402733,vx:288129,vy:-102821,mass:6e10,color:i},{rx:-227068,ry:-76665.6,vx:-130720,vy:387166,mass:6e10,color:i},{rx:270765,ry:-146611,vx:-171660,vy:-317027,mass:6e10,color:i},{rx:93851.7,ry:-287074,vx:-345992,vy:-113114,mass:6e10,color:i},{rx:-58663.7,ry:-1902.27,vx:-26761.7,vy:825299,mass:6e10,color:i},{rx:421437,ry:-79246.8,vx:-56455.2,vy:-300230,mass:6e10,color:i},{rx:-30528.5,ry:84829.5,vx:626897,vy:225608,mass:6e10,color:i},{rx:14052,ry:-76480.7,vx:-705584,vy:-129639,mass:6e10,color:i},{rx:-56264.5,ry:69761.3,vx:520142,vy:419510,mass:6e10,color:i},{rx:74457.1,ry:-204777,vx:-402767,vy:-146446,mass:6e10,color:i},{rx:16260.3,ry:8831.74,vx:701918,vy:-1292320,mass:6e10,color:i},{rx:-12012.8,ry:-263020,vx:-389463,vy:17787.9,mass:6e10,color:i},{rx:41.6075,ry:132923,vx:548705,vy:-171.755,mass:6e10,color:i},{rx:8439.59,ry:-130320,vx:-552422,vy:-35775.2,mass:6e10,color:i},{rx:4407.91,ry:25.9262,vx:17722.2,vy:-3013080,mass:6e10,color:i},{rx:1058570,ry:147498,vx:731.208,vy:205122,mass:54e6,color:n},{rx:925381,ry:-37449.8,vx:-805.774,vy:206124,mass:54e6,color:n},{rx:973055,ry:103512,vx:889.936,vy:205448,mass:54e6,color:n},{rx:1211070,ry:277832,vx:665.53,vy:205045,mass:54e6,color:n},{rx:913928,ry:177350,vx:905.15,vy:205844,mass:54e6,color:n},{rx:898086,ry:27694.2,vx:460.302,vy:206477,mass:54e6,color:n},{rx:913089,ry:-4218.64,vx:-116.949,vy:206593,mass:54e6,color:n},{rx:841952,ry:402487,vx:890.555,vy:205911,mass:54e6,color:n},{rx:983183,ry:141567,vx:889.656,vy:205447,mass:54e6,color:n},{rx:855835,ry:-73798.1,vx:-582.6,vy:206392,mass:54e6,color:n},{rx:1335160,ry:78964.6,vx:182.914,vy:204779,mass:54e6,color:n},{rx:783419,ry:421900,vx:858.307,vy:206011,mass:54e6,color:n},{rx:955046,ry:-780.56,vx:-79.0774,vy:204764,mass:54e6,color:n},{rx:1210190,ry:152154,vx:459.067,vy:204883,mass:54e6,color:n},{rx:906737,ry:15259,vx:333.203,vy:206538,mass:54e6,color:n},{rx:1042010,ry:-277374,vx:-869.234,vy:205380,mass:54e6,color:n},{rx:1011640,ry:-14817.4,vx:-202.556,vy:204783,mass:54e6,color:n},{rx:1037330,ry:78694.6,vx:600.437,vy:204984,mass:54e6,color:n},{rx:623416,ry:-247374,vx:-559.739,vy:206410,mass:54e6,color:n},{rx:901196,ry:-48817.8,vx:-677.68,vy:206302,mass:54e6,color:n},{rx:736776,ry:166801,vx:573.403,vy:206400,mass:54e6,color:n},{rx:830192,ry:-167604,vx:-756.755,vy:206203,mass:54e6,color:n},{rx:1158590,ry:7522.75,vx:32.5294,vy:204761,mass:54e6,color:n},{rx:906295,ry:149309,vx:888.937,vy:205917,mass:54e6,color:n},{rx:688906,ry:-308277,vx:-706.413,vy:206270,mass:54e6,color:n},{rx:721090,ry:-57192.3,vx:-226.689,vy:206572,mass:54e6,color:n},{rx:814393,ry:98096.8,vx:549.713,vy:206418,mass:54e6,color:n},{rx:1022450,ry:-119953,vx:-775.672,vy:205186,mass:54e6,color:n},{rx:933983,ry:-27849.9,vx:-844.567,vy:206045,mass:54e6,color:n},{rx:889263,ry:93163.4,vx:785.611,vy:206159,mass:54e6,color:n},{rx:656100,ry:318904,vx:680.633,vy:206299,mass:54e6,color:n},{rx:1024990,ry:130965,vx:787.647,vy:205205,mass:54e6,color:n},{rx:976123,ry:-371688,vx:-916.825,vy:205606,mass:54e6,color:n},{rx:1020900,ry:-311989,vx:-894.417,vy:205466,mass:54e6,color:n},{rx:1093260,ry:-276264,vx:-811.716,vy:205248,mass:54e6,color:n},{rx:914776,ry:-39499.8,vx:-721.604,vy:206251,mass:54e6,color:n},{rx:933205,ry:98731.4,vx:912.202,vy:205799,mass:54e6,color:n},{rx:1234540,ry:64393.5,vx:200.351,vy:204783,mass:54e6,color:n},{rx:906957,ry:-119765,vx:-874.534,vy:205966,mass:54e6,color:n},{rx:828948,ry:-41124.7,vx:-304.899,vy:206548,mass:54e6,color:n},{rx:798792,ry:234082,vx:778.657,vy:206170,mass:54e6,color:n},{rx:1245880,ry:161190,vx:435.497,vy:204870,mass:54e6,color:n},{rx:904657,ry:268603,vx:909.125,vy:205820,mass:54e6,color:n},{rx:929931,ry:-378838,vx:-919.004,vy:205719,mass:54e6,color:n},{rx:851609,ry:-215818,vx:-842.752,vy:206049,mass:54e6,color:n},{rx:994198,ry:59358.7,vx:714.078,vy:205101,mass:54e6,color:n},{rx:1087050,ry:17219.1,vx:111.461,vy:204767,mass:54e6,color:n},{rx:590510,ry:178496,vx:412.749,vy:206502,mass:54e6,color:n},{rx:707975,ry:-214141,vx:-615.205,vy:206364,mass:54e6,color:n},{rx:1050320,ry:-77384.5,vx:-548.002,vy:204942,mass:54e6,color:n},{rx:990892,ry:-80998.5,vx:-804.528,vy:205235,mass:54e6,color:n},{rx:1219570,ry:343850,vx:719.804,vy:205108,mass:54e6,color:n},{rx:864757,ry:118292,vx:758.227,vy:206201,mass:54e6,color:n},{rx:948606,ry:-236714,vx:-919.775,vy:205670,mass:54e6,color:n},{rx:1328970,ry:-46548.8,vx:-110.985,vy:204767,mass:54e6,color:n},{rx:1015090,ry:300665,vx:896.466,vy:205474,mass:54e6,color:n},{rx:975701,ry:-9077.44,vx:-268.853,vy:204801,mass:54e6,color:n},{rx:717004,ry:-163716,vx:-534.961,vy:206429,mass:54e6,color:n},{rx:931424,ry:103821,vx:910.898,vy:205808,mass:54e6,color:n},{rx:954870,ry:203503,vx:918.958,vy:205640,mass:54e6,color:n},{rx:841294,ry:-165697,vx:-777.59,vy:206172,mass:54e6,color:n},{rx:951819,ry:-29212.6,vx:-902.105,vy:205501,mass:54e6,color:n},{rx:1010140,ry:83203.6,vx:728.49,vy:205119,mass:54e6,color:n},{rx:632746,ry:6515.03,vx:19.1264,vy:206600,mass:54e6,color:n},{rx:877926,ry:347159,vx:902.641,vy:205857,mass:54e6,color:n},{rx:975555,ry:45629,vx:772.025,vy:205180,mass:54e6,color:n},{rx:942643,ry:-470847,vx:-919.807,vy:205687,mass:54e6,color:n},{rx:1001690,ry:292140,vx:903.558,vy:205508,mass:54e6,color:n},{rx:1178010,ry:-42963.2,vx:-167.485,vy:204776,mass:54e6,color:n},{rx:622068,ry:9807.65,vx:27.8369,vy:206600,mass:54e6,color:n},{rx:962099,ry:91104,vx:905.797,vy:205520,mass:54e6,color:n},{rx:1049170,ry:373284,vx:886.59,vy:205435,mass:54e6,color:n},{rx:867787,ry:-143027,vx:-807.045,vy:206122,mass:54e6,color:n},{rx:837575,ry:-85128.7,vx:-568.035,vy:206404,mass:54e6,color:n},{rx:813467,ry:-397586,vx:-872.626,vy:205971,mass:54e6,color:n},{rx:1044280,ry:258339,vx:859.714,vy:205353,mass:54e6,color:n},{rx:950420,ry:-5624.38,vx:-723.231,vy:205112,mass:54e6,color:n},{rx:1292750,ry:-118424,vx:-297.285,vy:204810,mass:54e6,color:n},{rx:1026270,ry:-418660,vx:-903.377,vy:205507,mass:54e6,color:n},{rx:1043390,ry:-93502,vx:-637.023,vy:205017,mass:54e6,color:n},{rx:748304,ry:15472.6,vx:71.7706,vy:206597,mass:54e6,color:n},{rx:868818,ry:-56629,vx:-544.134,vy:206422,mass:54e6,color:n},{rx:718814,ry:19888.8,vx:80.2192,vy:206597,mass:54e6,color:n},{rx:869070,ry:-138860,vx:-804.605,vy:206126,mass:54e6,color:n},{rx:941077,ry:29838.5,vx:907.562,vy:205830,mass:54e6,color:n},{rx:1055400,ry:-194415,vx:-801.631,vy:205229,mass:54e6,color:n},{rx:1069440,ry:-52944.8,vx:-362.59,vy:204835,mass:54e6,color:n},{rx:607150,ry:177268,vx:426.384,vy:206495,mass:54e6,color:n},{rx:677242,ry:-382149,vx:-752.393,vy:206210,mass:54e6,color:n},{rx:862278,ry:-167662,vx:-822.936,vy:206091,mass:54e6,color:n},{rx:942703,ry:48933.4,vx:917.751,vy:205742,mass:54e6,color:n},{rx:1005460,ry:-236083,vx:-891.976,vy:205456,mass:54e6,color:n},{rx:1240610,ry:130952,vx:373.614,vy:204840,mass:54e6,color:n},{rx:956655,ry:147914,vx:917.453,vy:205614,mass:54e6,color:n},{rx:509237,ry:-26948.7,vx:-56.6469,vy:206599,mass:54e6,color:n},{rx:1265910,ry:-101995,vx:-279.405,vy:204804,mass:54e6,color:n},{rx:605659,ry:13177.9,vx:35.589,vy:206600,mass:54e6,color:n},{rx:798580,ry:-182673,vx:-715.811,vy:206258,mass:54e6,color:n},{rx:886966,ry:-15486.3,vx:-233.403,vy:206570,mass:54e6,color:n},{rx:1152270,ry:-341652,vx:-787.449,vy:205205,mass:54e6,color:n},{rx:939374,ry:34709.5,vx:903.515,vy:205853,mass:54e6,color:n},{rx:1148610,ry:-376480,vx:-809.98,vy:205245,mass:54e6,color:n},{rx:1187290,ry:387892,vx:781.046,vy:205195,mass:54e6,color:n},{rx:949630,ry:3235.48,vx:611.996,vy:204994,mass:54e6,color:n},{rx:899282,ry:-150497,vx:-878.477,vy:205953,mass:54e6,color:n},{rx:928933,ry:-22163.7,vx:-728.792,vy:206242,mass:54e6,color:n},{rx:1246200,ry:34560.8,vx:105.203,vy:204767,mass:54e6,color:n},{rx:941702,ry:-1378.09,vx:-280.821,vy:206556,mass:54e6,color:n},{rx:1044710,ry:-99361.7,vx:-652.547,vy:205032,mass:54e6,color:n},{rx:979966,ry:-21474.4,vx:-491.543,vy:204903,mass:54e6,color:n},{rx:1227320,ry:-18284.3,vx:-59.6587,vy:204763,mass:54e6,color:n},{rx:860538,ry:-2685.42,vx:-28.8889,vy:206600,mass:54e6,color:n},{rx:1177890,ry:-219399,vx:-632.168,vy:205012,mass:54e6,color:n},{rx:875833,ry:53521.2,vx:557.857,vy:206412,mass:54e6,color:n},{rx:1301340,ry:213476,vx:473.689,vy:204892,mass:54e6,color:n},{rx:897731,ry:-191411,vx:-891.909,vy:205905,mass:54e6,color:n},{rx:944956,ry:407944,vx:919.828,vy:205683,mass:54e6,color:n},{rx:995053,ry:-22655.4,vx:-385.681,vy:204845,mass:54e6,color:n},{rx:1167090,ry:186133,vx:592.413,vy:204977,mass:54e6,color:n},{rx:935593,ry:-3967.36,vx:-327.65,vy:206540,mass:54e6,color:n},{rx:946016,ry:39.102,vx:850.429,vy:205330,mass:54e6,color:n},{rx:1123100,ry:54246.1,vx:269.396,vy:204801,mass:54e6,color:n},{rx:936356,ry:-6075.32,vx:-490.299,vy:206459,mass:54e6,color:n},{rx:794679,ry:-22277.2,vx:-133.971,vy:206590,mass:54e6,color:n},{rx:1200410,ry:288396,vx:689.797,vy:205072,mass:54e6,color:n},{rx:1063500,ry:-113177,vx:-638.131,vy:205018,mass:54e6,color:n},{rx:883738,ry:-244494,vx:-891.382,vy:205907,mass:54e6,color:n},{rx:861102,ry:-12554.6,vx:-134.56,vy:206590,mass:54e6,color:n},{rx:578829,ry:-248442,vx:-515.477,vy:206442,mass:54e6,color:n},{rx:953225,ry:103013,vx:917.577,vy:205616,mass:54e6,color:n},{rx:832882,ry:359419,vx:877.403,vy:205957,mass:54e6,color:n},{rx:892230,ry:396695,vx:911.496,vy:205804,mass:54e6,color:n},{rx:814743,ry:309143,vx:846.676,vy:206040,mass:54e6,color:n},{rx:1313130,ry:224880,vx:480.455,vy:204896,mass:54e6,color:n},{rx:1299400,ry:137842,vx:334.253,vy:204823,mass:54e6,color:n},{rx:1295270,ry:-113445,vx:-284.156,vy:204806,mass:54e6,color:n},{rx:1010340,ry:299359,vx:899.293,vy:205487,mass:54e6,color:n},{rx:963400,ry:-51979,vx:-872.254,vy:205388,mass:54e6,color:n},{rx:814651,ry:-101022,vx:-560.774,vy:206410,mass:54e6,color:n},{rx:964373,ry:-168307,vx:-914.399,vy:205581,mass:54e6,color:n},{rx:936861,ry:-36847.6,vx:-892.78,vy:205902,mass:54e6,color:n},{rx:1367950,ry:-89068.3,vx:-189.977,vy:204780,mass:54e6,color:n},{rx:1194180,ry:22325,vx:82.4118,vy:204764,mass:54e6,color:n},{rx:1019110,ry:311646,vx:895.516,vy:205470,mass:54e6,color:n},{rx:928876,ry:318086,vx:918.501,vy:205730,mass:54e6,color:n},{rx:923092,ry:-21237.8,vx:-625.361,vy:206355,mass:54e6,color:n},{rx:95e4,ry:-1659.37,vx:-352.46,vy:204831,mass:54e6,color:n},{rx:1255350,ry:175591,vx:454.056,vy:204880,mass:54e6,color:n},{rx:792270,ry:344805,vx:840.114,vy:206055,mass:54e6,color:n},{rx:1150500,ry:204567,vx:650.531,vy:205030,mass:54e6,color:n},{rx:799794,ry:15902.5,vx:99.4612,vy:206595,mass:54e6,color:n},{rx:571610,ry:-196287,vx:-427.112,vy:206495,mass:54e6,color:n},{rx:1382490,ry:159132,vx:315.061,vy:204816,mass:54e6,color:n},{rx:1072350,ry:179942,vx:752.788,vy:205152,mass:54e6,color:n},{rx:824053,ry:78707.7,vx:498.811,vy:206453,mass:54e6,color:n},{rx:986559,ry:17009.1,vx:355.729,vy:204832,mass:54e6,color:n},{rx:528744,ry:106323,vx:227.129,vy:206572,mass:54e6,color:n},{rx:894158,ry:31453.7,vx:477.132,vy:206467,mass:54e6,color:n},{rx:749710,ry:229328,vx:698.805,vy:206279,mass:54e6,color:n},{rx:876383,ry:278188,vx:892.314,vy:205904,mass:54e6,color:n},{rx:856685,ry:-317079,vx:-885.377,vy:205930,mass:54e6,color:n},{rx:1201460,ry:251671,vx:645.536,vy:205025,mass:54e6,color:n},{rx:1130200,ry:355061,vx:816.494,vy:205257,mass:54e6,color:n},{rx:990570,ry:50702.3,vx:690.853,vy:205073,mass:54e6,color:n},{rx:1120330,ry:-75376,vx:-365.045,vy:204836,mass:54e6,color:n},{rx:899777,ry:45362.1,vx:644.274,vy:206337,mass:54e6,color:n},{rx:797011,ry:42714.4,vx:253.499,vy:206565,mass:54e6,color:n},{rx:978554,ry:145626,vx:897.675,vy:205480,mass:54e6,color:n},{rx:949233,ry:-8511.55,vx:-859.886,vy:205354,mass:54e6,color:n},{rx:1044870,ry:-121457,vx:-713.349,vy:205100,mass:54e6,color:n},{rx:1167430,ry:26249.9,vx:108.287,vy:204767,mass:54e6,color:n},{rx:1042060,ry:-81854.1,vx:-596.589,vy:204980,mass:54e6,color:n},{rx:759882,ry:38600.3,vx:186.795,vy:206581,mass:54e6,color:n},{rx:920007,ry:-22939.2,vx:-608.645,vy:206370,mass:54e6,color:n},{rx:1102500,ry:-210472,vx:-738.132,vy:205132,mass:54e6,color:n},{rx:649343,ry:-6832.03,vx:-21.1782,vy:206600,mass:54e6,color:n},{rx:1039420,ry:-390830,vx:-894.626,vy:205467,mass:54e6,color:n},{rx:964572,ry:-69163.2,vx:-888.359,vy:205442,mass:54e6,color:n},{rx:885440,ry:-109734,vx:-805.33,vy:206125,mass:54e6,color:n},{rx:1044010,ry:-34129.2,vx:-302.503,vy:204812,mass:54e6,color:n},{rx:1100820,ry:34742.4,vx:201.408,vy:204783,mass:54e6,color:n},{rx:794442,ry:-55379.2,vx:-315.69,vy:206544,mass:54e6,color:n},{rx:840337,ry:430420,vx:893.308,vy:205900,mass:54e6,color:n},{rx:965319,ry:-75511.4,vx:-891.13,vy:205452,mass:54e6,color:n},{rx:809381,ry:242811,vx:801.649,vy:206131,mass:54e6,color:n},{rx:729670,ry:-229381,vx:-669.176,vy:206312,mass:54e6,color:n},{rx:764493,ry:358859,vx:820.812,vy:206096,mass:54e6,color:n},{rx:848096,ry:-107266,vx:-679.389,vy:206301,mass:54e6,color:n},{rx:709446,ry:-48971.1,vx:-186.468,vy:206581,mass:54e6,color:n},{rx:953649,ry:8525.05,vx:684.651,vy:205066,mass:54e6,color:n},{rx:1035260,ry:-11510.4,vx:-117.644,vy:204768,mass:54e6,color:n},{rx:899390,ry:21332.1,vx:382.797,vy:206517,mass:54e6,color:n},{rx:687086,ry:157156,vx:477.279,vy:206467,mass:54e6,color:n},{rx:849410,ry:-192446,vx:-822.095,vy:206093,mass:54e6,color:n},{rx:1150490,ry:-135124,vx:-507.093,vy:204913,mass:54e6,color:n},{rx:1111760,ry:-119028,vx:-536.506,vy:204933,mass:54e6,color:n},{rx:880833,ry:301323,vx:899.046,vy:205875,mass:54e6,color:n},{rx:1158170,ry:-189767,vx:-613.212,vy:204995,mass:54e6,color:n},{rx:594597,ry:191663,vx:440.443,vy:206488,mass:54e6,color:n},{rx:861683,ry:400884,vx:900.136,vy:205870,mass:54e6,color:n},{rx:906438,ry:23196.2,vx:465.248,vy:206474,mass:54e6,color:n},{rx:970878,ry:-57221.3,vx:-843.556,vy:205314,mass:54e6,color:n},{rx:642311,ry:-87164.7,vx:-253.763,vy:206565,mass:54e6,color:n},{rx:1162850,ry:106956,vx:406.89,vy:204855,mass:54e6,color:n},{rx:1286300,ry:-232557,vx:-518.986,vy:204921,mass:54e6,color:n},{rx:1020680,ry:-27515.4,vx:-318.023,vy:204817,mass:54e6,color:n},{rx:812615,ry:-217858,vx:-784.474,vy:206161,mass:54e6,color:n},{rx:770102,ry:-1146.67,vx:-5.99621,vy:206600,mass:54e6,color:n},{rx:982080,ry:-46404.8,vx:-726.168,vy:205116,mass:54e6,color:n},{rx:944381,ry:-2475.31,vx:-769.825,vy:206184,mass:54e6,color:n},{rx:949179,ry:-29944,vx:-914.691,vy:205583,mass:54e6,color:n},{rx:1154760,ry:-305470,vx:-759.432,vy:205161,mass:54e6,color:n},{rx:1222430,ry:15936.5,vx:52.9404,vy:204762,mass:54e6,color:n},{rx:643010,ry:67681.3,vx:200.528,vy:206578,mass:54e6,color:n},{rx:787287,ry:-65343.4,vx:-350.184,vy:206531,mass:54e6,color:n},{rx:1132380,ry:-155599,vx:-589.5,vy:204974,mass:54e6,color:n},{rx:1022240,ry:239859,vx:876.619,vy:205402,mass:54e6,color:n},{rx:683117,ry:390804,vx:763.224,vy:206194,mass:54e6,color:n},{rx:1120340,ry:-82711,vx:-394.268,vy:204849,mass:54e6,color:n},{rx:1136720,ry:120890,vx:492.458,vy:204904,mass:54e6,color:n},{rx:900185,ry:408136,vx:914.09,vy:205783,mass:54e6,color:n},{rx:1191530,ry:-105187,vx:-362.224,vy:204835,mass:54e6,color:n},{rx:576578,ry:-4788.06,vx:-11.9209,vy:206600,mass:54e6,color:n},{rx:931903,ry:87688.3,vx:908.169,vy:205826,mass:54e6,color:n},{rx:941176,ry:17635.1,vx:887.235,vy:205923,mass:54e6,color:n},{rx:807890,ry:-9035.1,vx:-60.0465,vy:206598,mass:54e6,color:n},{rx:728247,ry:269232,vx:715.189,vy:206259,mass:54e6,color:n},{rx:1113300,ry:-71655.7,vx:-362.143,vy:204835,mass:54e6,color:n},{rx:815259,ry:330031,vx:855.173,vy:206019,mass:54e6,color:n},{rx:1223930,ry:-170139,vx:-480.25,vy:204896,mass:54e6,color:n},{rx:1199070,ry:150019,vx:469.052,vy:204889,mass:54e6,color:n},{rx:740839,ry:105820,vx:421.655,vy:206498,mass:54e6,color:n},{rx:1155440,ry:-272070,vx:-728.873,vy:205119,mass:54e6,color:n},{rx:1060640,ry:-70327,vx:-480.977,vy:204896,mass:54e6,color:n},{rx:936034,ry:-47221.1,vx:-900.007,vy:205870,mass:54e6,color:n},{rx:704644,ry:-282193,vx:-699.028,vy:206278,mass:54e6,color:n},{rx:1393620,ry:-67045.2,vx:-136.253,vy:204771,mass:54e6,color:n},{rx:859794,ry:-145105,vx:-790.8,vy:206150,mass:54e6,color:n},{rx:852705,ry:280873,vx:872.935,vy:205970,mass:54e6,color:n},{rx:1189350,ry:-21025.3,vx:-79.1794,vy:204764,mass:54e6,color:n},{rx:878050,ry:-56110.1,vx:-585.683,vy:206390,mass:54e6,color:n},{rx:971598,ry:104973,vx:893.645,vy:205463,mass:54e6,color:n},{rx:1000680,ry:38564.7,vx:530.168,vy:204929,mass:54e6,color:n},{rx:929630,ry:-125494,vx:-912.103,vy:205799,mass:54e6,color:n},{rx:705154,ry:137948,vx:457.167,vy:206479,mass:54e6,color:n},{rx:995467,ry:311760,vx:908.466,vy:205536,mass:54e6,color:n},{rx:930655,ry:-25997.7,vx:-792.137,vy:206148,mass:54e6,color:n},{rx:1099930,ry:-18415.2,vx:-109.266,vy:204767,mass:54e6,color:n},{rx:539446,ry:23948.2,vx:54.0891,vy:206599,mass:54e6,color:n},{rx:870717,ry:40572.8,vx:436.389,vy:206490,mass:54e6,color:n},{rx:737255,ry:355002,vx:792.911,vy:206147,mass:54e6,color:n},{rx:1372120,ry:-100344,vx:-210.839,vy:204785,mass:54e6,color:n},{rx:838227,ry:-27684.8,vx:-228.857,vy:206571,mass:54e6,color:n},{rx:878958,ry:87871.7,vx:731.293,vy:206238,mass:54e6,color:n},{rx:1158050,ry:-382172,vx:-804.32,vy:205234,mass:54e6,color:n},{rx:850997,ry:217497,vx:842.927,vy:206049,mass:54e6,color:n},{rx:915082,ry:11032.6,vx:309.135,vy:206547,mass:54e6,color:n},{rx:625751,ry:-18787.6,vx:-53.8699,vy:206599,mass:54e6,color:n},{rx:1112410,ry:40829.2,vx:219.181,vy:204787,mass:54e6,color:n},{rx:746694,ry:-40482.4,vx:-183.094,vy:206582,mass:54e6,color:n},{rx:937293,ry:24958.6,vx:868.502,vy:205983,mass:54e6,color:n},{rx:1319870,ry:-231722,vx:-484.578,vy:204899,mass:54e6,color:n},{rx:981563,ry:67562.2,vx:813.956,vy:205252,mass:54e6,color:n},{rx:1155850,ry:-339509,vx:-782.429,vy:205197,mass:54e6,color:n},{rx:884454,ry:89753.2,vx:758.607,vy:206201,mass:54e6,color:n},{rx:786340,ry:-276276,vx:-796.407,vy:206141,mass:54e6,color:n},{rx:1153060,ry:-266213,vx:-726.065,vy:205116,mass:54e6,color:n},{rx:1147060,ry:108193,vx:435.872,vy:204870,mass:54e6,color:n},{rx:866366,ry:96841.8,vx:710.47,vy:206265,mass:54e6,color:n},{rx:987801,ry:52613.1,vx:720.196,vy:205108,mass:54e6,color:n},{rx:1085420,ry:-200492,vx:-755.189,vy:205155,mass:54e6,color:n},{rx:642557,ry:149096,vx:405.637,vy:206506,mass:54e6,color:n},{rx:581162,ry:25791.3,vx:64.8632,vy:206598,mass:54e6,color:n},{rx:933381,ry:-108664,vx:-913.69,vy:205787,mass:54e6,color:n},{rx:572993,ry:125940,vx:294.248,vy:206552,mass:54e6,color:n},{rx:1015930,ry:-4211.01,vx:-55.2907,vy:204762,mass:54e6,color:n},{rx:678511,ry:-75300.8,vx:-249.254,vy:206566,mass:54e6,color:n},{rx:938758,ry:7773.3,vx:673.024,vy:206307,mass:54e6,color:n},{rx:1021910,ry:-172274,vx:-841.741,vy:205310,mass:54e6,color:n},{rx:773133,ry:-154284,vx:-612.486,vy:206367,mass:54e6,color:n},{rx:982109,ry:109879,vx:873.854,vy:205393,mass:54e6,color:n},{rx:909850,ry:215037,vx:907.102,vy:205833,mass:54e6,color:n},{rx:866243,ry:-246097,vx:-875.025,vy:205964,mass:54e6,color:n},{rx:681883,ry:36920.2,vx:127.342,vy:206591,mass:54e6,color:n},{rx:929912,ry:-65776.2,vx:-893.493,vy:205899,mass:54e6,color:n},{rx:847619,ry:-64330.6,vx:-503.402,vy:206450,mass:54e6,color:n},{rx:847469,ry:124464,vx:721.197,vy:206251,mass:54e6,color:n},{rx:945276,ry:305676,vx:919.828,vy:205683,mass:54e6,color:n},{rx:992587,ry:8419.77,vx:163.594,vy:204775,mass:54e6,color:n},{rx:1010690,ry:-85170.6,vx:-732.518,vy:205124,mass:54e6,color:n},{rx:789046,ry:-190625,vx:-710.102,vy:206265,mass:54e6,color:n},{rx:1178630,ry:-93942,vx:-344.422,vy:204828,mass:54e6,color:n},{rx:829516,ry:58721.4,vx:414.062,vy:206502,mass:54e6,color:n},{rx:575058,ry:-17714.4,vx:-43.8768,vy:206599,mass:54e6,color:n},{rx:716380,ry:-44862.9,vx:-176.381,vy:206583,mass:54e6,color:n},{rx:761086,ry:-424926,vx:-843.431,vy:206047,mass:54e6,color:n},{rx:1258630,ry:99056.2,vx:277.835,vy:204804,mass:54e6,color:n},{rx:980645,ry:-25036.4,vx:-538.769,vy:204935,mass:54e6,color:n},{rx:749637,ry:-130964,vx:-510.38,vy:206446,mass:54e6,color:n},{rx:1122370,ry:142932,vx:579.146,vy:204966,mass:54e6,color:n},{rx:1333480,ry:-35516.6,vx:-83.9605,vy:204764,mass:54e6,color:n},{rx:881375,ry:30514.5,vx:392.745,vy:206512,mass:54e6,color:n},{rx:1183030,ry:270510,vx:691.818,vy:205074,mass:54e6,color:n},{rx:1158480,ry:13857.6,vx:59.8635,vy:204763,mass:54e6,color:n},{rx:946491,ry:-450697,vx:-919.83,vy:205679,mass:54e6,color:n},{rx:950215,ry:-10974.3,vx:-858.668,vy:205351,mass:54e6,color:n},{rx:1102610,ry:52539.4,vx:292.557,vy:204808,mass:54e6,color:n},{rx:793220,ry:6926.76,vx:41.6606,vy:206599,mass:54e6,color:n},{rx:889119,ry:143146,vx:854.816,vy:206020,mass:54e6,color:n},{rx:715429,ry:-230578,vx:-650.427,vy:206331,mass:54e6,color:n},{rx:645297,ry:-293042,vx:-641.972,vy:206339,mass:54e6,color:n},{rx:977801,ry:-66499.7,vx:-829.825,vy:205284,mass:54e6,color:n},{rx:1062980,ry:22503.8,vx:173.766,vy:204777,mass:54e6,color:n},{rx:841329,ry:-138890,vx:-734.584,vy:206234,mass:54e6,color:n},{rx:968383,ry:-209113,vx:-914.607,vy:205583,mass:54e6,color:n},{rx:675583,ry:-171317,vx:-492.267,vy:206457,mass:54e6,color:n},{rx:1109100,ry:279521,vx:794.475,vy:205217,mass:54e6,color:n},{rx:794336,ry:-55424,vx:-315.721,vy:206544,mass:54e6,color:n},{rx:843506,ry:4337.24,vx:38.8896,vy:206599,mass:54e6,color:n},{rx:1387870,ry:33339.1,vx:69.2051,vy:204763,mass:54e6,color:n},{rx:1044370,ry:-447645,vx:-898.394,vy:205483,mass:54e6,color:n},{rx:1186440,ry:82873.6,vx:299.734,vy:204811,mass:54e6,color:n},{rx:585769,ry:-172418,vx:-397.116,vy:206510,mass:54e6,color:n},{rx:586967,ry:283357,vx:569.856,vy:206402,mass:54e6,color:n},{rx:965276,ry:353741,vx:918.468,vy:205630,mass:54e6,color:n},{rx:749908,ry:-44097.6,vx:-201.814,vy:206578,mass:54e6,color:n},{rx:830889,ry:-182640,vx:-778.169,vy:206171,mass:54e6,color:n},{rx:983897,ry:33679,vx:611.033,vy:204993,mass:54e6,color:n},{rx:850982,ry:-62599.2,vx:-506.048,vy:206449,mass:54e6,color:n},{rx:946137,ry:-902.48,vx:-909.473,vy:205543,mass:54e6,color:n},{rx:624101,ry:197097,vx:480.322,vy:206465,mass:54e6,color:n},{rx:772703,ry:-396729,vx:-842.922,vy:206049,mass:54e6,color:n},{rx:793492,ry:-73051.6,vx:-397.366,vy:206510,mass:54e6,color:n},{rx:834096,ry:418750,vx:888.647,vy:205918,mass:54e6,color:n},{rx:942181,ry:14514.7,vx:889.548,vy:205915,mass:54e6,color:n},{rx:762705,ry:-339686,vx:-809.499,vy:206117,mass:54e6,color:n},{rx:1137120,ry:5338.09,vx:25.6817,vy:204761,mass:54e6,color:n},{rx:604082,ry:324934,vx:633.648,vy:206347,mass:54e6,color:n},{rx:968483,ry:21192.2,vx:630.926,vy:205011,mass:54e6,color:n},{rx:607834,ry:-259192,vx:-559.56,vy:206410,mass:54e6,color:n},{rx:997526,ry:-137763,vx:-861.543,vy:205358,mass:54e6,color:n},{rx:1272100,ry:-122557,vx:-323.596,vy:204819,mass:54e6,color:n},{rx:767743,ry:-155798,vx:-605.324,vy:206373,mass:54e6,color:n},{rx:1119540,ry:185871,vx:672.339,vy:205053,mass:54e6,color:n},{rx:1209320,ry:-143396,vx:-439.912,vy:204873,mass:54e6,color:n},{rx:775845,ry:-167967,vx:-646.196,vy:206335,mass:54e6,color:n},{rx:746933,ry:169062,vx:595.43,vy:206382,mass:54e6,color:n},{rx:1276450,ry:33914.6,vx:93.9101,vy:204765,mass:54e6,color:n},{rx:1139660,ry:-320889,vx:-787.527,vy:205205,mass:54e6,color:n},{rx:1133820,ry:-173367,vx:-623.898,vy:205005,mass:54e6,color:n},{rx:1012970,ry:243796,vx:886.976,vy:205437,mass:54e6,color:n},{rx:972552,ry:-85955.8,vx:-878.856,vy:205409,mass:54e6,color:n},{rx:833388,ry:-56496,vx:-412.471,vy:206503,mass:54e6,color:n},{rx:1406850,ry:-61609.6,vx:-121.886,vy:204769,mass:54e6,color:n},{rx:587584,ry:41633.7,vx:106.134,vy:206594,mass:54e6,color:n},{rx:978500,ry:46074.8,vx:751.655,vy:205150,mass:54e6,color:n},{rx:948102,ry:343572,vx:919.814,vy:205675,mass:54e6,color:n},{rx:1165170,ry:101893,vx:387.78,vy:204846,mass:54e6,color:n},{rx:945416,ry:457672,vx:919.83,vy:205682,mass:54e6,color:n},{rx:883701,ry:170577,vx:864.009,vy:205996,mass:54e6,color:n},{rx:827736,ry:-93705.1,vx:-571.239,vy:206401,mass:54e6,color:n},{rx:1011370,ry:-148770,vx:-842.12,vy:205310,mass:54e6,color:n},{rx:1075700,ry:235878,vx:806.025,vy:205237,mass:54e6,color:n},{rx:1390060,ry:117755,vx:235.768,vy:204791,mass:54e6,color:n},{rx:1106720,ry:222412,vx:745.542,vy:205142,mass:54e6,color:n},{rx:959604,ry:310442,vx:918.949,vy:205640,mass:54e6,color:n},{rx:939169,ry:193949,vx:919.261,vy:205713,mass:54e6,color:n},{rx:1044520,ry:100508,vx:656.873,vy:205037,mass:54e6,color:n},{rx:936263,ry:-330534,vx:-919.432,vy:205708,mass:54e6,color:n},{rx:960476,ry:-328748,vx:-918.94,vy:205640,mass:54e6,color:n},{rx:676119,ry:261992,vx:640.701,vy:206340,mass:54e6,color:n},{rx:1013520,ry:457320,vx:909.965,vy:205546,mass:54e6,color:n},{rx:968437,ry:-44788.9,vx:-822.407,vy:205268,mass:54e6,color:n},{rx:892930,ry:-9804.07,vx:-167.101,vy:206585,mass:54e6,color:n},{rx:1002240,ry:-436646,vx:-912.294,vy:205563,mass:54e6,color:n},{rx:706447,ry:-217513,vx:-618.336,vy:206361,mass:54e6,color:n},{rx:690781,ry:-128951,vx:-414.809,vy:206501,mass:54e6,color:n},{rx:880288,ry:-143446,vx:-836.262,vy:206064,mass:54e6,color:n},{rx:998782,ry:20498.8,vx:333.001,vy:204823,mass:54e6,color:n},{rx:945359,ry:6060.59,vx:914.722,vy:205777,mass:54e6,color:n},{rx:930289,ry:-247761,vx:-917.987,vy:205739,mass:54e6,color:n},{rx:1387270,ry:-86843.5,vx:-177.619,vy:204778,mass:54e6,color:n},{rx:810069,ry:-44102.8,vx:-283.871,vy:206555,mass:54e6,color:n},{rx:1138270,ry:141979,vx:546.4,vy:204940,mass:54e6,color:n},{rx:1188760,ry:-160942,vx:-508.261,vy:204914,mass:54e6,color:n},{rx:1125890,ry:-139957,vx:-564.82,vy:204954,mass:54e6,color:n},{rx:1060220,ry:-357483,vx:-876.195,vy:205400,mass:54e6,color:n},{rx:830380,ry:-15392.5,vx:-121.386,vy:206592,mass:54e6,color:n},{rx:682596,ry:160727,vx:479.12,vy:206466,mass:54e6,color:n},{rx:501560,ry:127440,vx:253.537,vy:206565,mass:54e6,color:n},{rx:904398,ry:-143656,vx:-883.528,vy:205936,mass:54e6,color:n},{rx:618778,ry:33051.7,vx:92.4391,vy:206596,mass:54e6,color:n},{rx:940900,ry:463259,vx:919.775,vy:205691,mass:54e6,color:n},{rx:1079860,ry:-38794.6,vx:-256.037,vy:204797,mass:54e6,color:n},{rx:731641,ry:-235900,vx:-680.757,vy:206299,mass:54e6,color:n},{rx:890697,ry:-305186,vx:-905.09,vy:205844,mass:54e6,color:n},{rx:772786,ry:-135304,vx:-566.237,vy:206405,mass:54e6,color:n},{rx:921045,ry:-13240.9,vx:-431.124,vy:206493,mass:54e6,color:n},{rx:808640,ry:282252,vx:827.088,vy:206083,mass:54e6,color:n},{rx:1162350,ry:-146847,vx:-516.58,vy:204919,mass:54e6,color:n},{rx:1148410,ry:-187404,vx:-624.917,vy:205005,mass:54e6,color:n},{rx:797017,ry:-246022,vx:-786.81,vy:206157,mass:54e6,color:n},{rx:915205,ry:-18763.7,vx:-478.619,vy:206466,mass:54e6,color:n},{rx:1040600,ry:-174914,vx:-809.088,vy:205243,mass:54e6,color:n},{rx:734224,ry:193892,vx:621.143,vy:206359,mass:54e6,color:n},{rx:1093410,ry:-143916,vx:-642.564,vy:205022,mass:54e6,color:n},{rx:1338460,ry:139506,vx:308.084,vy:204814,mass:54e6,color:n},{rx:1056380,ry:-56710,vx:-420.335,vy:204862,mass:54e6,color:n},{rx:1003570,ry:-2542.48,vx:-40.5811,vy:204761,mass:54e6,color:n},{rx:836384,ry:-434288,vx:-891.86,vy:205906,mass:54e6,color:n},{rx:522651,ry:136653,vx:282.556,vy:206556,mass:54e6,color:n},{rx:796092,ry:-293596,vx:-819.221,vy:206099,mass:54e6,color:n},{rx:783861,ry:-7046.58,vx:-39.9382,vy:206599,mass:54e6,color:n},{rx:1198830,ry:21469.5,vx:77.8282,vy:204764,mass:54e6,color:n},{rx:1100740,ry:376982,vx:850.937,vy:205331,mass:54e6,color:n},{rx:945215,ry:-21118.7,vx:-919.196,vy:205715,mass:54e6,color:n},{rx:500741,ry:76977.2,vx:156.698,vy:206587,mass:54e6,color:n},{rx:811441,ry:10743.6,vx:73.209,vy:206597,mass:54e6,color:n},{rx:925855,ry:385071,vx:918.575,vy:205728,mass:54e6,color:n},{rx:1043430,ry:-82448.1,vx:-594.177,vy:204978,mass:54e6,color:n},{rx:872499,ry:-197717,vx:-862.182,vy:206001,mass:54e6,color:n},{rx:735662,ry:321578,vx:769.788,vy:206184,mass:54e6,color:n},{rx:856688,ry:-187336,vx:-830.299,vy:206076,mass:54e6,color:n},{rx:1147030,ry:-45083.8,vx:-201.283,vy:204783,mass:54e6,color:n},{rx:947045,ry:-74531.9,vx:-919.74,vy:205668,mass:54e6,color:n},{rx:918597,ry:-9192.14,vx:-292.534,vy:206553,mass:54e6,color:n},{rx:1020440,ry:3331.9,vx:41.1296,vy:204762,mass:54e6,color:n},{rx:730474,ry:-171974,vx:-573.705,vy:206399,mass:54e6,color:n},{rx:1026350,ry:237605,vx:871.361,vy:205386,mass:54e6,color:n},{rx:922904,ry:17015.1,vx:545.582,vy:206421,mass:54e6,color:n},{rx:818099,ry:-214582,vx:-790.123,vy:206151,mass:54e6,color:n},{rx:879578,ry:63333,vx:634.754,vy:206346,mass:54e6,color:n},{rx:933726,ry:121048,vx:915.138,vy:205773,mass:54e6,color:n},{rx:922984,ry:445853,vx:918.608,vy:205728,mass:54e6,color:n},{rx:1127920,ry:110253,vx:476.75,vy:204894,mass:54e6,color:n},{rx:642274,ry:45448.5,vx:136.125,vy:206590,mass:54e6,color:n},{rx:931976,ry:153645,vx:916.023,vy:205764,mass:54e6,color:n},{rx:1051010,ry:-343149,vx:-879.565,vy:205411,mass:54e6,color:n},{rx:1097390,ry:-55965.4,vx:-318.954,vy:204818,mass:54e6,color:n},{rx:900425,ry:153773,vx:881.913,vy:205942,mass:54e6,color:n},{rx:1026030,ry:3076.08,vx:35.3298,vy:204761,mass:54e6,color:n},{rx:1333120,ry:121255,vx:274.939,vy:204803,mass:54e6,color:n},{rx:1222490,ry:-113681,vx:-349.781,vy:204830,mass:54e6,color:n},{rx:800900,ry:69346.4,vx:396.637,vy:206510,mass:54e6,color:n},{rx:1105270,ry:-96987,vx:-478.398,vy:204895,mass:54e6,color:n},{rx:1361850,ry:92762.3,vx:200.263,vy:204783,mass:54e6,color:n},{rx:1017280,ry:-30555,vx:-362.401,vy:204835,mass:54e6,color:n},{rx:1267310,ry:-213500,vx:-509.065,vy:204914,mass:54e6,color:n},{rx:766175,ry:-343002,vx:-814.661,vy:206108,mass:54e6,color:n},{rx:1232800,ry:-214280,vx:-550.551,vy:204944,mass:54e6,color:n},{rx:794587,ry:69248.5,vx:382.571,vy:206517,mass:54e6,color:n},{rx:953593,ry:-261022,vx:-919.442,vy:205654,mass:54e6,color:n},{rx:621004,ry:-176715,vx:-439.398,vy:206489,mass:54e6,color:n},{rx:849321,ry:-384725,vx:-892.095,vy:205905,mass:54e6,color:n},{rx:871063,ry:-58982.3,vx:-568.907,vy:206403,mass:54e6,color:n},{rx:1004400,ry:123588,vx:831.644,vy:205287,mass:54e6,color:n},{rx:1350520,ry:-201121,vx:-409.508,vy:204857,mass:54e6,color:n},{rx:667141,ry:136546,vx:404.514,vy:206507,mass:54e6,color:n},{rx:699244,ry:44703,vx:163.97,vy:206586,mass:54e6,color:n},{rx:1286430,ry:-107862,vx:-277.83,vy:204804,mass:54e6,color:n},{rx:992713,ry:34122.5,vx:542.57,vy:204938,mass:54e6,color:n},{rx:774792,ry:-241597,vx:-750.492,vy:206212,mass:54e6,color:n},{rx:1265390,ry:-342585,vx:-672.799,vy:205053,mass:54e6,color:n},{rx:1019890,ry:-258736,vx:-884.469,vy:205428,mass:54e6,color:n},{rx:982102,ry:309334,vx:913.63,vy:205574,mass:54e6,color:n},{rx:1038500,ry:173463,vx:811.646,vy:205248,mass:54e6,color:n},{rx:801531,ry:319952,vx:838.332,vy:206059,mass:54e6,color:n},{rx:1074430,ry:-149236,vx:-697.208,vy:205080,mass:54e6,color:n},{rx:642672,ry:-94541.4,vx:-273.707,vy:206559,mass:54e6,color:n},{rx:780827,ry:53330.5,vx:282.625,vy:206556,mass:54e6,color:n},{rx:1347290,ry:-100001,vx:-222.418,vy:204788,mass:54e6,color:n},{rx:886481,ry:-47914.7,vx:-576.812,vy:206397,mass:54e6,color:n},{rx:951828,ry:-16602.4,vx:-867.913,vy:205376,mass:54e6,color:n},{rx:579663,ry:-23014.4,vx:-57.6729,vy:206598,mass:54e6,color:n},{rx:1233790,ry:324720,vx:688.389,vy:205070,mass:54e6,color:n},{rx:643497,ry:-231998,vx:-559.774,vy:206410,mass:54e6,color:n},{rx:629719,ry:200956,vx:493.286,vy:206457,mass:54e6,color:n},{rx:973328,ry:-17162.5,vx:-489.204,vy:204901,mass:54e6,color:n},{rx:940730,ry:23711.3,vx:897.918,vy:205880,mass:54e6,color:n},{rx:1060910,ry:179941,vx:775.244,vy:205185,mass:54e6,color:n},{rx:1114410,ry:238353,vx:751.228,vy:205150,mass:54e6,color:n},{rx:947694,ry:-72523.5,vx:-919.58,vy:205659,mass:54e6,color:n},{rx:915635,ry:402504,vx:917.224,vy:205750,mass:54e6,color:n},{rx:976838,ry:-320218,vx:-915.595,vy:205592,mass:54e6,color:n},{rx:816103,ry:-119333,vx:-622.288,vy:206358,mass:54e6,color:n},{rx:1142240,ry:-128192,vx:-503.053,vy:204910,mass:54e6,color:n},{rx:984875,ry:320254,vx:913.128,vy:205570,mass:54e6,color:n},{rx:944607,ry:-5130.14,vx:-887.709,vy:205921,mass:54e6,color:n},{rx:861122,ry:-427284,vx:-902.203,vy:205860,mass:54e6,color:n},{rx:1206570,ry:-191066,vx:-543.924,vy:204939,mass:54e6,color:n},{rx:939816,ry:-21869,vx:-885.122,vy:205931,mass:54e6,color:n},{rx:810106,ry:88562.7,vx:502.22,vy:206451,mass:54e6,color:n},{rx:1239920,ry:-145765,vx:-408.682,vy:204856,mass:54e6,color:n},{rx:1089230,ry:207902,vx:757.48,vy:205159,mass:54e6,color:n},{rx:683053,ry:54239.5,vx:185.826,vy:206581,mass:54e6,color:n},{rx:860771,ry:241619,vx:867.446,vy:205986,mass:54e6,color:n},{rx:1206060,ry:235389,vx:617.265,vy:204998,mass:54e6,color:n},{rx:936754,ry:-2174.41,vx:-210.567,vy:206576,mass:54e6,color:n},{rx:844665,ry:128891,vx:723.108,vy:206249,mass:54e6,color:n},{rx:792736,ry:232075,vx:767.555,vy:206187,mass:54e6,color:n},{rx:1018230,ry:81232.3,vx:687.401,vy:205069,mass:54e6,color:n},{rx:759985,ry:182351,vx:643.917,vy:206337,mass:54e6,color:n},{rx:1060210,ry:406746,vx:885.581,vy:205432,mass:54e6,color:n},{rx:585783,ry:259871,vx:538.163,vy:206426,mass:54e6,color:n},{rx:666644,ry:59050.2,vx:190.23,vy:206580,mass:54e6,color:n},{rx:783318,ry:88917.2,vx:441.157,vy:206488,mass:54e6,color:n},{rx:568794,ry:203549,vx:436.82,vy:206490,mass:54e6,color:n},{rx:949077,ry:8137.04,vx:860.375,vy:205355,mass:54e6,color:n},{rx:712014,ry:-355124,vx:-768.093,vy:206187,mass:54e6,color:n},{rx:841489,ry:69577.6,vx:509.74,vy:206446,mass:54e6,color:n},{rx:1180970,ry:-97169.5,vx:-351.512,vy:204830,mass:54e6,color:n},{rx:476726,ry:15294.5,vx:29.963,vy:206600,mass:54e6,color:n},{rx:742110,ry:383975,vx:812.402,vy:206112,mass:54e6,color:n},{rx:1006280,ry:182673,vx:873.503,vy:205392,mass:54e6,color:n},{rx:560209,ry:-253577,vx:-505.231,vy:206449,mass:54e6,color:n},{rx:939102,ry:-116039,vx:-918.21,vy:205735,mass:54e6,color:n},{rx:1057630,ry:-37473.9,vx:-292.727,vy:204808,mass:54e6,color:n},{rx:814496,ry:-262040,vx:-822.113,vy:206093,mass:54e6,color:n},{rx:1081210,ry:164127,vx:709.937,vy:205096,mass:54e6,color:n},{rx:910697,ry:93132.5,vx:860.111,vy:206006,mass:54e6,color:n},{rx:926006,ry:-156210,vx:-912.387,vy:205797,mass:54e6,color:n},{rx:965157,ry:-50290,vx:-859.578,vy:205353,mass:54e6,color:n},{rx:526310,ry:212788,vx:415.956,vy:206501,mass:54e6,color:n},{rx:1148780,ry:88903,vx:369.335,vy:204838,mass:54e6,color:n},{rx:942300,ry:40407.1,vx:916,vy:205764,mass:54e6,color:n},{rx:894869,ry:-52232.4,vx:-657.314,vy:206324,mass:54e6,color:n},{rx:673416,ry:61226.5,vx:201.586,vy:206578,mass:54e6,color:n},{rx:1075880,ry:-2141.24,vx:-15.1621,vy:204761,mass:54e6,color:n},{rx:1061630,ry:-340585,vx:-871.001,vy:205385,mass:54e6,color:n},{rx:1331400,ry:41604.8,vx:98.7249,vy:204766,mass:54e6,color:n},{rx:721564,ry:80022.6,vx:308.917,vy:206547,mass:54e6,color:n},{rx:1370900,ry:-107630,vx:-225.866,vy:204789,mass:54e6,color:n},{rx:941852,ry:21207.1,vx:902.721,vy:205857,mass:54e6,color:n},{rx:765176,ry:-32614.3,vx:-163.271,vy:206586,mass:54e6,color:n},{rx:1284820,ry:-290753,vx:-599.02,vy:204982,mass:54e6,color:n},{rx:1193990,ry:-160175,vx:-499.064,vy:204908,mass:54e6,color:n},{rx:654610,ry:1978.16,vx:6.24431,vy:206600,mass:54e6,color:n},{rx:900665,ry:-58312.3,vx:-726.185,vy:206245,mass:54e6,color:n},{rx:769616,ry:24317,vx:125.623,vy:206592,mass:54e6,color:n},{rx:1177680,ry:263438,vx:690.716,vy:205073,mass:54e6,color:n},{rx:1216840,ry:94314.6,vx:302.494,vy:204812,mass:54e6,color:n},{rx:1034070,ry:320415,vx:886.936,vy:205437,mass:54e6,color:n},{rx:924072,ry:36304.7,vx:787.356,vy:206156,mass:54e6,color:n},{rx:748743,ry:247167,vx:718.943,vy:206254,mass:54e6,color:n},{rx:1253470,ry:-160988,vx:-426.669,vy:204866,mass:54e6,color:n},{rx:1330180,ry:-188581,vx:-405.313,vy:204855,mass:54e6,color:n},{rx:817304,ry:-388388,vx:-873.144,vy:205970,mass:54e6,color:n},{rx:867592,ry:-285991,vx:-887.095,vy:205924,mass:54e6,color:n},{rx:955167,ry:-16770.4,vx:-807.121,vy:205239,mass:54e6,color:n},{rx:988747,ry:98530.2,vx:843.838,vy:205314,mass:54e6,color:n},{rx:832827,ry:384451,vx:882.393,vy:205940,mass:54e6,color:n},{rx:1003870,ry:-19470.8,vx:-293.315,vy:204809,mass:54e6,color:n},{rx:943575,ry:-226257,vx:-919.778,vy:205690,mass:54e6,color:n},{rx:913438,ry:-10742.4,vx:-288.179,vy:206554,mass:54e6,color:n},{rx:1327770,ry:-248294,vx:-501.497,vy:204909,mass:54e6,color:n},{rx:485953,ry:68511.7,vx:135.49,vy:206590,mass:54e6,color:n},{rx:1051200,ry:368606,vx:884.514,vy:205428,mass:54e6,color:n},{rx:929798,ry:-109099,vx:-909.852,vy:205816,mass:54e6,color:n},{rx:1105890,ry:-163453,vx:-657.537,vy:205037,mass:54e6,color:n},{rx:949945,ry:-1787.17,vx:-379.548,vy:204843,mass:54e6,color:n},{rx:967678,ry:258665,vx:916.617,vy:205604,mass:54e6,color:n},{rx:1132570,ry:-286575,vx:-770.861,vy:205179,mass:54e6,color:n},{rx:674037,ry:-46270.7,vx:-154.28,vy:206587,mass:54e6,color:n},{rx:536201,ry:44048.9,vx:98.3054,vy:206595,mass:54e6,color:n},{rx:1234760,ry:315907,vx:678.931,vy:205060,mass:54e6,color:n},{rx:867398,ry:237099,vx:873.103,vy:205970,mass:54e6,color:n},{rx:1220380,ry:-377570,vx:-744.1,vy:205140,mass:54e6,color:n},{rx:1219170,ry:181874,vx:509.768,vy:204915,mass:54e6,color:n},{rx:659427,ry:359661,vx:719.394,vy:206254,mass:54e6,color:n},{rx:924892,ry:-19928.8,vx:-631.468,vy:206349,mass:54e6,color:n},{rx:956577,ry:-23873.2,vx:-840.992,vy:205308,mass:54e6,color:n},{rx:842208,ry:136440,vx:732.081,vy:206237,mass:54e6,color:n},{rx:915931,ry:289773,vx:914.918,vy:205775,mass:54e6,color:n},{rx:1105040,ry:-52855,vx:-290.091,vy:204808,mass:54e6,color:n},{rx:1088910,ry:405576,vx:867.547,vy:205375,mass:54e6,color:n},{rx:801126,ry:-286139,vx:-820.641,vy:206096,mass:54e6,color:n},{rx:572223,ry:3445.21,vx:8.47797,vy:206600,mass:54e6,color:n},{rx:977721,ry:125205,vx:891.659,vy:205455,mass:54e6,color:n},{rx:1034380,ry:-185786,vx:-830.638,vy:205285,mass:54e6,color:n},{rx:1275830,ry:-153460,vx:-388.031,vy:204846,mass:54e6,color:n},{rx:1001900,ry:108698,vx:817.988,vy:205260,mass:54e6,color:n},{rx:1073810,ry:53339.4,vx:354.273,vy:204832,mass:54e6,color:n},{rx:826614,ry:-49120.6,vx:-349.992,vy:206531,mass:54e6,color:n},{rx:1054180,ry:-168880,vx:-774.538,vy:205184,mass:54e6,color:n},{rx:855862,ry:433356,vx:900.556,vy:205868,mass:54e6,color:n},{rx:1167620,ry:189166,vx:597.171,vy:204981,mass:54e6,color:n},{rx:883646,ry:-12028,vx:-174.222,vy:206584,mass:54e6,color:n},{rx:900423,ry:-111281,vx:-851.205,vy:206029,mass:54e6,color:n},{rx:1058550,ry:-108344,vx:-637.914,vy:205018,mass:54e6,color:n},{rx:1227010,ry:146344,vx:424.864,vy:204865,mass:54e6,color:n},{rx:946976,ry:21307.1,vx:918.867,vy:205638,mass:54e6,color:n},{rx:1147450,ry:346322,vx:795.098,vy:205218,mass:54e6,color:n},{rx:1319910,ry:-63682.8,vx:-154.438,vy:204774,mass:54e6,color:n},{rx:1010360,ry:-108845,vx:-791.774,vy:205212,mass:54e6,color:n},{rx:967714,ry:-171262,vx:-912.526,vy:205565,mass:54e6,color:n},{rx:809126,ry:63683.5,vx:388.026,vy:206514,mass:54e6,color:n},{rx:942656,ry:290585,vx:919.77,vy:205691,mass:54e6,color:n},{rx:524150,ry:-178186,vx:-357.911,vy:206528,mass:54e6,color:n},{rx:1189800,ry:207897,vx:596.84,vy:204981,mass:54e6,color:n},{rx:741771,ry:-390035,vx:-814.88,vy:206107,mass:54e6,color:n},{rx:946810,ry:-85.0025,vx:-95.9596,vy:204766,mass:54e6,color:n},{rx:793678,ry:130212,vx:597.693,vy:206380,mass:54e6,color:n},{rx:792775,ry:397237,vx:858.2,vy:206011,mass:54e6,color:n},{rx:1005160,ry:-311601,vx:-903.686,vy:205509,mass:54e6,color:n},{rx:981027,ry:-339591,vx:-914.977,vy:205586,mass:54e6,color:n},{rx:947739,ry:350763,vx:919.82,vy:205676,mass:54e6,color:n},{rx:1044480,ry:21558.7,vx:196.707,vy:204782,mass:54e6,color:n},{rx:1305980,ry:-285331,vx:-571.372,vy:204960,mass:54e6,color:n},{rx:1331160,ry:-45880.9,vx:-108.802,vy:204767,mass:54e6,color:n},{rx:1012920,ry:-30440.9,vx:-380.878,vy:204843,mass:54e6,color:n},{rx:834594,ry:-287227,vx:-857.582,vy:206013,mass:54e6,color:n},{rx:1375370,ry:-156671,vx:-315.301,vy:204816,mass:54e6,color:n},{rx:1185200,ry:130711,vx:441.087,vy:204873,mass:54e6,color:n},{rx:718624,ry:109824,vx:400.061,vy:206509,mass:54e6,color:n},{rx:957308,ry:217440,vx:918.589,vy:205633,mass:54e6,color:n},{rx:505943,ry:88305.2,vx:180.973,vy:206582,mass:54e6,color:n},{rx:1285820,ry:220189,vx:500.192,vy:204908,mass:54e6,color:n},{rx:1146070,ry:138973,vx:524.753,vy:204925,mass:54e6,color:n},{rx:872422,ry:255695,vx:883.961,vy:205935,mass:54e6,color:n},{rx:874811,ry:439063,vx:907.973,vy:205828,mass:54e6,color:n},{rx:1105320,ry:-24255.2,vx:-138.445,vy:204771,mass:54e6,color:n},{rx:904649,ry:136352,vx:880.244,vy:205947,mass:54e6,color:n},{rx:1069270,ry:323129,vx:859.414,vy:205353,mass:54e6,color:n},{rx:1004130,ry:-244715,vx:-894.925,vy:205468,mass:54e6,color:n},{rx:890797,ry:-159899,vx:-869.474,vy:205981,mass:54e6,color:n},{rx:767648,ry:61586.3,vx:300.23,vy:206550,mass:54e6,color:n},{rx:1065380,ry:93310.5,vx:566.469,vy:204956,mass:54e6,color:n},{rx:1094970,ry:121539,vx:581.481,vy:204968,mass:54e6,color:n},{rx:1022990,ry:110150,vx:753.92,vy:205153,mass:54e6,color:n},{rx:802671,ry:-370106,vx:-857.756,vy:206013,mass:54e6,color:n},{rx:705941,ry:190600,vx:571.961,vy:206401,mass:54e6,color:n},{rx:1000440,ry:80120,vx:760.795,vy:205163,mass:54e6,color:n},{rx:764206,ry:302968,vx:788.733,vy:206154,mass:54e6,color:n},{rx:717710,ry:-215447,vx:-631.33,vy:206349,mass:54e6,color:n},{rx:913134,ry:-177023,vx:-904.376,vy:205848,mass:54e6,color:n},{rx:713396,ry:194179,vx:589.474,vy:206387,mass:54e6,color:n},{rx:919589,ry:33905.3,vx:725.655,vy:206246,mass:54e6,color:n},{rx:923138,ry:-336137,vx:-917.711,vy:205743,mass:54e6,color:n},{rx:875832,ry:-233657,vx:-880.964,vy:205945,mass:54e6,color:n},{rx:960199,ry:116.747,vx:7.56291,vy:204761,mass:54e6,color:n},{rx:1074240,ry:374951,vx:870.334,vy:205383,mass:54e6,color:n},{rx:597746,ry:-317058,vx:-619.241,vy:206361,mass:54e6,color:n},{rx:1293240,ry:163764,vx:392.358,vy:204848,mass:54e6,color:n},{rx:682042,ry:-150716,vx:-456.096,vy:206479,mass:54e6,color:n},{rx:913279,ry:40892.3,vx:718.207,vy:206255,mass:54e6,color:n},{rx:1024720,ry:-42963.1,vx:-440.666,vy:204873,mass:54e6,color:n},{rx:659645,ry:-217709,vx:-556.703,vy:206413,mass:54e6,color:n},{rx:761402,ry:-173023,vx:-629.038,vy:206352,mass:54e6,color:n},{rx:921165,ry:-112515,vx:-898.21,vy:205879,mass:54e6,color:n},{rx:946702,ry:-16709.9,vx:-919.02,vy:205642,mass:54e6,color:n},{rx:806480,ry:162858,vx:698.541,vy:206279,mass:54e6,color:n},{rx:691481,ry:264875,vx:663.256,vy:206318,mass:54e6,color:n},{rx:939700,ry:23130.1,vx:887.504,vy:205922,mass:54e6,color:n},{rx:1259740,ry:74855.8,vx:213.471,vy:204786,mass:54e6,color:n},{rx:1357070,ry:-162740,vx:-338.585,vy:204825,mass:54e6,color:n},{rx:1048340,ry:-36477.7,vx:-308.827,vy:204814,mass:54e6,color:n},{rx:958429,ry:-225642,vx:-918.439,vy:205630,mass:54e6,color:n},{rx:973328,ry:-117188,vx:-895.796,vy:205472,mass:54e6,color:n},{rx:960065,ry:-422338,vx:-919.321,vy:205650,mass:54e6,color:n},{rx:857694,ry:-105135,vx:-704.344,vy:206272,mass:54e6,color:n},{rx:1083720,ry:-252450,vx:-807.494,vy:205240,mass:54e6,color:n},{rx:873893,ry:-49141.7,vx:-518.016,vy:206441,mass:54e6,color:n},{rx:716287,ry:-294036,vx:-724.852,vy:206247,mass:54e6,color:n},{rx:1025790,ry:-89646,vx:-687.084,vy:205069,mass:54e6,color:n},{rx:1047670,ry:-55333.5,vx:-439.714,vy:204873,mass:54e6,color:n},{rx:923656,ry:-34955,vx:-775.023,vy:206176,mass:54e6,color:n},{rx:961188,ry:358783,vx:919.008,vy:205642,mass:54e6,color:n},{rx:958256,ry:100019,vx:913.002,vy:205569,mass:54e6,color:n},{rx:865597,ry:-244715,vx:-873.872,vy:205968,mass:54e6,color:n},{rx:1033410,ry:58948.2,vx:514.285,vy:204918,mass:54e6,color:n},{rx:1325630,ry:-202224,vx:-432.449,vy:204869,mass:54e6,color:n},{rx:665465,ry:-126429,vx:-377.934,vy:206519,mass:54e6,color:n},{rx:780966,ry:112827,vx:519.128,vy:206440,mass:54e6,color:n},{rx:567551,ry:82316.4,vx:195.501,vy:206579,mass:54e6,color:n},{rx:885644,ry:386450,vx:908.814,vy:205822,mass:54e6,color:n},{rx:1008880,ry:4490.19,vx:65.5164,vy:204763,mass:54e6,color:n},{rx:1249840,ry:135254,vx:374.076,vy:204840,mass:54e6,color:n},{rx:900236,ry:-377133,vx:-913.133,vy:205791,mass:54e6,color:n},{rx:773800,ry:101873,vx:468.348,vy:206472,mass:54e6,color:n},{rx:627803,ry:179167,vx:451.304,vy:206482,mass:54e6,color:n},{rx:1058270,ry:5631.87,vx:46.0833,vy:204762,mass:54e6,color:n},{rx:1281240,ry:58079.9,vx:157.019,vy:204774,mass:54e6,color:n},{rx:765318,ry:-109157,vx:-475.643,vy:206468,mass:54e6,color:n},{rx:893497,ry:-159158,vx:-873.529,vy:205969,mass:54e6,color:n},{rx:946854,ry:219579,vx:919.824,vy:205677,mass:54e6,color:n},{rx:1354980,ry:18440.2,vx:41.431,vy:204762,mass:54e6,color:n},{rx:1011830,ry:-108071,vx:-785.573,vy:205202,mass:54e6,color:n},{rx:1056430,ry:-97461,vx:-608.668,vy:204991,mass:54e6,color:n},{rx:928673,ry:-58603.4,vx:-882.082,vy:205941,mass:54e6,color:n},{rx:685122,ry:-361362,vx:-745.791,vy:206219,mass:54e6,color:n},{rx:978324,ry:-368560,vx:-916.314,vy:205600,mass:54e6,color:n},{rx:1384510,ry:-30945.6,vx:-64.7512,vy:204763,mass:54e6,color:n},{rx:929799,ry:66705.5,vx:893.847,vy:205898,mass:54e6,color:n},{rx:957194,ry:-350937,vx:-919.363,vy:205651,mass:54e6,color:n},{rx:728474,ry:-123738,vx:-454.805,vy:206480,mass:54e6,color:n},{rx:1164770,ry:-22699,vx:-94.9289,vy:204766,mass:54e6,color:n},{rx:779861,ry:343682,vx:828.144,vy:206081,mass:54e6,color:n},{rx:640194,ry:-81960,vx:-238.123,vy:206569,mass:54e6,color:n},{rx:1120530,ry:24261.6,vx:126.65,vy:204769,mass:54e6,color:n},{rx:911569,ry:9391.36,vx:242.048,vy:206568,mass:54e6,color:n},{rx:1199240,ry:-306075,vx:-708.7,vy:205094,mass:54e6,color:n},{rx:997731,ry:22856.4,vx:371.744,vy:204839,mass:54e6,color:n},{rx:1001530,ry:-153776,vx:-865.159,vy:205368,mass:54e6,color:n},{rx:985797,ry:-339797,vx:-913.586,vy:205573,mass:54e6,color:n},{rx:1148400,ry:-427292,vx:-831.29,vy:205287,mass:54e6,color:n},{rx:941818,ry:3889.82,vx:626.503,vy:206354,mass:54e6,color:n},{rx:886931,ry:-230260,vx:-890.981,vy:205909,mass:54e6,color:n},{rx:958984,ry:-220026,vx:-918.234,vy:205626,mass:54e6,color:n},{rx:1037370,ry:25972.6,vx:251.507,vy:204796,mass:54e6,color:n},{rx:945146,ry:-960.983,vx:-687.62,vy:206291,mass:54e6,color:n},{rx:536741,ry:67981.6,vx:150.727,vy:206588,mass:54e6,color:n},{rx:717912,ry:296220,vx:728.81,vy:206242,mass:54e6,color:n},{rx:853303,ry:-161437,vx:-797.682,vy:206138,mass:54e6,color:n},{rx:871844,ry:-27018.8,vx:-314.891,vy:206545,mass:54e6,color:n},{rx:1357070,ry:102324,vx:222.188,vy:204788,mass:54e6,color:n},{rx:602271,ry:-253221,vx:-545.568,vy:206421,mass:54e6,color:n},{rx:662775,ry:133068,vx:391.144,vy:206513,mass:54e6,color:n},{rx:1033920,ry:4109.65,vx:42.9509,vy:204762,mass:54e6,color:n},{rx:1262340,ry:-241634,vx:-558.354,vy:204949,mass:54e6,color:n},{rx:1007940,ry:-10399,vx:-152.306,vy:204773,mass:54e6,color:n},{rx:989804,ry:-117553,vx:-861.933,vy:205359,mass:54e6,color:n},{rx:802416,ry:-53503,vx:-321.179,vy:206542,mass:54e6,color:n},{rx:843817,ry:-19666.1,vx:-173.841,vy:206584,mass:54e6,color:n},{rx:1355210,ry:14738.9,vx:33.1094,vy:204761,mass:54e6,color:n},{rx:1196850,ry:134066,vx:433.565,vy:204869,mass:54e6,color:n},{rx:947278,ry:343503,vx:919.824,vy:205677,mass:54e6,color:n},{rx:957025,ry:54887.9,vx:901.819,vy:205499,mass:54e6,color:n},{rx:663966,ry:-130207,vx:-385.553,vy:206516,mass:54e6,color:n},{rx:930943,ry:-142431,vx:-914.734,vy:205777,mass:54e6,color:n},{rx:1330790,ry:78593.2,vx:184.074,vy:204779,mass:54e6,color:n},{rx:786424,ry:-401231,vx:-854.713,vy:206020,mass:54e6,color:n},{rx:811675,ry:161314,vx:706.857,vy:206269,mass:54e6,color:n},{rx:1148760,ry:-401303,vx:-820.989,vy:205266,mass:54e6,color:n},{rx:512539,ry:-35053.7,vx:-74.144,vy:206597,mass:54e6,color:n},{rx:601202,ry:263160,vx:558.069,vy:206412,mass:54e6,color:n},{rx:939781,ry:3317.9,vx:432.977,vy:206492,mass:54e6,color:n},{rx:977727,ry:47370.2,vx:764.249,vy:205169,mass:54e6,color:n},{rx:996324,ry:486.306,vx:8.88833,vy:204761,mass:54e6,color:n},{rx:630365,ry:225373,vx:534.515,vy:206429,mass:54e6,color:n},{rx:945798,ry:-67209.4,vx:-919.827,vy:205683,mass:54e6,color:n},{rx:625047,ry:137594,vx:362.434,vy:206526,mass:54e6,color:n},{rx:1078510,ry:17773,vx:122.274,vy:204769,mass:54e6,color:n},{rx:949990,ry:4734.08,vx:703.358,vy:205088,mass:54e6,color:n},{rx:938056,ry:17930.9,vx:840.992,vy:206053,mass:54e6,color:n},{rx:991909,ry:-453644,vx:-915.157,vy:205588,mass:54e6,color:n},{rx:903477,ry:-384034,vx:-914.243,vy:205782,mass:54e6,color:n},{rx:877097,ry:-20122.3,vx:-257.853,vy:206563,mass:54e6,color:n},{rx:975591,ry:14410.3,vx:402.722,vy:204853,mass:54e6,color:n},{rx:975417,ry:24143.3,vx:583.551,vy:204969,mass:54e6,color:n},{rx:963948,ry:-4419.84,vx:-219.944,vy:204787,mass:54e6,color:n},{rx:829e3,ry:232399,vx:821.587,vy:206094,mass:54e6,color:n},{rx:910487,ry:-384565,vx:-915.934,vy:205765,mass:54e6,color:n},{rx:904758,ry:-29141.9,vx:-530.818,vy:206432,mass:54e6,color:n},{rx:1003620,ry:-371666,vx:-908.972,vy:205540,mass:54e6,color:n},{rx:881998,ry:103094,vx:781.481,vy:206166,mass:54e6,color:n},{rx:943606,ry:840.593,vx:304.736,vy:206548,mass:54e6,color:n},{rx:969568,ry:-46445.3,vx:-820.269,vy:205264,mass:54e6,color:n},{rx:1012560,ry:-279163,vx:-894.752,vy:205467,mass:54e6,color:n},{rx:612976,ry:271152,vx:580.774,vy:206394,mass:54e6,color:n},{rx:610968,ry:-229916,vx:-520.467,vy:206439,mass:54e6,color:n},{rx:738804,ry:11971.9,vx:53.0599,vy:206599,mass:54e6,color:n},{rx:887036,ry:-86845.4,vx:-761.001,vy:206197,mass:54e6,color:n},{rx:1214340,ry:-201406,vx:-552.163,vy:204945,mass:54e6,color:n},{rx:627713,ry:240712,vx:554.84,vy:206414,mass:54e6,color:n},{rx:1106220,ry:38926,vx:217.154,vy:204787,mass:54e6,color:n},{rx:692123,ry:117823,vx:387.218,vy:206515,mass:54e6,color:n},{rx:966747,ry:61806.3,vx:872.011,vy:205388,mass:54e6,color:n},{rx:1392640,ry:46044.9,vx:94.3266,vy:204765,mass:54e6,color:n},{rx:1159480,ry:280796,vx:732.245,vy:205124,mass:54e6,color:n},{rx:921043,ry:-262545,vx:-915.703,vy:205767,mass:54e6,color:n},{rx:844333,ry:-15760.9,vx:-140.913,vy:206589,mass:54e6,color:n},{rx:736899,ry:380518,vx:806.135,vy:206123,mass:54e6,color:n},{rx:947236,ry:8610.95,vx:910.498,vy:205550,mass:54e6,color:n},{rx:1279180,ry:-163839,vx:-405.9,vy:204855,mass:54e6,color:n},{rx:1085930,ry:-168777,vx:-708.12,vy:205093,mass:54e6,color:n},{rx:918962,ry:-25983.6,vx:-637.355,vy:206344,mass:54e6,color:n},{rx:927294,ry:83118.3,vx:897.385,vy:205882,mass:54e6,color:n},{rx:889173,ry:-339826,vx:-907.234,vy:205832,mass:54e6,color:n},{rx:1033190,ry:388953,vx:897.556,vy:205479,mass:54e6,color:n},{rx:1030140,ry:-322011,vx:-889.949,vy:205448,mass:54e6,color:n},{rx:1029080,ry:-367865,vx:-897.236,vy:205478,mass:54e6,color:n},{rx:1242330,ry:-102582,vx:-300.908,vy:204811,mass:54e6,color:n},{rx:1101840,ry:54195.4,vx:302.134,vy:204812,mass:54e6,color:n},{rx:957497,ry:-10601.4,vx:-623.543,vy:205004,mass:54e6,color:n},{rx:784752,ry:118966,vx:546.094,vy:206421,mass:54e6,color:n},{rx:926476,ry:24993.2,vx:724.87,vy:206247,mass:54e6,color:n},{rx:960248,ry:-11924.8,vx:-590.371,vy:204975,mass:54e6,color:n},{rx:1135050,ry:9468.09,vx:46.0102,vy:204762,mass:54e6,color:n},{rx:958907,ry:-242808,vx:-918.534,vy:205632,mass:54e6,color:n},{rx:917713,ry:-421218,vx:-917.764,vy:205742,mass:54e6,color:n},{rx:858948,ry:285944,vx:879.956,vy:205948,mass:54e6,color:n},{rx:990813,ry:-4754.36,vx:-97.0425,vy:204766,mass:54e6,color:n},{rx:930489,ry:-11606.9,vx:-551.089,vy:206417,mass:54e6,color:n},{rx:909568,ry:-236705,vx:-909.126,vy:205820,mass:54e6,color:n},{rx:948389,ry:-3485.69,vx:-758.737,vy:205160,mass:54e6,color:n},{rx:1016150,ry:415831,vx:907.015,vy:205527,mass:54e6,color:n},{rx:1069610,ry:-54073.8,vx:-368.657,vy:204838,mass:54e6,color:n},{rx:1105900,ry:-13846.8,vx:-79.3567,vy:204764,mass:54e6,color:n},{rx:916631,ry:-102607,vx:-884.32,vy:205934,mass:54e6,color:n},{rx:937845,ry:-183761,vx:-918.927,vy:205721,mass:54e6,color:n},{rx:1162030,ry:122364,vx:453.343,vy:204880,mass:54e6,color:n},{rx:1001840,ry:-243167,vx:-896.501,vy:205475,mass:54e6,color:n},{rx:1327270,ry:-157335,vx:-350.874,vy:204830,mass:54e6,color:n},{rx:851236,ry:260494,vx:864.41,vy:205995,mass:54e6,color:n},{rx:993914,ry:-276725,vx:-906.345,vy:205524,mass:54e6,color:n},{rx:980786,ry:15261.5,vx:369.552,vy:204838,mass:54e6,color:n},{rx:850195,ry:-407190,vx:-895.381,vy:205891,mass:54e6,color:n},{rx:1100070,ry:48939.8,vx:278.475,vy:204804,mass:54e6,color:n},{rx:788801,ry:-197131,vx:-719.165,vy:206254,mass:54e6,color:n},{rx:774774,ry:-1261.57,vx:-6.777,vy:206600,mass:54e6,color:n},{rx:1018200,ry:-12784.9,vx:-160.384,vy:204775,mass:54e6,color:n},{rx:1123520,ry:242086,vx:741.774,vy:205137,mass:54e6,color:n},{rx:852241,ry:-370789,vx:-891.763,vy:205906,mass:54e6,color:n},{rx:1011140,ry:430348,vx:909.471,vy:205543,mass:54e6,color:n},{rx:911365,ry:251826,vx:911.252,vy:205806,mass:54e6,color:n},{rx:745341,ry:310828,vx:772.79,vy:206179,mass:54e6,color:n},{rx:1175970,ry:-309876,vx:-738.648,vy:205132,mass:54e6,color:n},{rx:1171910,ry:387107,vx:794.447,vy:205217,mass:54e6,color:n},{rx:967745,ry:-39118.5,vx:-803.971,vy:205234,mass:54e6,color:n},{rx:937297,ry:10429.1,vx:706.245,vy:206270,mass:54e6,color:n},{rx:951347,ry:305536,vx:919.69,vy:205664,mass:54e6,color:n},{rx:1155410,ry:376964,vx:804.093,vy:205234,mass:54e6,color:n},{rx:1268770,ry:43660.9,vx:123.303,vy:204769,mass:54e6,color:n},{rx:891872,ry:-55031.7,vx:-655.782,vy:206325,mass:54e6,color:n},{rx:917180,ry:156190,vx:904.561,vy:205847,mass:54e6,color:n},{rx:898306,ry:44345,vx:626.338,vy:206354,mass:54e6,color:n},{rx:994475,ry:-112012,vx:-844.17,vy:205315,mass:54e6,color:n},{rx:940683,ry:-35575.5,vx:-909.728,vy:205816,mass:54e6,color:n},{rx:912451,ry:6883.58,vx:184.881,vy:206581,mass:54e6,color:n},{rx:773805,ry:-51010.4,vx:-261.265,vy:206562,mass:54e6,color:n},{rx:1111390,ry:-73231.3,vx:-372.408,vy:204839,mass:54e6,color:n},{rx:752089,ry:-33284.4,vx:-155.611,vy:206587,mass:54e6,color:n},{rx:926252,ry:31462.1,vx:779.077,vy:206169,mass:54e6,color:n},{rx:1063250,ry:292072,vx:853.621,vy:205338,mass:54e6,color:n},{rx:838173,ry:-450742,vx:-894.59,vy:205894,mass:54e6,color:n},{rx:1296920,ry:-69558.1,vx:-178.844,vy:204778,mass:54e6,color:n},{rx:906233,ry:57518.5,vx:756.609,vy:206204,mass:54e6,color:n},{rx:1229380,ry:-348405,vx:-713.595,vy:205100,mass:54e6,color:n},{rx:1046330,ry:-49455.6,vx:-406.697,vy:204855,mass:54e6,color:n},{rx:1242920,ry:-325792,vx:-679.846,vy:205061,mass:54e6,color:n},{rx:949819,ry:25692.7,vx:909.835,vy:205545,mass:54e6,color:n},{rx:1066340,ry:-121006,vx:-652.205,vy:205032,mass:54e6,color:n},{rx:992462,ry:28398.2,vx:479.707,vy:204896,mass:54e6,color:n},{rx:897381,ry:209792,vx:896.083,vy:205888,mass:54e6,color:n},{rx:815235,ry:68337.3,vx:426.03,vy:206496,mass:54e6,color:n},{rx:939532,ry:36607,vx:905.803,vy:205840,mass:54e6,color:n},{rx:964427,ry:-5251.74,vx:-252.118,vy:204796,mass:54e6,color:n},{rx:923702,ry:79196.6,vx:885.406,vy:205930,mass:54e6,color:n},{rx:498199,ry:144284,vx:282.093,vy:206556,mass:54e6,color:n},{rx:996268,ry:-28944.4,vx:-458.991,vy:204883,mass:54e6,color:n},{rx:872676,ry:278666,vx:889.552,vy:205914,mass:54e6,color:n},{rx:1065900,ry:245504,vx:826.531,vy:205277,mass:54e6,color:n},{rx:810894,ry:255216,vx:812.947,vy:206111,mass:54e6,color:n},{rx:1131460,ry:-210356,vx:-689.967,vy:205072,mass:54e6,color:n},{rx:1126220,ry:85331.1,vx:393.633,vy:204849,mass:54e6,color:n},{rx:769075,ry:86481.3,vx:403.942,vy:206507,mass:54e6,color:n},{rx:838801,ry:22089.3,vx:185.639,vy:206581,mass:54e6,color:n},{rx:893785,ry:-43354.1,vx:-587.592,vy:206388,mass:54e6,color:n},{rx:888309,ry:-171991,vx:-872.078,vy:205973,mass:54e6,color:n},{rx:1186620,ry:84447.3,vx:304.603,vy:204812,mass:54e6,color:n},{rx:839289,ry:-135018,vx:-721.653,vy:206251,mass:54e6,color:n},{rx:857160,ry:-331838,vx:-888.539,vy:205918,mass:54e6,color:n},{rx:980215,ry:-10713.5,vx:-274.856,vy:204803,mass:54e6,color:n},{rx:996139,ry:19548.3,vx:334.126,vy:204823,mass:54e6,color:n},{rx:1058600,ry:-68964.4,vx:-480.423,vy:204896,mass:54e6,color:n},{rx:1172420,ry:-354433,vx:-775.165,vy:205185,mass:54e6,color:n},{rx:936861,ry:-15573.2,vx:-793.314,vy:206146,mass:54e6,color:n},{rx:1150040,ry:222028,vx:677.272,vy:205058,mass:54e6,color:n},{rx:693317,ry:-266435,vx:-667.415,vy:206313,mass:54e6,color:n},{rx:869833,ry:15754.4,vx:186.315,vy:206581,mass:54e6,color:n},{rx:918655,ry:15637.3,vx:456.615,vy:206479,mass:54e6,color:n},{rx:1075890,ry:-136988,vx:-667.487,vy:205048,mass:54e6,color:n},{rx:1198390,ry:-129951,vx:-421.073,vy:204863,mass:54e6,color:n},{rx:790504,ry:-21628.8,vx:-126.724,vy:206591,mass:54e6,color:n},{rx:839882,ry:-397909,vx:-888.768,vy:205917,mass:54e6,color:n},{rx:1052200,ry:95643.9,vx:615.548,vy:204997,mass:54e6,color:n},{rx:861612,ry:459413,vx:904.695,vy:205847,mass:54e6,color:n},{rx:1078960,ry:-246735,vx:-809.738,vy:205244,mass:54e6,color:n},{rx:681748,ry:190802,vx:538.466,vy:206426,mass:54e6,color:n},{rx:977558,ry:94247.3,vx:872.232,vy:205388,mass:54e6,color:n},{rx:973220,ry:13376.8,vx:405.692,vy:204855,mass:54e6,color:n},{rx:1093350,ry:418181,vx:867.549,vy:205375,mass:54e6,color:n},{rx:664784,ry:184540,vx:504.656,vy:206449,mass:54e6,color:n},{rx:998486,ry:91425.8,vx:797.723,vy:205222,mass:54e6,color:n},{rx:948781,ry:30453,vx:916.018,vy:205597,mass:54e6,color:n},{rx:866245,ry:85239.9,vx:671.669,vy:206309,mass:54e6,color:n},{rx:1100690,ry:-109821,vx:-532.488,vy:204930,mass:54e6,color:n},{rx:824211,ry:227323,vx:810.799,vy:206115,mass:54e6,color:n},{rx:738636,ry:192990,vx:626.662,vy:206354,mass:54e6,color:n},{rx:843478,ry:415976,vx:893.106,vy:205901,mass:54e6,color:n},{rx:911673,ry:-7006.75,vx:-183.959,vy:206582,mass:54e6,color:n},{rx:698906,ry:-321607,vx:-729.404,vy:206241,mass:54e6,color:n},{rx:1142480,ry:63276.4,vx:281.964,vy:204805,mass:54e6,color:n},{rx:710389,ry:393543,vx:789.203,vy:206153,mass:54e6,color:n},{rx:816295,ry:78398.9,vx:475.816,vy:206468,mass:54e6,color:n},{rx:1021810,ry:-146057,vx:-816.402,vy:205257,mass:54e6,color:n},{rx:1183230,ry:-84685.5,vx:-309.246,vy:204814,mass:54e6,color:n},{rx:868365,ry:-13475.1,vx:-157.304,vy:206587,mass:54e6,color:n},{rx:991732,ry:-38473.9,vx:-592.161,vy:204977,mass:54e6,color:n},{rx:1161060,ry:321723,vx:764.711,vy:205169,mass:54e6,color:n},{rx:917195,ry:123588,vx:895.82,vy:205889,mass:54e6,color:n},{rx:1003990,ry:-113654,vx:-819.328,vy:205262,mass:54e6,color:n},{rx:794151,ry:340782,vx:840.195,vy:206055,mass:54e6,color:n},{rx:741988,ry:137628,vx:514.416,vy:206443,mass:54e6,color:n},{rx:912658,ry:-49872,vx:-764.683,vy:206192,mass:54e6,color:n},{rx:1240120,ry:40233.4,vx:124.665,vy:204769,mass:54e6,color:n},{rx:587411,ry:287438,vx:575.305,vy:206398,mass:54e6,color:n},{rx:748184,ry:227390,vx:693.98,vy:206284,mass:54e6,color:n},{rx:1077110,ry:-15987.1,vx:-111.339,vy:204767,mass:54e6,color:n},{rx:1257930,ry:-278685,vx:-612.834,vy:204994,mass:54e6,color:n},{rx:947364,ry:-237287,vx:-919.816,vy:205675,mass:54e6,color:n},{rx:1071570,ry:-236124,vx:-812.126,vy:205249,mass:54e6,color:n},{rx:567458,ry:-25398.3,vx:-61.5777,vy:206598,mass:54e6,color:n},{rx:862058,ry:446.659,vx:4.8944,vy:206600,mass:54e6,color:n},{rx:1172570,ry:-273701,vx:-708.553,vy:205094,mass:54e6,color:n},{rx:1101260,ry:116990,vx:553.538,vy:204946,mass:54e6,color:n},{rx:1164960,ry:-89062,vx:-346.575,vy:204828,mass:54e6,color:n},{rx:1109620,ry:13787.8,vx:77.2373,vy:204764,mass:54e6,color:n},{rx:624961,ry:90612.9,vx:249.86,vy:206566,mass:54e6,color:n},{rx:855795,ry:143627,vx:778.946,vy:206170,mass:54e6,color:n},{rx:1203720,ry:46228.7,vx:162.403,vy:204775,mass:54e6,color:n},{rx:1069890,ry:428167,vx:883.584,vy:205425,mass:54e6,color:n},{rx:974635,ry:4720.37,vx:149.609,vy:204773,mass:54e6,color:n},{rx:905501,ry:387387,vx:914.845,vy:205776,mass:54e6,color:n},{rx:776336,ry:144625,vx:596.711,vy:206380,mass:54e6,color:n},{rx:921886,ry:-14222.9,vx:-467.306,vy:206473,mass:54e6,color:n},{rx:1331370,ry:239309,vx:485.252,vy:204899,mass:54e6,color:n},{rx:1107550,ry:202379,vx:718.88,vy:205107,mass:54e6,color:n},{rx:943979,ry:27821.6,vx:917.413,vy:205747,mass:54e6,color:n},{rx:1082050,ry:-34005.4,vx:-223.044,vy:204788,mass:54e6,color:n},{rx:928605,ry:86722.7,vx:901.867,vy:205861,mass:54e6,color:n},{rx:968632,ry:-1983.12,vx:-80.2927,vy:204764,mass:54e6,color:n},{rx:764983,ry:28739,vx:144.23,vy:206589,mass:54e6,color:n},{rx:859689,ry:-148828,vx:-795.705,vy:206142,mass:54e6,color:n},{rx:489731,ry:-19263.8,vx:-38.8009,vy:206599,mass:54e6,color:n},{rx:914257,ry:21677.8,vx:518.745,vy:206440,mass:54e6,color:n},{rx:1328760,ry:-259599,vx:-516.304,vy:204919,mass:54e6,color:n},{rx:990384,ry:-40203.7,vx:-617.525,vy:204999,mass:54e6,color:n},{rx:743420,ry:-232337,vx:-693.3,vy:206285,mass:54e6,color:n},{rx:934541,ry:-7353.29,vx:-496.766,vy:206455,mass:54e6,color:n},{rx:1190310,ry:206233,vx:593.338,vy:204978,mass:54e6,color:n},{rx:949405,ry:-59137.1,vx:-918.31,vy:205628,mass:54e6,color:n},{rx:499488,ry:-96111.9,vx:-193.561,vy:206580,mass:54e6,color:n},{rx:895761,ry:166967,vx:880.822,vy:205945,mass:54e6,color:n},{rx:1391340,ry:6387.81,vx:13.1925,vy:204761,mass:54e6,color:n},{rx:919170,ry:401286,vx:917.782,vy:205742,mass:54e6,color:n},{rx:721799,ry:161529,vx:537.689,vy:206427,mass:54e6,color:n},{rx:1133260,ry:-238070,vx:-722.971,vy:205112,mass:54e6,color:n},{rx:821627,ry:-213474,vx:-794.779,vy:206143,mass:54e6,color:n},{rx:1084550,ry:-50972.1,vx:-317.587,vy:204817,mass:54e6,color:n},{rx:910258,ry:-88265.9,vx:-852.583,vy:206026,mass:54e6,color:n},{rx:706342,ry:-117809,vx:-405.785,vy:206506,mass:54e6,color:n},{rx:943779,ry:-348190,vx:-919.812,vy:205686,mass:54e6,color:n},{rx:1212750,ry:186529,vx:527.122,vy:204927,mass:54e6,color:n},{rx:1102120,ry:108008,vx:523.323,vy:204924,mass:54e6,color:n},{rx:1050650,ry:23688,vx:203.078,vy:204783,mass:54e6,color:n},{rx:1341e3,ry:11415.6,vx:26.5724,vy:204761,mass:54e6,color:n},{rx:982478,ry:-15112.6,vx:-352.059,vy:204831,mass:54e6,color:n},{rx:596443,ry:277742,vx:572.219,vy:206401,mass:54e6,color:n},{rx:1040690,ry:209643,vx:838.288,vy:205302,mass:54e6,color:n},{rx:1011550,ry:-50173.1,vx:-559.098,vy:204950,mass:54e6,color:n},{rx:1060930,ry:-305511,vx:-860.924,vy:205357,mass:54e6,color:n},{rx:1072560,ry:71538,vx:452.624,vy:204880,mass:54e6,color:n},{rx:950017,ry:8251.44,vx:827.05,vy:205278,mass:54e6,color:n},{rx:893169,ry:49877.2,vx:631.45,vy:206349,mass:54e6,color:n},{rx:559033,ry:-152935,vx:-338.085,vy:206536,mass:54e6,color:n},{rx:1111730,ry:223977,vx:739.424,vy:205133,mass:54e6,color:n},{rx:675678,ry:154209,vx:455.782,vy:206479,mass:54e6,color:n},{rx:946761,ry:76609,vx:919.785,vy:205671,mass:54e6,color:n},{rx:939606,ry:-3385.17,vx:-430.407,vy:206493,mass:54e6,color:n},{rx:902854,ry:28630.7,vx:508.588,vy:206447,mass:54e6,color:n},{rx:999513,ry:438105,vx:913.045,vy:205569,mass:54e6,color:n},{rx:707476,ry:-404463,vx:-792.316,vy:206148,mass:54e6,color:n},{rx:952125,ry:5140.52,vx:591.316,vy:204976,mass:54e6,color:n},{rx:1003e3,ry:139368,vx:851.376,vy:205332,mass:54e6,color:n},{rx:1331760,ry:260452,vx:514.705,vy:204918,mass:54e6,color:n},{rx:962997,ry:-213144,vx:-916.92,vy:205607,mass:54e6,color:n},{rx:1289440,ry:-301501,vx:-606.839,vy:204989,mass:54e6,color:n},{rx:643292,ry:264715,vx:605.513,vy:206373,mass:54e6,color:n},{rx:843292,ry:50958,vx:408.818,vy:206504,mass:54e6,color:n},{rx:886231,ry:23181.7,vx:332.617,vy:206538,mass:54e6,color:n},{rx:1019560,ry:113252,vx:771.403,vy:205179,mass:54e6,color:n},{rx:1262710,ry:229528,vx:539.774,vy:204936,mass:54e6,color:n},{rx:908051,ry:258415,vx:910.07,vy:205814,mass:54e6,color:n},{rx:931113,ry:-280615,vx:-918.539,vy:205729,mass:54e6,color:n},{rx:889679,ry:-117956,vx:-830.063,vy:206077,mass:54e6,color:n},{rx:662446,ry:217543,vx:559.9,vy:206410,mass:54e6,color:n},{rx:655899,ry:78851.2,vx:241.262,vy:206568,mass:54e6,color:n},{rx:793956,ry:79167,vx:424.805,vy:206496,mass:54e6,color:n},{rx:948621,ry:24639.9,vx:914.669,vy:205583,mass:54e6,color:n},{rx:1204180,ry:-136972,vx:-431.091,vy:204868,mass:54e6,color:n},{rx:976433,ry:1734.86,vx:52.3516,vy:204762,mass:54e6,color:n},{rx:756725,ry:-193478,vx:-657.521,vy:206324,mass:54e6,color:n},{rx:931525,ry:-70545.9,vx:-901.06,vy:205865,mass:54e6,color:n},{rx:945806,ry:145.592,vx:552.869,vy:206416,mass:54e6,color:n},{rx:1009850,ry:-28912.7,vx:-379.418,vy:204842,mass:54e6,color:n},{rx:943933,ry:-58368.8,vx:-919.255,vy:205713,mass:54e6,color:n},{rx:1107140,ry:-64851.4,vx:-343.427,vy:204827,mass:54e6,color:n},{rx:983646,ry:167395,vx:897.416,vy:205479,mass:54e6,color:n},{rx:827534,ry:-146077,vx:-714.425,vy:206260,mass:54e6,color:n}];t.a=o},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(e){if(u===setTimeout)return setTimeout(e,0);if((u===r||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(e){if(h===clearTimeout)return clearTimeout(e);if((h===n||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function s(){f&&p&&(f=!1,p.length?m=p.concat(m):v=-1,m.length&&a())}function a(){if(!f){var e=i(s);f=!0;for(var t=m.length;t;){for(p=m,m=[];++v<t;)p&&p[v].run();v=-1,t=m.length}p=null,f=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var u,h,d=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:r}catch(e){u=r}try{h="function"==typeof clearTimeout?clearTimeout:n}catch(e){h=n}}();var p,m=[],f=!1,v=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];m.push(new c(e,t)),1!==m.length||f||i(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,r){(function(e,t){!function(e,r){"use strict";function n(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return l[c]=n,a(c),c++}function i(e){delete l[e]}function o(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}function s(e){if(u)setTimeout(s,0,e);else{var t=l[e];if(t){u=!0;try{o(t)}finally{i(e),u=!1}}}}if(!e.setImmediate){var a,c=1,l={},u=!1,h=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){a=function(e){t.nextTick(function(){s(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&s(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),a=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){s(e.data)},a=function(t){e.port2.postMessage(t)}}():h&&"onreadystatechange"in h.createElement("script")?function(){var e=h.documentElement;a=function(t){var r=h.createElement("script");r.onreadystatechange=function(){s(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():function(){a=function(e){setTimeout(s,0,e)}}(),d.setImmediate=n,d.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,r(1),r(7))},function(e,t,r){(function(e){function n(e,t){this._id=e,this._clearFn=t}var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new n(o.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new n(o.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(8),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,r(1))},function(e,t,r){"use strict";function n(){for(var e=new s.a(0,0,c.d),t=new a.a(e),r=0;r<u.length;r++)u[r].in(e)&&t.insert(u[r]);for(var r=0;r<u.length;r++)u[r].resetForce(),t.updateForce(u[r]),u[r].update(c.e);for(var r=0;r<u.length;r++)u[r].render();window.requestAnimationFrame(n)}Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),o=(r.n(i),r(4)),s=r(5),a=r(3),c=r(0),l=r(6),u=function(){for(var e=[],t=0;t<l.a.length;t++){var r=l.a[t],n=document.createElement("a-sphere"),i=r.rx*c.a,s=r.ry*c.a,a=95e-5*r.vx,u=.0031*r.vy;n.setAttribute("color",r.color),n.setAttribute("radius",c.b),n.setAttribute("position",i+" "+s+" "+c.c);document.getElementById("galaxy-scene").appendChild(n);var h=new o.a(i,s,a,u,r.mass,r.color,n);e.push(h)}return e}();window.requestAnimationFrame(n)}]);